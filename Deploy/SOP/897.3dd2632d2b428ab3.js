(self.webpackChunkorp_front=self.webpackChunkorp_front||[]).push([[897],{897:(se,u,N)=>{"use strict";N.r(u),N.d(u,{ScreensModule:()=>K});var p=N(6814),x=N(4828),k=N(5879),U=N(9862);let q=(()=>{class B{constructor(H,G){this.http=H,this.router=G,this.API_URL="http://192.168.0.158:4000"}getScreenDetails(){return this.http.get(`${this.API_URL}/getAllScreens`)}getScreenDisplay(H){return this.http.get(`${this.API_URL}/getSOPDataByScreenId/${H}`)}getScreenTextData(H){return this.http.get(`${this.API_URL}/getAllTextData/${H}`)}static#e=this.\u0275fac=function(G){return new(G||B)(k.LFG(U.eN),k.LFG(x.F0))};static#t=this.\u0275prov=k.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})();var w=N(2939),s=N(2296),f=N(5195);function a(B,Y){if(1&B){const H=k.EpF();k.TgZ(0,"div",6)(1,"div",7)(2,"div",8),k._UZ(3,"img",9),k.TgZ(4,"button",10),k.NdJ("click",function(){const $=k.CHM(H).$implicit,ne=k.oxw();return k.KtG(ne.navigateToScreen($.ScreenID))}),k._uU(5),k.qZA()()()()}if(2&B){const H=Y.$implicit;k.xp6(5),k.Oqu(H.ScreenName)}}let l=(()=>{class B{constructor(H,G,ee){this.dashService=H,this.router=G,this.snackBar=ee,this.ScreenOptions=[]}ngOnInit(){this.ScreenList()}ScreenList(){this.dashService.getScreenDetails().subscribe(H=>{this.ScreenOptions=H.getSOPData},H=>{this.snackBar.open("Error occurred while fetching screen details","Dismiss",{duration:3e3})})}navigateToScreen(H){H?this.router.navigate(["/screens/display",H]):console.error("Screen ID is undefined")}static#e=this.\u0275fac=function(G){return new(G||B)(k.Y36(q),k.Y36(x.F0),k.Y36(w.ux))};static#t=this.\u0275cmp=k.Xpm({type:B,selectors:[["app-screen-overview"]],decls:7,vars:1,consts:[[1,"content"],[1,"container-fluid"],[1,"row","py-2","mt-4","m-1"],[1,"main-card"],[1,"row","mt-3"],["class","col-md-3 col-sm-12 mb-2",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-12","mb-2"],[1,"card","sub-card"],[1,"card-body","d-flex","flex-column","align-items-center","justify-content-center"],["src","../../../assets/img/Computer-Screen-Transparent.png","alt","Logo",1,"mb-3",2,"height","100px"],["mat-raised-button","",2,"background-color","#000","color","white","border-radius","10px",3,"click"]],template:function(G,ee){1&G&&(k.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content")(5,"div",4),k.YNc(6,a,6,1,"div",5),k.qZA()()()()()()),2&G&&(k.xp6(6),k.Q6J("ngForOf",ee.ScreenOptions))},dependencies:[p.sg,s.lW,f.a8,f.dn],styles:[".cover-card[_ngcontent-%COMP%]{border-radius:16px}.main-card[_ngcontent-%COMP%]{background:#f1f1f1;border-radius:16px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}.sub-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px}.sub-card[_ngcontent-%COMP%]:hover{border:1px solid #000;border-radius:16px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}"]})}return B})();var S=N(2096),c=N(6306),o=N(6593);const r=function(B,Y,H){return{color:B,"font-family":Y,"font-size":H}};function A(B,Y){if(1&B&&(k.TgZ(0,"tr")(1,"td",12),k._uU(2),k.qZA(),k.TgZ(3,"td",12),k._uU(4),k.qZA()()),2&B){const H=Y.$implicit,G=k.oxw().$implicit;k.xp6(1),k.Q6J("ngStyle",k.kEZ(4,r,1===H.highlight?G.color:"inherit",G.font||"inherit",(G.font_size||"16")+"px")),k.xp6(1),k.Oqu(H.raw_material),k.xp6(1),k.Q6J("ngStyle",k.kEZ(8,r,1===H.highlight?G.color:"inherit",G.font||"inherit",(G.font_size||"16")+"px")),k.xp6(1),k.Oqu(H.value)}}const y=function(){return{"font-size":"2em"}},b=function(){return{"font-size":"1.5em"}};function d(B,Y){if(1&B&&(k.TgZ(0,"div",7)(1,"div",8),k._uU(2),k.qZA(),k.TgZ(3,"div",9),k._uU(4),k.qZA(),k.TgZ(5,"table",10)(6,"thead")(7,"tr")(8,"th"),k._uU(9,"Raw Material"),k.qZA(),k.TgZ(10,"th"),k._uU(11,"Value"),k.qZA()()(),k.TgZ(12,"tbody"),k.YNc(13,A,5,12,"tr",11),k.qZA()()()),2&B){const H=Y.$implicit;k.xp6(1),k.Q6J("ngStyle",k.DdM(5,y)),k.xp6(1),k.Oqu(H.header),k.xp6(1),k.Q6J("ngStyle",k.DdM(6,b)),k.xp6(1),k.Oqu(H.subheader),k.xp6(9),k.Q6J("ngForOf",H.data)}}function e(B,Y){if(1&B&&(k.TgZ(0,"div",5),k.YNc(1,d,14,7,"div",6),k.qZA()),2&B){const H=k.oxw(2);k.xp6(1),k.Q6J("ngForOf",H.textData)}}function i(B,Y){if(1&B&&(k.TgZ(0,"div",3),k.YNc(1,e,2,1,"div",4),k.qZA()),2&B){const H=k.oxw();k.xp6(1),k.Q6J("ngIf",H.textData&&H.textData.length)}}const _=function(B,Y){return{"fade-in":B,"fade-out":Y}};function L(B,Y){if(1&B&&k._UZ(0,"img",19),2&B){const H=k.oxw(3);k.Q6J("src",H.getImageSource(),k.LSH)("ngClass",k.WLB(2,_,H.animate,!H.animate))}}function F(B,Y){if(1&B){const H=k.EpF();k.TgZ(0,"video",20),k.NdJ("ended",function(){k.CHM(H);const ee=k.oxw(3);return k.KtG(ee.moveToNextContent())}),k.qZA()}if(2&B){const H=k.oxw(3);k.Q6J("src",H.getImageSource(),k.LSH)("ngClass",k.WLB(2,_,H.animate,!H.animate))}}function j(B,Y){if(1&B&&(k.TgZ(0,"div",15)(1,"div",16),k.YNc(2,L,1,5,"img",17),k.YNc(3,F,1,5,"video",18),k.qZA()()),2&B){const H=k.oxw(2);k.xp6(2),k.Q6J("ngIf",H.isImageType()),k.xp6(1),k.Q6J("ngIf",H.isVideoType())}}function V(B,Y){if(1&B&&(k.TgZ(0,"div",13),k.YNc(1,j,4,2,"div",14),k.qZA()),2&B){const H=k.oxw();k.xp6(1),k.Q6J("ngIf",H.imageDataList.length>0)}}function te(B,Y){1&B&&(k.TgZ(0,"div")(1,"div",21),k._uU(2,"No data found. Contact Administrator."),k.qZA()())}const R=[{path:"screens",component:l},{path:"display/:screenId",canActivate:[(()=>{class B{constructor(H){this.router=H}canActivate(H,G){return!!/^\d+$/.test(H.params.screenId)||(console.log("Invalid parameter. Redirecting to another page."),this.router.navigate(["/screen"]),!1)}static#e=this.\u0275fac=function(G){return new(G||B)(k.LFG(x.F0))};static#t=this.\u0275prov=k.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"})}return B})()],component:(()=>{class B{constructor(H,G,ee){this.route=H,this.screenService=G,this.sanitizer=ee,this.imageDataList=[],this.currentImageDataIndex=0,this.animate=!1,this.showText=!1,this.showMedia=!1,this.textDisplayDuration=5e3}ngOnInit(){const H=this.route.snapshot.paramMap.get("screenId");H?(this.fetchScreenDisplay(H),this.fetchScreenTextData(H)):console.error("No screen ID found in route parameters.")}fetchScreenDisplay(H){this.screenService.getScreenDisplay(H).pipe((0,c.K)(G=>(console.error("Error fetching screen display data:",G),(0,S.of)(null)))).subscribe(G=>{G&&G.data&&G.data.length>0&&(this.imageDataList=G.data)})}fetchScreenTextData(H){this.screenService.getScreenTextData(H).pipe((0,c.K)(G=>(console.error("Error fetching text data:",G),(0,S.of)(null)))).subscribe(G=>{this.textData=G,this.startDisplayingContent()})}startDisplayingContent(){this.displayText()}displayText(){this.showText=!0,this.showMedia=!1,setTimeout(()=>{this.showText=!1,this.currentImageDataIndex=0,this.displayMedia()},this.textDisplayDuration)}displayMedia(){if(this.currentImageDataIndex>=this.imageDataList.length)return void this.startDisplayingContent();this.showText=!1,this.showMedia=!0,this.animate=!0,this.showFullScreenImage();const G=1e3*parseInt(this.imageDataList[this.currentImageDataIndex].Duration);this.isImageType()&&setTimeout(()=>{this.animate=!1,setTimeout(()=>{this.moveToNextContent()},500)},G)}showFullScreenImage(){if(!this.imageDataList[this.currentImageDataIndex])return;const G=this.isVideoType(),ee=document.getElementById("videoElement"),$=document.getElementById("imageElement");G?ee&&(ee.src=this.getImageSource(),ee.style.display="block",$&&($.style.display="none"),ee.onloadeddata=()=>{ee.play().catch(ne=>{console.error("Error playing video:",ne)})},ee.onerror=()=>{console.error("Error loading video.")},ee.onended=()=>{this.moveToNextContent()}):$&&($.src=this.getImageSource(),$.style.display="block",ee&&(ee.style.display="none"))}moveToNextContent(){this.currentImageDataIndex++,this.displayMedia()}getImageSource(){const H=this.imageDataList[this.currentImageDataIndex];return H?`data:${H.Base64File.mimeType};base64,${H.Base64File.data}`:""}isImageType(){const H=this.imageDataList[this.currentImageDataIndex];return["image/jpeg","image/png","image/gif"].includes(H?H.Base64File.mimeType:"")}isVideoType(){const H=this.imageDataList[this.currentImageDataIndex];return["video/mp4","video/webm","video/ogg"].includes(H?H.Base64File.mimeType:"")}static#e=this.\u0275fac=function(G){return new(G||B)(k.Y36(x.gz),k.Y36(q),k.Y36(o.H7))};static#t=this.\u0275cmp=k.Xpm({type:B,selectors:[["app-display-screen"]],decls:3,vars:3,consts:[["class","content container",4,"ngIf"],["class","content display",4,"ngIf"],[4,"ngIf"],[1,"content","container"],["class","row pt-2 mb-2",4,"ngIf"],[1,"row","pt-2","mb-2"],["class","col-12",4,"ngFor","ngForOf"],[1,"col-12"],[1,"header","text-center",3,"ngStyle"],[1,"subheader","text-center",3,"ngStyle"],[1,"table","table-bordered","mt-3"],[4,"ngFor","ngForOf"],[3,"ngStyle"],[1,"content","display"],["class","image-container",4,"ngIf"],[1,"image-container"],[1,"full-screen"],["alt","Full Screen Image","class","img-fluid",3,"src","ngClass",4,"ngIf"],["controls","","autoplay","","class","full-screen-video",3,"src","ngClass","ended",4,"ngIf"],["alt","Full Screen Image",1,"img-fluid",3,"src","ngClass"],["controls","","autoplay","",1,"full-screen-video",3,"src","ngClass","ended"],[1,"no-data-message"]],template:function(G,ee){1&G&&(k.YNc(0,i,2,1,"div",0),k.YNc(1,V,2,1,"div",1),k.YNc(2,te,3,0,"div",2)),2&G&&(k.Q6J("ngIf",ee.showText),k.xp6(1),k.Q6J("ngIf",ee.showMedia),k.xp6(1),k.Q6J("ngIf",!ee.showText&&!ee.showMedia))},dependencies:[p.mk,p.sg,p.O5,p.PC],styles:[".display[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}.image-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.img-fluid[_ngcontent-%COMP%]{object-fit:cover;max-width:100%;max-height:80vh}.no-data-message[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.5rem;font-weight:550}.full-screen-video[_ngcontent-%COMP%]{object-fit:cover;max-width:100%;max-height:85vh}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}.fade-in[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .5s ease-in-out forwards}.fade-out[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut .5s ease-in-out forwards}.header[_ngcontent-%COMP%]{font-size:2em;margin-bottom:.5em;font-weight:550}.subheader[_ngcontent-%COMP%]{font-size:1.5em;margin-bottom:1em;font-weight:550}.table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding-top:12px;padding-bottom:12px;text-align:center}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#ac5454;color:#fff}"]})}return B})()},{path:"",redirectTo:"screens",pathMatch:"full"}];let I=(()=>{class B{static#e=this.\u0275fac=function(G){return new(G||B)};static#t=this.\u0275mod=k.oAB({type:B});static#n=this.\u0275inj=k.cJS({imports:[x.Bz.forChild(R),x.Bz]})}return B})();var M=N(617),T=N(1274),m=N(4104),n=N(1905),h=N(7668),C=N.t(h,2);N(8365),function D(){return typeof window>"u"}()||function O(B,Y,H){B[Y]=H}(C,"verbosity",h.VerbosityLevel.INFOS);let X=(()=>{class B{static \u0275fac=function(G){return new(G||B)};static \u0275mod=k.oAB({type:B});static \u0275inj=k.cJS({})}return B})(),K=(()=>{class B{static#e=this.\u0275fac=function(G){return new(G||B)};static#t=this.\u0275mod=k.oAB({type:B});static#n=this.\u0275inj=k.cJS({imports:[p.ez,I,M.Ps,T.g0,p.ez,n.I,s.ot,f.QW,m.Nh,X,w.ZX]})}return B})()},7668:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(7156).default,N;globalThis,N=()=>(()=>{"use strict";var __webpack_modules__=[,(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=ee,u.arraysToBytes=function $(re){const Q=re.length;if(1===Q&&re[0]instanceof Uint8Array)return re[0];let J=0;for(let ge=0;ge<Q;ge++)J+=ee(re[ge]);let oe=0;const de=new Uint8Array(J);for(let ge=0;ge<Q;ge++){let pe=re[ge];pe instanceof Uint8Array||(pe="string"==typeof pe?G(pe):new Uint8Array(pe));const we=pe.byteLength;de.set(pe,oe),oe+=we}return de},u.assert=function v(re,Q){re||C(Q)},u.bytesToString=function H(re){("object"!=typeof re||null===re||void 0===re.length)&&C("Invalid argument for bytesToString");const Q=re.length,J=8192;if(Q<J)return String.fromCharCode.apply(null,re);const oe=[];for(let de=0;de<Q;de+=J){const ge=Math.min(de+J,Q),pe=re.subarray(de,ge);oe.push(String.fromCharCode.apply(null,pe))}return oe.join("")},u.createPromiseCapability=function Ae(){const re=Object.create(null);let Q=!1;return Object.defineProperty(re,"settled",{get:()=>Q}),re.promise=new Promise(function(J,oe){re.resolve=function(de){Q=!0,J(de)},re.reject=function(de){Q=!0,oe(de)}}),re},u.createValidAbsoluteUrl=function g(re,Q=null,J=null){if(!re)return null;try{if(J&&"string"==typeof re){if(J.addDefaultProtocol&&re.startsWith("www.")){const de=re.match(/\./g);de&&de.length>=2&&(re=`http://${re}`)}if(J.tryConvertEncoding)try{re=xe(re)}catch{}}const oe=Q?new URL(re,Q):new URL(re);if(function t(re){if(!re)return!1;switch(re.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(oe))return oe}catch{}return null},u.escapeString=function Pe(re){return re.replace(/([()\\\n\r])/g,Q=>"\n"===Q?"\\n":"\r"===Q?"\\r":`\\${Q}`)},u.getModificationDate=function Ce(re=new Date){return[re.getUTCFullYear().toString(),(re.getUTCMonth()+1).toString().padStart(2,"0"),re.getUTCDate().toString().padStart(2,"0"),re.getUTCHours().toString().padStart(2,"0"),re.getUTCMinutes().toString().padStart(2,"0"),re.getUTCSeconds().toString().padStart(2,"0")].join("")},u.getVerbosityLevel=function m(){return M},u.info=function n(re){M>=te.INFOS&&console.log(`Info: ${re}`)},u.isArrayBuffer=function Be(re){return"object"==typeof re&&null!==re&&void 0!==re.byteLength},u.isArrayEqual=function Ve(re,Q){if(re.length!==Q.length)return!1;for(let J=0,oe=re.length;J<oe;J++)if(re[J]!==Q[J])return!1;return!0},u.isAscii=function ye(re){return/^[\x00-\x7F]*$/.test(re)},u.objectFromMap=function ie(re){const Q=Object.create(null);for(const[J,oe]of re)Q[J]=oe;return Q},u.objectSize=function ae(re){return Object.keys(re).length},u.setVerbosityLevel=function T(re){Number.isInteger(re)&&(M=re)},u.shadow=E,u.string32=function ne(re){return String.fromCharCode(re>>24&255,re>>16&255,re>>8&255,255&re)},u.stringToBytes=G,u.stringToPDFString=function _e(re){if(re[0]>="\xef"){let J;if("\xfe"===re[0]&&"\xff"===re[1]?J="utf-16be":"\xff"===re[0]&&"\xfe"===re[1]?J="utf-16le":"\xef"===re[0]&&"\xbb"===re[1]&&"\xbf"===re[2]&&(J="utf-8"),J)try{const oe=new TextDecoder(J,{fatal:!0}),de=G(re);return oe.decode(de)}catch(oe){h(`stringToPDFString: "${oe}".`)}}const Q=[];for(let J=0,oe=re.length;J<oe;J++){const de=me[re.charCodeAt(J)];Q.push(de?String.fromCharCode(de):re.charAt(J))}return Q.join("")},u.stringToUTF16BEString=function be(re){const Q=["\xfe\xff"];for(let J=0,oe=re.length;J<oe;J++){const de=re.charCodeAt(J);Q.push(String.fromCharCode(de>>8&255),String.fromCharCode(255&de))}return Q.join("")},u.stringToUTF8String=xe,u.unreachable=C,u.utf8StringToString=function Re(re){return unescape(encodeURIComponent(re))},u.warn=h,N(2),u.IDENTITY_MATRIX=[1,0,0,1,0,0],u.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],u.LINE_FACTOR=1.35,u.LINE_DESCENT_FACTOR=.35,u.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},u.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},u.AnnotationEditorPrefix="pdfjs_internal_editor_",u.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},u.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},u.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},u.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},u.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},u.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},u.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},u.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},u.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},u.AnnotationReplyType={GROUP:"Group",REPLY:"R"},u.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},u.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},u.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},u.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},u.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},u.PageActionEventType={O:"PageOpen",C:"PageClose"},u.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},u.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const te={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=te,u.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},u.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},u.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},u.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let M=te.WARNINGS;function h(re){M>=te.WARNINGS&&console.log(`Warning: ${re}`)}function C(re){throw new Error(re)}function E(re,Q,J){return Object.defineProperty(re,Q,{value:J,enumerable:!0,configurable:!0,writable:!1}),J}const O=function(){function Q(J,oe){this.constructor===Q&&C("Cannot initialize BaseException."),this.message=J,this.name=oe}return Q.prototype=new Error,Q.constructor=Q,Q}();function G(re){"string"!=typeof re&&C("Invalid argument for stringToBytes");const Q=re.length,J=new Uint8Array(Q);for(let oe=0;oe<Q;++oe)J[oe]=255&re.charCodeAt(oe);return J}function ee(re){return void 0!==re.length?re.length:void 0!==re.byteLength?re.byteLength:void C("Invalid argument for arrayByteLength")}u.BaseException=O,u.PasswordException=class D extends O{constructor(Q,J){super(Q,"PasswordException"),this.code=J}},u.UnknownErrorException=class W extends O{constructor(Q,J){super(Q,"UnknownErrorException"),this.details=J}},u.InvalidPDFException=class z extends O{constructor(Q){super(Q,"InvalidPDFException")}},u.MissingPDFException=class X extends O{constructor(Q){super(Q,"MissingPDFException")}},u.UnexpectedResponseException=class K extends O{constructor(Q,J){super(Q,"UnexpectedResponseException"),this.status=J}},u.FormatError=class B extends O{constructor(Q){super(Q,"FormatError")}},u.AbortException=class Y extends O{constructor(Q){super(Q,"AbortException")}},u.FeatureTest=class le{static get isLittleEndian(){return E(this,"isLittleEndian",function ce(){const re=new Uint8Array(4);return re[0]=1,1===new Uint32Array(re.buffer,0,1)[0]}())}static get isEvalSupported(){return E(this,"isEvalSupported",function he(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return E(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const ue=[...Array(256).keys()].map(re=>re.toString(16).padStart(2,"0"));class fe{static makeHexColor(Q,J,oe){return`#${ue[Q]}${ue[J]}${ue[oe]}`}static scaleMinMax(Q,J){let oe;Q[0]?(Q[0]<0&&(oe=J[0],J[0]=J[1],J[1]=oe),J[0]*=Q[0],J[1]*=Q[0],Q[3]<0&&(oe=J[2],J[2]=J[3],J[3]=oe),J[2]*=Q[3],J[3]*=Q[3]):(oe=J[0],J[0]=J[2],J[2]=oe,oe=J[1],J[1]=J[3],J[3]=oe,Q[1]<0&&(oe=J[2],J[2]=J[3],J[3]=oe),J[2]*=Q[1],J[3]*=Q[1],Q[2]<0&&(oe=J[0],J[0]=J[1],J[1]=oe),J[0]*=Q[2],J[1]*=Q[2]),J[0]+=Q[4],J[1]+=Q[4],J[2]+=Q[5],J[3]+=Q[5]}static transform(Q,J){return[Q[0]*J[0]+Q[2]*J[1],Q[1]*J[0]+Q[3]*J[1],Q[0]*J[2]+Q[2]*J[3],Q[1]*J[2]+Q[3]*J[3],Q[0]*J[4]+Q[2]*J[5]+Q[4],Q[1]*J[4]+Q[3]*J[5]+Q[5]]}static applyTransform(Q,J){return[Q[0]*J[0]+Q[1]*J[2]+J[4],Q[0]*J[1]+Q[1]*J[3]+J[5]]}static applyInverseTransform(Q,J){const oe=J[0]*J[3]-J[1]*J[2];return[(Q[0]*J[3]-Q[1]*J[2]+J[2]*J[5]-J[4]*J[3])/oe,(-Q[0]*J[1]+Q[1]*J[0]+J[4]*J[1]-J[5]*J[0])/oe]}static getAxialAlignedBoundingBox(Q,J){const oe=fe.applyTransform(Q,J),de=fe.applyTransform(Q.slice(2,4),J),ge=fe.applyTransform([Q[0],Q[3]],J),pe=fe.applyTransform([Q[2],Q[1]],J);return[Math.min(oe[0],de[0],ge[0],pe[0]),Math.min(oe[1],de[1],ge[1],pe[1]),Math.max(oe[0],de[0],ge[0],pe[0]),Math.max(oe[1],de[1],ge[1],pe[1])]}static inverseTransform(Q){const J=Q[0]*Q[3]-Q[1]*Q[2];return[Q[3]/J,-Q[1]/J,-Q[2]/J,Q[0]/J,(Q[2]*Q[5]-Q[4]*Q[3])/J,(Q[4]*Q[1]-Q[5]*Q[0])/J]}static apply3dTransform(Q,J){return[Q[0]*J[0]+Q[1]*J[1]+Q[2]*J[2],Q[3]*J[0]+Q[4]*J[1]+Q[5]*J[2],Q[6]*J[0]+Q[7]*J[1]+Q[8]*J[2]]}static singularValueDecompose2dScale(Q){const J=[Q[0],Q[2],Q[1],Q[3]],oe=Q[0]*J[0]+Q[1]*J[2],pe=Q[2]*J[1]+Q[3]*J[3],we=(oe+pe)/2,Me=Math.sqrt((oe+pe)**2-4*(oe*pe-(Q[2]*J[0]+Q[3]*J[2])*(Q[0]*J[1]+Q[1]*J[3])))/2,Se=we-Me||1;return[Math.sqrt(we+Me||1),Math.sqrt(Se)]}static normalizeRect(Q){const J=Q.slice(0);return Q[0]>Q[2]&&(J[0]=Q[2],J[2]=Q[0]),Q[1]>Q[3]&&(J[1]=Q[3],J[3]=Q[1]),J}static intersect(Q,J){const oe=Math.max(Math.min(Q[0],Q[2]),Math.min(J[0],J[2])),de=Math.min(Math.max(Q[0],Q[2]),Math.max(J[0],J[2]));if(oe>de)return null;const ge=Math.max(Math.min(Q[1],Q[3]),Math.min(J[1],J[3])),pe=Math.min(Math.max(Q[1],Q[3]),Math.max(J[1],J[3]));return ge>pe?null:[oe,ge,de,pe]}static bezierBoundingBox(Q,J,oe,de,ge,pe,we,Me){const Te=[],Se=[[],[]];let Le,ke,Ie,ve,De,Ne,Ue,je;for(let We=0;We<2;++We)if(0===We?(ke=6*Q-12*oe+6*ge,Le=-3*Q+9*oe-9*ge+3*we,Ie=3*oe-3*Q):(ke=6*J-12*de+6*pe,Le=-3*J+9*de-9*pe+3*Me,Ie=3*de-3*J),Math.abs(Le)<1e-12){if(Math.abs(ke)<1e-12)continue;ve=-Ie/ke,0<ve&&ve<1&&Te.push(ve)}else Ue=ke*ke-4*Ie*Le,je=Math.sqrt(Ue),!(Ue<0)&&(De=(-ke+je)/(2*Le),0<De&&De<1&&Te.push(De),Ne=(-ke-je)/(2*Le),0<Ne&&Ne<1&&Te.push(Ne));let Ee,Oe=Te.length;const Fe=Oe;for(;Oe--;)ve=Te[Oe],Ee=1-ve,Se[0][Oe]=Ee*Ee*Ee*Q+3*Ee*Ee*ve*oe+3*Ee*ve*ve*ge+ve*ve*ve*we,Se[1][Oe]=Ee*Ee*Ee*J+3*Ee*Ee*ve*de+3*Ee*ve*ve*pe+ve*ve*ve*Me;return Se[0][Fe]=Q,Se[1][Fe]=J,Se[0][Fe+1]=we,Se[1][Fe+1]=Me,Se[0].length=Se[1].length=Fe+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}u.Util=fe;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function xe(re){return decodeURIComponent(escape(re))}},(se,u,N)=>{N(3)},(se,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const N=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);u.isNodeJS=N},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:se,NodeCMapReaderFactory:u,NodeStandardFontDataFactory:N}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=se,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=N}function setPDFNetworkStreamFactory(se){createPDFNetworkStream=se}function getDocument(se){const u=new PDFDocumentLoadingTask;let N;if("string"==typeof se||se instanceof URL)N={url:se};else if((0,_util.isArrayBuffer)(se))N={data:se};else if(se instanceof PDFDataRangeTransport)N={range:se};else{if("object"!=typeof se)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!se.url&&!se.data&&!se.range)throw new Error("Invalid parameter object: need either .data, .range or .url");N=se}const p=Object.create(null);let x=null,k=null;for(const q in N){const w=N[q];switch(q){case"url":if(typeof window<"u")try{p[q]=new URL(w,window.location).href;continue}catch(s){(0,_util.warn)(`Cannot create valid URL: "${s}".`)}else if("string"==typeof w||w instanceof URL){p[q]=w.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":x=w;continue;case"worker":k=w;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&w instanceof Buffer)p[q]=new Uint8Array(w);else{if(w instanceof Uint8Array)break;if("string"==typeof w)p[q]=(0,_util.stringToBytes)(w);else if("object"!=typeof w||null===w||isNaN(w.length)){if(!(0,_util.isArrayBuffer)(w))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");p[q]=new Uint8Array(w)}else p[q]=new Uint8Array(w)}continue}p[q]=w}if(p.CMapReaderFactory=p.CMapReaderFactory||DefaultCMapReaderFactory,p.StandardFontDataFactory=p.StandardFontDataFactory||DefaultStandardFontDataFactory,p.ignoreErrors=!0!==p.stopAtErrors,p.fontExtraProperties=!0===p.fontExtraProperties,p.pdfBug=!0===p.pdfBug,p.enableXfa=!0===p.enableXfa,(!Number.isInteger(p.rangeChunkSize)||p.rangeChunkSize<1)&&(p.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof p.docBaseUrl||(0,_display_utils.isDataScheme)(p.docBaseUrl))&&(p.docBaseUrl=null),(!Number.isInteger(p.maxImageSize)||p.maxImageSize<-1)&&(p.maxImageSize=-1),"string"!=typeof p.cMapUrl&&(p.cMapUrl=null),"string"!=typeof p.standardFontDataUrl&&(p.standardFontDataUrl=null),"boolean"!=typeof p.useWorkerFetch&&(p.useWorkerFetch=p.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&p.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof p.isEvalSupported&&(p.isEvalSupported=!0),"boolean"!=typeof p.disableFontFace&&(p.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof p.useSystemFonts&&(p.useSystemFonts=!_is_node.isNodeJS&&!p.disableFontFace),("object"!=typeof p.ownerDocument||null===p.ownerDocument)&&(p.ownerDocument=globalThis.document),"boolean"!=typeof p.disableRange&&(p.disableRange=!1),"boolean"!=typeof p.disableStream&&(p.disableStream=!1),"boolean"!=typeof p.disableAutoFetch&&(p.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(p.verbosity),!k){const q={verbosity:p.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};k=q.port?PDFWorker.fromPort(q):new PDFWorker(q),u._worker=k}const U=u.docId;return k.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const q=_fetchDocument(k,p,x,U),w=new Promise(function(s){let f;x?f=new _transport_stream.PDFDataTransportStream({length:p.length,initialData:p.initialData,progressiveDone:p.progressiveDone,contentDispositionFilename:p.contentDispositionFilename,disableRange:p.disableRange,disableStream:p.disableStream},x):p.data||(f=createPDFNetworkStream({url:p.url,length:p.length,httpHeaders:p.httpHeaders,withCredentials:p.withCredentials,rangeChunkSize:p.rangeChunkSize,disableRange:p.disableRange,disableStream:p.disableStream})),s(f)});return Promise.all([q,w]).then(function([s,f]){if(u.destroyed)throw new Error("Loading aborted");const a=new _message_handler.MessageHandler(U,s,k.port),l=new WorkerTransport(a,u,f,p);u._transport=l,a.send("Ready",null)})}).catch(u._capability.reject),u}function _fetchDocument(se,u,N,p){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(se,u,N,p){if(se.destroyed)throw new Error("Worker was destroyed");N&&(u.length=N.length,u.initialData=N.initialData,u.progressiveDone=N.progressiveDone,u.contentDispositionFilename=N.contentDispositionFilename);const x=yield se.messageHandler.sendWithPromise("GetDocRequest",{docId:p,apiVersion:"2.16.105",source:{data:u.data,url:u.url,password:u.password,disableAutoFetch:u.disableAutoFetch,rangeChunkSize:u.rangeChunkSize,length:u.length},maxImageSize:u.maxImageSize,disableFontFace:u.disableFontFace,docBaseUrl:u.docBaseUrl,ignoreErrors:u.ignoreErrors,isEvalSupported:u.isEvalSupported,fontExtraProperties:u.fontExtraProperties,enableXfa:u.enableXfa,useSystemFonts:u.useSystemFonts,cMapUrl:u.useWorkerFetch?u.cMapUrl:null,standardFontDataUrl:u.useWorkerFetch?u.standardFontDataUrl:null});if(u.data&&(u.data=null),se.destroyed)throw new Error("Worker was destroyed");return x})).apply(this,arguments)}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var u=this;return _asyncToGenerator(function*(){u.destroyed=!0,yield u._transport?.destroy(),u._transport=null,u._worker&&(u._worker.destroy(),u._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,N,p=!1,x=null){this.length=u,this.initialData=N,this.progressiveDone=p,this.contentDispositionFilename=x,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,N){for(const p of this._rangeListeners)p(u,N)}onDataProgress(u,N){this._readyCapability.promise.then(()=>{for(const p of this._progressListeners)p(u,N)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const N of this._progressiveReadListeners)N(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,N){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,N){var x,p=this;this._pdfInfo=u,this._transport=N,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(x=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),p.stats||{streamTypes:{},fontTypes:{}}}),function(){return x.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(u,N,p,x,k=!1){this._pageIndex=u,this._pageInfo=N,this._ownerDocument=x,this._transport=p,this._stats=k?new _display_utils.StatTimer:null,this._pdfBug=k,this.commonObjs=p.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:N=this.rotate,offsetX:p=0,offsetY:x=0,dontFlip:k=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:N,offsetX:p,offsetY:x,dontFlip:k})}getAnnotations({intent:u="display"}={}){const N=this._transport.getRenderingIntent(u);let p=this._annotationPromises.get(N.cacheKey);return p||(p=this._transport.getAnnotations(this._pageIndex,N.renderingIntent),this._annotationPromises.set(N.cacheKey,p),p=p.then(x=>{for(const k of x)void 0!==k.titleObj&&Object.defineProperty(k,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),k.titleObj.str)}),void 0!==k.contentsObj&&Object.defineProperty(k,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),k.contentsObj.str)});return x})),p}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var u=this;return _asyncToGenerator(function*(){return u._transport._htmlForXfa?.children[u._pageIndex]||null})()}render({canvasContext:u,viewport:N,intent:p="display",annotationMode:x=_util.AnnotationMode.ENABLE,transform:k=null,imageLayer:U=null,canvasFactory:q=null,background:w=null,optionalContentConfigPromise:s=null,annotationCanvasMap:f=null,pageColors:a=null,printAnnotationStorage:l=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&x===_util.AnnotationMode.ENABLE&&(x=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&x===_util.AnnotationMode.ENABLE&&(x=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const S=this._transport.getRenderingIntent(p,x,l);this.pendingCleanup=!1,s||(s=this._transport.getOptionalContentConfig());let c=this._intentStates.get(S.cacheKey);c||(c=Object.create(null),this._intentStates.set(S.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const o=q||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),r=!!(S.renderingIntent&_util.RenderingIntentFlag.PRINT);c.displayReadyCapability||(c.displayReadyCapability=(0,_util.createPromiseCapability)(),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(S));const A=d=>{c.renderTasks.delete(y),(this.cleanupAfterRender||r)&&(this.pendingCleanup=!0),this._tryCleanup(),d?(y.capability.reject(d),this._abortOperatorList({intentState:c,reason:d instanceof Error?d:new Error(d)})):y.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},y=new InternalRenderTask({callback:A,params:{canvasContext:u,viewport:N,transform:k,imageLayer:U,background:w},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:o,useRequestAnimationFrame:!r,pdfBug:this._pdfBug,pageColors:a});(c.renderTasks||=new Set).add(y);const b=y.task;return Promise.all([c.displayReadyCapability.promise,s]).then(([d,e])=>{this.pendingCleanup?A():(this._stats&&this._stats.time("Rendering"),y.initializeGraphics({transparency:d,optionalContentConfig:e}),y.operatorListChanged())}).catch(A),b}getOperatorList({intent:u="display",annotationMode:N=_util.AnnotationMode.ENABLE,printAnnotationStorage:p=null}={}){const k=this._transport.getRenderingIntent(u,N,p,!0);let q,U=this._intentStates.get(k.cacheKey);return U||(U=Object.create(null),this._intentStates.set(k.cacheKey,U)),U.opListReadCapability||(q=Object.create(null),q.operatorListChanged=function x(){U.operatorList.lastChunk&&(U.opListReadCapability.resolve(U.operatorList),U.renderTasks.delete(q))},U.opListReadCapability=(0,_util.createPromiseCapability)(),(U.renderTasks||=new Set).add(q),U.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(k)),U.opListReadCapability.promise}streamTextContent({disableCombineTextItems:u=!1,includeMarkedContent:N=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==u,includeMarkedContent:!0===N},{highWaterMark:100,size:x=>x.items.length})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(p=>_xfa_text.XfaText.textContent(p));const N=this.streamTextContent(u);return new Promise(function(p,x){const U=N.getReader(),q={items:[],styles:Object.create(null)};!function k(){U.read().then(function({value:w,done:s}){s?p(q):(Object.assign(q.styles,w.styles),q.items.push(...w.items),k())},x)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const N of this._intentStates.values())if(this._abortOperatorList({intentState:N,reason:new Error("Page was destroyed."),force:!0}),!N.opListReadCapability)for(const p of N.renderTasks)u.push(p.completed),p.cancel();this.objs.clear();for(const N of this._bitmaps)N.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(u)}cleanup(u=!1){return this.pendingCleanup=!0,this._tryCleanup(u)}_tryCleanup(u=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:N,operatorList:p}of this._intentStates.values())if(N.size>0||!p.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,u&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const N of this._bitmaps)N.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(u,N){const p=this._intentStates.get(N);p&&(this._stats&&this._stats.timeEnd("Page Request"),p.displayReadyCapability&&p.displayReadyCapability.resolve(u))}_renderPageChunk(u,N){for(let p=0,x=u.length;p<x;p++)N.operatorList.fnArray.push(u.fnArray[p]),N.operatorList.argsArray.push(u.argsArray[p]);N.operatorList.lastChunk=u.lastChunk,N.operatorList.separateAnnots=u.separateAnnots;for(const p of N.renderTasks)p.operatorListChanged();u.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:u,cacheKey:N,annotationStorageMap:p}){const k=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:N,annotationStorage:p}).getReader(),U=this._intentStates.get(N);U.streamReader=k;const q=()=>{k.read().then(({value:w,done:s})=>{s?U.streamReader=null:this._transport.destroyed||(this._renderPageChunk(w,U),q())},w=>{if(U.streamReader=null,!this._transport.destroyed){if(U.operatorList){U.operatorList.lastChunk=!0;for(const s of U.renderTasks)s.operatorListChanged();this._tryCleanup()}if(U.displayReadyCapability)U.displayReadyCapability.reject(w);else{if(!U.opListReadCapability)throw w;U.opListReadCapability.reject(w)}}})};q()}_abortOperatorList({intentState:u,reason:N,force:p=!1}){if(u.streamReader){if(!p){if(u.renderTasks.size>0)return;if(N instanceof _display_utils.RenderingCancelledException)return void(u.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:u,reason:N,force:!0}),u.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(u.streamReader.cancel(new _util.AbortException(N.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[x,k]of this._intentStates)if(k===u){this._intentStates.delete(x);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(u,N){const p={data:structuredClone(u,N)};this._deferred.then(()=>{for(const x of this._listeners)x.call(this,p)})}addEventListener(u,N){this._listeners.push(N)}removeEventListener(u,N){const p=this._listeners.indexOf(N);this._listeners.splice(p,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const se=document?.currentScript?.src;se&&(PDFWorkerUtil.fallbackWorkerSrc=se.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(se,u){let N;try{if(N=new URL(se),!N.origin||"null"===N.origin)return!1}catch{return!1}const p=new URL(u,N);return N.origin===p.origin},PDFWorkerUtil.createCDNWrapper=function(se){return URL.createObjectURL(new Blob([`importScripts("${se}");`]))};class PDFWorker{static#workerPorts=new WeakMap;constructor({name:se=null,port:u=null,verbosity:N=(0,_util.getVerbosityLevel)()}={}){if(u&&PDFWorker.#workerPorts.has(u))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=se,this.destroyed=!1,this.verbosity=N,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,u)return PDFWorker.#workerPorts.set(u,this),void this._initializeFromPort(u);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(se){this._port=se,this._messageHandler=new _message_handler.MessageHandler("main","worker",se),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:se}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,se)||(se=PDFWorkerUtil.createCDNWrapper(new URL(se,window.location).href));const u=new Worker(se),N=new _message_handler.MessageHandler("main","worker",u),p=()=>{u.removeEventListener("error",x),N.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},x=()=>{this._webWorker||p()};u.addEventListener("error",x),N.on("test",U=>{u.removeEventListener("error",x),this.destroyed?p():U?(this._messageHandler=N,this._port=u,this._webWorker=u,this._readyCapability.resolve(),N.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),N.destroy(),u.terminate())}),N.on("ready",U=>{if(u.removeEventListener("error",x),this.destroyed)p();else try{k()}catch{this._setupFakeWorker()}});const k=()=>{const U=new Uint8Array;N.send("test",U,[U.buffer])};return void k()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(se=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const u=new LoopbackPort;this._port=u;const N="fake"+PDFWorkerUtil.fakeWorkerId++,p=new _message_handler.MessageHandler(N+"_worker",N,u);se.setup(p,u);const x=new _message_handler.MessageHandler(N,N+"_worker",u);this._messageHandler=x,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})}).catch(se=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${se.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(se){if(!se?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(se.port)?this.#workerPorts.get(se.port):new PDFWorker(se)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function se(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#n=new Map;#i=null;constructor(u,N,p,x){this.messageHandler=u,this.loadingTask=N,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:N.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:x.ownerDocument,styleElement:x.styleElement}),this._params=x,x.useWorkerFetch||(this.CMapReaderFactory=new x.CMapReaderFactory({baseUrl:x.cMapUrl,isCompressed:x.cMapPacked}),this.StandardFontDataFactory=new x.StandardFontDataFactory({baseUrl:x.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=p,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(u,N=_util.AnnotationMode.ENABLE,p=null,x=!1){let k=_util.RenderingIntentFlag.DISPLAY,U=null;switch(u){case"any":k=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":k=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(N){case _util.AnnotationMode.DISABLE:k+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:k+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:k+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,U=(k&_util.RenderingIntentFlag.PRINT&&p instanceof _annotation_storage.PrintAnnotationStorage?p:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${N}`)}return x&&(k+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:k,cacheKey:`${k}_${_annotation_storage.AnnotationStorage.getHash(U)}`,annotationStorageMap:U}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const p of this.#t.values())u.push(p._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const N=this.messageHandler.sendWithPromise("Terminate",null);return u.push(N),Promise.all(u).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#i=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:N}=this;u.on("GetReader",(p,x)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=k=>{this._lastProgress={loaded:k.loaded,total:k.total}},x.onPull=()=>{this._fullReader.read().then(function({value:k,done:U}){U?x.close():((0,_util.assert)((0,_util.isArrayBuffer)(k),"GetReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(k),1,[k]))}).catch(k=>{x.error(k)})},x.onCancel=k=>{this._fullReader.cancel(k),x.ready.catch(U=>{if(!this.destroyed)throw U})}}),u.on("ReaderHeadersReady",p=>{const x=(0,_util.createPromiseCapability)(),k=this._fullReader;return k.headersReady.then(()=>{(!k.isStreamingSupported||!k.isRangeSupported)&&(this._lastProgress&&N.onProgress?.(this._lastProgress),k.onProgress=U=>{N.onProgress?.({loaded:U.loaded,total:U.total})}),x.resolve({isStreamingSupported:k.isStreamingSupported,isRangeSupported:k.isRangeSupported,contentLength:k.contentLength})},x.reject),x.promise}),u.on("GetRangeReader",(p,x)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const k=this._networkStream.getRangeReader(p.begin,p.end);k?(x.onPull=()=>{k.read().then(function({value:U,done:q}){q?x.close():((0,_util.assert)((0,_util.isArrayBuffer)(U),"GetRangeReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(U),1,[U]))}).catch(U=>{x.error(U)})},x.onCancel=U=>{k.cancel(U),x.ready.catch(q=>{if(!this.destroyed)throw q})}):x.close()}),u.on("GetDoc",({pdfInfo:p})=>{this._numPages=p.numPages,this._htmlForXfa=p.htmlForXfa,delete p.htmlForXfa,N._capability.resolve(new PDFDocumentProxy(p,this))}),u.on("DocException",function(p){let x;switch(p.name){case"PasswordException":x=new _util.PasswordException(p.message,p.code);break;case"InvalidPDFException":x=new _util.InvalidPDFException(p.message);break;case"MissingPDFException":x=new _util.MissingPDFException(p.message);break;case"UnexpectedResponseException":x=new _util.UnexpectedResponseException(p.message,p.status);break;case"UnknownErrorException":x=new _util.UnknownErrorException(p.message,p.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}N._capability.reject(x)}),u.on("PasswordRequest",p=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),N.onPassword){const x=k=>{k instanceof Error?this._passwordCapability.reject(k):this._passwordCapability.resolve({password:k})};try{N.onPassword(x,p.code)}catch(k){this._passwordCapability.reject(k)}}else this._passwordCapability.reject(new _util.PasswordException(p.message,p.code));return this._passwordCapability.promise}),u.on("DataLoaded",p=>{N.onProgress?.({loaded:p.length,total:p.length}),this.downloadInfoCapability.resolve(p)}),u.on("StartRenderPage",p=>{this.destroyed||this.#t.get(p.pageIndex)._startRenderPage(p.transparency,p.cacheKey)}),u.on("commonobj",([p,x,k])=>{if(!this.destroyed&&!this.commonObjs.has(p))switch(x){case"Font":const U=this._params;if("error"in k){const s=k.error;(0,_util.warn)(`Error during font loading: ${s}`),this.commonObjs.resolve(p,s);break}let q=null;U.pdfBug&&globalThis.FontInspector?.enabled&&(q={registerFont(s,f){globalThis.FontInspector.fontAdded(s,f)}});const w=new _font_loader.FontFaceObject(k,{isEvalSupported:U.isEvalSupported,disableFontFace:U.disableFontFace,ignoreErrors:U.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:q});this.fontLoader.bind(w).catch(s=>u.sendWithPromise("FontFallback",{id:p})).finally(()=>{!U.fontExtraProperties&&w.data&&(w.data=null),this.commonObjs.resolve(p,w)});break;case"FontPath":case"Image":this.commonObjs.resolve(p,k);break;default:throw new Error(`Got unknown common object type ${x}`)}}),u.on("obj",([p,x,k,U])=>{if(this.destroyed)return;const q=this.#t.get(x);if(!q.objs.has(p))switch(k){case"Image":q.objs.resolve(p,U);const w=8e6;if(U){let s;if(U.bitmap){const{bitmap:f,width:a,height:l}=U;s=a*l*4,q._bitmaps.add(f)}else s=U.data?.length||0;s>w&&(q.cleanupAfterRender=!0)}break;case"Pattern":q.objs.resolve(p,U);break;default:throw new Error(`Got unknown object type ${k}`)}}),u.on("DocProgress",p=>{this.destroyed||N.onProgress?.({loaded:p.loaded,total:p.total})}),u.on("DocStats",p=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(p.streamTypes),fontTypes:Object.freeze(p.fontTypes)}))}),u.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),u.on("FetchBuiltInCMap",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(p):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(p):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:u}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(u)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const N=u-1,p=this.#n.get(N);if(p)return p;const x=this.messageHandler.sendWithPromise("GetPage",{pageIndex:N}).then(k=>{if(this.destroyed)throw new Error("Transport destroyed");const U=new PDFPageProxy(N,k,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(N,U),U});return this.#n.set(N,x),x}getPageIndex(u){return"object"!=typeof u||null===u||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,N){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:N})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return"string"!=typeof u?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#i||=this.messageHandler.sendWithPromise("GetMetadata",null).then(u=>({info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(u=!1){var N=this;return _asyncToGenerator(function*(){if(yield N.messageHandler.sendWithPromise("Cleanup",null),!N.destroyed){for(const p of N.#t.values())if(!p.cleanup())throw new Error(`startCleanup: Page ${p.pageNumber} is currently rendering.`);N.commonObjs.clear(),u||N.fontLoader.clear(),N.#i=null,N._getFieldObjectsPromise=null,N._hasJSActionsPromise=null}})()}get loadingParams(){const u=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u.disableAutoFetch,enableXfa:u.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(u){return this.#e[u]||(this.#e[u]={capability:(0,_util.createPromiseCapability)(),data:null})}get(u,N=null){if(N){const x=this.#t(u);return x.capability.promise.then(()=>N(x.data)),null}const p=this.#e[u];if(!p?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${u}.`);return p.data}has(u){return this.#e[u]?.capability.settled||!1}resolve(u,N=null){const p=this.#t(u);p.data=N,p.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(u){this.#e=u,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(){this.#e.cancel()}get separateAnnots(){const{separateAnnots:u}=this.#e.operatorList;if(!u)return!1;const{annotationCanvasMap:N}=this.#e;return u.form||u.canvas&&N?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:u,params:N,objs:p,commonObjs:x,annotationCanvasMap:k,operatorList:U,pageIndex:q,canvasFactory:w,useRequestAnimationFrame:s=!1,pdfBug:f=!1,pageColors:a=null}){this.callback=u,this.params=N,this.objs=p,this.commonObjs=x,this.annotationCanvasMap=k,this.operatorListIdx=null,this.operatorList=U,this._pageIndex=q,this.canvasFactory=w,this._pdfBug=f,this.pageColors=a,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===s&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=N.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:N}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:x,transform:k,imageLayer:U,background:q}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,U,N,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:k,viewport:x,transparency:u,background:q}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(u=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var u=this;return _asyncToGenerator(function*(){u.cancelled||(u.operatorListIdx=u.gfx.executeOperatorList(u.operatorList,u.operatorListIdx,u._continueBound,u.stepper),u.operatorListIdx===u.operatorList.argsArray.length&&(u.running=!1,u.operatorList.lastChunk&&(u.gfx.endDrawing(),u._canvas&&InternalRenderTask.#e.delete(u._canvas),u.callback())))})()}}const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var p=N(1),x=N(6),k=N(10);class U{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(s,f){const a=this._storage.get(s);return void 0===a?f:Object.assign(f,a)}getRawValue(s){return this._storage.get(s)}remove(s){if(this._storage.delete(s),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const f of this._storage.values())if(f instanceof x.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(s,f){const a=this._storage.get(s);let l=!1;if(void 0!==a)for(const[S,c]of Object.entries(f))a[S]!==c&&(l=!0,a[S]=c);else l=!0,this._storage.set(s,f);l&&this.#e(),f instanceof x.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(f.constructor._type)}has(s){return this._storage.has(s)}getAll(){return this._storage.size>0?(0,p.objectFromMap)(this._storage):null}get size(){return this._storage.size}#e(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new q(this)}get serializable(){if(0===this._storage.size)return null;const s=new Map;for(const[f,a]of this._storage){const l=a instanceof x.AnnotationEditor?a.serialize():a;l&&s.set(f,l)}return s}static getHash(s){if(!s)return"";const f=new k.MurmurHash3_64;for(const[a,l]of s)f.update(`${a}:${JSON.stringify(l)}`);return f.hexdigest()}}u.AnnotationStorage=U;class q extends U{#e=null;constructor(s){super(),this.#e=structuredClone(s.serializable)}get print(){(0,p.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}u.PrintAnnotationStorage=q},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var p=N(7),x=N(1);class k{#e=this.focusin.bind(this);#t=this.focusout.bind(this);#n=!1;#i=!1;#r=!1;#c=k._zIndex++;static _colorManager=new p.ColorManager;static _zIndex=1;constructor(q){this.constructor===k&&(0,x.unreachable)("Cannot initialize AnnotationEditor."),this.parent=q.parent,this.id=q.id,this.width=this.height=null,this.pageIndex=q.parent.pageIndex,this.name=q.name,this.div=null;const[w,s]=this.parent.viewportBaseDimensions;this.x=q.x/w,this.y=q.y/s,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,x.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#c}focusin(q){this.#n?this.#n=!1:this.parent.setSelected(this)}focusout(q){!this.isAttachedToDOM||q.relatedTarget?.closest(`#${this.id}`)||(q.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(q){const w=this.parent.div.getBoundingClientRect();this.startX=q.clientX-w.x,this.startY=q.clientY-w.y,q.dataTransfer.setData("text/plain",this.id),q.dataTransfer.effectAllowed="move"}setAt(q,w,s,f){const[a,l]=this.parent.viewportBaseDimensions;[s,f]=this.screenToPageTranslation(s,f),this.x=(q+s)/a,this.y=(w+f)/l,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(q,w){const[s,f]=this.parent.viewportBaseDimensions;[q,w]=this.screenToPageTranslation(q,w),this.x+=q/s,this.y+=w/f,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(q,w){const{rotation:s}=this.parent.viewport;switch(s){case 90:return[w,-q];case 180:return[-q,-w];case 270:return[-w,q];default:return[q,w]}}setDims(q,w){const[s,f]=this.parent.viewportBaseDimensions;this.div.style.width=100*q/s+"%",this.div.style.height=100*w/f+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#e),this.div.addEventListener("focusout",this.#t);const[q,w]=this.getInitialTranslation();return this.translate(q,w),(0,p.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(q){const w=p.KeyboardManager.platform.isMac;0!==q.button||q.ctrlKey&&w?q.preventDefault():(q.ctrlKey&&!w||q.shiftKey||q.metaKey&&w?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#n=!0)}getRect(q,w){const[s,f]=this.parent.viewportBaseDimensions,[a,l]=this.parent.pageDimensions,S=a*q/s,c=l*w/f,o=this.x*a,r=this.y*l,A=this.width*a,y=this.height*l;switch(this.rotation){case 0:return[o+S,l-r-c-y,o+S+A,l-r-c];case 90:return[o+c,l-r+S,o+c+y,l-r+S+A];case 180:return[o-S-A,l-r+c,o-S,l-r+c+y];case 270:return[o-c-y,l-r-S-A,o-c,l-r-S];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(q,w){const[s,f,a,l]=q,S=a-s,c=l-f;switch(this.rotation){case 0:return[s,w-l,S,c];case 90:return[s,w-f,c,S];case 180:return[a,w-f,S,c];case 270:return[a,w-l,c,S];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#r=!0}disableEditMode(){this.#r=!1}isInEditMode(){return this.#r}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#e)}serialize(){(0,x.unreachable)("An editor must be serializable")}static deserialize(q,w){const s=new this.prototype.constructor({parent:w,id:w.getNextId()});s.rotation=q.rotation;const[f,a]=w.pageDimensions,[l,S,c,o]=s.getRectInCurrentCoords(q.rect,a);return s.x=l/f,s.y=S/a,s.width=c/f,s.height=o/a,s}remove(){this.div.removeEventListener("focusin",this.#e),this.div.removeEventListener("focusout",this.#t),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(q,w){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#i}set isEditing(q){this.#i=q,q?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}u.AnnotationEditor=k},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=function k(S,c,o){for(const r of o)c.addEventListener(r,S[r].bind(S))},u.opacityToHex=function U(S){return Math.round(Math.min(255,Math.max(1,255*S))).toString(16).padStart(2,"0")};var p=N(1),x=N(8);class q{#e=0;getId(){return`${p.AnnotationEditorPrefix}${this.#e++}`}}class w{#e=[];#t=!1;#n;#i=-1;constructor(c=128){this.#n=c}add({cmd:c,undo:o,mustExec:r,type:A=NaN,overwriteIfSameType:y=!1,keepUndo:b=!1}){if(r&&c(),this.#t)return;const d={cmd:c,undo:o,type:A};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(d);if(y&&this.#e[this.#i].type===A)return b&&(d.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=d);const e=this.#i+1;e===this.#n?this.#e.splice(0,1):(this.#i=e,e<this.#e.length&&this.#e.splice(e)),this.#e.push(d)}undo(){-1!==this.#i&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}u.CommandManager=w;class s{constructor(c){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const o=s.platform.isMac;for(const[r,A]of c)for(const y of r){const b=y.startsWith("mac+");o&&b?(this.callbacks.set(y.slice(4),A),this.allKeys.add(y.split("+").at(-1))):!o&&!b&&(this.callbacks.set(y,A),this.allKeys.add(y.split("+").at(-1)))}}static get platform(){const c=typeof navigator<"u"?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:c.includes("Win"),isMac:c.includes("Mac")})}#e(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const o=this.buffer.join("+");return this.buffer.length=0,o}exec(c,o){if(!this.allKeys.has(o.key))return;const r=this.callbacks.get(this.#e(o));r&&(r.bind(c)(),o.stopPropagation(),o.preventDefault())}}u.KeyboardManager=s;class f{#e=null;copy(c){c&&(Array.isArray(c)?this.#e=c.map(o=>o.serialize()):this.#e=[c.serialize()],this.#e=this.#e.filter(o=>!!o),0===this.#e.length&&(this.#e=null))}paste(){return this.#e}isEmpty(){return null===this.#e}destroy(){this.#e=null}}class a{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,x.getColorValues)(c),(0,p.shadow)(this,"_colors",c)}convert(c){const o=(0,x.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return o;for(const[r,A]of this._colors)if(A.every((y,b)=>y===o[b]))return a._colorsMapping.get(r);return o}getHexCode(c){const o=this._colors.get(c);return o?p.Util.makeHexColor(...o):c}}u.ColorManager=a;class l{#e=null;#t=new Map;#n=new Map;#i=new f;#r=new w;#c=0;#o=null;#s=null;#u=new q;#h=!1;#l=p.AnnotationEditorType.NONE;#a=new Set;#p=this.keydown.bind(this);#f=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#m={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=null;static _keyboardManager=new s([[["ctrl+a","mac+meta+a"],l.prototype.selectAll],[["ctrl+c","mac+meta+c"],l.prototype.copy],[["ctrl+v","mac+meta+v"],l.prototype.paste],[["ctrl+x","mac+meta+x"],l.prototype.cut],[["ctrl+z","mac+meta+z"],l.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],l.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],l.prototype.delete],[["Escape","mac+Escape"],l.prototype.unselectAll]]);constructor(c,o){this.#_=c,this.#s=o,this.#s._on("editingaction",this.#f),this.#s._on("pagechanging",this.#b)}destroy(){this.#v(),this.#s._off("editingaction",this.#f),this.#s._off("pagechanging",this.#b);for(const c of this.#n.values())c.destroy();this.#n.clear(),this.#t.clear(),this.#e=null,this.#a.clear(),this.#i.destroy(),this.#r.destroy()}onPageChanging({pageNumber:c}){this.#c=c-1}focusMainContainer(){this.#_.focus()}#S(){this.#_.addEventListener("keydown",this.#p)}#v(){this.#_.removeEventListener("keydown",this.#p)}keydown(c){this.getActive()?.shouldGetKeyboardEvents()||l._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","cut","copy","paste","delete","selectAll"].includes(c.name)&&this[c.name]()}#d(c){Object.entries(c).some(([r,A])=>this.#m[r]!==A)&&this.#s.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#m,c)})}#P(c){this.#s.dispatch("annotationeditorparamschanged",{source:this,details:c})}setEditingState(c){c?(this.#S(),this.#d({isEditing:this.#l!==p.AnnotationEditorType.NONE,isEmpty:this.#y(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#i.isEmpty()})):(this.#v(),this.#d({isEditing:!1}))}registerEditorTypes(c){this.#o=c;for(const o of this.#o)this.#P(o.defaultPropertiesToUpdate)}getId(){return this.#u.getId()}addLayer(c){this.#n.set(c.pageIndex,c),this.#h?c.enable():c.disable()}removeLayer(c){this.#n.delete(c.pageIndex)}updateMode(c){if(this.#l=c,c===p.AnnotationEditorType.NONE)this.setEditingState(!1),this.#g();else{this.setEditingState(!0),this.#w();for(const o of this.#n.values())o.updateMode(c)}}updateToolbar(c){c!==this.#l&&this.#s.dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,o){for(const r of this.#a)r.updateParams(c,o);for(const r of this.#o)r.updateDefaultParams(c,o)}#w(){if(!this.#h){this.#h=!0;for(const c of this.#n.values())c.enable()}}#g(){if(this.unselectAll(),this.#h){this.#h=!1;for(const c of this.#n.values())c.disable()}}getEditors(c){const o=[];for(const r of this.#t.values())r.pageIndex===c&&o.push(r);return o}getEditor(c){return this.#t.get(c)}addEditor(c){this.#t.set(c.id,c)}removeEditor(c){this.#t.delete(c.id),this.unselect(c)}#E(c){const o=this.#n.get(c.pageIndex);o?o.addOrRebuild(c):this.addEditor(c)}setActiveEditor(c){this.#e!==c&&(this.#e=c,c&&this.#P(c.propertiesToUpdate))}toggleSelected(c){if(this.#a.has(c))return this.#a.delete(c),c.unselect(),void this.#d({hasSelectedEditor:this.hasSelection});this.#a.add(c),c.select(),this.#P(c.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}setSelected(c){for(const o of this.#a)o!==c&&o.unselect();this.#a.clear(),this.#a.add(c),c.select(),this.#P(c.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}isSelected(c){return this.#a.has(c)}unselect(c){c.unselect(),this.#a.delete(c),this.#d({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#a.size}undo(){this.#r.undo(),this.#d({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#y()})}redo(){this.#r.redo(),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#y()})}addCommands(c){this.#r.add(c),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#y()})}#y(){if(0===this.#t.size)return!0;if(1===this.#t.size)for(const c of this.#t.values())return c.isEmpty();return!1}delete(){if(this.#e&&this.#e.commitOrRemove(),!this.hasSelection)return;const c=[...this.#a];this.addCommands({cmd:()=>{for(const A of c)A.remove()},undo:()=>{for(const A of c)this.#E(A)},mustExec:!0})}copy(){if(this.#e&&this.#e.commitOrRemove(),this.hasSelection){const c=[];for(const o of this.#a)o.isEmpty()||c.push(o);if(0===c.length)return;this.#i.copy(c),this.#d({hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(this.#i.isEmpty())return;this.unselectAll();const c=this.#n.get(this.#c),o=this.#i.paste().map(y=>c.deserialize(y));this.addCommands({cmd:()=>{for(const y of o)this.#E(y);this.#A(o)},undo:()=>{for(const y of o)y.remove()},mustExec:!0})}#A(c){this.#a.clear();for(const o of c)o.isEmpty()||(this.#a.add(o),o.select());this.#d({hasSelectedEditor:!0})}selectAll(){for(const c of this.#a)c.commit();this.#A(this.#t.values())}unselectAll(){if(this.#e)this.#e.commitOrRemove();else if(0!==this.#A.size){for(const c of this.#a)c.unselect();this.#a.clear(),this.#d({hasSelectedEditor:!1})}}isActive(c){return this.#e===c}getActive(){return this.#e}getMode(){return this.#l}}u.AnnotationEditorUIManager=l},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=function _(R){console.log("Deprecated API usage: "+R)},u.getColorValues=function te(R){const I=document.createElement("span");I.style.visibility="hidden",document.body.append(I);for(const M of R.keys()){I.style.color=M;const T=window.getComputedStyle(I).color;R.set(M,V(T))}I.remove()},u.getCurrentTransform=function Z(R){const{a:I,b:M,c:T,d:m,e:n,f:h}=R.getTransform();return[I,M,T,m,n,h]},u.getCurrentTransformInverse=function P(R){const{a:I,b:M,c:T,d:m,e:n,f:h}=R.getTransform().invertSelf();return[I,M,T,m,n,h]},u.getFilenameFromUrl=function y(R){const I=R.indexOf("#"),M=R.indexOf("?"),T=Math.min(I>0?I:R.length,M>0?M:R.length);return R.substring(R.lastIndexOf("/",T)+1,T)},u.getPdfFilenameFromUrl=function b(R,I="document.pdf"){if("string"!=typeof R)return I;if(r(R))return(0,x.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),I;const T=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,m=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(R);let n=T.exec(m[1])||T.exec(m[2])||T.exec(m[3]);if(n&&(n=n[0],n.includes("%")))try{n=T.exec(decodeURIComponent(n))[0]}catch{}return n||I},u.getRGB=V,u.getXfaPageViewport=function j(R,{scale:I=1,rotation:M=0}){const{width:T,height:m}=R.attributes.style,n=[0,0,parseInt(T),parseInt(m)];return new c({viewBox:n,scale:I,rotation:M})},u.isDataScheme=r,u.isPdfFile=function A(R){return"string"==typeof R&&/\.pdf$/i.test(R)},u.isValidFetchUrl=e,u.loadScript=function i(R,I=!1){return new Promise((M,T)=>{const m=document.createElement("script");m.src=R,m.onload=function(n){I&&m.remove(),M(n)},m.onerror=function(){T(new Error(`Cannot load script at: ${m.src}`))},(document.head||document.documentElement).append(m)})};var p=N(9),x=N(1);function s(R){return f.apply(this,arguments)}function f(){return(f=_asyncToGenerator(function*(R,I=!1){if(e(R,document.baseURI)){const M=yield fetch(R);if(!M.ok)throw new Error(M.statusText);return I?new Uint8Array(yield M.arrayBuffer()):(0,x.stringToBytes)(yield M.text())}return new Promise((M,T)=>{const m=new XMLHttpRequest;m.open("GET",R,!0),I&&(m.responseType="arraybuffer"),m.onreadystatechange=()=>{if(m.readyState===XMLHttpRequest.DONE){if(200===m.status||0===m.status){let n;if(I&&m.response?n=new Uint8Array(m.response):!I&&m.responseText&&(n=(0,x.stringToBytes)(m.responseText)),n)return void M(n)}T(new Error(m.statusText))}},m.send(null)})})).apply(this,arguments)}u.AnnotationPrefix="pdfjs_internal_id_",u.PixelsPerInch=class q{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},u.DOMCanvasFactory=class w extends p.BaseCanvasFactory{constructor({ownerDocument:I=globalThis.document}={}){super(),this._document=I}_createCanvas(I,M){const T=this._document.createElement("canvas");return T.width=I,T.height=M,T}},u.DOMCMapReaderFactory=class a extends p.BaseCMapReaderFactory{_fetchData(I,M){return s(I,this.isCompressed).then(T=>({cMapData:T,compressionType:M}))}},u.DOMStandardFontDataFactory=class l extends p.BaseStandardFontDataFactory{_fetchData(I){return s(I,!0)}},u.DOMSVGFactory=class S extends p.BaseSVGFactory{_createSVG(I){return document.createElementNS("http://www.w3.org/2000/svg",I)}};class c{constructor({viewBox:I,scale:M,rotation:T,offsetX:m=0,offsetY:n=0,dontFlip:h=!1}){this.viewBox=I,this.scale=M,this.rotation=T,this.offsetX=m,this.offsetY=n;const C=(I[2]+I[0])/2,v=(I[3]+I[1])/2;let t,g,E,O,D,W,z,X;switch((T%=360)<0&&(T+=360),T){case 180:t=-1,g=0,E=0,O=1;break;case 90:t=0,g=1,E=1,O=0;break;case 270:t=0,g=-1,E=-1,O=0;break;case 0:t=1,g=0,E=0,O=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(E=-E,O=-O),0===t?(D=Math.abs(v-I[1])*M+m,W=Math.abs(C-I[0])*M+n,z=Math.abs(I[3]-I[1])*M,X=Math.abs(I[2]-I[0])*M):(D=Math.abs(C-I[0])*M+m,W=Math.abs(v-I[1])*M+n,z=Math.abs(I[2]-I[0])*M,X=Math.abs(I[3]-I[1])*M),this.transform=[t*M,g*M,E*M,O*M,D-t*M*C-E*M*v,W-g*M*C-O*M*v],this.width=z,this.height=X}clone({scale:I=this.scale,rotation:M=this.rotation,offsetX:T=this.offsetX,offsetY:m=this.offsetY,dontFlip:n=!1}={}){return new c({viewBox:this.viewBox.slice(),scale:I,rotation:M,offsetX:T,offsetY:m,dontFlip:n})}convertToViewportPoint(I,M){return x.Util.applyTransform([I,M],this.transform)}convertToViewportRectangle(I){const M=x.Util.applyTransform([I[0],I[1]],this.transform),T=x.Util.applyTransform([I[2],I[3]],this.transform);return[M[0],M[1],T[0],T[1]]}convertToPdfPoint(I,M){return x.Util.applyInverseTransform([I,M],this.transform)}}function r(R){const I=R.length;let M=0;for(;M<I&&""===R[M].trim();)M++;return"data:"===R.substring(M,M+5).toLowerCase()}function e(R,I){try{const{protocol:M}=I?new URL(R,I):new URL(R);return"http:"===M||"https:"===M}catch{return!1}}let L;function V(R){if(R.startsWith("#")){const I=parseInt(R.slice(1),16);return[(16711680&I)>>16,(65280&I)>>8,255&I]}return R.startsWith("rgb(")?R.slice(4,-1).split(",").map(I=>parseInt(I)):R.startsWith("rgba(")?R.slice(5,-1).split(",").map(I=>parseInt(I)).slice(0,3):((0,x.warn)(`Not a valid color format: "${R}"`),[0,0,0])}u.PageViewport=c,u.RenderingCancelledException=class o extends x.BaseException{constructor(I,M){super(I,"RenderingCancelledException"),this.type=M}},u.StatTimer=class d{constructor(){this.started=Object.create(null),this.times=[]}time(I){I in this.started&&(0,x.warn)(`Timer is already running for ${I}`),this.started[I]=Date.now()}timeEnd(I){I in this.started||(0,x.warn)(`Timer has not been started for ${I}`),this.times.push({name:I,start:this.started[I],end:Date.now()}),delete this.started[I]}toString(){const I=[];let M=0;for(const T of this.times){const m=T.name;m.length>M&&(M=m.length)}for(const T of this.times){const m=T.end-T.start;I.push(`${T.name.padEnd(M)} ${m}ms\n`)}return I.join("")}},u.PDFDateString=class F{static toDateObject(I){if(!I||"string"!=typeof I)return null;L||(L=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const M=L.exec(I);if(!M)return null;const T=parseInt(M[1],10);let m=parseInt(M[2],10);m=m>=1&&m<=12?m-1:0;let n=parseInt(M[3],10);n=n>=1&&n<=31?n:1;let h=parseInt(M[4],10);h=h>=0&&h<=23?h:0;let C=parseInt(M[5],10);C=C>=0&&C<=59?C:0;let v=parseInt(M[6],10);v=v>=0&&v<=59?v:0;const t=M[7]||"Z";let g=parseInt(M[8],10);g=g>=0&&g<=23?g:0;let E=parseInt(M[9],10)||0;return E=E>=0&&E<=59?E:0,"-"===t?(h+=g,C+=E):"+"===t&&(h-=g,C-=E),new Date(Date.UTC(T,m,n,h,C,v))}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var p=N(1);class x{constructor(){this.constructor===x&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(s,f){if(s<=0||f<=0)throw new Error("Invalid canvas size");const a=this._createCanvas(s,f);return{canvas:a,context:a.getContext("2d")}}reset(s,f,a){if(!s.canvas)throw new Error("Canvas is not specified");if(f<=0||a<=0)throw new Error("Invalid canvas size");s.canvas.width=f,s.canvas.height=a}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}_createCanvas(s,f){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=x;class k{constructor({baseUrl:s=null,isCompressed:f=!1}){this.constructor===k&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=s,this.isCompressed=f}fetch({name:s}){var f=this;return _asyncToGenerator(function*(){if(!f.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const a=f.baseUrl+s+(f.isCompressed?".bcmap":"");return f._fetchData(a,f.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE).catch(S=>{throw new Error(`Unable to load ${f.isCompressed?"binary ":""}CMap at: ${a}`)})})()}_fetchData(s,f){(0,p.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=k;class U{constructor({baseUrl:s=null}){this.constructor===U&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=s}fetch({filename:s}){var f=this;return _asyncToGenerator(function*(){if(!f.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!s)throw new Error("Font filename must be specified.");const a=`${f.baseUrl}${s}`;return f._fetchData(a).catch(l=>{throw new Error(`Unable to load font data at: ${a}`)})})()}_fetchData(s){(0,p.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=U;class q{constructor(){this.constructor===q&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(s,f,a=!1){if(s<=0||f<=0)throw new Error("Invalid SVG dimensions");const l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),a||(l.setAttribute("width",`${s}px`),l.setAttribute("height",`${f}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${s} ${f}`),l}createElement(s){if("string"!=typeof s)throw new Error("Invalid SVG element type");return this._createSVG(s)}_createSVG(s){(0,p.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=q},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var p=N(1);const x=3285377520,k=4294901760,U=65535;u.MurmurHash3_64=class q{constructor(s){this.h1=s?4294967295&s:x,this.h2=s?4294967295&s:x}update(s){let f,a;if("string"==typeof s){f=new Uint8Array(2*s.length),a=0;for(let _=0,L=s.length;_<L;_++){const F=s.charCodeAt(_);F<=255?f[a++]=F:(f[a++]=F>>>8,f[a++]=255&F)}}else{if(!(0,p.isArrayBuffer)(s))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");f=s.slice(),a=f.byteLength}const l=a>>2,S=a-4*l,c=new Uint32Array(f.buffer,0,l);let o=0,r=0,A=this.h1,y=this.h2;const b=3432918353,d=461845907,e=b&U,i=d&U;for(let _=0;_<l;_++)1&_?(o=c[_],o=o*b&k|o*e&U,o=o<<15|o>>>17,o=o*d&k|o*i&U,A^=o,A=A<<13|A>>>19,A=5*A+3864292196):(r=c[_],r=r*b&k|r*e&U,r=r<<15|r>>>17,r=r*d&k|r*i&U,y^=r,y=y<<13|y>>>19,y=5*y+3864292196);switch(o=0,S){case 3:o^=f[4*l+2]<<16;case 2:o^=f[4*l+1]<<8;case 1:o^=f[4*l],o=o*b&k|o*e&U,o=o<<15|o>>>17,o=o*d&k|o*i&U,1&l?A^=o:y^=o}this.h1=A,this.h2=y}hexdigest(){let s=this.h1,f=this.h2;s^=f>>>1,s=3981806797*s&k|36045*s&U,f=4283543511*f&k|(2950163797*(f<<16|s>>>16)&k)>>>16,s^=f>>>1,s=444984403*s&k|60499*s&U,f=3301882366*f&k|(3120437893*(f<<16|s>>>16)&k)>>>16,s^=f>>>1;const a=(s>>>0).toString(16),l=(f>>>0).toString(16);return a.padStart(8,"0")+l.padStart(8,"0")}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var p=N(1);class x{constructor({docId:w,onUnsupportedFeature:s,ownerDocument:f=globalThis.document,styleElement:a=null}){this.constructor===x&&(0,p.unreachable)("Cannot initialize BaseFontLoader."),this.docId=w,this._onUnsupportedFeature=s,this._document=f,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(w){this.nativeFontFaces.push(w),this._document.fonts.add(w)}insertRule(w){let s=this.styleElement;s||(s=this.styleElement=this._document.createElement("style"),s.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(s));const f=s.sheet;f.insertRule(w,f.cssRules.length)}clear(){for(const w of this.nativeFontFaces)this._document.fonts.delete(w);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(w){var s=this;return _asyncToGenerator(function*(){if(w.attached||w.missingFile)return;if(w.attached=!0,s.isFontLoadingAPISupported){const a=w.createNativeFontFace();if(a){s.addNativeFontFace(a);try{yield a.loaded}catch(l){throw s._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,p.warn)(`Failed to load font '${a.family}': '${l}'.`),w.disableFontFace=!0,l}}return}const f=w.createFontFaceRule();if(f){if(s.insertRule(f),s.isSyncFontLoadingSupported)return;yield new Promise(a=>{const l=s._queueLoadingCallback(a);s._prepareFontLoadEvent([f],[w],l)})}})()}_queueLoadingCallback(w){(0,p.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,p.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,p.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,p.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(w,s,f){(0,p.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let k;u.FontLoader=k,u.FontLoader=k=class extends x{constructor(w){super(w),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let w=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(w=!0),(0,p.shadow)(this,"isSyncFontLoadingSupported",w)}_queueLoadingCallback(w){const f=this.loadingContext,a={id:"pdfjs-font-loading-"+f.nextRequestId++,done:!1,complete:function s(){for((0,p.assert)(!a.done,"completeRequest() cannot be called twice."),a.done=!0;f.requests.length>0&&f.requests[0].done;){const l=f.requests.shift();setTimeout(l.callback,0)}},callback:w};return f.requests.push(a),a}get _loadTestFont(){return(0,p.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(w,s,f){function a(Z,P){return Z.charCodeAt(P)<<24|Z.charCodeAt(P+1)<<16|Z.charCodeAt(P+2)<<8|255&Z.charCodeAt(P+3)}function l(Z,P,R,I){return Z.substring(0,P)+I+Z.substring(P+R)}let S,c;const o=this._document.createElement("canvas");o.width=1,o.height=1;const r=o.getContext("2d");let A=0;const b=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=l(d,976,b.length,b);const _=1482184792;let L=a(d,16);for(S=0,c=b.length-3;S<c;S+=4)L=L-_+a(b,S)|0;S<b.length&&(L=L-_+a(b+"XXX",S)|0),d=l(d,16,4,(0,p.string32)(L));const F=`url(data:font/opentype;base64,${btoa(d)});`;this.insertRule(`@font-face {font-family:"${b}";src:${F}}`);const V=[];for(const Z of s)V.push(Z.loadedName);V.push(b);const te=this._document.createElement("div");te.style.visibility="hidden",te.style.width=te.style.height="10px",te.style.position="absolute",te.style.top=te.style.left="0px";for(const Z of V){const P=this._document.createElement("span");P.textContent="Hi",P.style.fontFamily=Z,te.append(P)}this._document.body.append(te),function y(Z,P){if(A++,A>30)return(0,p.warn)("Load test font never loaded."),void P();r.font="30px "+Z,r.fillText(".",0,20),r.getImageData(0,0,1,1).data[3]>0?P():setTimeout(y.bind(null,Z,P))}(b,()=>{te.remove(),f.complete()})}},u.FontFaceObject=class U{constructor(w,{isEvalSupported:s=!0,disableFontFace:f=!1,ignoreErrors:a=!1,onUnsupportedFeature:l,fontRegistry:S=null}){this.compiledGlyphs=Object.create(null);for(const c in w)this[c]=w[c];this.isEvalSupported=!1!==s,this.disableFontFace=!0===f,this.ignoreErrors=!0===a,this._onUnsupportedFeature=l,this.fontRegistry=S}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let w;if(this.cssFontInfo){const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),w=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}else w=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),w}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const w=(0,p.bytesToString)(this.data),s=`url(data:${this.mimetype};base64,${btoa(w)});`;let f;if(this.cssFontInfo){let a=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(a+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${a}src:${s}}`}else f=`@font-face {font-family:"${this.loadedName}";src:${s}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,s),f}getPathGenerator(w,s){if(void 0!==this.compiledGlyphs[s])return this.compiledGlyphs[s];let f;try{f=w.get(this.loadedName+"_path_"+s)}catch(a){if(!this.ignoreErrors)throw a;return this._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,p.warn)(`getPathGenerator - ignoring character: "${a}".`),this.compiledGlyphs[s]=function(l,S){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const a=[];for(const l of f){const S=void 0!==l.args?l.args.join(","):"";a.push("c.",l.cmd,"(",S,");\n")}return this.compiledGlyphs[s]=new Function("c","size",a.join(""))}return this.compiledGlyphs[s]=function(a,l){for(const S of f)"scale"===S.cmd&&(S.args=[l,-l]),a[S.cmd].apply(a,S.args)}}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var p=N(8),x=N(1),k=N(13),U=N(14),q=N(3);const f=4096,S=q.isNodeJS&&typeof Path2D>"u"?-1:1e3,c=16;class r{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,h,C){let v;return void 0!==this.cache[n]?(v=this.cache[n],this.canvasFactory.reset(v,h,C)):(v=this.canvasFactory.create(h,C),this.cache[n]=v),v}delete(n){delete this.cache[n]}clear(){for(const n in this.cache)this.canvasFactory.destroy(this.cache[n]),delete this.cache[n]}}function A(m,n,h,C,v,t,g,E,O,D){const[W,z,X,K,B,Y]=(0,p.getCurrentTransform)(m);if(0===z&&0===X){const $=Math.round(g*W+B),ae=Math.round(E*K+Y),ce=Math.abs(Math.round((g+O)*W+B)-$)||1,le=Math.abs(Math.round((E+D)*K+Y)-ae)||1;return m.setTransform(Math.sign(W),0,0,Math.sign(K),$,ae),m.drawImage(n,h,C,v,t,0,0,ce,le),m.setTransform(W,z,X,K,B,Y),[ce,le]}if(0===W&&0===K){const $=Math.round(E*X+B),ae=Math.round(g*z+Y),ce=Math.abs(Math.round((E+D)*X+B)-$)||1,le=Math.abs(Math.round((g+O)*z+Y)-ae)||1;return m.setTransform(0,Math.sign(z),Math.sign(X),0,$,ae),m.drawImage(n,h,C,v,t,0,0,le,ce),m.setTransform(W,z,X,K,B,Y),[le,ce]}return m.drawImage(n,h,C,v,t,g,E,O,D),[Math.hypot(W,z)*O,Math.hypot(X,K)*D]}class b{constructor(n,h){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=x.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=x.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,n,h])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,h){this.x=n,this.y=h}updatePathMinMax(n,h,C){[h,C]=x.Util.applyTransform([h,C],n),this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,C),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,C)}updateRectMinMax(n,h){const C=x.Util.applyTransform(h,n),v=x.Util.applyTransform(h.slice(2),n);this.minX=Math.min(this.minX,C[0],v[0]),this.minY=Math.min(this.minY,C[1],v[1]),this.maxX=Math.max(this.maxX,C[0],v[0]),this.maxY=Math.max(this.maxY,C[1],v[1])}updateScalingPathMinMax(n,h){x.Util.scaleMinMax(n,h),this.minX=Math.min(this.minX,h[0]),this.maxX=Math.max(this.maxX,h[1]),this.minY=Math.min(this.minY,h[2]),this.maxY=Math.max(this.maxY,h[3])}updateCurvePathMinMax(n,h,C,v,t,g,E,O,D,W){const z=x.Util.bezierBoundingBox(h,C,v,t,g,E,O,D);if(W)return W[0]=Math.min(W[0],z[0],z[2]),W[1]=Math.max(W[1],z[0],z[2]),W[2]=Math.min(W[2],z[1],z[3]),void(W[3]=Math.max(W[3],z[1],z[3]));this.updateRectMinMax(n,z)}getPathBoundingBox(n=k.PathType.FILL,h=null){const C=[this.minX,this.minY,this.maxX,this.maxY];if(n===k.PathType.STROKE){h||(0,x.unreachable)("Stroke bounding box must include transform.");const v=x.Util.singularValueDecompose2dScale(h),t=v[0]*this.lineWidth/2,g=v[1]*this.lineWidth/2;C[0]-=t,C[1]-=g,C[2]+=t,C[3]+=g}return C}updateClipFromPath(){const n=x.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=k.PathType.FILL,h=null){return x.Util.intersect(this.clipBox,this.getPathBoundingBox(n,h))}}function d(m,n,h=null){if(typeof ImageData<"u"&&n instanceof ImageData)return void m.putImageData(n,0,0);const C=n.height,v=n.width,t=C%c,g=(C-t)/c,E=0===t?g:g+1,O=m.createImageData(v,c);let W,D=0;const z=n.data,X=O.data;let K,B,Y,H,G,ee,$,ne;if(h)switch(h.length){case 1:G=h[0],ee=h[0],$=h[0],ne=h[0];break;case 4:G=h[0],ee=h[1],$=h[2],ne=h[3]}if(n.kind===x.ImageKind.GRAYSCALE_1BPP){const ae=z.byteLength,ie=new Uint32Array(X.buffer,0,X.byteLength>>2),ce=ie.length,he=v+7>>3;let le=4294967295,ue=x.FeatureTest.isLittleEndian?4278190080:255;for(ne&&255===ne[0]&&0===ne[255]&&([le,ue]=[ue,le]),K=0;K<E;K++){for(Y=K<g?c:t,W=0,B=0;B<Y;B++){const fe=ae-D;let me=0;const _e=fe>he?v:8*fe-7,Pe=-8&_e;let ye=0,be=0;for(;me<Pe;me+=8)be=z[D++],ie[W++]=128&be?le:ue,ie[W++]=64&be?le:ue,ie[W++]=32&be?le:ue,ie[W++]=16&be?le:ue,ie[W++]=8&be?le:ue,ie[W++]=4&be?le:ue,ie[W++]=2&be?le:ue,ie[W++]=1&be?le:ue;for(;me<_e;me++)0===ye&&(be=z[D++],ye=128),ie[W++]=be&ye?le:ue,ye>>=1}for(;W<ce;)ie[W++]=0;m.putImageData(O,0,K*c)}}else if(n.kind===x.ImageKind.RGBA_32BPP){const ae=!!(G||ee||$);for(B=0,H=v*c*4,K=0;K<g;K++){if(X.set(z.subarray(D,D+H)),D+=H,ae)for(let ie=0;ie<H;ie+=4)G&&(X[ie+0]=G[X[ie+0]]),ee&&(X[ie+1]=ee[X[ie+1]]),$&&(X[ie+2]=$[X[ie+2]]);m.putImageData(O,0,B),B+=c}if(K<E){if(H=v*t*4,X.set(z.subarray(D,D+H)),ae)for(let ie=0;ie<H;ie+=4)G&&(X[ie+0]=G[X[ie+0]]),ee&&(X[ie+1]=ee[X[ie+1]]),$&&(X[ie+2]=$[X[ie+2]]);m.putImageData(O,0,B)}}else{if(n.kind!==x.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${n.kind}`);{const ae=!!(G||ee||$);for(Y=c,H=v*Y,K=0;K<E;K++){for(K>=g&&(Y=t,H=v*Y),W=0,B=H;B--;)X[W++]=z[D++],X[W++]=z[D++],X[W++]=z[D++],X[W++]=255;if(ae)for(let ie=0;ie<W;ie+=4)G&&(X[ie+0]=G[X[ie+0]]),ee&&(X[ie+1]=ee[X[ie+1]]),$&&(X[ie+2]=$[X[ie+2]]);m.putImageData(O,0,K*c)}}}}function e(m,n){if(n.bitmap)return void m.drawImage(n.bitmap,0,0);const h=n.height,C=n.width,v=h%c,t=(h-v)/c,g=0===v?t:t+1,E=m.createImageData(C,c);let O=0;const D=n.data,W=E.data;for(let z=0;z<g;z++){const X=z<t?c:v;({srcPos:O}=(0,U.applyMaskImageData)({src:D,srcPos:O,dest:W,width:C,height:X})),m.putImageData(E,0,z*c)}}function i(m,n){const h=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let C=0,v=h.length;C<v;C++){const t=h[C];void 0!==m[t]&&(n[t]=m[t])}void 0!==m.setLineDash&&(n.setLineDash(m.getLineDash()),n.lineDashOffset=m.lineDashOffset)}function _(m,n){m.strokeStyle=m.fillStyle=n||"#000000",m.fillRule="nonzero",m.globalAlpha=1,m.lineWidth=1,m.lineCap="butt",m.lineJoin="miter",m.miterLimit=10,m.globalCompositeOperation="source-over",m.font="10px sans-serif",void 0!==m.setLineDash&&(m.setLineDash([]),m.lineDashOffset=0)}function L(m,n,h,C){const v=m.length;for(let t=3;t<v;t+=4){const g=m[t];if(0===g)m[t-3]=n,m[t-2]=h,m[t-1]=C;else if(g<255){const E=255-g;m[t-3]=m[t-3]*g+n*E>>8,m[t-2]=m[t-2]*g+h*E>>8,m[t-1]=m[t-1]*g+C*E>>8}}}function F(m,n,h){const C=m.length;for(let t=3;t<C;t+=4)n[t]=n[t]*(h?h[m[t]]:m[t])*.00392156862745098|0}function j(m,n,h){const C=m.length;for(let v=3;v<C;v+=4){const t=77*m[v-3]+152*m[v-2]+28*m[v-1];n[v]=h?n[v]*h[t>>8]>>8:n[v]*t>>16}}function Z(m,n){const h=x.Util.singularValueDecompose2dScale(m);h[0]=Math.fround(h[0]),h[1]=Math.fround(h[1]);const C=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==n?n:h[0]<=C||h[1]<=C}const P=["butt","round","square"],R=["miter","round","bevel"],I={},M={};class T{constructor(n,h,C,v,t,g,E,O){this.ctx=n,this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=C,this.canvasFactory=v,this.imageLayer=t,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=g,this.cachedCanvases=new r(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=E,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=O?.background||null,this.foregroundColor=O?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,h=null){return"string"==typeof n?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):h}beginDrawing({transform:n,viewport:h,transparency:C=!1,background:v=null}){const t=this.ctx.canvas.width,g=this.ctx.canvas.height,E=v||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const O=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const D=this.backgroundColor=this.ctx.fillStyle;let W=!0,z=E;if(this.ctx.fillStyle=E,z=this.ctx.fillStyle,W="string"==typeof z&&/^#[0-9A-Fa-f]{6}$/.test(z),"#000000"===O&&"#ffffff"===D||O===D||!W)this.foregroundColor=this.backgroundColor=null;else{const[X,K,B]=(0,p.getRGB)(z),Y=G=>(G/=255)<=.03928?G/12.92:((G+.055)/1.055)**2.4,H=Math.round(.2126*Y(X)+.7152*Y(K)+.0722*Y(B));this.selectColor=(G,ee,$)=>{const ne=.2126*Y(G)+.7152*Y(ee)+.0722*Y($);return Math.round(ne)===H?D:O}}}if(this.ctx.fillStyle=this.backgroundColor||E,this.ctx.fillRect(0,0,t,g),this.ctx.restore(),C){const O=this.cachedCanvases.getCanvas("transparent",t,g);this.compositeCtx=this.ctx,this.transparentCanvas=O.canvas,this.ctx=O.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),_(this.ctx,this.foregroundColor),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...h.transform),this.viewportScale=h.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx),this.imageLayer&&((0,p.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(n,h,C,v){const t=n.argsArray,g=n.fnArray;let E=h||0;const O=t.length;if(O===E)return E;const D=O-E>10&&"function"==typeof C,W=D?Date.now()+15:0;let z=0;const X=this.commonObjs,K=this.objs;let B;for(;;){if(void 0!==v&&E===v.nextBreakPoint)return v.breakIt(E,C),E;if(B=g[E],B!==x.OPS.dependency)this[B].apply(this,t[E]);else for(const Y of t[E]){const H=Y.startsWith("g_")?X:K;if(!H.has(Y))return H.get(Y,C),E}if(E++,E===O)return E;if(D&&++z>10){if(Date.now()>W)return C(),E;z=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const h of n.values())typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement&&(h.width=h.height=0);n.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(n,h){const C=n.width,v=n.height;let W,z,t=Math.max(Math.hypot(h[0],h[1]),1),g=Math.max(Math.hypot(h[2],h[3]),1),E=C,O=v,D="prescale1";for(;t>2&&E>1||g>2&&O>1;){let X=E,K=O;t>2&&E>1&&(X=Math.ceil(E/2),t/=E/X),g>2&&O>1&&(K=Math.ceil(O/2),g/=O/K),W=this.cachedCanvases.getCanvas(D,X,K),z=W.context,z.clearRect(0,0,X,K),z.drawImage(n,0,0,E,O,0,0,X,K),n=W.canvas,E=X,O=K,D="prescale1"===D?"prescale2":"prescale1"}return{img:n,paintWidth:E,paintHeight:O}}_createMaskCanvas(n){const h=this.ctx,{width:C,height:v}=n,t=this.current.fillColor,g=this.current.patternFill,E=(0,p.getCurrentTransform)(h);let O,D,W,z;if((n.bitmap||n.data)&&n.count>1){const ce=n.bitmap||n.data.buffer,he=E.slice(0,4);D=JSON.stringify(g?he:[he,t]),O=this._cachedBitmapsMap.get(ce),O||(O=new Map,this._cachedBitmapsMap.set(ce,O));const le=O.get(D);if(le&&!g)return{canvas:le,offsetX:Math.round(Math.min(E[0],E[2])+E[4]),offsetY:Math.round(Math.min(E[1],E[3])+E[5])};W=le}W||(z=this.cachedCanvases.getCanvas("maskCanvas",C,v),e(z.context,n));let X=x.Util.transform(E,[1/C,0,0,-1/v,0,0]);X=x.Util.transform(X,[1,0,0,1,0,-v]);const K=x.Util.applyTransform([0,0],X),B=x.Util.applyTransform([C,v],X),Y=x.Util.normalizeRect([K[0],K[1],B[0],B[1]]),H=Math.round(Y[2]-Y[0])||1,G=Math.round(Y[3]-Y[1])||1,ee=this.cachedCanvases.getCanvas("fillCanvas",H,G),$=ee.context,ne=Math.min(K[0],B[0]),ae=Math.min(K[1],B[1]);$.translate(-ne,-ae),$.transform(...X),W||(W=this._scaleImage(z.canvas,(0,p.getCurrentTransformInverse)($)),W=W.img,O&&g&&O.set(D,W)),$.imageSmoothingEnabled=Z((0,p.getCurrentTransform)($),n.interpolate),A($,W,0,0,W.width,W.height,0,0,C,v),$.globalCompositeOperation="source-in";const ie=x.Util.transform((0,p.getCurrentTransformInverse)($),[1,0,0,1,-ne,-ae]);return $.fillStyle=g?t.getPattern(h,this,ie,k.PathType.FILL):t,$.fillRect(0,0,C,v),O&&!g&&(this.cachedCanvases.delete("fillCanvas"),O.set(D,ee.canvas)),{canvas:ee.canvas,offsetX:Math.round(ne),offsetY:Math.round(ae)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=P[n]}setLineJoin(n){this.ctx.lineJoin=R[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,h){const C=this.ctx;void 0!==C.setLineDash&&(C.setLineDash(n),C.lineDashOffset=h)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(let h=0,C=n.length;h<C;h++){const v=n[h],g=v[1];switch(v[0]){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g[0],g[1]);break;case"CA":this.current.strokeAlpha=v[1];break;case"ca":this.current.fillAlpha=v[1],this.ctx.globalAlpha=v[1];break;case"BM":this.ctx.globalCompositeOperation=g;break;case"SMask":this.current.activeSMask=g?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=g}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const v=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=v.context;const t=this.ctx;t.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,t),function o(m,n){if(m._removeMirroring)throw new Error("Context is already forwarding operations.");m.__originalSave=m.save,m.__originalRestore=m.restore,m.__originalRotate=m.rotate,m.__originalScale=m.scale,m.__originalTranslate=m.translate,m.__originalTransform=m.transform,m.__originalSetTransform=m.setTransform,m.__originalResetTransform=m.resetTransform,m.__originalClip=m.clip,m.__originalMoveTo=m.moveTo,m.__originalLineTo=m.lineTo,m.__originalBezierCurveTo=m.bezierCurveTo,m.__originalRect=m.rect,m.__originalClosePath=m.closePath,m.__originalBeginPath=m.beginPath,m._removeMirroring=()=>{m.save=m.__originalSave,m.restore=m.__originalRestore,m.rotate=m.__originalRotate,m.scale=m.__originalScale,m.translate=m.__originalTranslate,m.transform=m.__originalTransform,m.setTransform=m.__originalSetTransform,m.resetTransform=m.__originalResetTransform,m.clip=m.__originalClip,m.moveTo=m.__originalMoveTo,m.lineTo=m.__originalLineTo,m.bezierCurveTo=m.__originalBezierCurveTo,m.rect=m.__originalRect,m.closePath=m.__originalClosePath,m.beginPath=m.__originalBeginPath,delete m._removeMirroring},m.save=function(){n.save(),this.__originalSave()},m.restore=function(){n.restore(),this.__originalRestore()},m.translate=function(C,v){n.translate(C,v),this.__originalTranslate(C,v)},m.scale=function(C,v){n.scale(C,v),this.__originalScale(C,v)},m.transform=function(C,v,t,g,E,O){n.transform(C,v,t,g,E,O),this.__originalTransform(C,v,t,g,E,O)},m.setTransform=function(C,v,t,g,E,O){n.setTransform(C,v,t,g,E,O),this.__originalSetTransform(C,v,t,g,E,O)},m.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},m.rotate=function(C){n.rotate(C),this.__originalRotate(C)},m.clip=function(C){n.clip(C),this.__originalClip(C)},m.moveTo=function(h,C){n.moveTo(h,C),this.__originalMoveTo(h,C)},m.lineTo=function(h,C){n.lineTo(h,C),this.__originalLineTo(h,C)},m.bezierCurveTo=function(h,C,v,t,g,E){n.bezierCurveTo(h,C,v,t,g,E),this.__originalBezierCurveTo(h,C,v,t,g,E)},m.rect=function(h,C,v,t){n.rect(h,C,v,t),this.__originalRect(h,C,v,t)},m.closePath=function(){n.closePath(),this.__originalClosePath()},m.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}(t,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){this.current.activeSMask&&(n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function te(m,n,h,C){const v=C[0],t=C[1],g=C[2]-v,E=C[3]-t;0===g||0===E||(function V(m,n,h,C,v,t,g,E,O,D,W){const z=!!t,X=z?t[0]:0,K=z?t[1]:0,B=z?t[2]:0;let Y;Y="Luminosity"===v?j:F;const G=Math.min(C,Math.ceil(1048576/h));for(let ee=0;ee<C;ee+=G){const $=Math.min(G,C-ee),ne=m.getImageData(E-D,ee+(O-W),h,$),ae=n.getImageData(E,ee+O,h,$);z&&L(ne.data,X,K,B),Y(ne.data,ae.data,g),n.putImageData(ae,E,ee+O)}}(n.context,h,g,E,n.subtype,n.backdrop,n.transferMap,v,t,n.offsetX,n.offsetY),m.save(),m.globalAlpha=1,m.globalCompositeOperation="source-over",m.setTransform(1,0,0,1,0,0),m.drawImage(h.canvas,0,0),m.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(n,h,C,v,t,g){this.ctx.transform(n,h,C,v,t,g),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(n,h,C){const v=this.ctx,t=this.current;let O,D,g=t.x,E=t.y;const W=(0,p.getCurrentTransform)(v),z=0===W[0]&&0===W[3]||0===W[1]&&0===W[2],X=z?C.slice(0):null;for(let K=0,B=0,Y=n.length;K<Y;K++)switch(0|n[K]){case x.OPS.rectangle:g=h[B++],E=h[B++];const H=h[B++],G=h[B++],ee=g+H,$=E+G;v.moveTo(g,E),0===H||0===G?v.lineTo(ee,$):(v.lineTo(ee,E),v.lineTo(ee,$),v.lineTo(g,$)),z||t.updateRectMinMax(W,[g,E,ee,$]),v.closePath();break;case x.OPS.moveTo:g=h[B++],E=h[B++],v.moveTo(g,E),z||t.updatePathMinMax(W,g,E);break;case x.OPS.lineTo:g=h[B++],E=h[B++],v.lineTo(g,E),z||t.updatePathMinMax(W,g,E);break;case x.OPS.curveTo:O=g,D=E,g=h[B+4],E=h[B+5],v.bezierCurveTo(h[B],h[B+1],h[B+2],h[B+3],g,E),t.updateCurvePathMinMax(W,O,D,h[B],h[B+1],h[B+2],h[B+3],g,E,X),B+=6;break;case x.OPS.curveTo2:O=g,D=E,v.bezierCurveTo(g,E,h[B],h[B+1],h[B+2],h[B+3]),t.updateCurvePathMinMax(W,O,D,g,E,h[B],h[B+1],h[B+2],h[B+3],X),g=h[B+2],E=h[B+3],B+=4;break;case x.OPS.curveTo3:O=g,D=E,g=h[B+2],E=h[B+3],v.bezierCurveTo(h[B],h[B+1],g,E,g,E),t.updateCurvePathMinMax(W,O,D,h[B],h[B+1],g,E,g,E,X),B+=4;break;case x.OPS.closePath:v.closePath()}z&&t.updateScalingPathMinMax(W,X),t.setCurrentPoint(g,E)}closePath(){this.ctx.closePath()}stroke(n){n=!(typeof n<"u")||n;const h=this.ctx,C=this.current.strokeColor;h.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof C&&C?.getPattern?(h.save(),h.strokeStyle=C.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),k.PathType.STROKE),this.rescaleAndStroke(!1),h.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n){n=!(typeof n<"u")||n;const h=this.ctx,C=this.current.fillColor;let t=!1;this.current.patternFill&&(h.save(),h.fillStyle=C.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),k.PathType.FILL),t=!0);const g=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==g&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),t&&h.restore(),n&&this.consumePath(g)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=I}eoClip(){this.pendingClip=M}beginText(){this.current.textMatrix=x.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,h=this.ctx;if(void 0!==n){h.save(),h.beginPath();for(const C of n)h.setTransform(...C.transform),h.translate(C.x,C.y),C.addToPath(h,C.fontSize);h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}else h.beginPath()}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,h){const C=this.commonObjs.get(n),v=this.current;if(!C)throw new Error(`Can't find font for ${n}`);if(v.fontMatrix=C.fontMatrix||x.FONT_IDENTITY_MATRIX,(0===v.fontMatrix[0]||0===v.fontMatrix[3])&&(0,x.warn)("Invalid font matrix for font "+n),h<0?(h=-h,v.fontDirection=-1):v.fontDirection=1,this.current.font=C,this.current.fontSize=h,C.isType3Font)return;let g="normal";C.black?g="900":C.bold&&(g="bold");const E=C.italic?"italic":"normal",O=`"${C.loadedName||"sans-serif"}", ${C.fallbackName}`;let D=h;h<16?D=16:h>100&&(D=100),this.current.fontSizeScale=h/D,this.ctx.font=`${E} ${g} ${D}px ${O}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,h){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=h}setLeadingMoveText(n,h){this.setLeading(-h),this.moveText(n,h)}setTextMatrix(n,h,C,v,t,g){this.current.textMatrix=[n,h,C,v,t,g],this.current.textMatrixScale=Math.hypot(n,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,h,C,v){const t=this.ctx,g=this.current,E=g.font,O=g.textRenderingMode,D=g.fontSize/g.fontSizeScale,W=O&x.TextRenderingMode.FILL_STROKE_MASK,z=!!(O&x.TextRenderingMode.ADD_TO_PATH_FLAG),X=g.patternFill&&!E.missingFile;let K;(E.disableFontFace||z||X)&&(K=E.getPathGenerator(this.commonObjs,n)),E.disableFontFace||X?(t.save(),t.translate(h,C),t.beginPath(),K(t,D),v&&t.setTransform(...v),(W===x.TextRenderingMode.FILL||W===x.TextRenderingMode.FILL_STROKE)&&t.fill(),(W===x.TextRenderingMode.STROKE||W===x.TextRenderingMode.FILL_STROKE)&&t.stroke(),t.restore()):((W===x.TextRenderingMode.FILL||W===x.TextRenderingMode.FILL_STROKE)&&t.fillText(n,h,C),(W===x.TextRenderingMode.STROKE||W===x.TextRenderingMode.FILL_STROKE)&&t.strokeText(n,h,C)),z&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(t),x:h,y:C,fontSize:D,addToPath:K})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const h=n.getImageData(0,0,10,10).data;let C=!1;for(let v=3;v<h.length;v+=4)if(h[v]>0&&h[v]<255){C=!0;break}return(0,x.shadow)(this,"isFontSubpixelAAEnabled",C)}showText(n){const h=this.current,C=h.font;if(C.isType3Font)return this.showType3Text(n);const v=h.fontSize;if(0===v)return;const t=this.ctx,g=h.fontSizeScale,E=h.charSpacing,O=h.wordSpacing,D=h.fontDirection,W=h.textHScale*D,z=n.length,X=C.vertical,K=X?1:-1,B=C.defaultVMetrics,Y=v*h.fontMatrix[0],H=h.textRenderingMode===x.TextRenderingMode.FILL&&!C.disableFontFace&&!h.patternFill;let G;if(t.save(),t.transform(...h.textMatrix),t.translate(h.x,h.y+h.textRise),t.scale(W,D>0?-1:1),h.patternFill){t.save();const ie=h.fillColor.getPattern(t,this,(0,p.getCurrentTransformInverse)(t),k.PathType.FILL);G=(0,p.getCurrentTransform)(t),t.restore(),t.fillStyle=ie}let ee=h.lineWidth;const $=h.textMatrixScale;if(0===$||0===ee){const ie=h.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;(ie===x.TextRenderingMode.STROKE||ie===x.TextRenderingMode.FILL_STROKE)&&(ee=this.getSinglePixelWidth())}else ee/=$;1!==g&&(t.scale(g,g),ee/=g),t.lineWidth=ee;let ae,ne=0;for(ae=0;ae<z;++ae){const ie=n[ae];if("number"==typeof ie){ne+=K*ie*v/1e3;continue}let ce=!1;const he=(ie.isSpace?O:0)+E,le=ie.fontChar,ue=ie.accent;let fe,me,Pe,_e=ie.width;if(X){const ye=ie.vmetric||B,be=-(ie.vmetric?ye[1]:.5*_e)*Y;_e=ye?-ye[0]:_e,fe=be/g,me=(ne+ye[2]*Y)/g}else fe=ne/g,me=0;if(C.remeasure&&_e>0){const ye=1e3*t.measureText(le).width/v*g;if(_e<ye&&this.isFontSubpixelAAEnabled){const be=_e/ye;ce=!0,t.save(),t.scale(be,1),fe/=be}else _e!==ye&&(fe+=(_e-ye)/2e3*v/g)}this.contentVisible&&(ie.isInFont||C.missingFile)&&(H&&!ue?t.fillText(le,fe,me):(this.paintChar(le,fe,me,G),ue&&this.paintChar(ue.fontChar,fe+v*ue.offset.x/g,me-v*ue.offset.y/g,G))),Pe=X?_e*Y-he*D:_e*Y+he*D,ne+=Pe,ce&&t.restore()}X?h.y-=ne:h.x+=ne*W,t.restore(),this.compose()}showType3Text(n){const h=this.ctx,C=this.current,v=C.font,t=C.fontSize,g=C.fontDirection,E=v.vertical?1:-1,O=C.charSpacing,D=C.wordSpacing,W=C.textHScale*g,z=C.fontMatrix||x.FONT_IDENTITY_MATRIX,X=n.length;let B,Y,H,G;if(C.textRenderingMode!==x.TextRenderingMode.INVISIBLE&&0!==t){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,h.save(),h.transform(...C.textMatrix),h.translate(C.x,C.y),h.scale(W,g),B=0;B<X;++B){if(Y=n[B],"number"==typeof Y){G=E*Y*t/1e3,this.ctx.translate(G,0),C.x+=G*W;continue}const ee=(Y.isSpace?D:0)+O,$=v.charProcOperatorList[Y.operatorListId];$?(this.contentVisible&&(this.processingType3=Y,this.save(),h.scale(t,t),h.transform(...z),this.executeOperatorList($),this.restore()),H=x.Util.applyTransform([Y.width,0],z)[0]*t+ee,h.translate(H,0),C.x+=H*W):(0,x.warn)(`Type3 character "${Y.operatorListId}" is not available.`)}h.restore(),this.processingType3=null}}setCharWidth(n,h){}setCharWidthAndBounds(n,h,C,v,t,g){this.ctx.rect(C,v,t-C,g-v),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let h;if("TilingPattern"===n[0]){const C=n[1],v=this.baseTransform||(0,p.getCurrentTransform)(this.ctx);h=new k.TilingPattern(n,C,this.ctx,{createCanvasGraphics:g=>new T(g,this.commonObjs,this.objs,this.canvasFactory)},v)}else h=this._getPattern(n[1],n[2]);return h}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,h,C){const v=this.selectColor?.(n,h,C)||x.Util.makeHexColor(n,h,C);this.ctx.strokeStyle=v,this.current.strokeColor=v}setFillRGBColor(n,h,C){const v=this.selectColor?.(n,h,C)||x.Util.makeHexColor(n,h,C);this.ctx.fillStyle=v,this.current.fillColor=v,this.current.patternFill=!1}_getPattern(n,h=null){let C;return this.cachedPatterns.has(n)?C=this.cachedPatterns.get(n):(C=(0,k.getShadingPattern)(this.objs.get(n)),this.cachedPatterns.set(n,C)),h&&(C.matrix=h),C}shadingFill(n){if(!this.contentVisible)return;const h=this.ctx;this.save();const C=this._getPattern(n);h.fillStyle=C.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),k.PathType.SHADING);const v=(0,p.getCurrentTransformInverse)(h);if(v){const t=h.canvas,g=t.width,E=t.height,O=x.Util.applyTransform([0,0],v),D=x.Util.applyTransform([0,E],v),W=x.Util.applyTransform([g,0],v),z=x.Util.applyTransform([g,E],v),X=Math.min(O[0],D[0],W[0],z[0]),K=Math.min(O[1],D[1],W[1],z[1]),B=Math.max(O[0],D[0],W[0],z[0]),Y=Math.max(O[1],D[1],W[1],z[1]);this.ctx.fillRect(X,K,B-X,Y-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,x.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,x.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,h){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&6===n.length&&this.transform(...n),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),h)&&(this.ctx.rect(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),h),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const h=this.ctx;n.isolated||(0,x.info)("TODO: Support non-isolated groups."),n.knockout&&(0,x.warn)("Knockout groups not supported.");const C=(0,p.getCurrentTransform)(h);if(n.matrix&&h.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let v=x.Util.getAxialAlignedBoundingBox(n.bbox,(0,p.getCurrentTransform)(h));v=x.Util.intersect(v,[0,0,h.canvas.width,h.canvas.height])||[0,0,0,0];const g=Math.floor(v[0]),E=Math.floor(v[1]);let O=Math.max(Math.ceil(v[2])-g,1),D=Math.max(Math.ceil(v[3])-E,1),W=1,z=1;O>f&&(W=O/f,O=f),D>f&&(z=D/f,D=f),this.current.startNewPathAndClipBox([0,0,O,D]);let X="groupAt"+this.groupLevel;n.smask&&(X+="_smask_"+this.smaskCounter++%2);const K=this.cachedCanvases.getCanvas(X,O,D),B=K.context;B.scale(1/W,1/z),B.translate(-g,-E),B.transform(...C),n.smask?this.smaskStack.push({canvas:K.canvas,context:B,offsetX:g,offsetY:E,scaleX:W,scaleY:z,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(h.setTransform(1,0,0,1,0,0),h.translate(g,E),h.scale(W,z),h.save()),i(h,B),this.ctx=B,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(h),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const h=this.ctx,C=this.groupStack.pop();if(this.ctx=C,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const v=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...v);const t=x.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],v);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(t)}}beginAnnotation(n,h,C,v,t){if(this.#e(),_(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(h)&&4===h.length){const g=h[2]-h[0],E=h[3]-h[1];if(t&&this.annotationCanvasMap){(C=C.slice())[4]-=h[0],C[5]-=h[1],(h=h.slice())[0]=h[1]=0,h[2]=g,h[3]=E;const[O,D]=x.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:W}=this,z=Math.ceil(g*this.outputScaleX*W),X=Math.ceil(E*this.outputScaleY*W);this.annotationCanvas=this.canvasFactory.create(z,X);const{canvas:K,context:B}=this.annotationCanvas;this.annotationCanvasMap.set(n,K),this.annotationCanvas.savedCtx=this.ctx,this.ctx=B,this.ctx.setTransform(O,0,0,-D,0,E*D),_(this.ctx,this.foregroundColor)}else _(this.ctx,this.foregroundColor),this.ctx.rect(h[0],h[1],g,E),this.ctx.clip(),this.endPath()}this.current=new b(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...C),this.transform(...v)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const h=n.count;(n=this.getObject(n.data,n)).count=h;const C=this.ctx,v=this.processingType3;if(v&&(void 0===v.compiled&&(v.compiled=function y(m){const{width:n,height:h}=m;if(n>S||h>S)return null;const v=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),t=n+1;let E,O,D,g=new Uint8Array(t*(h+1));const W=n+7&-8;let z=new Uint8Array(W*h),X=0;for(const G of m.data){let ee=128;for(;ee>0;)z[X++]=G&ee?0:255,ee>>=1}let K=0;for(X=0,0!==z[X]&&(g[0]=1,++K),O=1;O<n;O++)z[X]!==z[X+1]&&(g[O]=z[X]?2:1,++K),X++;for(0!==z[X]&&(g[O]=2,++K),E=1;E<h;E++){X=E*W,D=E*t,z[X-W]!==z[X]&&(g[D]=z[X]?1:8,++K);let G=(z[X]?4:0)+(z[X-W]?8:0);for(O=1;O<n;O++)G=(G>>2)+(z[X+1]?4:0)+(z[X-W+1]?8:0),v[G]&&(g[D+O]=v[G],++K),X++;if(z[X-W]!==z[X]&&(g[D+O]=z[X]?2:4,++K),K>1e3)return null}for(X=W*(h-1),D=E*t,0!==z[X]&&(g[D]=8,++K),O=1;O<n;O++)z[X]!==z[X+1]&&(g[D+O]=z[X]?4:8,++K),X++;if(0!==z[X]&&(g[D+O]=4,++K),K>1e3)return null;const B=new Int32Array([0,t,-1,0,-t,0,0,0,1]),Y=new Path2D;for(E=0;K&&E<=h;E++){let G=E*t;const ee=G+n;for(;G<ee&&!g[G];)G++;if(G===ee)continue;Y.moveTo(G%t,E);const $=G;let ne=g[G];do{const ae=B[ne];do{G+=ae}while(!g[G]);const ie=g[G];5!==ie&&10!==ie?(ne=ie,g[G]=0):(ne=ie&51*ne>>4,g[G]&=ne>>2|ne<<2),Y.lineTo(G%t,G/t|0),g[G]||--K}while($!==G);--E}return z=null,g=null,function(G){G.save(),G.scale(1/n,-1/h),G.translate(0,-h),G.fill(Y),G.beginPath(),G.restore()}}(n)),v.compiled))return void v.compiled(C);const t=this._createMaskCanvas(n),g=t.canvas;C.save(),C.setTransform(1,0,0,1,0,0),C.drawImage(g,t.offsetX,t.offsetY),C.restore(),this.compose()}paintImageMaskXObjectRepeat(n,h,C=0,v=0,t,g){if(!this.contentVisible)return;n=this.getObject(n.data,n);const E=this.ctx;E.save();const O=(0,p.getCurrentTransform)(E);E.transform(h,C,v,t,0,0);const D=this._createMaskCanvas(n);E.setTransform(1,0,0,1,0,0);for(let W=0,z=g.length;W<z;W+=2){const X=x.Util.transform(O,[h,C,v,t,g[W],g[W+1]]),[K,B]=x.Util.applyTransform([0,0],X);E.drawImage(D.canvas,K,B)}E.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const h=this.ctx,C=this.current.fillColor,v=this.current.patternFill;for(const t of n){const{data:g,width:E,height:O,transform:D}=t,W=this.cachedCanvases.getCanvas("maskCanvas",E,O),z=W.context;z.save(),e(z,this.getObject(g,t)),z.globalCompositeOperation="source-in",z.fillStyle=v?C.getPattern(z,this,(0,p.getCurrentTransformInverse)(h),k.PathType.FILL):C,z.fillRect(0,0,E,O),z.restore(),h.save(),h.transform(...D),h.scale(1,-1),A(h,W.canvas,0,0,E,O,0,-1,1,1),h.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const h=this.getObject(n);h?this.paintInlineImageXObject(h):(0,x.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(n,h,C,v){if(!this.contentVisible)return;const t=this.getObject(n);if(!t)return void(0,x.warn)("Dependent image isn't ready yet");const g=t.width,E=t.height,O=[];for(let D=0,W=v.length;D<W;D+=2)O.push({transform:[h,0,0,C,v[D],v[D+1]],x:0,y:0,w:g,h:E});this.paintInlineImageXObjectGroup(t,O)}paintInlineImageXObject(n){if(!this.contentVisible)return;const h=n.width,C=n.height,v=this.ctx;let t;if(this.save(),v.scale(1/h,-1/C),"function"==typeof HTMLElement&&n instanceof HTMLElement||!n.data)t=n;else{const D=this.cachedCanvases.getCanvas("inlineImage",h,C);d(D.context,n,this.current.transferMaps),t=D.canvas}const g=this._scaleImage(t,(0,p.getCurrentTransformInverse)(v));v.imageSmoothingEnabled=Z((0,p.getCurrentTransform)(v),n.interpolate);const[E,O]=A(v,g.img,0,0,g.paintWidth,g.paintHeight,0,-C,h,C);if(this.imageLayer){const[D,W]=x.Util.applyTransform([0,-C],(0,p.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:n,left:D,top:W,width:E,height:O})}this.compose(),this.restore()}paintInlineImageXObjectGroup(n,h){if(!this.contentVisible)return;const C=this.ctx,v=n.width,t=n.height,g=this.cachedCanvases.getCanvas("inlineImage",v,t);d(g.context,n,this.current.transferMaps);for(const O of h){if(C.save(),C.transform(...O.transform),C.scale(1,-1),A(C,g.canvas,O.x,O.y,O.w,O.h,0,-1,1,1),this.imageLayer){const[D,W]=x.Util.applyTransform([O.x,O.y],(0,p.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:n,left:D,top:W,width:v,height:t})}C.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,h){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,h){this.markedContentStack.push("OC"===n?{visible:this.optionalContentConfig.isVisible(h)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const h=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const C=this.ctx;this.pendingClip&&(h||(this.pendingClip===M?C.clip("evenodd"):C.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),C.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,p.getCurrentTransform)(this.ctx);if(0===n[1]&&0===n[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const h=Math.abs(n[0]*n[3]-n[2]*n[1]),C=Math.hypot(n[0],n[2]),v=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(C,v)/h}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:n}=this.current,h=(0,p.getCurrentTransform)(this.ctx);let C,v;if(0===h[1]&&0===h[2]){const t=Math.abs(h[0]),g=Math.abs(h[3]);if(0===n)C=1/t,v=1/g;else{const E=t*n,O=g*n;C=E<1?1/E:1,v=O<1?1/O:1}}else{const t=Math.abs(h[0]*h[3]-h[2]*h[1]),g=Math.hypot(h[0],h[1]),E=Math.hypot(h[2],h[3]);if(0===n)C=E/t,v=g/t;else{const O=n*t;C=E>O?E/O:1,v=g>O?g/O:1}}this._cachedScaleForStroking=[C,v]}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:h}=this,{lineWidth:C}=this.current,[v,t]=this.getScaleForStroking();if(h.lineWidth=C||1,1===v&&1===t)return void h.stroke();let g,E,O;n&&(g=(0,p.getCurrentTransform)(h),E=h.getLineDash().slice(),O=h.lineDashOffset),h.scale(v,t);const D=Math.max(v,t);h.setLineDash(h.getLineDash().map(W=>W/D)),h.lineDashOffset/=D,h.stroke(),n&&(h.setTransform(...g),h.setLineDash(E),h.lineDashOffset=O)}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}}u.CanvasGraphics=T;for(const m in x.OPS)void 0!==T.prototype[m]&&(T.prototype[x.OPS[m]]=T.prototype[m])},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=function c(A){switch(A[0]){case"RadialAxial":return new s(A);case"Mesh":return new l(A);case"Dummy":return new S}throw new Error(`Unknown IR type: ${A[0]}`)};var p=N(1),x=N(8),k=N(3);const U={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function q(A,y){if(!y||k.isNodeJS)return;const b=y[2]-y[0],d=y[3]-y[1],e=new Path2D;e.rect(y[0],y[1],b,d),A.clip(e)}u.PathType=U;class w{constructor(){this.constructor===w&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class s extends w{constructor(y){super(),this._type=y[1],this._bbox=y[2],this._colorStops=y[3],this._p0=y[4],this._p1=y[5],this._r0=y[6],this._r1=y[7],this.matrix=null}_createGradient(y){let b;"axial"===this._type?b=y.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(b=y.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)b.addColorStop(d[0],d[1]);return b}getPattern(y,b,d,e){let i;if(e===U.STROKE||e===U.FILL){const _=b.current.getClippedPathBoundingBox(e,(0,x.getCurrentTransform)(y))||[0,0,0,0],L=Math.ceil(_[2]-_[0])||1,F=Math.ceil(_[3]-_[1])||1,j=b.cachedCanvases.getCanvas("pattern",L,F,!0),V=j.context;V.clearRect(0,0,V.canvas.width,V.canvas.height),V.beginPath(),V.rect(0,0,V.canvas.width,V.canvas.height),V.translate(-_[0],-_[1]),d=p.Util.transform(d,[1,0,0,1,_[0],_[1]]),V.transform(...b.baseTransform),this.matrix&&V.transform(...this.matrix),q(V,this._bbox),V.fillStyle=this._createGradient(V),V.fill(),i=y.createPattern(j.canvas,"no-repeat");const te=new DOMMatrix(d);try{i.setTransform(te)}catch(Z){(0,p.warn)(`RadialAxialShadingPattern.getPattern: "${Z?.message}".`)}}else q(y,this._bbox),i=this._createGradient(y);return i}}function f(A,y,b,d,e,i,_,L){const F=y.coords,j=y.colors,V=A.data,te=4*A.width;let Z;F[b+1]>F[d+1]&&(Z=b,b=d,d=Z,Z=i,i=_,_=Z),F[d+1]>F[e+1]&&(Z=d,d=e,e=Z,Z=_,_=L,L=Z),F[b+1]>F[d+1]&&(Z=b,b=d,d=Z,Z=i,i=_,_=Z);const P=(F[b]+y.offsetX)*y.scaleX,R=(F[b+1]+y.offsetY)*y.scaleY,I=(F[d]+y.offsetX)*y.scaleX,M=(F[d+1]+y.offsetY)*y.scaleY,T=(F[e]+y.offsetX)*y.scaleX,m=(F[e+1]+y.offsetY)*y.scaleY;if(R>=m)return;const n=j[i],h=j[i+1],C=j[i+2],v=j[_],t=j[_+1],g=j[_+2],E=j[L],O=j[L+1],D=j[L+2],W=Math.round(R),z=Math.round(m);let X,K,B,Y,H,G,ee,$;for(let ne=W;ne<=z;ne++){if(ne<M){let le;le=ne<R?0:(R-ne)/(R-M),X=P-(P-I)*le,K=n-(n-v)*le,B=h-(h-t)*le,Y=C-(C-g)*le}else{let le;le=ne>m?1:M===m?0:(M-ne)/(M-m),X=I-(I-T)*le,K=v-(v-E)*le,B=t-(t-O)*le,Y=g-(g-D)*le}let ae;ae=ne<R?0:ne>m?1:(R-ne)/(R-m),H=P-(P-T)*ae,G=n-(n-E)*ae,ee=h-(h-O)*ae,$=C-(C-D)*ae;const ie=Math.round(Math.min(X,H)),ce=Math.round(Math.max(X,H));let he=te*ne+4*ie;for(let le=ie;le<=ce;le++)ae=(X-le)/(X-H),ae<0?ae=0:ae>1&&(ae=1),V[he++]=K-(K-G)*ae|0,V[he++]=B-(B-ee)*ae|0,V[he++]=Y-(Y-$)*ae|0,V[he++]=255}}function a(A,y,b){const d=y.coords,e=y.colors;let i,_;switch(y.type){case"lattice":const L=y.verticesPerRow,F=Math.floor(d.length/L)-1,j=L-1;for(i=0;i<F;i++){let V=i*L;for(let te=0;te<j;te++,V++)f(A,b,d[V],d[V+1],d[V+L],e[V],e[V+1],e[V+L]),f(A,b,d[V+L+1],d[V+1],d[V+L],e[V+L+1],e[V+1],e[V+L])}break;case"triangles":for(i=0,_=d.length;i<_;i+=3)f(A,b,d[i],d[i+1],d[i+2],e[i],e[i+1],e[i+2]);break;default:throw new Error("illegal figure")}}class l extends w{constructor(y){super(),this._coords=y[2],this._colors=y[3],this._figures=y[4],this._bounds=y[5],this._bbox=y[7],this._background=y[8],this.matrix=null}_createMeshCanvas(y,b,d){const L=Math.floor(this._bounds[0]),F=Math.floor(this._bounds[1]),j=Math.ceil(this._bounds[2])-L,V=Math.ceil(this._bounds[3])-F,te=Math.min(Math.ceil(Math.abs(j*y[0]*1.1)),3e3),Z=Math.min(Math.ceil(Math.abs(V*y[1]*1.1)),3e3),P=j/te,R=V/Z,I={coords:this._coords,colors:this._colors,offsetX:-L,offsetY:-F,scaleX:1/P,scaleY:1/R},m=d.getCanvas("mesh",te+4,Z+4,!1),n=m.context,h=n.createImageData(te,Z);if(b){const v=h.data;for(let t=0,g=v.length;t<g;t+=4)v[t]=b[0],v[t+1]=b[1],v[t+2]=b[2],v[t+3]=255}for(const v of this._figures)a(h,v,I);return n.putImageData(h,2,2),{canvas:m.canvas,offsetX:L-2*P,offsetY:F-2*R,scaleX:P,scaleY:R}}getPattern(y,b,d,e){let i;if(q(y,this._bbox),e===U.SHADING)i=p.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(y));else if(i=p.Util.singularValueDecompose2dScale(b.baseTransform),this.matrix){const L=p.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*L[0],i[1]*L[1]]}const _=this._createMeshCanvas(i,e===U.SHADING?null:this._background,b.cachedCanvases);return e!==U.SHADING&&(y.setTransform(...b.baseTransform),this.matrix&&y.transform(...this.matrix)),y.translate(_.offsetX,_.offsetY),y.scale(_.scaleX,_.scaleY),y.createPattern(_.canvas,"no-repeat")}}class S extends w{getPattern(){return"hotpink"}}class r{static get MAX_PATTERN_SIZE(){return(0,p.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(y,b,d,e,i){this.operatorList=y[2],this.matrix=y[3]||[1,0,0,1,0,0],this.bbox=y[4],this.xstep=y[5],this.ystep=y[6],this.paintType=y[7],this.tilingType=y[8],this.color=b,this.ctx=d,this.canvasGraphicsFactory=e,this.baseTransform=i}createPatternCanvas(y){const b=this.operatorList,d=this.bbox,e=this.xstep,i=this.ystep,_=this.paintType,F=this.color,j=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+this.tilingType);const V=d[0],te=d[1],Z=d[2],P=d[3],R=p.Util.singularValueDecompose2dScale(this.matrix),I=p.Util.singularValueDecompose2dScale(this.baseTransform),M=[R[0]*I[0],R[1]*I[1]],T=this.getSizeAndScale(e,this.ctx.canvas.width,M[0]),m=this.getSizeAndScale(i,this.ctx.canvas.height,M[1]),n=y.cachedCanvases.getCanvas("pattern",T.size,m.size,!0),h=n.context,C=j.createCanvasGraphics(h);C.groupLevel=y.groupLevel,this.setFillAndStrokeStyleToContext(C,_,F);let v=V,t=te,g=Z,E=P;return V<0&&(v=0,g+=Math.abs(V)),te<0&&(t=0,E+=Math.abs(te)),h.translate(-T.scale*v,-m.scale*t),C.transform(T.scale,0,0,m.scale,0,0),h.save(),this.clipBbox(C,v,t,g,E),C.baseTransform=(0,x.getCurrentTransform)(C.ctx),C.executeOperatorList(b),C.endDrawing(),{canvas:n.canvas,scaleX:T.scale,scaleY:m.scale,offsetX:v,offsetY:t}}getSizeAndScale(y,b,d){y=Math.abs(y);const e=Math.max(r.MAX_PATTERN_SIZE,b);let i=Math.ceil(y*d);return i>=e?i=e:d=i/y,{scale:d,size:i}}clipBbox(y,b,d,e,i){y.ctx.rect(b,d,e-b,i-d),y.current.updateRectMinMax((0,x.getCurrentTransform)(y.ctx),[b,d,e,i]),y.clip(),y.endPath()}setFillAndStrokeStyleToContext(y,b,d){const e=y.ctx,i=y.current;switch(b){case 1:const _=this.ctx;e.fillStyle=_.fillStyle,e.strokeStyle=_.strokeStyle,i.fillColor=_.fillStyle,i.strokeColor=_.strokeStyle;break;case 2:const L=p.Util.makeHexColor(d[0],d[1],d[2]);e.fillStyle=L,e.strokeStyle=L,i.fillColor=L,i.strokeColor=L;break;default:throw new p.FormatError(`Unsupported paint type: ${b}`)}}getPattern(y,b,d,e){let i=d;e!==U.SHADING&&(i=p.Util.transform(i,b.baseTransform),this.matrix&&(i=p.Util.transform(i,this.matrix)));const _=this.createPatternCanvas(b);let L=new DOMMatrix(i);L=L.translate(_.offsetX,_.offsetY),L=L.scale(1/_.scaleX,1/_.scaleY);const F=y.createPattern(_.canvas,"repeat");try{F.setTransform(L)}catch(j){(0,p.warn)(`TilingPattern.getPattern: "${j?.message}".`)}return F}}u.TilingPattern=r},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.applyMaskImageData=function x({src:k,srcPos:U=0,dest:q,destPos:w=0,width:s,height:f,inverseDecode:a=!1}){const l=p.FeatureTest.isLittleEndian?4278190080:255,[S,c]=a?[0,l]:[l,0],o=s>>3,r=7&s,A=k.length;q=new Uint32Array(q.buffer);for(let y=0;y<f;y++){for(const d=U+o;U<d;U++){const e=U<A?k[U]:255;q[w++]=128&e?c:S,q[w++]=64&e?c:S,q[w++]=32&e?c:S,q[w++]=16&e?c:S,q[w++]=8&e?c:S,q[w++]=4&e?c:S,q[w++]=2&e?c:S,q[w++]=1&e?c:S}if(0===r)continue;const b=U<A?k[U++]:255;for(let d=0;d<r;d++)q[w++]=b&1<<7-d?c:S}return{srcPos:U,destPos:w}};var p=N(1)},(se,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const N=Object.create(null);u.GlobalWorkerOptions=N,N.workerPort=void 0===N.workerPort?null:N.workerPort,N.workerSrc=void 0===N.workerSrc?"":N.workerSrc},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var p=N(1);function U(w){switch(w instanceof Error||"object"==typeof w&&null!==w||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),w.name){case"AbortException":return new p.AbortException(w.message);case"MissingPDFException":return new p.MissingPDFException(w.message);case"PasswordException":return new p.PasswordException(w.message,w.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(w.message,w.status);case"UnknownErrorException":return new p.UnknownErrorException(w.message,w.details);default:return new p.UnknownErrorException(w.message,w.toString())}}u.MessageHandler=class q{constructor(s,f,a){this.sourceName=s,this.targetName=f,this.comObj=a,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=l=>{const S=l.data;if(S.targetName!==this.sourceName)return;if(S.stream)return void this._processStreamMessage(S);if(S.callback){const o=S.callbackId,r=this.callbackCapabilities[o];if(!r)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],1===S.callback)r.resolve(S.data);else{if(2!==S.callback)throw new Error("Unexpected callback case");r.reject(U(S.reason))}return}const c=this.actionHandler[S.action];if(!c)throw new Error(`Unknown action from worker: ${S.action}`);if(S.callbackId){const o=this.sourceName,r=S.sourceName;new Promise(function(A){A(c(S.data))}).then(function(A){a.postMessage({sourceName:o,targetName:r,callback:1,callbackId:S.callbackId,data:A})},function(A){a.postMessage({sourceName:o,targetName:r,callback:2,callbackId:S.callbackId,reason:U(A)})})}else S.streamId?this._createStreamSink(S):c(S.data)},a.addEventListener("message",this._onComObjOnMessage)}on(s,f){const a=this.actionHandler;if(a[s])throw new Error(`There is already an actionName called "${s}"`);a[s]=f}send(s,f,a){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:s,data:f},a)}sendWithPromise(s,f,a){const l=this.callbackId++,S=(0,p.createPromiseCapability)();this.callbackCapabilities[l]=S;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:s,callbackId:l,data:f},a)}catch(c){S.reject(c)}return S.promise}sendWithStream(s,f,a,l){const S=this.streamId++,c=this.sourceName,o=this.targetName,r=this.comObj;return new ReadableStream({start:A=>{const y=(0,p.createPromiseCapability)();return this.streamControllers[S]={controller:A,startCall:y,pullCall:null,cancelCall:null,isClosed:!1},r.postMessage({sourceName:c,targetName:o,action:s,streamId:S,data:f,desiredSize:A.desiredSize},l),y.promise},pull:A=>{const y=(0,p.createPromiseCapability)();return this.streamControllers[S].pullCall=y,r.postMessage({sourceName:c,targetName:o,stream:6,streamId:S,desiredSize:A.desiredSize}),y.promise},cancel:A=>{(0,p.assert)(A instanceof Error,"cancel must have a valid reason");const y=(0,p.createPromiseCapability)();return this.streamControllers[S].cancelCall=y,this.streamControllers[S].isClosed=!0,r.postMessage({sourceName:c,targetName:o,stream:1,streamId:S,reason:U(A)}),y.promise}},a)}_createStreamSink(s){const f=s.streamId,a=this.sourceName,l=s.sourceName,S=this.comObj,c=this,o=this.actionHandler[s.action],r={enqueue(A,y=1,b){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=y,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,p.createPromiseCapability)(),this.ready=this.sinkCapability.promise),S.postMessage({sourceName:a,targetName:l,stream:4,streamId:f,chunk:A},b)},close(){this.isCancelled||(this.isCancelled=!0,S.postMessage({sourceName:a,targetName:l,stream:3,streamId:f}),delete c.streamSinks[f])},error(A){(0,p.assert)(A instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,S.postMessage({sourceName:a,targetName:l,stream:5,streamId:f,reason:U(A)}))},sinkCapability:(0,p.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:s.desiredSize,ready:null};r.sinkCapability.resolve(),r.ready=r.sinkCapability.promise,this.streamSinks[f]=r,new Promise(function(A){A(o(s.data,r))}).then(function(){S.postMessage({sourceName:a,targetName:l,stream:8,streamId:f,success:!0})},function(A){S.postMessage({sourceName:a,targetName:l,stream:8,streamId:f,reason:U(A)})})}_processStreamMessage(s){const f=s.streamId,a=this.sourceName,l=s.sourceName,S=this.comObj,c=this.streamControllers[f],o=this.streamSinks[f];switch(s.stream){case 8:s.success?c.startCall.resolve():c.startCall.reject(U(s.reason));break;case 7:s.success?c.pullCall.resolve():c.pullCall.reject(U(s.reason));break;case 6:if(!o){S.postMessage({sourceName:a,targetName:l,stream:7,streamId:f,success:!0});break}o.desiredSize<=0&&s.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=s.desiredSize,new Promise(function(r){r(o.onPull&&o.onPull())}).then(function(){S.postMessage({sourceName:a,targetName:l,stream:7,streamId:f,success:!0})},function(r){S.postMessage({sourceName:a,targetName:l,stream:7,streamId:f,reason:U(r)})});break;case 4:if((0,p.assert)(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(s.chunk);break;case 3:if((0,p.assert)(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this._deleteStreamController(c,f);break;case 5:(0,p.assert)(c,"error should have stream controller"),c.controller.error(U(s.reason)),this._deleteStreamController(c,f);break;case 2:s.success?c.cancelCall.resolve():c.cancelCall.reject(U(s.reason)),this._deleteStreamController(c,f);break;case 1:if(!o)break;new Promise(function(r){r(o.onCancel&&o.onCancel(U(s.reason)))}).then(function(){S.postMessage({sourceName:a,targetName:l,stream:2,streamId:f,success:!0})},function(r){S.postMessage({sourceName:a,targetName:l,stream:2,streamId:f,reason:U(r)})}),o.sinkCapability.reject(U(s.reason)),o.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(s,f){var a=this;return _asyncToGenerator(function*(){yield Promise.allSettled([s.startCall&&s.startCall.promise,s.pullCall&&s.pullCall.promise,s.cancelCall&&s.cancelCall.promise]),delete a.streamControllers[f]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var p=N(1);u.Metadata=class x{#e;#t;constructor({parsedData:U,rawData:q}){this.#e=U,this.#t=q}getRaw(){return this.#t}get(U){return this.#e.get(U)??null}getAll(){return(0,p.objectFromMap)(this.#e)}has(U){return this.#e.has(U)}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var p=N(1);const x=Symbol("INTERNAL");class k{#e=!0;constructor(w,s){this.name=w,this.intent=s}get visible(){return this.#e}_setVisible(w,s){w!==x&&(0,p.unreachable)("Internal method `_setVisible` called."),this.#e=s}}u.OptionalContentConfig=class U{#e=!0;#t=new Map;#n=null;#i=null;constructor(w){if(this.name=null,this.creator=null,null!==w){this.name=w.name,this.creator=w.creator,this.#i=w.order;for(const s of w.groups)this.#t.set(s.id,new k(s.name,s.intent));if("OFF"===w.baseState)for(const s of this.#t.values())s._setVisible(x,!1);for(const s of w.on)this.#t.get(s)._setVisible(x,!0);for(const s of w.off)this.#t.get(s)._setVisible(x,!1);this.#n=new Map;for(const[s,f]of this.#t)this.#n.set(s,f.visible)}}#r(w){const s=w.length;if(s<2)return!0;const f=w[0];for(let a=1;a<s;a++){const l=w[a];let S;if(Array.isArray(l))S=this.#r(l);else{if(!this.#t.has(l))return(0,p.warn)(`Optional content group not found: ${l}`),!0;S=this.#t.get(l).visible}switch(f){case"And":if(!S)return!1;break;case"Or":if(S)return!0;break;case"Not":return!S;default:return!0}}return"And"===f}isVisible(w){if(0===this.#t.size)return!0;if(!w)return(0,p.warn)("Optional content group not defined."),!0;if("OCG"===w.type)return this.#t.has(w.id)?this.#t.get(w.id).visible:((0,p.warn)(`Optional content group not found: ${w.id}`),!0);if("OCMD"===w.type){if(w.expression)return this.#r(w.expression);if(!w.policy||"AnyOn"===w.policy){for(const s of w.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!0}return!1}if("AllOn"===w.policy){for(const s of w.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!1}return!0}if("AnyOff"===w.policy){for(const s of w.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!0}return!1}if("AllOff"===w.policy){for(const s of w.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${w.policy}.`),!0}return(0,p.warn)(`Unknown group type ${w.type}.`),!0}setVisibility(w,s=!0){this.#t.has(w)?(this.#t.get(w)._setVisible(x,!!s),this.#e=null):(0,p.warn)(`Optional content group not found: ${w}`)}get hasInitialVisibility(){if(null!==this.#e)return this.#e;for(const[w,s]of this.#t){const f=this.#n.get(w);if(s.visible!==f)return this.#e=!1}return this.#e=!0}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,p.objectFromMap)(this.#t):null}getGroup(w){return this.#t.get(w)||null}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var p=N(1),x=N(8);u.PDFDataTransportStream=class k{constructor(s,f){(0,p.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s.progressiveDone||!1,this._contentDispositionFilename=s.contentDispositionFilename||null;const a=s.initialData;if(a?.length>0){const l=new Uint8Array(a).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._contentLength=s.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((l,S)=>{this._onReceiveData({begin:l,chunk:S})}),this._pdfDataRangeTransport.addProgressListener((l,S)=>{this._onProgress({loaded:l,total:S})}),this._pdfDataRangeTransport.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(s){const f=new Uint8Array(s.chunk).buffer;if(void 0===s.begin)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const a=this._rangeReaders.some(function(l){return l._begin===s.begin&&(l._enqueue(f),!0)});(0,p.assert)(a,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(s){if(void 0===s.total){const f=this._rangeReaders[0];f?.onProgress&&f.onProgress({loaded:s.loaded})}else{const f=this._fullRequestReader;f?.onProgress&&f.onProgress({loaded:s.loaded,total:s.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(s){const f=this._rangeReaders.indexOf(s);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const s=this._queuedChunks;return this._queuedChunks=null,new U(this,s,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(s,f){if(f<=this._progressiveDataLength)return null;const a=new q(this,s,f);return this._pdfDataRangeTransport.requestDataRange(s,f),this._rangeReaders.push(a),a}cancelAllRequests(s){this._fullRequestReader&&this._fullRequestReader.cancel(s);for(const f of this._rangeReaders.slice(0))f.cancel(s);this._pdfDataRangeTransport.abort()}};class U{constructor(s,f,a=!1,l=null){this._stream=s,this._done=a||!1,this._filename=(0,x.isPdfFile)(l)?l:null,this._queuedChunks=f||[],this._loaded=0;for(const S of this._queuedChunks)this._loaded+=S.byteLength;this._requests=[],this._headersReady=Promise.resolve(),s._fullRequestReader=this,this.onProgress=null}_enqueue(s){this._done||(this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunks.push(s),this._loaded+=s.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var s=this;return _asyncToGenerator(function*(){if(s._queuedChunks.length>0)return{value:s._queuedChunks.shift(),done:!1};if(s._done)return{value:void 0,done:!0};const f=(0,p.createPromiseCapability)();return s._requests.push(f),f.promise})()}cancel(s){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class q{constructor(s,f,a){this._stream=s,this._begin=f,this._end=a,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(s){if(!this._done){if(0===this._requests.length)this._queuedChunk=s;else{this._requests.shift().resolve({value:s,done:!1});for(const a of this._requests)a.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var s=this;return _asyncToGenerator(function*(){if(s._queuedChunk){const a=s._queuedChunk;return s._queuedChunk=null,{value:a,done:!1}}if(s._done)return{value:void 0,done:!0};const f=(0,p.createPromiseCapability)();return s._requests.push(f),f.promise})()}cancel(s){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(se,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class N{static textContent(x){const k=[],U={items:k,styles:Object.create(null)};return function q(w){if(!w)return;let s=null;const f=w.name;if("#text"===f)s=w.value;else{if(!N.shouldBuildText(f))return;w?.attributes?.textContent?s=w.attributes.textContent:w.value&&(s=w.value)}if(null!==s&&k.push({str:s}),w.children)for(const a of w.children)q(a)}(x),U}static shouldBuildText(x){return!("textarea"===x||"input"===x||"option"===x||"select"===x)}}u.XfaText=N},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var p=N(9);const x=function(w){return new Promise((s,f)=>{__webpack_require__(2339).readFile(w,(l,S)=>{!l&&S?s(new Uint8Array(S)):f(new Error(l))})})};u.NodeCanvasFactory=class k extends p.BaseCanvasFactory{_createCanvas(s,f){return __webpack_require__(4069).createCanvas(s,f)}},u.NodeCMapReaderFactory=class U extends p.BaseCMapReaderFactory{_fetchData(s,f){return x(s).then(a=>({cMapData:a,compressionType:f}))}},u.NodeStandardFontDataFactory=class q extends p.BaseStandardFontDataFactory{_fetchData(s){return x(s)}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var p=N(7),x=N(1),k=N(23),U=N(24);u.AnnotationEditorLayer=(()=>{class w{#e;#t=!1;#n=this.pointerup.bind(this);#i=this.pointerdown.bind(this);#r=new Map;#c=!1;#o=!1;#s;static _initialized=!1;constructor(f){w._initialized||(w._initialized=!0,k.FreeTextEditor.initialize(f.l10n),U.InkEditor.initialize(f.l10n),f.uiManager.registerEditorTypes([k.FreeTextEditor,U.InkEditor])),this.#s=f.uiManager,this.annotationStorage=f.annotationStorage,this.pageIndex=f.pageIndex,this.div=f.div,this.#e=f.accessibilityManager,this.#s.addLayer(this)}updateToolbar(f){this.#s.updateToolbar(f)}updateMode(f=this.#s.getMode()){this.#a(),f===x.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#s.unselectAll()}addInkEditorIfNeeded(f){if(f||this.#s.getMode()===x.AnnotationEditorType.INK){if(!f)for(const l of this.#r.values())if(l.isEmpty())return void l.setInBackground();this.#l({offsetX:0,offsetY:0}).setInBackground()}}setEditingState(f){this.#s.setEditingState(f)}addCommands(f){this.#s.addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of this.#r.values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of this.#r.values())f.disableEditing()}setActiveEditor(f){this.#s.getActive()!==f&&this.#s.setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",this.#i),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#i),this.div.removeEventListener("pointerup",this.#n)}attach(f){this.#r.set(f.id,f)}detach(f){this.#r.delete(f.id),this.#e?.removePointerInTextLayer(f.contentDiv)}remove(f){this.#s.removeEditor(f),this.detach(f),this.annotationStorage.remove(f.id),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&this.#s.focusMainContainer()},0),this.#o||this.addInkEditorIfNeeded(!1)}#u(f){f.parent!==this&&(this.attach(f),f.pageIndex=this.pageIndex,f.parent?.detach(f),f.parent=this,f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.#u(f),this.#s.addEditor(f),this.attach(f),!f.isAttachedToDOM){const a=f.render();this.div.append(a),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),this.addToAnnotationStorage(f)}moveEditorInDOM(f){this.#e?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addToAnnotationStorage(f){!f.isEmpty()&&!this.annotationStorage.has(f.id)&&this.annotationStorage.setValue(f.id,f)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!0})}addUndoableEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!1})}getNextId(){return this.#s.getId()}#h(f){switch(this.#s.getMode()){case x.AnnotationEditorType.FREETEXT:return new k.FreeTextEditor(f);case x.AnnotationEditorType.INK:return new U.InkEditor(f)}return null}deserialize(f){switch(f.annotationType){case x.AnnotationEditorType.FREETEXT:return k.FreeTextEditor.deserialize(f,this);case x.AnnotationEditorType.INK:return U.InkEditor.deserialize(f,this)}return null}#l(f){const a=this.getNextId(),l=this.#h({parent:this,id:a,x:f.offsetX,y:f.offsetY});return l&&this.add(l),l}setSelected(f){this.#s.setSelected(f)}toggleSelected(f){this.#s.toggleSelected(f)}isSelected(f){return this.#s.isSelected(f)}unselect(f){this.#s.unselect(f)}pointerup(f){if(!(0!==f.button||f.ctrlKey&&p.KeyboardManager.platform.isMac)&&f.target===this.div&&this.#c){if(this.#c=!1,!this.#t)return void(this.#t=!0);this.#l(f)}}pointerdown(f){if(0!==f.button||f.ctrlKey&&p.KeyboardManager.platform.isMac||f.target!==this.div)return;this.#c=!0;const l=this.#s.getActive();this.#t=!l||l.isEmpty()}drop(f){const a=f.dataTransfer.getData("text/plain"),l=this.#s.getEditor(a);if(!l)return;f.preventDefault(),f.dataTransfer.dropEffect="move",this.#u(l);const S=this.div.getBoundingClientRect();l.translate(f.clientX-S.x-l.startX,f.clientY-S.y-l.startY),this.moveEditorInDOM(l),l.div.focus()}dragover(f){f.preventDefault()}destroy(){this.#s.getActive()?.parent===this&&this.#s.setActiveEditor(null);for(const f of this.#r.values())this.#e?.removePointerInTextLayer(f.contentDiv),f.isAttachedToDOM=!1,f.div.remove(),f.parent=null;this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#a(){this.#o=!0;for(const f of this.#r.values())f.isEmpty()&&f.remove();this.#o=!1}render(f){this.viewport=f.viewport,(0,p.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const a of this.#s.getEditors(this.pageIndex))this.add(a);this.updateMode()}update(f){this.viewport=f.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[f,a,l,S]=this.viewport.viewBox;return[l-f,S-a]}get viewportBaseDimensions(){const{width:f,height:a,rotation:l}=this.viewport;return l%180==0?[f,a]:[a,f]}setDimensions(){const{width:f,height:a,rotation:l}=this.viewport,S=l%180!=0,c=Math.floor(f)+"px",o=Math.floor(a)+"px";this.div.style.width=S?o:c,this.div.style.height=S?c:o,this.div.setAttribute("data-main-rotation",l)}}return w})()},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var p=N(1),x=N(7),k=N(6);class U extends k.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivKeydown.bind(this);#i;#r="";#c=!1;#o;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new x.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],U.prototype.commitOrRemove]]);static _type="freetext";constructor(w){super({...w,name:"freeTextEditor"}),this.#i=w.color||U._defaultColor||k.AnnotationEditor._defaultLineColor,this.#o=w.fontSize||U._defaultFontSize}static initialize(w){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(f=>[f,w.get(f)]));const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(w,s){switch(w){case p.AnnotationEditorParamsType.FREETEXT_SIZE:U._defaultFontSize=s;break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:U._defaultColor=s}}updateParams(w,s){switch(w){case p.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(s);break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:this.#u(s)}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,U._defaultFontSize],[p.AnnotationEditorParamsType.FREETEXT_COLOR,U._defaultColor||k.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,this.#o],[p.AnnotationEditorParamsType.FREETEXT_COLOR,this.#i]]}#s(w){const s=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--scale-factor))`,this.translate(0,-(a-this.#o)*this.parent.scaleFactor),this.#o=a,this.#l()},f=this.#o;this.parent.addCommands({cmd:()=>{s(w)},undo:()=>{s(f)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#u(w){const s=this.#i;this.parent.addCommands({cmd:()=>{this.#i=w,this.editorDiv.style.color=w},undo:()=>{this.#i=s,this.editorDiv.style.color=s},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-U._internalPadding*this.parent.scaleFactor,-(U._internalPadding+this.#o)*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(p.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.div.focus(),this.isEditing=!1)}focusin(w){super.focusin(w),w.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#h(){const w=this.editorDiv.getElementsByTagName("div");if(0===w.length)return this.editorDiv.innerText;const s=[];for(let f=0,a=w.length;f<a;f++){const S=w[f].firstChild;s.push("#text"===S?.nodeName?S.data:"")}return s.join("\n")}#l(){const[w,s]=this.parent.viewportBaseDimensions,f=this.div.getBoundingClientRect();this.width=f.width/w,this.height=f.height/s}commit(){super.commit(),this.#c||(this.#c=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#r=this.#h().trimEnd(),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(w){this.enableEditMode(),this.editorDiv.focus()}keydown(w){w.target===this.div&&"Enter"===w.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(w){U._keyboardManager.exec(this,w)}editorDivFocus(w){this.isEditing=!0}editorDivBlur(w){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let w,s;this.width&&(w=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),U._l10nPromise.get("editor_free_text_aria_label").then(a=>this.editorDiv?.setAttribute("aria-label",a)),U._l10nPromise.get("free_text_default_content").then(a=>this.editorDiv?.setAttribute("default-content",a)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#o}px * var(--scale-factor))`,f.color=this.#i,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,x.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[a,l]=this.parent.viewportBaseDimensions;this.setAt(w*a,s*l,this.width*a,this.height*l);for(const S of this.#r.split("\n")){const c=document.createElement("div");c.append(S?document.createTextNode(S):document.createElement("br")),this.editorDiv.append(c)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(w,s){const f=super.deserialize(w,s);return f.#o=w.fontSize,f.#i=p.Util.makeHexColor(...w.color),f.#r=w.value,f}serialize(){if(this.isEmpty())return null;const w=U._internalPadding*this.parent.scaleFactor,s=this.getRect(w,w),f=k.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:p.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#o,value:this.#r,pageIndex:this.parent.pageIndex,rect:s,rotation:this.rotation}}}u.FreeTextEditor=U},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0,Object.defineProperty(u,"fitCurve",{enumerable:!0,get:function(){return k.fitCurve}});var p=N(1),x=N(6),k=N(25),U=N(7);const q=16;u.InkEditor=(()=>{class s extends x.AnnotationEditor{#e=0;#t=0;#n=0;#i=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#c=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=!1;#u=!1;#h=null;#l=null;#a=0;#p=0;#f=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(a){super({...a,name:"inkEditor"}),this.color=a.color||null,this.thickness=a.thickness||null,this.opacity=a.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(a){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(l=>[l,a.get(l)]))}static updateDefaultParams(a,l){switch(a){case p.AnnotationEditorParamsType.INK_THICKNESS:s._defaultThickness=l;break;case p.AnnotationEditorParamsType.INK_COLOR:s._defaultColor=l;break;case p.AnnotationEditorParamsType.INK_OPACITY:s._defaultOpacity=l/100}}updateParams(a,l){switch(a){case p.AnnotationEditorParamsType.INK_THICKNESS:this.#b(l);break;case p.AnnotationEditorParamsType.INK_COLOR:this.#m(l);break;case p.AnnotationEditorParamsType.INK_OPACITY:this.#_(l)}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,s._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,s._defaultColor||x.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*s._defaultOpacity)]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||s._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,this.color||s._defaultColor||x.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??s._defaultOpacity))]]}#b(a){const l=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=a,this.#x()},undo:()=>{this.thickness=l,this.#x()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(a){const l=this.color;this.parent.addCommands({cmd:()=>{this.color=a,this.#g()},undo:()=>{this.color=l,this.#g()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#_(a){a/=100;const l=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=a,this.#g()},undo:()=>{this.opacity=l,this.#g()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#y(),this.#A()),this.isAttachedToDOM||(this.parent.add(this),this.#C()),this.#x())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#l.disconnect(),this.#l=null,super.remove())}enableEditMode(){this.#s||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#o),this.canvas.addEventListener("pointerup",this.#c))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o),this.canvas.removeEventListener("pointerup",this.#c))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#S(){const{width:a,height:l,rotation:S}=this.parent.viewport;switch(S){case 90:return[0,a,a,l];case 180:return[a,l,a,l];case 270:return[l,0,a,l];default:return[0,0,a,l]}}#v(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,U.opacityToHex)(this.opacity)}`}#d(a,l){this.isEditing=!0,this.#u||(this.#u=!0,this.#C(),this.thickness||=s._defaultThickness,this.color||=s._defaultColor||x.AnnotationEditor._defaultLineColor,this.opacity??=s._defaultOpacity),this.currentPath.push([a,l]),this.#h=null,this.#v(),this.ctx.beginPath(),this.ctx.moveTo(a,l),this.#f=()=>{this.#f&&(this.#h&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#g(),this.ctx.lineTo(...this.#h),this.#h=null,this.ctx.stroke()),window.requestAnimationFrame(this.#f))},window.requestAnimationFrame(this.#f)}#P(a,l){const[S,c]=this.currentPath.at(-1);a===S&&l===c||(this.currentPath.push([a,l]),this.#h=[a,l])}#w(a,l){this.ctx.closePath(),this.#f=null,a=Math.min(Math.max(a,0),this.canvas.width),l=Math.min(Math.max(l,0),this.canvas.height);const[S,c]=this.currentPath.at(-1);let o;if((a!==S||l!==c)&&this.currentPath.push([a,l]),1!==this.currentPath.length)o=(0,k.fitCurve)(this.currentPath,30,null);else{const b=[a,l];o=[[b,b.slice(),b.slice(),b]]}const r=s.#k(o);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(o),this.bezierPath2D.push(r),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#y(),this.#A()),this.#x())},mustExec:!0})}#g(){if(this.isEmpty())return void this.#T();this.#v();const{canvas:a,ctx:l}=this;l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,a.width,a.height),this.#T();for(const S of this.bezierPath2D)l.stroke(S)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#x(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(a){super.focusin(a),this.enableEditMode()}canvasPointerdown(a){0!==a.button||!this.isInEditMode()||this.#s||(this.setInForeground(),"mouse"!==a.type&&this.div.focus(),a.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#i),this.#d(a.offsetX,a.offsetY))}canvasPointermove(a){a.stopPropagation(),this.#P(a.offsetX,a.offsetY)}canvasPointerup(a){0===a.button&&this.isInEditMode()&&0!==this.currentPath.length&&(a.stopPropagation(),this.#E(a),this.setInBackground())}canvasPointerleave(a){this.#E(a),this.setInBackground()}#E(a){this.#w(a.offsetX,a.offsetY),this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#i),this.parent.addToAnnotationStorage(this)}#y(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s._l10nPromise.get("editor_ink_canvas_aria_label").then(a=>this.canvas?.setAttribute("aria-label",a)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#A(){this.#l=new ResizeObserver(a=>{const l=a[0].contentRect;l.width&&l.height&&this.setDimensions(l.width,l.height)}),this.#l.observe(this.div)}render(){if(this.div)return this.div;let a,l;this.width&&(a=this.x,l=this.y),super.render(),s._l10nPromise.get("editor_ink_aria_label").then(A=>this.div?.setAttribute("aria-label",A));const[S,c,o,r]=this.#S();if(this.setAt(S,c,0,0),this.setDims(o,r),this.#y(),this.width){const[A,y]=this.parent.viewportBaseDimensions;this.setAt(a*A,l*y,this.width*A,this.height*y),this.#u=!0,this.#C(),this.setDims(this.width*A,this.height*y),this.#g(),this.#O(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#A(),this.div}#C(){if(!this.#u)return;const[a,l]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*a),this.canvas.height=Math.ceil(this.height*l),this.#T()}setDimensions(a,l){const S=Math.round(a),c=Math.round(l);if(this.#a===S&&this.#p===c)return;this.#a=S,this.#p=c,this.canvas.style.visibility="hidden",this.#e&&Math.abs(this.#e-a/l)>.01&&(l=Math.ceil(a/this.#e),this.setDims(a,l));const[o,r]=this.parent.viewportBaseDimensions;this.width=a/o,this.height=l/r,this.#s&&this.#L(a,l),this.#C(),this.#g(),this.canvas.style.visibility="visible"}#L(a,l){const S=this.#M(),c=(a-S)/this.#n,o=(l-S)/this.#t;this.scaleFactor=Math.min(c,o)}#T(){const a=this.#M()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+a,this.translationY*this.scaleFactor+a)}static#k(a){const l=new Path2D;for(let S=0,c=a.length;S<c;S++){const[o,r,A,y]=a[S];0===S&&l.moveTo(...o),l.bezierCurveTo(r[0],r[1],A[0],A[1],y[0],y[1])}return l}#F(a,l,S,c){const r=[],A=this.thickness/2;let y,b;for(const d of this.paths){y=[],b=[];for(let e=0,i=d.length;e<i;e++){const[_,L,F,j]=d[e],V=a*(_[0]+l)+A,te=c-a*(_[1]+S)-A,Z=a*(L[0]+l)+A,P=c-a*(L[1]+S)-A,R=a*(F[0]+l)+A,I=c-a*(F[1]+S)-A,M=a*(j[0]+l)+A,T=c-a*(j[1]+S)-A;0===e&&(y.push(V,te),b.push(V,te)),y.push(Z,P,R,I,M,T),this.#I(V,te,Z,P,R,I,M,T,4,b)}r.push({bezier:y,points:b})}return r}#I(a,l,S,c,o,r,A,y,b,d){if(this.#D(a,l,S,c,o,r,A,y))d.push(A,y);else{for(let e=1;e<b-1;e++){const i=e/b,_=1-i;let L=i*a+_*S,F=i*l+_*c,j=i*S+_*o,V=i*c+_*r;L=i*L+_*j,F=i*F+_*V,j=i*j+_*(i*o+_*A),V=i*V+_*(i*r+_*y),L=i*L+_*j,F=i*F+_*V,d.push(L,F)}d.push(A,y)}}#D(a,l,S,c,o,r,A,y){const e=(3*c-2*l-y)**2,_=(3*r-l-2*y)**2;return Math.max((3*S-2*a-A)**2,(3*o-a-2*A)**2)+Math.max(e,_)<=10}#R(){let a=1/0,l=-1/0,S=1/0,c=-1/0;for(const o of this.paths)for(const[r,A,y,b]of o){const d=p.Util.bezierBoundingBox(...r,...A,...y,...b);a=Math.min(a,d[0]),S=Math.min(S,d[1]),l=Math.max(l,d[2]),c=Math.max(c,d[3])}return[a,S,l,c]}#M(){return this.#s?Math.ceil(this.thickness*this.parent.scaleFactor):0}#x(a=!1){if(this.isEmpty())return;if(!this.#s)return void this.#g();const l=this.#R(),S=this.#M();this.#n=Math.max(q,l[2]-l[0]),this.#t=Math.max(q,l[3]-l[1]);const c=Math.ceil(S+this.#n*this.scaleFactor),o=Math.ceil(S+this.#t*this.scaleFactor),[r,A]=this.parent.viewportBaseDimensions;this.width=c/r,this.height=o/A,this.#e=c/o,this.#O();const y=this.translationX,b=this.translationY;this.translationX=-l[0],this.translationY=-l[1],this.#C(),this.#g(),this.#a=c,this.#p=o,this.setDims(c,o);const d=a?S/this.scaleFactor/2:0;this.translate(y-this.translationX-d,b-this.translationY-d)}#O(){const{style:a}=this.div;this.#e>=1?(a.minHeight="16px",a.minWidth=`${Math.round(this.#e*q)}px`):(a.minWidth="16px",a.minHeight=`${Math.round(q/this.#e)}px`)}static deserialize(a,l){const S=super.deserialize(a,l);S.thickness=a.thickness,S.color=p.Util.makeHexColor(...a.color),S.opacity=a.opacity;const[c,o]=l.pageDimensions,r=S.width*c,A=S.height*o,y=l.scaleFactor,b=a.thickness/2;S.#e=r/A,S.#s=!0,S.#a=Math.round(r),S.#p=Math.round(A);for(const{bezier:e}of a.paths){const i=[];S.paths.push(i);let _=y*(e[0]-b),L=y*(A-e[1]-b);for(let j=2,V=e.length;j<V;j+=6){const I=y*(e[j+4]-b),M=y*(A-e[j+5]-b);i.push([[_,L],[y*(e[j]-b),y*(A-e[j+1]-b)],[y*(e[j+2]-b),y*(A-e[j+3]-b)],[I,M]]),_=I,L=M}const F=this.#k(i);S.bezierPath2D.push(F)}const d=S.#R();return S.#n=Math.max(q,d[2]-d[0]),S.#t=Math.max(q,d[3]-d[1]),S.#L(r,A),S}serialize(){if(this.isEmpty())return null;const a=this.getRect(0,0),l=this.rotation%180==0?a[3]-a[1]:a[2]-a[0],S=x.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:p.AnnotationEditorType.INK,color:S,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,l),pageIndex:this.parent.pageIndex,rect:a,rotation:this.rotation}}}return s})()},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.fitCurve=void 0;const p=N(26);u.fitCurve=p},se=>{function N(c,o,r,A,y){var d,e,i,_,L,F,j,V,te,Z,P,R,I;if(2===c.length)return R=l.vectorLen(l.subtract(c[0],c[1]))/3,[d=[c[0],l.addArrays(c[0],l.mulItems(o,R)),l.addArrays(c[1],l.mulItems(r,R)),c[1]]];if(e=function q(c){var r,A,y,o=[];return c.forEach((b,d)=>{r=d?A+l.vectorLen(l.subtract(b,y)):0,o.push(r),A=r,y=b}),o=o.map(b=>b/A)}(c),[d,_,F]=p(c,e,e,o,r,y),0===_||_<A)return[d];if(_<A*A)for(i=e,L=_,j=F,I=0;I<20;I++){if(i=k(d,c,i),[d,_,F]=p(c,e,i,o,r,y),_<A)return[d];if(F===j){let M=_/L;if(M>.9999&&M<1.0001)break}L=_,j=F}return P=[],(V=l.subtract(c[F-1],c[F+1])).every(M=>0===M)&&(V=l.subtract(c[F-1],c[F]),[V[0],V[1]]=[-V[1],V[0]]),te=l.normalize(V),Z=l.mulItems(te,-1),(P=P.concat(N(c.slice(0,F+1),o,te,A,y))).concat(N(c.slice(F),Z,r,A,y))}function p(c,o,r,A,y,b){var d,e,i;return d=function x(c,o,r,A){var y,b,d,e,i,_,j,V,te,Z,P,R,I,M,T,m=c[0],n=c[c.length-1];for(y=[m,null,null,n],b=l.zeros_Xx2x2(o.length),P=0,R=o.length;P<R;P++)(d=b[P])[0]=l.mulItems(r,3*(M=o[P])*((T=1-M)*T)),d[1]=l.mulItems(A,3*T*(M*M));for(e=[[0,0],[0,0]],i=[0,0],P=0,R=c.length;P<R;P++)M=o[P],e[0][0]+=l.dot((d=b[P])[0],d[0]),e[0][1]+=l.dot(d[0],d[1]),e[1][0]+=l.dot(d[0],d[1]),e[1][1]+=l.dot(d[1],d[1]),I=l.subtract(c[P],S.q([m,m,n,n],M)),i[0]+=l.dot(d[0],I),i[1]+=l.dot(d[1],I);return j=0==(_=e[0][0]*e[1][1]-e[1][0]*e[0][1])?0:(i[0]*e[1][1]-i[1]*e[0][1])/_,V=0===_?0:(e[0][0]*i[1]-e[1][0]*i[0])/_,j<(te=1e-6*(Z=l.vectorLen(l.subtract(m,n))))||V<te?(y[1]=l.addArrays(m,l.mulItems(r,Z/3)),y[2]=l.addArrays(n,l.mulItems(A,Z/3))):(y[1]=l.addArrays(m,l.mulItems(r,j)),y[2]=l.addArrays(n,l.mulItems(A,V))),y}(c,r,A,y),[e,i]=function w(c,o,r){var A,y,b,d,e,i,_,L;y=0,b=Math.floor(c.length/2);const F=s(o,10);for(e=0,i=c.length;e<i;e++)_=c[e],L=f(0,r[e],F,10),(A=(d=l.subtract(S.q(o,L),_))[0]*d[0]+d[1]*d[1])>y&&(y=A,b=e);return[y,b]}(c,d,o),b&&b({bez:d,points:c,params:o,maxErr:e,maxPoint:i}),[d,e,i]}function k(c,o,r){return r.map((A,y)=>function U(c,o,r){var A=l.subtract(S.q(c,r),o),y=S.qprime(c,r),b=l.mulMatrix(A,y),d=l.sum(l.squareItems(y))+2*l.mulMatrix(A,S.qprimeprime(c,r));return 0===d?r:r-b/d}(c,o[y],A))}var s=function(c,o){for(var r,A=[0],y=c[0],b=0,d=1;d<=o;d++)r=S.q(c,d/o),b+=l.vectorLen(l.subtract(r,y)),A.push(b),y=r;return A.map(e=>e/b)};function f(c,o,r,A){if(o<0)return 0;if(o>1)return 1;for(var b,e,i,_=1;_<=A;_++)if(o<=r[_]){i=(o-(b=r[_-1]))/(r[_]-b)*(_/A-(e=(_-1)/A))+e;break}return i}function a(c,o){return l.normalize(l.subtract(c,o))}class l{static zeros_Xx2x2(o){for(var r=[];o--;)r.push([0,0]);return r}static mulItems(o,r){return o.map(A=>A*r)}static mulMatrix(o,r){return o.reduce((A,y,b)=>A+y*r[b],0)}static subtract(o,r){return o.map((A,y)=>A-r[y])}static addArrays(o,r){return o.map((A,y)=>A+r[y])}static addItems(o,r){return o.map(A=>A+r)}static sum(o){return o.reduce((r,A)=>r+A)}static dot(o,r){return l.mulMatrix(o,r)}static vectorLen(o){return Math.hypot(...o)}static divItems(o,r){return o.map(A=>A/r)}static squareItems(o){return o.map(r=>r*r)}static normalize(o){return this.divItems(o,this.vectorLen(o))}}class S{static q(o,r){var A=1-r,y=l.mulItems(o[0],A*A*A),b=l.mulItems(o[1],3*A*A*r),d=l.mulItems(o[2],3*A*r*r),e=l.mulItems(o[3],r*r*r);return l.addArrays(l.addArrays(y,b),l.addArrays(d,e))}static qprime(o,r){var A=1-r,y=l.mulItems(l.subtract(o[1],o[0]),3*A*A),b=l.mulItems(l.subtract(o[2],o[1]),6*A*r),d=l.mulItems(l.subtract(o[3],o[2]),3*r*r);return l.addArrays(l.addArrays(y,b),d)}static qprimeprime(o,r){return l.addArrays(l.mulItems(l.addArrays(l.subtract(o[2],l.mulItems(o[1],2)),o[0]),6*(1-r)),l.mulItems(l.addArrays(l.subtract(o[3],l.mulItems(o[2],2)),o[1]),6*r))}}se.exports=function u(c,o,r){if(!Array.isArray(c))throw new TypeError("First argument should be an array");if(c.forEach(d=>{if(!Array.isArray(d)||d.some(e=>"number"!=typeof e)||d.length!==c[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(c=c.filter((d,e)=>0===e||!d.every((i,_)=>i===c[e-1][_]))).length<2)return[];const A=c.length,y=a(c[1],c[0]),b=a(c[A-2],c[A-1]);return N(c,y,b,o,r)},se.exports.fitCubic=N,se.exports.createTangent=a},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var p=N(1),x=N(8),k=N(5),U=N(28),q=N(29);const w=1e3,f=new WeakSet;function a(v){return{width:v[2]-v[0],height:v[3]-v[1]}}class l{static create(t){switch(t.data.annotationType){case p.AnnotationType.LINK:return new c(t);case p.AnnotationType.TEXT:return new o(t);case p.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new A(t);case"Btn":return t.data.radioButton?new b(t):t.data.checkBox?new y(t):new d(t);case"Ch":return new e(t)}return new r(t);case p.AnnotationType.POPUP:return new i(t);case p.AnnotationType.FREETEXT:return new L(t);case p.AnnotationType.LINE:return new F(t);case p.AnnotationType.SQUARE:return new j(t);case p.AnnotationType.CIRCLE:return new V(t);case p.AnnotationType.POLYLINE:return new te(t);case p.AnnotationType.CARET:return new P(t);case p.AnnotationType.INK:return new R(t);case p.AnnotationType.POLYGON:return new Z(t);case p.AnnotationType.HIGHLIGHT:return new I(t);case p.AnnotationType.UNDERLINE:return new M(t);case p.AnnotationType.SQUIGGLY:return new T(t);case p.AnnotationType.STRIKEOUT:return new m(t);case p.AnnotationType.STAMP:return new n(t);case p.AnnotationType.FILEATTACHMENT:return new h(t);default:return new S(t)}}}class S{constructor(t,{isRenderable:g=!1,ignoreBorder:E=!1,createQuadrilaterals:O=!1}={}){this.isRenderable=g,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,g&&(this.container=this._createContainer(E)),O&&(this.quadrilaterals=this._createQuadrilaterals(E))}_createContainer(t=!1){const g=this.data,E=this.page,O=this.viewport,D=document.createElement("section"),{width:W,height:z}=a(g.rect),[X,K,B,Y]=O.viewBox,H=B-X,G=Y-K;D.setAttribute("data-annotation-id",g.id);const ee=p.Util.normalizeRect([g.rect[0],E.view[3]-g.rect[1]+E.view[1],g.rect[2],E.view[3]-g.rect[3]+E.view[1]]);if(!t&&g.borderStyle.width>0){D.style.borderWidth=`${g.borderStyle.width}px`;const ne=g.borderStyle.horizontalCornerRadius,ae=g.borderStyle.verticalCornerRadius;switch(ne>0||ae>0?D.style.borderRadius=`calc(${ne}px * var(--scale-factor)) / calc(${ae}px * var(--scale-factor))`:this instanceof b&&(D.style.borderRadius=`calc(${W}px * var(--scale-factor)) / calc(${z}px * var(--scale-factor))`),g.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:D.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:D.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:D.style.borderBottomStyle="solid"}const ie=g.borderColor||null;ie?D.style.borderColor=p.Util.makeHexColor(0|ie[0],0|ie[1],0|ie[2]):D.style.borderWidth=0}D.style.left=100*(ee[0]-X)/H+"%",D.style.top=100*(ee[1]-K)/G+"%";const{rotation:$}=g;return g.hasOwnCanvas||0===$?(D.style.width=100*W/H+"%",D.style.height=100*z/G+"%"):this.setRotation($,D),D}setRotation(t,g=this.container){const[E,O,D,W]=this.viewport.viewBox,z=D-E,X=W-O,{width:K,height:B}=a(this.data.rect);let Y,H;t%180==0?(Y=100*K/z,H=100*B/X):(Y=100*B/z,H=100*K/X),g.style.width=`${Y}%`,g.style.height=`${H}%`,g.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(g,E,O)=>{const D=O.detail[g];O.target.style[E]=U.ColorConverters[`${D[0]}_HTML`](D.slice(1))};return(0,p.shadow)(this,"_commonActions",{display:g=>{const E=g.detail.display%2==1;this.container.style.visibility=E?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:E,print:0===g.detail.display||3===g.detail.display})},print:g=>{this.annotationStorage.setValue(this.data.id,{print:g.detail.print})},hidden:g=>{this.container.style.visibility=g.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:g.detail.hidden})},focus:g=>{setTimeout(()=>g.target.focus({preventScroll:!1}),0)},userName:g=>{g.target.title=g.detail.userName},readonly:g=>{g.detail.readonly?g.target.setAttribute("readonly",""):g.target.removeAttribute("readonly")},required:g=>{this._setRequired(g.target,g.detail.required)},bgColor:g=>{t("bgColor","backgroundColor",g)},fillColor:g=>{t("fillColor","backgroundColor",g)},fgColor:g=>{t("fgColor","color",g)},textColor:g=>{t("textColor","color",g)},borderColor:g=>{t("borderColor","borderColor",g)},strokeColor:g=>{t("strokeColor","borderColor",g)},rotation:g=>{const E=g.detail.rotation;this.setRotation(E),this.annotationStorage.setValue(this.data.id,{rotation:E})}})}_dispatchEventFromSandbox(t,g){const E=this._commonActions;for(const O of Object.keys(g.detail)){const D=t[O]||E[O];D&&D(g)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const g=this.annotationStorage.getRawValue(this.data.id);if(!g)return;const E=this._commonActions;for(const[O,D]of Object.entries(g)){const W=E[O];W&&(W({detail:{[O]:D},target:t}),delete g[O])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const g=[],E=this.data.rect;for(const O of this.data.quadPoints)this.data.rect=[O[2].x,O[2].y,O[1].x,O[1].y],g.push(this._createContainer(t));return this.data.rect=E,g}_createPopup(t,g){let E=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,E=this.quadrilaterals[0]),t||((t=document.createElement("div")).className="popupTriggerArea",E.append(t));const D=new _({container:E,trigger:t,color:g.color,titleObj:g.titleObj,modificationDate:g.modificationDate,contentsObj:g.contentsObj,richText:g.richText,hideWrapper:!0}).render();D.style.left="100%",E.append(D)}_renderQuadrilaterals(t){for(const g of this.quadrilaterals)g.className=t;return this.quadrilaterals}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,g=null){const E=[];if(this._fieldObjects){const O=this._fieldObjects[t];if(O)for(const{page:D,id:W,exportValues:z}of O){if(-1===D||W===g)continue;const X="string"==typeof z?z:null,K=document.querySelector(`[data-element-id="${W}"]`);!K||f.has(K)?E.push({id:W,exportValue:X,domElement:K}):(0,p.warn)(`_getElementsByName - element not allowed: ${W}`)}return E}for(const O of document.getElementsByName(t)){const{id:D,exportValue:W}=O;D!==g&&f.has(O)&&E.push({id:D,exportValue:W,domElement:O})}return E}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class c extends S{constructor(t,g=null){super(t,{isRenderable:!0,ignoreBorder:!!g?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:g}=this,E=document.createElement("a");E.setAttribute("data-element-id",t.id);let O=!1;return t.url?(g.addLinkAttributes(E,t.url,t.newWindow),O=!0):t.action?(this._bindNamedAction(E,t.action),O=!0):t.dest?(this._bindLink(E,t.dest),O=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(E,t),O=!0),t.resetForm?(this._bindResetFormAction(E,t.resetForm),O=!0):this.isTooltipOnly&&!O&&(this._bindLink(E,""),O=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((D,W)=>{const z=0===W?E:E.cloneNode();return D.append(z),D}):(this.container.className="linkAnnotation",O&&this.container.append(E),this.container)}_bindLink(t,g){t.href=this.linkService.getDestinationHash(g),t.onclick=()=>(g&&this.linkService.goToDestination(g),!1),(g||""===g)&&(t.className="internalLink")}_bindNamedAction(t,g){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(g),!1),t.className="internalLink"}_bindJSAction(t,g){t.href=this.linkService.getAnchorUrl("");const E=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const O of Object.keys(g.actions)){const D=E.get(O);D&&(t[D]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g.id,name:O}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,g){const E=t.onclick;if(E||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(E||(t.onclick=()=>!1));t.onclick=()=>{E&&E();const{fields:O,refs:D,include:W}=g,z=[];if(0!==O.length||0!==D.length){const B=new Set(D);for(const Y of O){const H=this._fieldObjects[Y]||[];for(const{id:G}of H)B.add(G)}for(const Y of Object.values(this._fieldObjects))for(const H of Y)B.has(H.id)===W&&z.push(H)}else for(const B of Object.values(this._fieldObjects))z.push(...B);const X=this.annotationStorage,K=[];for(const B of z){const{id:Y}=B;switch(K.push(Y),B.type){case"text":case"combobox":case"listbox":X.setValue(Y,{value:B.defaultValue||""});break;case"checkbox":case"radiobutton":X.setValue(Y,{value:B.defaultValue===B.exportValues});break;default:continue}const H=document.querySelector(`[data-element-id="${Y}"]`);H&&(f.has(H)?H.dispatchEvent(new Event("resetform")):(0,p.warn)(`_bindResetFormAction - element not allowed: ${Y}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:K,name:"ResetForm"}}),!1}}}class o extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class r extends S{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:g,isMac:E}=S.platform;return g&&t.ctrlKey||E&&t.metaKey}_setEventListener(t,g,E,O){g.includes("mouse")?t.addEventListener(g,D=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:O(D),shift:D.shiftKey,modifier:this._getKeyModifier(D)}})}):t.addEventListener(g,D=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:E,value:O(D)}})})}_setEventListeners(t,g,E){for(const[O,D]of g)("Action"===D||this.data.actions?.[D])&&this._setEventListener(t,O,D,E)}_setBackgroundColor(t){const g=this.data.backgroundColor||null;t.style.backgroundColor=null===g?"transparent":p.Util.makeHexColor(g[0],g[1],g[2])}_setTextStyle(t){const{fontColor:E}=this.data.defaultAppearanceData,O=this.data.defaultAppearanceData.fontSize||9,D=t.style;let W;if(this.data.multiLine){const z=Math.abs(this.data.rect[3]-this.data.rect[1]),X=Math.round(z/(p.LINE_FACTOR*O))||1;W=Math.min(O,Math.round(z/X/p.LINE_FACTOR))}else{const z=Math.abs(this.data.rect[3]-this.data.rect[1]);W=Math.min(O,Math.round(z/p.LINE_FACTOR))}D.fontSize=`calc(${W}px * var(--scale-factor))`,D.color=p.Util.makeHexColor(E[0],E[1],E[2]),null!==this.data.textAlignment&&(D.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,g){g?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",g)}}class A extends r{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,g,E,O){const D=this.annotationStorage;for(const W of this._getElementsByName(t.name,t.id))W.domElement&&(W.domElement[g]=E),D.setValue(W.id,{[O]:E})}render(){const t=this.annotationStorage,g=this.data.id;this.container.className="textWidgetAnnotation";let E=null;if(this.renderForms){const O=t.getValue(g,{value:this.data.fieldValue});let D=O.formattedValue||O.value||"";const W=t.getValue(g,{charLimit:this.data.maxLen}).charLimit;W&&D.length>W&&(D=D.slice(0,W));const z={userValue:D,formattedValue:null,valueOnFocus:""};this.data.multiLine?(E=document.createElement("textarea"),E.textContent=D,this.data.doNotScroll&&(E.style.overflowY="hidden")):(E=document.createElement("input"),E.type="text",E.setAttribute("value",D),this.data.doNotScroll&&(E.style.overflowX="hidden")),f.add(E),E.setAttribute("data-element-id",g),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.tabIndex=w,this._setRequired(E,this.data.required),W&&(E.maxLength=W),E.addEventListener("input",K=>{t.setValue(g,{value:K.target.value}),this.setPropertyOnSiblings(E,"value",K.target.value,"value")}),E.addEventListener("resetform",K=>{E.value=z.userValue=this.data.defaultFieldValue??"",z.formattedValue=null});let X=K=>{const{formattedValue:B}=z;null!=B&&(K.target.value=B),K.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){E.addEventListener("focus",B=>{z.userValue&&(B.target.value=z.userValue),z.valueOnFocus=B.target.value}),E.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value(H){z.userValue=H.detail.value??"",t.setValue(g,{value:z.userValue.toString()}),H.target.value=z.userValue},formattedValue(H){const{formattedValue:G}=H.detail;z.formattedValue=G,null!=G&&H.target!==document.activeElement&&(H.target.value=G),t.setValue(g,{formattedValue:G})},selRange(H){H.target.setSelectionRange(...H.detail.selRange)},charLimit:H=>{const{charLimit:G}=H.detail,{target:ee}=H;if(0===G)return void ee.removeAttribute("maxLength");ee.setAttribute("maxLength",G);let $=z.userValue;!$||$.length<=G||($=$.slice(0,G),ee.value=z.userValue=$,t.setValue(g,{value:$}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:$,willCommit:!0,commitKey:1,selStart:ee.selectionStart,selEnd:ee.selectionEnd}}))}},B)}),E.addEventListener("keydown",B=>{let Y=-1;if("Escape"===B.key?Y=0:"Enter"===B.key?Y=2:"Tab"===B.key&&(Y=3),-1===Y)return;const{value:H}=B.target;z.valueOnFocus!==H&&(z.userValue=H,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:H,willCommit:!0,commitKey:Y,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}))});const K=X;X=null,E.addEventListener("blur",B=>{const{value:Y}=B.target;z.userValue=Y,this._mouseState.isDown&&z.valueOnFocus!==Y&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:B.target.selectionStart,selEnd:B.target.selectionEnd}}),K(B)}),this.data.actions?.Keystroke&&E.addEventListener("beforeinput",B=>{const{data:Y,target:H}=B,{value:G,selectionStart:ee,selectionEnd:$}=H;let ne=ee,ae=$;switch(B.inputType){case"deleteWordBackward":{const ie=G.substring(0,ee).match(/\w*[^\w]*$/);ie&&(ne-=ie[0].length);break}case"deleteWordForward":{const ie=G.substring(ee).match(/^[^\w]*\w*/);ie&&(ae+=ie[0].length);break}case"deleteContentBackward":ee===$&&(ne-=1);break;case"deleteContentForward":ee===$&&(ae+=1)}B.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:G,change:Y||"",willCommit:!1,selStart:ne,selEnd:ae}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.value)}if(X&&E.addEventListener("blur",X),this.data.comb){const B=(this.data.rect[2]-this.data.rect[0])/W;E.classList.add("comb"),E.style.letterSpacing=`calc(${B}px * var(--scale-factor) - 1ch)`}}else E=document.createElement("div"),E.textContent=this.data.fieldValue,E.style.verticalAlign="middle",E.style.display="table-cell";return this._setTextStyle(E),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class y extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,g=this.data,E=g.id;let O=t.getValue(E,{value:g.exportValue===g.fieldValue}).value;"string"==typeof O&&(O="Off"!==O,t.setValue(E,{value:O})),this.container.className="buttonWidgetAnnotation checkBox";const D=document.createElement("input");return f.add(D),D.setAttribute("data-element-id",E),D.disabled=g.readOnly,this._setRequired(D,this.data.required),D.type="checkbox",D.name=g.fieldName,O&&D.setAttribute("checked",!0),D.setAttribute("exportValue",g.exportValue),D.tabIndex=w,D.addEventListener("change",W=>{const{name:z,checked:X}=W.target;for(const K of this._getElementsByName(z,E)){const B=X&&K.exportValue===g.exportValue;K.domElement&&(K.domElement.checked=B),t.setValue(K.id,{value:B})}t.setValue(E,{value:X})}),D.addEventListener("resetform",W=>{W.target.checked=(g.defaultFieldValue||"Off")===g.exportValue}),this.enableScripting&&this.hasJSActions&&(D.addEventListener("updatefromsandbox",W=>{this._dispatchEventFromSandbox({value(X){X.target.checked="Off"!==X.detail.value,t.setValue(E,{value:X.target.checked})}},W)}),this._setEventListeners(D,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],W=>W.target.checked)),this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class b extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,g=this.data,E=g.id;let O=t.getValue(E,{value:g.fieldValue===g.buttonValue}).value;"string"==typeof O&&(O=O!==g.buttonValue,t.setValue(E,{value:O}));const D=document.createElement("input");if(f.add(D),D.setAttribute("data-element-id",E),D.disabled=g.readOnly,this._setRequired(D,this.data.required),D.type="radio",D.name=g.fieldName,O&&D.setAttribute("checked",!0),D.tabIndex=w,D.addEventListener("change",W=>{const{name:z,checked:X}=W.target;for(const K of this._getElementsByName(z,E))t.setValue(K.id,{value:!1});t.setValue(E,{value:X})}),D.addEventListener("resetform",W=>{const z=g.defaultFieldValue;W.target.checked=null!=z&&z===g.buttonValue}),this.enableScripting&&this.hasJSActions){const W=g.buttonValue;D.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({value:K=>{const B=W===K.detail.value;for(const Y of this._getElementsByName(K.target.name)){const H=B&&Y.id===E;Y.domElement&&(Y.domElement.checked=H),t.setValue(Y.id,{value:H})}}},z)}),this._setEventListeners(D,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.checked)}return this._setBackgroundColor(D),this._setDefaultPropertiesFromJS(D),this.container.append(D),this.container}}class d extends c{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText);const g=t.lastChild;return this.enableScripting&&this.hasJSActions&&g&&(this._setDefaultPropertiesFromJS(g),g.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({},E)})),t}}class e extends r{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,g=this.data.id,E=t.getValue(g,{value:this.data.fieldValue}),O=document.createElement("select");f.add(O),O.setAttribute("data-element-id",g),O.disabled=this.data.readOnly,this._setRequired(O,this.data.required),O.name=this.data.fieldName,O.tabIndex=w;let D=this.data.combo&&this.data.options.length>0;this.data.combo||(O.size=this.data.options.length,this.data.multiSelect&&(O.multiple=!0)),O.addEventListener("resetform",K=>{const B=this.data.defaultFieldValue;for(const Y of O.options)Y.selected=Y.value===B});for(const K of this.data.options){const B=document.createElement("option");B.textContent=K.displayValue,B.value=K.exportValue,E.value.includes(K.exportValue)&&(B.setAttribute("selected",!0),D=!1),O.append(B)}let W=null;if(D){const K=document.createElement("option");K.value=" ",K.setAttribute("hidden",!0),K.setAttribute("selected",!0),O.prepend(K),W=()=>{K.remove(),O.removeEventListener("input",W),W=null},O.addEventListener("input",W)}const z=(K,B)=>{const Y=B?"value":"textContent",H=K.target.options;return K.target.multiple?Array.prototype.filter.call(H,G=>G.selected).map(G=>G[Y]):-1===H.selectedIndex?null:H[H.selectedIndex][Y]},X=K=>Array.prototype.map.call(K.target.options,Y=>({displayValue:Y.textContent,exportValue:Y.value}));return this.enableScripting&&this.hasJSActions?(O.addEventListener("updatefromsandbox",K=>{this._dispatchEventFromSandbox({value(Y){W?.();const H=Y.detail.value,G=new Set(Array.isArray(H)?H:[H]);for(const ee of O.options)ee.selected=G.has(ee.value);t.setValue(g,{value:z(Y,!0)})},multipleSelection(Y){O.multiple=!0},remove(Y){const H=O.options,G=Y.detail.remove;H[G].selected=!1,O.remove(G),H.length>0&&-1===Array.prototype.findIndex.call(H,$=>$.selected)&&(H[0].selected=!0),t.setValue(g,{value:z(Y,!0),items:X(Y)})},clear(Y){for(;0!==O.length;)O.remove(0);t.setValue(g,{value:null,items:[]})},insert(Y){const{index:H,displayValue:G,exportValue:ee}=Y.detail.insert,$=O.children[H],ne=document.createElement("option");ne.textContent=G,ne.value=ee,$?$.before(ne):O.append(ne),t.setValue(g,{value:z(Y,!0),items:X(Y)})},items(Y){const{items:H}=Y.detail;for(;0!==O.length;)O.remove(0);for(const G of H){const{displayValue:ee,exportValue:$}=G,ne=document.createElement("option");ne.textContent=ee,ne.value=$,O.append(ne)}O.options.length>0&&(O.options[0].selected=!0),t.setValue(g,{value:z(Y,!0),items:X(Y)})},indices(Y){const H=new Set(Y.detail.indices);for(const G of Y.target.options)G.selected=H.has(G.index);t.setValue(g,{value:z(Y,!0)})},editable(Y){Y.target.disabled=!Y.detail.editable}},K)}),O.addEventListener("input",K=>{const B=z(K,!0),Y=z(K,!1);t.setValue(g,{value:B}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Y,changeEx:B,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(O,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],K=>K.target.checked)):O.addEventListener("input",function(K){t.setValue(g,{value:z(K,!0)})}),this.data.combo&&this._setTextStyle(O),this._setBackgroundColor(O),this._setDefaultPropertiesFromJS(O),this.container.append(O),this.container}}class i extends S{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const E=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===E.length)return this.container;const O=new _({container:this.container,trigger:Array.from(E),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),D=this.page,W=p.Util.normalizeRect([this.data.parentRect[0],D.view[3]-this.data.parentRect[1]+D.view[1],this.data.parentRect[2],D.view[3]-this.data.parentRect[3]+D.view[1]]),z=W[0]+this.data.parentRect[2]-this.data.parentRect[0],X=W[1],[K,B,Y,H]=this.viewport.viewBox,ee=H-B;return this.container.style.left=100*(z-K)/(Y-K)+"%",this.container.style.top=100*(X-B)/ee+"%",this.container.append(O.render()),this.container}}class _{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const g=document.createElement("div");g.className="popupWrapper",this.hideElement=this.hideWrapper?g:this.container,this.hideElement.hidden=!0;const E=document.createElement("div");E.className="popup";const O=this.color;O&&(E.style.backgroundColor=p.Util.makeHexColor(0|.7*(255-O[0])+O[0],0|.7*(255-O[1])+O[1],0|.7*(255-O[2])+O[2]));const D=document.createElement("h1");D.dir=this.titleObj.dir,D.textContent=this.titleObj.str,E.append(D);const W=x.PDFDateString.toDateObject(this.modificationDate);if(W){const z=document.createElement("span");z.className="popupDate",z.textContent="{{date}}, {{time}}",z.dataset.l10nId="annotation_date_string",z.dataset.l10nArgs=JSON.stringify({date:W.toLocaleDateString(),time:W.toLocaleTimeString()}),E.append(z)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const z=this._formatContents(this.contentsObj);E.append(z)}else q.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:E}),E.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const z of this.trigger)z.addEventListener("click",this._toggle.bind(this)),z.addEventListener("mouseover",this._show.bind(this,!1)),z.addEventListener("mouseout",this._hide.bind(this,!1));return E.addEventListener("click",this._hide.bind(this,!0)),g.append(E),g}_formatContents({str:t,dir:g}){const E=document.createElement("p");E.className="popupContent",E.dir=g;const O=t.split(/(?:\r\n?|\n)/);for(let D=0,W=O.length;D<W;++D)E.append(document.createTextNode(O[D])),D<W-1&&E.append(document.createElement("br"));return E}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class L extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const t=document.createElement("div");t.className="annotationTextContent",t.setAttribute("role","comment");for(const g of this.textContent){const E=document.createElement("span");E.textContent=g,t.append(E)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:g,height:E}=a(t.rect),O=this.svgFactory.create(g,E,!0),D=this.svgFactory.createElement("svg:line");return D.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),D.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),D.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),D.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),D.setAttribute("stroke-width",t.borderStyle.width||1),D.setAttribute("stroke","transparent"),D.setAttribute("fill","transparent"),O.append(D),this.container.append(O),this._createPopup(D,t),this.container}}class j extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:g,height:E}=a(t.rect),O=this.svgFactory.create(g,E,!0),D=t.borderStyle.width,W=this.svgFactory.createElement("svg:rect");return W.setAttribute("x",D/2),W.setAttribute("y",D/2),W.setAttribute("width",g-D),W.setAttribute("height",E-D),W.setAttribute("stroke-width",D||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),O.append(W),this.container.append(O),this._createPopup(W,t),this.container}}class V extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:g,height:E}=a(t.rect),O=this.svgFactory.create(g,E,!0),D=t.borderStyle.width,W=this.svgFactory.createElement("svg:ellipse");return W.setAttribute("cx",g/2),W.setAttribute("cy",E/2),W.setAttribute("rx",g/2-D/2),W.setAttribute("ry",E/2-D/2),W.setAttribute("stroke-width",D||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),O.append(W),this.container.append(O),this._createPopup(W,t),this.container}}class te extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:g,height:E}=a(t.rect),O=this.svgFactory.create(g,E,!0);let D=[];for(const z of t.vertices)D.push(z.x-t.rect[0]+","+(t.rect[3]-z.y));D=D.join(" ");const W=this.svgFactory.createElement(this.svgElementName);return W.setAttribute("points",D),W.setAttribute("stroke-width",t.borderStyle.width||1),W.setAttribute("stroke","transparent"),W.setAttribute("fill","transparent"),O.append(W),this.container.append(O),this._createPopup(W,t),this.container}}class Z extends te{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class P extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class R extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:g,height:E}=a(t.rect),O=this.svgFactory.create(g,E,!0);for(const D of t.inkLists){let W=[];for(const X of D)W.push(`${X.x-t.rect[0]},${t.rect[3]-X.y}`);W=W.join(" ");const z=this.svgFactory.createElement(this.svgElementName);z.setAttribute("points",W),z.setAttribute("stroke-width",t.borderStyle.width||1),z.setAttribute("stroke","transparent"),z.setAttribute("fill","transparent"),this._createPopup(z,t),O.append(z)}return this.container.append(O),this.container}}class I extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class M extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class T extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class m extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class n extends S{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class h extends S{constructor(t){super(t,{isRenderable:!0});const{filename:g,content:E}=this.data.file;this.filename=(0,x.getFilenameFromUrl)(g),this.content=E,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:g,content:E})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.className="popupTriggerArea",t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class C{static#e(t,g,E,O){const D=t.firstChild||t;D.id=`${x.AnnotationPrefix}${g}`,E.append(t),O?.moveElementInDOM(E,t,D,!1)}static render(t){const{annotations:g,div:E,viewport:O,accessibilityManager:D}=t;this.#t(E,O);let W=0;for(const z of g){if(z.annotationType!==p.AnnotationType.POPUP){const{width:K,height:B}=a(z.rect);if(K<=0||B<=0)continue}const X=l.create({data:z,layer:E,page:t.page,viewport:O,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new x.DOMSVGFactory,annotationStorage:t.annotationStorage||new k.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(X.isRenderable){const K=X.render();if(z.hidden&&(K.style.visibility="hidden"),Array.isArray(K))for(const B of K)B.style.zIndex=W++,C.#e(B,z.id,E,D);else K.style.zIndex=W++,X instanceof i?E.prepend(K):C.#e(K,z.id,E,D)}}this.#n(E,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:g,div:E,viewport:O}=t;this.#t(E,O),this.#n(E,g),E.hidden=!1}static#t(t,{width:g,height:E,rotation:O}){const{style:D}=t,W=O%180!=0,z=Math.floor(g)+"px",X=Math.floor(E)+"px";D.width=W?X:z,D.height=W?z:X,t.setAttribute("data-main-rotation",O)}static#n(t,g){if(g){for(const[E,O]of g){const D=t.querySelector(`[data-annotation-id="${E}"]`);if(!D)continue;const{firstChild:W}=D;W?"CANVAS"===W.nodeName?W.replaceWith(O):W.before(O):D.append(O)}g.clear()}}}u.AnnotationLayer=C},(se,u)=>{function N(x){return Math.floor(255*Math.max(0,Math.min(1,x))).toString(16).padStart(2,"0")}Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0,u.ColorConverters=class p{static CMYK_G([k,U,q,w]){return["G",1-Math.min(1,.3*k+.59*q+.11*U+w)]}static G_CMYK([k]){return["CMYK",0,0,0,1-k]}static G_RGB([k]){return["RGB",k,k,k]}static G_HTML([k]){const U=N(k);return`#${U}${U}${U}`}static RGB_G([k,U,q]){return["G",.3*k+.59*U+.11*q]}static RGB_HTML([k,U,q]){return`#${N(k)}${N(U)}${N(q)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([k,U,q,w]){return["RGB",1-Math.min(1,k+w),1-Math.min(1,q+w),1-Math.min(1,U+w)]}static CMYK_HTML(k){const U=this.CMYK_RGB(k).slice(1);return this.RGB_HTML(U)}static RGB_CMYK([k,U,q]){const w=1-k,s=1-U,f=1-q;return["CMYK",w,s,f,Math.min(w,s,f)]}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var p=N(20);u.XfaLayer=class x{static setupStorage(U,q,w,s,f){const a=s.getValue(q,{value:null});switch(w.name){case"textarea":if(null!==a.value&&(U.textContent=a.value),"print"===f)break;U.addEventListener("input",l=>{s.setValue(q,{value:l.target.value})});break;case"input":if("radio"===w.attributes.type||"checkbox"===w.attributes.type){if(a.value===w.attributes.xfaOn?U.setAttribute("checked",!0):a.value===w.attributes.xfaOff&&U.removeAttribute("checked"),"print"===f)break;U.addEventListener("change",l=>{s.setValue(q,{value:l.target.getAttribute(l.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==a.value&&U.setAttribute("value",a.value),"print"===f)break;U.addEventListener("input",l=>{s.setValue(q,{value:l.target.value})})}break;case"select":if(null!==a.value)for(const l of w.children)l.attributes.value===a.value&&(l.attributes.selected=!0);U.addEventListener("input",l=>{const S=l.target.options;s.setValue(q,{value:-1===S.selectedIndex?"":S[S.selectedIndex].value})})}}static setAttributes({html:U,element:q,storage:w=null,intent:s,linkService:f}){const{attributes:a}=q,l=U instanceof HTMLAnchorElement;"radio"===a.type&&(a.name=`${a.name}-${s}`);for(const[S,c]of Object.entries(a))if(null!=c)switch(S){case"class":c.length&&U.setAttribute(S,c.join(" "));break;case"dataId":break;case"id":U.setAttribute("data-element-id",c);break;case"style":Object.assign(U.style,c);break;case"textContent":U.textContent=c;break;default:(!l||"href"!==S&&"newWindow"!==S)&&U.setAttribute(S,c)}l&&f.addLinkAttributes(U,a.href,a.newWindow),w&&a.dataId&&this.setupStorage(U,a.dataId,q,w)}static render(U){const q=U.annotationStorage,w=U.linkService,s=U.xfaHtml,f=U.intent||"display",a=document.createElement(s.name);s.attributes&&this.setAttributes({html:a,element:s,intent:f,linkService:w});const l=[[s,-1,a]],S=U.div;if(S.append(a),U.viewport){const o=`matrix(${U.viewport.transform.join(",")})`;S.style.transform=o}"richText"!==f&&S.setAttribute("class","xfaLayer xfaFont");const c=[];for(;l.length>0;){const[o,r,A]=l.at(-1);if(r+1===o.children.length){l.pop();continue}const y=o.children[++l.at(-1)[1]];if(null===y)continue;const{name:b}=y;if("#text"===b){const e=document.createTextNode(y.value);c.push(e),A.append(e);continue}let d;if(d=y?.attributes?.xmlns?document.createElementNS(y.attributes.xmlns,b):document.createElement(b),A.append(d),y.attributes&&this.setAttributes({html:d,element:y,storage:q,intent:f,linkService:w}),y.children&&y.children.length>0)l.push([y,-1,d]);else if(y.value){const e=document.createTextNode(y.value);p.XfaText.shouldBuildText(b)&&c.push(e),d.append(e)}}for(const o of S.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))o.setAttribute("readOnly",!0);return{textDivs:c}}static update(U){const q=`matrix(${U.viewport.transform.join(",")})`;U.div.style.transform=q,U.div.hidden=!1}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=function y(b){const d=new A({textContent:b.textContent,textContentStream:b.textContentStream,container:b.container,viewport:b.viewport,textDivs:b.textDivs,textContentItemsStr:b.textContentItemsStr,enhanceTextSelection:b.enhanceTextSelection});return d._render(b.timeout),d};var p=N(1),x=N(8);const U=30,w=new Map,s=/^\s+$/g;function a(b,d,e,i){const _=document.createElement("span"),L=b._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==d.str,hasEOL:d.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==d.str,hasEOL:d.hasEOL,fontSize:0};b._textDivs.push(_);const F=p.Util.transform(b._viewport.transform,d.transform);let j=Math.atan2(F[1],F[0]);const V=e[d.fontName];V.vertical&&(j+=Math.PI/2);const te=Math.hypot(F[2],F[3]),Z=te*function f(b,d){const e=w.get(b);if(e)return e;d.save(),d.font=`30px ${b}`;const i=d.measureText("");let _=i.fontBoundingBoxAscent,L=Math.abs(i.fontBoundingBoxDescent);if(_){d.restore();const j=_/(_+L);return w.set(b,j),j}d.strokeStyle="red",d.clearRect(0,0,U,U),d.strokeText("g",0,0);let F=d.getImageData(0,0,U,U).data;L=0;for(let j=F.length-1-3;j>=0;j-=4)if(F[j]>0){L=Math.ceil(j/4/U);break}d.clearRect(0,0,U,U),d.strokeText("A",0,U),F=d.getImageData(0,0,U,U).data,_=0;for(let j=0,V=F.length;j<V;j+=4)if(F[j]>0){_=U-Math.floor(j/4/U);break}if(d.restore(),_){const j=_/(_+L);return w.set(b,j),j}return w.set(b,.8),.8}(V.fontFamily,i);let P,R;0===j?(P=F[4],R=F[5]-Z):(P=F[4]+Z*Math.sin(j),R=F[5]-Z*Math.cos(j)),_.style.left=`${P}px`,_.style.top=`${R}px`,_.style.fontSize=`${te}px`,_.style.fontFamily=V.fontFamily,L.fontSize=te,_.setAttribute("role","presentation"),_.textContent=d.str,_.dir=d.dir,b._fontInspectorEnabled&&(_.dataset.fontName=d.fontName),0!==j&&(L.angle=j*(180/Math.PI));let I=!1;if(d.str.length>1||b._enhanceTextSelection&&s.test(d.str))I=!0;else if(" "!==d.str&&d.transform[0]!==d.transform[3]){const M=Math.abs(d.transform[0]),T=Math.abs(d.transform[3]);M!==T&&Math.max(M,T)/Math.min(M,T)>1.5&&(I=!0)}if(I&&(L.canvasWidth=V.vertical?d.height*b._viewport.scale:d.width*b._viewport.scale),b._textDivProperties.set(_,L),b._textContentStream&&b._layoutText(_),b._enhanceTextSelection&&L.hasText){let M=1,T=0;0!==j&&(M=Math.cos(j),T=Math.sin(j));const m=(V.vertical?d.height:d.width)*b._viewport.scale,n=te;let h,C;0!==j?(h=[M,T,-T,M,P,R],C=p.Util.getAxialAlignedBoundingBox([0,0,m,n],h)):C=[P,R,P+m,R+n],b._bounds.push({left:C[0],top:C[1],right:C[2],bottom:C[3],div:_,size:[m,n],m:h})}}function l(b){if(b._canceled)return;const d=b._textDivs,e=b._capability,i=d.length;if(i>1e5)return b._renderingDone=!0,void e.resolve();if(!b._textContentStream)for(let _=0;_<i;_++)b._layoutText(d[_]);b._renderingDone=!0,e.resolve()}function S(b,d,e){let i=0;for(let _=0;_<e;_++){const L=b[d++];L>0&&(i=i?Math.min(L,i):L)}return i}function r(b,d){d.sort(function(_,L){return _.x1-L.x1||_.index-L.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const _ of d){let L=0;for(;L<i.length&&i[L].end<=_.y1;)L++;let F=i.length-1;for(;F>=0&&i[F].start>=_.y2;)F--;let j,V,te,Z,P=-1/0;for(te=L;te<=F;te++){let M;j=i[te],V=j.boundary,M=V.x2>_.x1?V.index>_.index?V.x1New:_.x1:void 0===V.x2New?(V.x2+_.x1)/2:V.x2New,M>P&&(P=M)}for(_.x1New=P,te=L;te<=F;te++)j=i[te],V=j.boundary,void 0===V.x2New?V.x2>_.x1?V.index>_.index&&(V.x2New=V.x2):V.x2New=P:V.x2New>P&&(V.x2New=Math.max(P,V.x2));const R=[];let I=null;for(te=L;te<=F;te++){j=i[te],V=j.boundary;const M=V.x2>_.x2?V:_;I===M?R.at(-1).end=j.end:(R.push({start:j.start,end:j.end,boundary:M}),I=M)}for(i[L].start<_.y1&&(R[0].start=_.y1,R.unshift({start:i[L].start,end:_.y1,boundary:i[L].boundary})),_.y2<i[F].end&&(R.at(-1).end=_.y2,R.push({start:_.y2,end:i[F].end,boundary:i[F].boundary})),te=L;te<=F;te++){if(j=i[te],V=j.boundary,void 0!==V.x2New)continue;let M=!1;for(Z=L-1;!M&&Z>=0&&i[Z].start>=V.y1;Z--)M=i[Z].boundary===V;for(Z=F+1;!M&&Z<i.length&&i[Z].end<=V.y2;Z++)M=i[Z].boundary===V;for(Z=0;!M&&Z<R.length;Z++)M=R[Z].boundary===V;M||(V.x2New=P)}Array.prototype.splice.apply(i,[L,F-L+1,...R])}for(const _ of i){const L=_.boundary;void 0===L.x2New&&(L.x2New=Math.max(b,L.x2))}}class A{constructor({textContent:d,textContentStream:e,container:i,viewport:_,textDivs:L,textContentItemsStr:F,enhanceTextSelection:j}){j&&(0,x.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=d,this._textContentStream=e,this._container=i,this._document=i.ownerDocument,this._viewport=_,this._textDivs=L||[],this._textContentItemsStr=F||[],this._enhanceTextSelection=!!j,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,p.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(d,e){for(let i=0,_=d.length;i<_;i++)if(void 0!==d[i].str)this._textContentItemsStr.push(d[i].str),a(this,d[i],e,this._layoutTextCtx);else if("beginMarkedContentProps"===d[i].type||"beginMarkedContent"===d[i].type){const L=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==d[i].id&&this._container.setAttribute("id",`${d[i].id}`),L.append(this._container)}else"endMarkedContent"===d[i].type&&(this._container=this._container.parentNode)}_layoutText(d){const e=this._textDivProperties.get(d);let i="";if(0!==e.canvasWidth&&e.hasText){const{fontFamily:_}=d.style,{fontSize:L}=e;(L!==this._layoutTextLastFontSize||_!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${L*this._devicePixelRatio}px ${_}`,this._layoutTextLastFontSize=L,this._layoutTextLastFontFamily=_);const{width:F}=this._layoutTextCtx.measureText(d.textContent);if(F>0){const j=this._devicePixelRatio*e.canvasWidth/F;this._enhanceTextSelection&&(e.scale=j),i=`scaleX(${j})`}}if(0!==e.angle&&(i=`rotate(${e.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(e.originalTransform=i),d.style.transform=i),e.hasText&&this._container.append(d),e.hasEOL){const _=document.createElement("br");_.setAttribute("role","presentation"),this._container.append(_)}}_render(d=0){const e=(0,p.createPromiseCapability)();let i=Object.create(null);const _=this._document.createElement("canvas");if(_.height=_.width=U,this._layoutTextCtx=_.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),e.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const L=()=>{this._reader.read().then(({value:F,done:j})=>{j?e.resolve():(Object.assign(i,F.styles),this._processItems(F.items,i),L())},e.reject)};this._reader=this._textContentStream.getReader(),L()}}e.promise.then(()=>{i=null,d?this._renderTimer=setTimeout(()=>{l(this),this._renderTimer=null},d):l(this)},this._capability.reject)}expandTextDivs(d=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function c(b){const d=b._bounds,e=b._viewport,i=function o(b,d,e){const i=e.map(function(L,F){return{x1:L.left,y1:L.top,x2:L.right,y2:L.bottom,index:F,x1New:void 0,x2New:void 0}});r(b,i);const _=new Array(e.length);for(const L of i)_[L.index]={left:L.x1New,top:0,right:L.x2New,bottom:0};e.map(function(L,F){const j=_[F],V=i[F];V.x1=L.top,V.y1=b-j.right,V.x2=L.bottom,V.y2=b-j.left,V.index=F,V.x1New=void 0,V.x2New=void 0}),r(d,i);for(const L of i){const F=L.index;_[F].top=L.x1New,_[F].bottom=L.x2New}return _}(e.width,e.height,d);for(let _=0;_<i.length;_++){const L=d[_].div,F=b._textDivProperties.get(L);if(0===F.angle){F.paddingLeft=d[_].left-i[_].left,F.paddingTop=d[_].top-i[_].top,F.paddingRight=i[_].right-d[_].right,F.paddingBottom=i[_].bottom-d[_].bottom,b._textDivProperties.set(L,F);continue}const j=i[_],V=d[_],te=V.m,Z=te[0],P=te[1],R=[[0,0],[0,V.size[1]],[V.size[0],0],V.size],I=new Float64Array(64);for(let T=0,m=R.length;T<m;T++){const n=p.Util.applyTransform(R[T],te);I[T+0]=Z&&(j.left-n[0])/Z,I[T+4]=P&&(j.top-n[1])/P,I[T+8]=Z&&(j.right-n[0])/Z,I[T+12]=P&&(j.bottom-n[1])/P,I[T+16]=P&&(j.left-n[0])/-P,I[T+20]=Z&&(j.top-n[1])/Z,I[T+24]=P&&(j.right-n[0])/-P,I[T+28]=Z&&(j.bottom-n[1])/Z,I[T+32]=Z&&(j.left-n[0])/-Z,I[T+36]=P&&(j.top-n[1])/-P,I[T+40]=Z&&(j.right-n[0])/-Z,I[T+44]=P&&(j.bottom-n[1])/-P,I[T+48]=P&&(j.left-n[0])/P,I[T+52]=Z&&(j.top-n[1])/-Z,I[T+56]=P&&(j.right-n[0])/P,I[T+60]=Z&&(j.bottom-n[1])/-Z}const M=1+Math.min(Math.abs(Z),Math.abs(P));F.paddingLeft=S(I,32,16)/M,F.paddingTop=S(I,48,16)/M,F.paddingRight=S(I,0,16)/M,F.paddingBottom=S(I,16,16)/M,b._textDivProperties.set(L,F)}}(this),this._bounds=null);const e=[],i=[];for(let _=0,L=this._textDivs.length;_<L;_++){const F=this._textDivs[_],j=this._textDivProperties.get(F);j.hasText&&(d?(e.length=0,i.length=0,j.originalTransform&&e.push(j.originalTransform),j.paddingTop>0?(i.push(`${j.paddingTop}px`),e.push(`translateY(${-j.paddingTop}px)`)):i.push(0),i.push(j.paddingRight>0?j.paddingRight/j.scale+"px":0),i.push(j.paddingBottom>0?`${j.paddingBottom}px`:0),j.paddingLeft>0?(i.push(j.paddingLeft/j.scale+"px"),e.push(`translateX(${-j.paddingLeft/j.scale}px)`)):i.push(0),F.style.padding=i.join(" "),e.length&&(F.style.transform=e.join(" "))):(F.style.padding=null,F.style.transform=j.originalTransform))}}}u.TextLayerRenderTask=A},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var p=N(8),x=N(1),k=N(3);let U=class{constructor(){(0,x.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=U;{let o=function(e){let i=[];const _=[];for(const L of e)"save"!==L.fn?"restore"===L.fn?i=_.pop():i.push(L):(i.push({fnId:92,fn:"group",items:[]}),_.push(i),i=i.at(-1).items);return i},r=function(e){if(Number.isInteger(e))return e.toString();const i=e.toFixed(10);let _=i.length-1;if("0"!==i[_])return i;do{_--}while("0"===i[_]);return i.substring(0,"."===i[_]?_:_+1)},A=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${r(e[0])} ${r(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const i=180*Math.acos(e[0])/Math.PI;return`rotate(${r(i)})`}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${r(e[4])} ${r(e[5])})`;return`matrix(${r(e[0])} ${r(e[1])} ${r(e[2])} ${r(e[3])} ${r(e[4])} ${r(e[5])})`};const q={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},w="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/1999/xlink",f=["butt","round","square"],a=["miter","round","bevel"],l=function(e,i="",_=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!_)return URL.createObjectURL(new Blob([e],{type:i}));const L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let F=`data:${i};base64,`;for(let j=0,V=e.length;j<V;j+=3){const te=255&e[j],Z=255&e[j+1],P=255&e[j+2];F+=L[te>>2]+L[(3&te)<<4|Z>>4]+L[j+1<V?(15&Z)<<2|P>>6:64]+L[j+2<V?63&P:64]}return F},S=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),_=new Int32Array(256);for(let P=0;P<256;P++){let R=P;for(let I=0;I<8;I++)R=1&R?3988292384^R>>1&2147483647:R>>1&2147483647;_[P]=R}function F(P,R,I,M){let T=M;const m=R.length;I[T]=m>>24&255,I[T+1]=m>>16&255,I[T+2]=m>>8&255,I[T+3]=255&m,T+=4,I[T]=255&P.charCodeAt(0),I[T+1]=255&P.charCodeAt(1),I[T+2]=255&P.charCodeAt(2),I[T+3]=255&P.charCodeAt(3),T+=4,I.set(R,T),T+=R.length;const n=function L(P,R,I){let M=-1;for(let T=R;T<I;T++)M=M>>>8^_[255&(M^P[T])];return-1^M}(I,M+4,T);I[T]=n>>24&255,I[T+1]=n>>16&255,I[T+2]=n>>8&255,I[T+3]=255&n}function te(P){let R=P.length;const I=65535,M=Math.ceil(R/I),T=new Uint8Array(2+R+5*M+4);let m=0;T[m++]=120,T[m++]=156;let n=0;for(;R>I;)T[m++]=0,T[m++]=255,T[m++]=255,T[m++]=0,T[m++]=0,T.set(P.subarray(n,n+I),m),m+=I,n+=I,R-=I;T[m++]=1,T[m++]=255&R,T[m++]=R>>8&255,T[m++]=255&~R,T[m++]=(65535&~R)>>8&255,T.set(P.subarray(n),m),m+=P.length-n;const h=function j(P,R,I){let M=1,T=0;for(let m=R;m<I;++m)M=(M+(255&P[m]))%65521,T=(T+M)%65521;return T<<16|M}(P,0,P.length);return T[m++]=h>>24&255,T[m++]=h>>16&255,T[m++]=h>>8&255,T[m++]=255&h,T}return function(R,I,M){return function Z(P,R,I,M){const T=P.width,m=P.height;let n,h,C;const v=P.data;switch(R){case x.ImageKind.GRAYSCALE_1BPP:h=0,n=1,C=T+7>>3;break;case x.ImageKind.RGB_24BPP:h=2,n=8,C=3*T;break;case x.ImageKind.RGBA_32BPP:h=6,n=8,C=4*T;break;default:throw new Error("invalid format")}const t=new Uint8Array((1+C)*m);let g=0,E=0;for(let K=0;K<m;++K)t[g++]=0,t.set(v.subarray(E,E+C),g),E+=C,g+=C;if(R===x.ImageKind.GRAYSCALE_1BPP&&M){g=0;for(let K=0;K<m;K++){g++;for(let B=0;B<C;B++)t[g++]^=255}}const O=new Uint8Array([T>>24&255,T>>16&255,T>>8&255,255&T,m>>24&255,m>>16&255,m>>8&255,255&m,n,h,0,0,0]),D=function V(P){if(!k.isNodeJS)return te(P);try{let R;R=parseInt(process.versions.node)>=8?P:Buffer.from(P);const I=__webpack_require__(372).deflateSync(R,{level:9});return I instanceof Uint8Array?I:new Uint8Array(I)}catch(R){(0,x.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+R)}return te(P)}(t),z=new Uint8Array(e.length+36+O.length+D.length);let X=0;return z.set(e,X),X+=e.length,F("IHDR",O,z,X),X+=12+O.length,F("IDATA",D,z,X),X+=12+D.length,F("IEND",new Uint8Array(0),z,X),l(z,"image/png",I)}(R,void 0===R.kind?x.ImageKind.GRAYSCALE_1BPP:R.kind,I,M)}}();class c{constructor(){this.fontSizeScale=1,this.fontWeight=q.fontWeight,this.fontSize=0,this.textMatrix=x.IDENTITY_MATRIX,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=x.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=q.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,_){this.x=i,this.y=_}}let y=0,b=0,d=0;u.SVGGraphics=U=class{constructor(e,i,_=!1){(0,p.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new p.DOMSVGFactory,this.current=new c,this.transformMatrix=x.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const L in x.OPS)this._operatorIdMapping[x.OPS[L]]=L}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const i=e.fnArray,_=e.argsArray;for(let L=0,F=i.length;L<F;L++)if(i[L]===x.OPS.dependency)for(const j of _[L]){const V=j.startsWith("g_")?this.commonObjs:this.objs,te=new Promise(Z=>{V.get(j,Z)});this.current.dependencies.push(te)}return Promise.all(this.current.dependencies)}transform(e,i,_,L,F,j){this.transformMatrix=x.Util.transform(this.transformMatrix,[e,i,_,L,F,j]),this.tgrp=null}getSVG(e,i){this.viewport=i;const _=this._initialize(i);return this.loadDependencies(e).then(()=>(this.transformMatrix=x.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),_))}convertOpList(e){const i=this._operatorIdMapping,_=e.argsArray,L=e.fnArray,F=[];for(let j=0,V=L.length;j<V;j++){const te=L[j];F.push({fnId:te,fn:i[te],args:_[j]})}return o(F)}executeOpTree(e){for(const i of e){const _=i.fn,F=i.args;switch(0|i.fnId){case x.OPS.beginText:this.beginText();break;case x.OPS.dependency:break;case x.OPS.setLeading:this.setLeading(F);break;case x.OPS.setLeadingMoveText:this.setLeadingMoveText(F[0],F[1]);break;case x.OPS.setFont:this.setFont(F);break;case x.OPS.showText:case x.OPS.showSpacedText:this.showText(F[0]);break;case x.OPS.endText:this.endText();break;case x.OPS.moveText:this.moveText(F[0],F[1]);break;case x.OPS.setCharSpacing:this.setCharSpacing(F[0]);break;case x.OPS.setWordSpacing:this.setWordSpacing(F[0]);break;case x.OPS.setHScale:this.setHScale(F[0]);break;case x.OPS.setTextMatrix:this.setTextMatrix(F[0],F[1],F[2],F[3],F[4],F[5]);break;case x.OPS.setTextRise:this.setTextRise(F[0]);break;case x.OPS.setTextRenderingMode:this.setTextRenderingMode(F[0]);break;case x.OPS.setLineWidth:this.setLineWidth(F[0]);break;case x.OPS.setLineJoin:this.setLineJoin(F[0]);break;case x.OPS.setLineCap:this.setLineCap(F[0]);break;case x.OPS.setMiterLimit:this.setMiterLimit(F[0]);break;case x.OPS.setFillRGBColor:this.setFillRGBColor(F[0],F[1],F[2]);break;case x.OPS.setStrokeRGBColor:this.setStrokeRGBColor(F[0],F[1],F[2]);break;case x.OPS.setStrokeColorN:this.setStrokeColorN(F);break;case x.OPS.setFillColorN:this.setFillColorN(F);break;case x.OPS.shadingFill:this.shadingFill(F[0]);break;case x.OPS.setDash:this.setDash(F[0],F[1]);break;case x.OPS.setRenderingIntent:this.setRenderingIntent(F[0]);break;case x.OPS.setFlatness:this.setFlatness(F[0]);break;case x.OPS.setGState:this.setGState(F[0]);break;case x.OPS.fill:this.fill();break;case x.OPS.eoFill:this.eoFill();break;case x.OPS.stroke:this.stroke();break;case x.OPS.fillStroke:this.fillStroke();break;case x.OPS.eoFillStroke:this.eoFillStroke();break;case x.OPS.clip:this.clip("nonzero");break;case x.OPS.eoClip:this.clip("evenodd");break;case x.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case x.OPS.paintImageXObject:this.paintImageXObject(F[0]);break;case x.OPS.paintInlineImageXObject:this.paintInlineImageXObject(F[0]);break;case x.OPS.paintImageMaskXObject:this.paintImageMaskXObject(F[0]);break;case x.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(F[0],F[1]);break;case x.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case x.OPS.closePath:this.closePath();break;case x.OPS.closeStroke:this.closeStroke();break;case x.OPS.closeFillStroke:this.closeFillStroke();break;case x.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case x.OPS.nextLine:this.nextLine();break;case x.OPS.transform:this.transform(F[0],F[1],F[2],F[3],F[4],F[5]);break;case x.OPS.constructPath:this.constructPath(F[0],F[1]);break;case x.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,x.warn)(`Unimplemented operator ${_}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,i,_,L,F,j){const V=this.current;V.textMatrix=V.lineMatrix=[e,i,_,L,F,j],V.textMatrixScale=Math.hypot(e,i),V.x=V.lineX=0,V.y=V.lineY=0,V.xcoords=[],V.ycoords=[],V.tspan=this.svgFactory.createElement("svg:tspan"),V.tspan.setAttributeNS(null,"font-family",V.fontFamily),V.tspan.setAttributeNS(null,"font-size",`${r(V.fontSize)}px`),V.tspan.setAttributeNS(null,"y",r(-V.y)),V.txtElement=this.svgFactory.createElement("svg:text"),V.txtElement.append(V.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=x.IDENTITY_MATRIX,e.lineMatrix=x.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,i){const _=this.current;_.x=_.lineX+=e,_.y=_.lineY+=i,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${r(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",r(-_.y))}showText(e){const i=this.current,_=i.font,L=i.fontSize;if(0===L)return;const F=i.fontSizeScale,j=i.charSpacing,V=i.wordSpacing,te=i.fontDirection,Z=i.textHScale*te,P=_.vertical,R=P?1:-1,I=_.defaultVMetrics,M=L*i.fontMatrix[0];let T=0;for(const h of e){if(null===h){T+=te*V;continue}if("number"==typeof h){T+=R*h*L/1e3;continue}const C=(h.isSpace?V:0)+j,v=h.fontChar;let t,g,O,E=h.width;if(P){let D;const W=h.vmetric||I;D=h.vmetric?W[1]:.5*E,D=-D*M,E=W?-W[0]:E,t=D/F,g=(T+W[2]*M)/F}else t=T/F,g=0;(h.isInFont||_.missingFile)&&(i.xcoords.push(i.x+t),P&&i.ycoords.push(-i.y+g),i.tspan.textContent+=v),O=P?E*M-C*te:E*M+C*te,T+=O}i.tspan.setAttributeNS(null,"x",i.xcoords.map(r).join(" ")),i.tspan.setAttributeNS(null,"y",P?i.ycoords.map(r).join(" "):r(-i.y)),P?i.y-=T:i.x+=T*Z,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${r(i.fontSize)}px`),i.fontStyle!==q.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==q.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const m=i.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;m===x.TextRenderingMode.FILL||m===x.TextRenderingMode.FILL_STROKE?(i.fillColor!==q.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===x.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(m===x.TextRenderingMode.STROKE||m===x.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let n=i.textMatrix;0!==i.textRise&&(n=n.slice(),n[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${A(n)} scale(${r(Z)}, -1)`),i.txtElement.setAttributeNS(w,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(e,i){this.setLeading(-i),this.moveText(e,i)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=l(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${i}); }\n`}setFont(e){const i=this.current,_=this.commonObjs.get(e[0]);let L=e[1];i.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),i.fontMatrix=_.fontMatrix||x.FONT_IDENTITY_MATRIX;let F="normal";_.black?F="900":_.bold&&(F="bold");const j=_.italic?"italic":"normal";L<0?(L=-L,i.fontDirection=-1):i.fontDirection=1,i.fontSize=L,i.fontFamily=_.loadedName,i.fontWeight=F,i.fontStyle=j,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",r(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&x.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=f[e]}setLineJoin(e){this.current.lineJoin=a[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,i,_){this.current.strokeColor=x.Util.makeHexColor(e,i,_)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,i,_){this.current.fillColor=x.Util.makeHexColor(e,i,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const i=this.viewport.width,_=this.viewport.height,L=x.Util.inverseTransform(this.transformMatrix),F=x.Util.applyTransform([0,0],L),j=x.Util.applyTransform([0,_],L),V=x.Util.applyTransform([i,0],L),te=x.Util.applyTransform([i,_],L),Z=Math.min(F[0],j[0],V[0],te[0]),P=Math.min(F[1],j[1],V[1],te[1]),R=Math.max(F[0],j[0],V[0],te[0]),I=Math.max(F[1],j[1],V[1],te[1]),M=this.svgFactory.createElement("svg:rect");M.setAttributeNS(null,"x",Z),M.setAttributeNS(null,"y",P),M.setAttributeNS(null,"width",R-Z),M.setAttributeNS(null,"height",I-P),M.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&M.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(M)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const i=e[1],_=e[2],L=e[3]||x.IDENTITY_MATRIX,[F,j,V,te]=e[4],Z=e[5],P=e[6],R=e[7],I="shading"+d++,[M,T,m,n]=x.Util.normalizeRect([...x.Util.applyTransform([F,j],L),...x.Util.applyTransform([V,te],L)]),[h,C]=x.Util.singularValueDecompose2dScale(L),v=Z*h,t=P*C,g=this.svgFactory.createElement("svg:pattern");g.setAttributeNS(null,"id",I),g.setAttributeNS(null,"patternUnits","userSpaceOnUse"),g.setAttributeNS(null,"width",v),g.setAttributeNS(null,"height",t),g.setAttributeNS(null,"x",`${M}`),g.setAttributeNS(null,"y",`${T}`);const E=this.svg,O=this.transformMatrix,D=this.current.fillColor,W=this.current.strokeColor,z=this.svgFactory.create(m-M,n-T);if(this.svg=z,this.transformMatrix=L,2===R){const X=x.Util.makeHexColor(...i);this.current.fillColor=X,this.current.strokeColor=X}return this.executeOpTree(this.convertOpList(_)),this.svg=E,this.transformMatrix=O,this.current.fillColor=D,this.current.strokeColor=W,g.append(z.childNodes[0]),this.defs.append(g),`url(#${I})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const i="shading"+d++,_=e[3];let L;switch(e[1]){case"axial":const F=e[4],j=e[5];L=this.svgFactory.createElement("svg:linearGradient"),L.setAttributeNS(null,"id",i),L.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),L.setAttributeNS(null,"x1",F[0]),L.setAttributeNS(null,"y1",F[1]),L.setAttributeNS(null,"x2",j[0]),L.setAttributeNS(null,"y2",j[1]);break;case"radial":const V=e[4],te=e[5],Z=e[6],P=e[7];L=this.svgFactory.createElement("svg:radialGradient"),L.setAttributeNS(null,"id",i),L.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),L.setAttributeNS(null,"cx",te[0]),L.setAttributeNS(null,"cy",te[1]),L.setAttributeNS(null,"r",P),L.setAttributeNS(null,"fx",V[0]),L.setAttributeNS(null,"fy",V[1]),L.setAttributeNS(null,"fr",Z);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const F of _){const j=this.svgFactory.createElement("svg:stop");j.setAttributeNS(null,"offset",F[0]),j.setAttributeNS(null,"stop-color",F[1]),L.append(j)}return this.defs.append(L),`url(#${i})`;case"Mesh":return(0,x.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,i){this.current.dashArray=e,this.current.dashPhase=i}constructPath(e,i){const _=this.current;let L=_.x,F=_.y,j=[],V=0;for(const te of e)switch(0|te){case x.OPS.rectangle:L=i[V++],F=i[V++];const R=L+i[V++],I=F+i[V++];j.push("M",r(L),r(F),"L",r(R),r(F),"L",r(R),r(I),"L",r(L),r(I),"Z");break;case x.OPS.moveTo:L=i[V++],F=i[V++],j.push("M",r(L),r(F));break;case x.OPS.lineTo:L=i[V++],F=i[V++],j.push("L",r(L),r(F));break;case x.OPS.curveTo:L=i[V+4],F=i[V+5],j.push("C",r(i[V]),r(i[V+1]),r(i[V+2]),r(i[V+3]),r(L),r(F)),V+=6;break;case x.OPS.curveTo2:j.push("C",r(L),r(F),r(i[V]),r(i[V+1]),r(i[V+2]),r(i[V+3])),L=i[V+2],F=i[V+3],V+=4;break;case x.OPS.curveTo3:L=i[V+2],F=i[V+3],j.push("C",r(i[V]),r(i[V+1]),r(L),r(F),r(L),r(F)),V+=4;break;case x.OPS.closePath:j.push("Z")}j=j.join(" "),_.path&&e.length>0&&e[0]!==x.OPS.rectangle&&e[0]!==x.OPS.moveTo?j=_.path.getAttributeNS(null,"d")+j:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(_.path)),_.path.setAttributeNS(null,"d",j),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(L,F)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const i="clippath"+y++,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",i),_.setAttributeNS(null,"transform",A(this.transformMatrix));const L=e.element.cloneNode(!0);if(L.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,_.append(L),this.defs.append(_),e.activeClipUrl){e.clipGroup=null;for(const F of this.extraStack)F.clipGroup=null;_.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const i=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",i)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[i,_]of e)switch(i){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,x.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,i=1){const _=this.current;let L=_.dashArray;1!==i&&L.length>0&&(L=L.map(function(F){return i*F})),e.setAttributeNS(null,"stroke",_.strokeColor),e.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",r(_.miterLimit)),e.setAttributeNS(null,"stroke-linecap",_.lineCap),e.setAttributeNS(null,"stroke-linejoin",_.lineJoin),e.setAttributeNS(null,"stroke-width",r(i*_.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",L.map(r).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",r(i*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);i?this.paintInlineImageXObject(i):(0,x.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,i){const _=e.width,L=e.height,F=S(e,this.forceDataSchema,!!i),j=this.svgFactory.createElement("svg:rect");j.setAttributeNS(null,"x","0"),j.setAttributeNS(null,"y","0"),j.setAttributeNS(null,"width",r(_)),j.setAttributeNS(null,"height",r(L)),this.current.element=j,this.clip("nonzero");const V=this.svgFactory.createElement("svg:image");V.setAttributeNS(s,"xlink:href",F),V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y",r(-L)),V.setAttributeNS(null,"width",r(_)+"px"),V.setAttributeNS(null,"height",r(L)+"px"),V.setAttributeNS(null,"transform",`scale(${r(1/_)} ${r(-1/L)})`),i?i.append(V):this._ensureTransformGroup().append(V)}paintImageMaskXObject(e){const i=this.current,_=e.width,L=e.height,F=i.fillColor;i.maskId="mask"+b++;const j=this.svgFactory.createElement("svg:mask");j.setAttributeNS(null,"id",i.maskId);const V=this.svgFactory.createElement("svg:rect");V.setAttributeNS(null,"x","0"),V.setAttributeNS(null,"y","0"),V.setAttributeNS(null,"width",r(_)),V.setAttributeNS(null,"height",r(L)),V.setAttributeNS(null,"fill",F),V.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.append(j),this._ensureTransformGroup().append(V),this.paintInlineImageXObject(e,j)}paintFormXObjectBegin(e,i){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i){const _=i[2]-i[0],L=i[3]-i[1],F=this.svgFactory.createElement("svg:rect");F.setAttributeNS(null,"x",i[0]),F.setAttributeNS(null,"y",i[1]),F.setAttributeNS(null,"width",r(_)),F.setAttributeNS(null,"height",r(L)),this.current.element=F,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const i=this.svgFactory.create(e.width,e.height),_=this.svgFactory.createElement("svg:defs");i.append(_),this.defs=_;const L=this.svgFactory.createElement("svg:g");return L.setAttributeNS(null,"transform",A(e.transform)),i.append(L),this.svg=L,i}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",A(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var p=N(1),x=N(33);const k=__webpack_require__(2339),U=__webpack_require__(143),q=__webpack_require__(7915),w=__webpack_require__(5598),s=/^file:\/\/\/[a-zA-Z]:\//;u.PDFNodeStream=class a{constructor(d){this.source=d,this.url=function f(b){const d=w.parse(b);return"file:"===d.protocol||d.host?d:/^[a-z]:[/\\]/i.test(b)?w.parse(`file:///${b}`):(d.host||(d.protocol="file:"),d)}(d.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new A(this):new o(this),this._fullRequestReader}getRangeReader(d,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new y(this,d,e):new r(this,d,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const e of this._rangeRequestReaders.slice(0))e.cancel(d)}};class l{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=d.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._headersCapability=(0,p.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){if(yield d._readCapability.promise,d._done)return{value:void 0,done:!0};if(d._storedError)throw d._storedError;const e=d._readableStream.read();return null===e?(d._readCapability=(0,p.createPromiseCapability)(),d.read()):(d._loaded+=e.length,d.onProgress&&d.onProgress({loaded:d._loaded,total:d._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(d){this._readableStream?this._readableStream.destroy(d):this._error(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class S{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!d.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){if(yield d._readCapability.promise,d._done)return{value:void 0,done:!0};if(d._storedError)throw d._storedError;const e=d._readableStream.read();return null===e?(d._readCapability=(0,p.createPromiseCapability)(),d.read()):(d._loaded+=e.length,d.onProgress&&d.onProgress({loaded:d._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(d){this._readableStream?this._readableStream.destroy(d):this._error(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(b,d){return{protocol:b.protocol,auth:b.auth,host:b.hostname,port:b.port,path:b.path,method:"GET",headers:d}}class o extends l{constructor(d){super(d);const e=i=>{if(404===i.statusCode){const j=new p.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=j,void this._headersCapability.reject(j)}this._headersCapability.resolve(),this._setReadableStream(i);const _=j=>this._readableStream.headers[j.toLowerCase()],{allowRangeRequests:L,suggestedLength:F}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=L,this._contentLength=F||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(_)};this._request=null,this._request="http:"===this._url.protocol?U.request(c(this._url,d.httpHeaders),e):q.request(c(this._url,d.httpHeaders),e),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class r extends S{constructor(d,e,i){super(d),this._httpHeaders={};for(const L in d.httpHeaders){const F=d.httpHeaders[L];typeof F>"u"||(this._httpHeaders[L]=F)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const _=L=>{if(404!==L.statusCode)this._setReadableStream(L);else{const F=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=F}};this._request=null,this._request="http:"===this._url.protocol?U.request(c(this._url,this._httpHeaders),_):q.request(c(this._url,this._httpHeaders),_),this._request.on("error",L=>{this._storedError=L}),this._request.end()}}class A extends l{constructor(d){super(d);let e=decodeURIComponent(this._url.path);s.test(this._url.href)&&(e=e.replace(/^\//,"")),k.lstat(e,(i,_)=>{if(i)return"ENOENT"===i.code&&(i=new p.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=_.size,this._setReadableStream(k.createReadStream(e)),this._headersCapability.resolve()})}}class y extends S{constructor(d,e,i){super(d);let _=decodeURIComponent(this._url.path);s.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(k.createReadStream(_,{start:e,end:i-1}))}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=function w(f,a){return 404===f||0===f&&a.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+a+'".'):new p.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${a}".`,f)},u.extractFilenameFromHeader=function q(f){const a=f("Content-Disposition");if(a){let l=(0,x.getFilenameFromContentDispositionHeader)(a);if(l.includes("%"))try{l=decodeURIComponent(l)}catch{}if((0,k.isPdfFile)(l))return l}return null},u.validateRangeRequestCapabilities=function U({getResponseHeader:f,isHttp:a,rangeChunkSize:l,disableRange:S}){const c={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(f("Content-Length"),10);return!Number.isInteger(o)||(c.suggestedLength=o,o<=2*l)||S||!a||"bytes"!==f("Accept-Ranges")||"identity"!==(f("Content-Encoding")||"identity")||(c.allowRangeRequests=!0),c},u.validateResponseStatus=function s(f){return 200===f||206===f};var p=N(1),x=N(34),k=N(8)},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=function x(k){let U=!0,q=w("filename\\*","i").exec(k);if(q){q=q[1];let o=l(q);return o=unescape(o),o=S(o),o=c(o),f(o)}if(q=function a(o){const r=[];let A;const y=w("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(A=y.exec(o));){let[,d,e,i]=A;if(d=parseInt(d,10),d in r){if(0===d)break}else r[d]=[e,i]}const b=[];for(let d=0;d<r.length&&d in r;++d){let[e,i]=r[d];i=l(i),e&&(i=unescape(i),0===d&&(i=S(i))),b.push(i)}return b.join("")}(k),q)return f(c(q));if(q=w("filename","i").exec(k),q){q=q[1];let o=l(q);return o=c(o),f(o)}function w(o,r){return new RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',r)}function s(o,r){if(o){if(!/^[\x00-\xFF]+$/.test(r))return r;try{const A=new TextDecoder(o,{fatal:!0}),y=(0,p.stringToBytes)(r);r=A.decode(y),U=!1}catch{}}return r}function f(o){return U&&/[\x80-\xff]/.test(o)&&(o=s("utf-8",o),U&&(o=s("iso-8859-1",o))),o}function l(o){if(o.startsWith('"')){const r=o.slice(1).split('\\"');for(let A=0;A<r.length;++A){const y=r[A].indexOf('"');-1!==y&&(r[A]=r[A].slice(0,y),r.length=A+1),r[A]=r[A].replace(/\\(.)/g,"$1")}o=r.join('"')}return o}function S(o){const r=o.indexOf("'");return-1===r?o:s(o.slice(0,r),o.slice(r+1).replace(/^[^']*'/,""))}function c(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(r,A,y,b){if("q"===y||"Q"===y)return s(A,b=(b=b.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(d,e){return String.fromCharCode(parseInt(e,16))}));try{b=atob(b)}catch{}return s(A,b)})}return""};var p=N(1)},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var p=N(1),x=N(33);class w{constructor(S,c={}){this.url=S,this.isHttp=/^https?:/i.test(S),this.httpHeaders=this.isHttp&&c.httpHeaders||Object.create(null),this.withCredentials=c.withCredentials||!1,this.getXhr=c.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(S,c,o){const r={begin:S,end:c};for(const A in o)r[A]=o[A];return this.request(r)}requestFull(S){return this.request(S)}request(S){const c=this.getXhr(),o=this.currXhrId++,r=this.pendingRequests[o]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const A in this.httpHeaders){const y=this.httpHeaders[A];typeof y>"u"||c.setRequestHeader(A,y)}return this.isHttp&&"begin"in S&&"end"in S?(c.setRequestHeader("Range",`bytes=${S.begin}-${S.end-1}`),r.expectedStatus=206):r.expectedStatus=200,c.responseType="arraybuffer",S.onError&&(c.onerror=function(A){S.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,o),c.onprogress=this.onProgress.bind(this,o),r.onHeadersReceived=S.onHeadersReceived,r.onDone=S.onDone,r.onError=S.onError,r.onProgress=S.onProgress,c.send(null),o}onProgress(S,c){const o=this.pendingRequests[S];o&&o.onProgress?.(c)}onStateChange(S,c){const o=this.pendingRequests[S];if(!o)return;const r=o.xhr;if(r.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),4!==r.readyState||!(S in this.pendingRequests))return;if(delete this.pendingRequests[S],0===r.status&&this.isHttp)return void o.onError?.(r.status);const A=r.status||200;if((200!==A||206!==o.expectedStatus)&&A!==o.expectedStatus)return void o.onError?.(r.status);const b=function q(l){const S=l.response;return"string"!=typeof S?S:(0,p.stringToBytes)(S).buffer}(r);if(206===A){const d=r.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);o.onDone({begin:parseInt(e[1],10),chunk:b})}else b?o.onDone({begin:0,chunk:b}):o.onError?.(r.status)}getRequestXhr(S){return this.pendingRequests[S].xhr}isPendingRequest(S){return S in this.pendingRequests}abortRequest(S){const c=this.pendingRequests[S].xhr;delete this.pendingRequests[S],c.abort()}}u.PDFNetworkStream=class s{constructor(S){this._source=S,this._manager=new w(S.url,{httpHeaders:S.httpHeaders,withCredentials:S.withCredentials}),this._rangeChunkSize=S.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(S){const c=this._rangeRequestReaders.indexOf(S);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(S,c){const o=new a(this._manager,S,c);return o.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(o),o}cancelAllRequests(S){this._fullRequestReader?.cancel(S);for(const c of this._rangeRequestReaders.slice(0))c.cancel(S)}};class f{constructor(S,c){this._manager=S;const o={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._fullRequestId=S.requestFull(o),this._headersReceivedCapability=(0,p.createPromiseCapability)(),this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const S=this._fullRequestId,c=this._manager.getRequestXhr(S),o=y=>c.getResponseHeader(y),{allowRangeRequests:r,suggestedLength:A}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=A||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(o),this._isRangeSupported&&this._manager.abortRequest(S),this._headersReceivedCapability.resolve()}_onDone(S){if(S&&(this._requests.length>0?this._requests.shift().resolve({value:S.chunk,done:!1}):this._cachedChunks.push(S.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(S){this._storedError=(0,x.createResponseStatusError)(S,this._url),this._headersReceivedCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(S){this.onProgress?.({loaded:S.loaded,total:S.lengthComputable?S.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var S=this;return _asyncToGenerator(function*(){if(S._storedError)throw S._storedError;if(S._cachedChunks.length>0)return{value:S._cachedChunks.shift(),done:!1};if(S._done)return{value:void 0,done:!0};const c=(0,p.createPromiseCapability)();return S._requests.push(c),c.promise})()}cancel(S){this._done=!0,this._headersReceivedCapability.reject(S);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class a{constructor(S,c,o){this._manager=S;const r={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=S.url,this._requestId=S.requestRange(c,o,r),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(S){const c=S.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(S){this._storedError=(0,x.createResponseStatusError)(S,this._url);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(S){this.isStreamingSupported||this.onProgress?.({loaded:S.loaded})}get isStreamingSupported(){return!1}read(){var S=this;return _asyncToGenerator(function*(){if(S._storedError)throw S._storedError;if(null!==S._queuedChunk){const o=S._queuedChunk;return S._queuedChunk=null,{value:o,done:!1}}if(S._done)return{value:void 0,done:!0};const c=(0,p.createPromiseCapability)();return S._requests.push(c),c.promise})()}cancel(S){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(se,u,N)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var p=N(1),x=N(33);function k(f,a,l){return{method:"GET",headers:f,signal:l.signal,mode:"cors",credentials:a?"include":"same-origin",redirect:"follow"}}function U(f){const a=new Headers;for(const l in f){const S=f[l];typeof S>"u"||a.append(l,S)}return a}u.PDFFetchStream=class q{constructor(a){this.source=a,this.isHttp=/^https?:/i.test(a.url),this.httpHeaders=this.isHttp&&a.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w(this),this._fullRequestReader}getRangeReader(a,l){if(l<=this._progressiveDataLength)return null;const S=new s(this,a,l);return this._rangeRequestReaders.push(S),S}cancelAllRequests(a){this._fullRequestReader&&this._fullRequestReader.cancel(a);for(const l of this._rangeRequestReaders.slice(0))l.cancel(a)}};class w{constructor(a){this._stream=a,this._reader=null,this._loaded=0,this._filename=null;const l=a.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=(0,p.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=U(this._stream.httpHeaders);const S=l.url;fetch(S,k(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,x.validateResponseStatus)(c.status))throw(0,x.createResponseStatusError)(c.status,S);this._reader=c.body.getReader(),this._headersCapability.resolve();const o=y=>c.headers.get(y),{allowRangeRequests:r,suggestedLength:A}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=r,this._contentLength=A||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var a=this;return _asyncToGenerator(function*(){yield a._headersCapability.promise;const{value:l,done:S}=yield a._reader.read();return S?{value:l,done:S}:(a._loaded+=l.byteLength,a.onProgress&&a.onProgress({loaded:a._loaded,total:a._contentLength}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(a){this._reader&&this._reader.cancel(a),this._abortController.abort()}}class s{constructor(a,l,S){this._stream=a,this._reader=null,this._loaded=0;const c=a.source;this._withCredentials=c.withCredentials||!1,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=U(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${S-1}`);const o=c.url;fetch(o,k(this._headers,this._withCredentials,this._abortController)).then(r=>{if(!(0,x.validateResponseStatus)(r.status))throw(0,x.createResponseStatusError)(r.status,o);this._readCapability.resolve(),this._reader=r.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var a=this;return _asyncToGenerator(function*(){yield a._readCapability.promise;const{value:l,done:S}=yield a._reader.read();return S?{value:l,done:S}:(a._loaded+=l.byteLength,a.onProgress&&a.onProgress({loaded:a._loaded}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(a){this._reader&&this._reader.cancel(a),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(se){var u=__webpack_module_cache__[se];if(void 0!==u)return u.exports;var N=__webpack_module_cache__[se]={exports:{}};return __webpack_modules__[se](N,N.exports,__w_pdfjs_require__),N.exports}var __nested_webpack_exports__={};return(()=>{var se=__nested_webpack_exports__;Object.defineProperty(se,"__esModule",{value:!0}),Object.defineProperty(se,"AnnotationEditorLayer",{enumerable:!0,get:function(){return x.AnnotationEditorLayer}}),Object.defineProperty(se,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(se,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(se,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return k.AnnotationEditorUIManager}}),Object.defineProperty(se,"AnnotationLayer",{enumerable:!0,get:function(){return U.AnnotationLayer}}),Object.defineProperty(se,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(se,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(se,"GlobalWorkerOptions",{enumerable:!0,get:function(){return q.GlobalWorkerOptions}}),Object.defineProperty(se,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(se,"LoopbackPort",{enumerable:!0,get:function(){return N.LoopbackPort}}),Object.defineProperty(se,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(se,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(se,"PDFDataRangeTransport",{enumerable:!0,get:function(){return N.PDFDataRangeTransport}}),Object.defineProperty(se,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(se,"PDFWorker",{enumerable:!0,get:function(){return N.PDFWorker}}),Object.defineProperty(se,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(se,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(se,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(se,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(se,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(se,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(se,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(se,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(se,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(se,"XfaLayer",{enumerable:!0,get:function(){return a.XfaLayer}}),Object.defineProperty(se,"build",{enumerable:!0,get:function(){return N.build}}),Object.defineProperty(se,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(se,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(se,"getDocument",{enumerable:!0,get:function(){return N.getDocument}}),Object.defineProperty(se,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(se,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(se,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(se,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(se,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(se,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(se,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(se,"version",{enumerable:!0,get:function(){return N.version}});var u=__w_pdfjs_require__(1),N=__w_pdfjs_require__(4),p=__w_pdfjs_require__(8),x=__w_pdfjs_require__(22),k=__w_pdfjs_require__(7),U=__w_pdfjs_require__(27),q=__w_pdfjs_require__(15),w=__w_pdfjs_require__(3),s=__w_pdfjs_require__(30),f=__w_pdfjs_require__(31),a=__w_pdfjs_require__(29);if(w.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(32);(0,N.setPDFNetworkStreamFactory)(o=>new c(o))}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(35),{PDFFetchStream:o}=__w_pdfjs_require__(36);(0,N.setPDFNetworkStreamFactory)(r=>(0,p.isValidFetchUrl)(r.url)?new o(r):new c(r))}})(),__nested_webpack_exports__})(),module.exports=N()},8365:(se,u,N)=>{var p=N(7156).default;globalThis,se.exports=(()=>{"use strict";var x=[,(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DefaultXfaLayerFactory=s.DefaultTextLayerFactory=s.DefaultStructTreeLayerFactory=s.DefaultAnnotationLayerFactory=s.DefaultAnnotationEditorLayerFactory=void 0;var a=f(2),l=f(5),S=f(4),c=f(6),o=f(8),r=f(9),A=f(10);s.DefaultAnnotationLayerFactory=class y{createAnnotationLayerBuilder({pageDiv:L,pdfPage:F,annotationStorage:j=null,imageResourcesPath:V="",renderForms:te=!0,l10n:Z=S.NullL10n,enableScripting:P=!1,hasJSActionsPromise:R=null,mouseState:I=null,fieldObjectsPromise:M=null,annotationCanvasMap:T=null,accessibilityManager:m=null}){return new l.AnnotationLayerBuilder({pageDiv:L,pdfPage:F,imageResourcesPath:V,renderForms:te,linkService:new c.SimpleLinkService,l10n:Z,annotationStorage:j,enableScripting:P,hasJSActionsPromise:R,fieldObjectsPromise:M,mouseState:I,annotationCanvasMap:T,accessibilityManager:m})}},s.DefaultAnnotationEditorLayerFactory=class b{createAnnotationEditorLayerBuilder({uiManager:L=null,pageDiv:F,pdfPage:j,accessibilityManager:V=null,l10n:te,annotationStorage:Z=null}){return new a.AnnotationEditorLayerBuilder({uiManager:L,pageDiv:F,pdfPage:j,accessibilityManager:V,l10n:te,annotationStorage:Z})}},s.DefaultStructTreeLayerFactory=class d{createStructTreeLayerBuilder({pdfPage:L}){return new o.StructTreeLayerBuilder({pdfPage:L})}},s.DefaultTextLayerFactory=class e{createTextLayerBuilder({textLayerDiv:L,pageIndex:F,viewport:j,enhanceTextSelection:V=!1,eventBus:te,highlighter:Z,accessibilityManager:P=null}){return new r.TextLayerBuilder({textLayerDiv:L,pageIndex:F,viewport:j,enhanceTextSelection:V,eventBus:te,highlighter:Z,accessibilityManager:P})}},s.DefaultXfaLayerFactory=class i{createXfaLayerBuilder({pageDiv:L,pdfPage:F,annotationStorage:j=null}){return new A.XfaLayerBuilder({pageDiv:L,pdfPage:F,annotationStorage:j,linkService:new c.SimpleLinkService})}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayerBuilder=void 0;var a=f(3),l=f(4);s.AnnotationEditorLayerBuilder=class S{#e;constructor(o){this.pageDiv=o.pageDiv,this.pdfPage=o.pdfPage,this.annotationStorage=o.annotationStorage||null,this.accessibilityManager=o.accessibilityManager,this.l10n=o.l10n||l.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#e=o.uiManager}render(o,r="display"){var A=this;return p(function*(){if("display"!==r||A._cancelled)return;const y=o.clone({dontFlip:!0});if(A.div)return A.annotationEditorLayer.update({viewport:y}),void A.show();A.div=document.createElement("div"),A.div.className="annotationEditorLayer",A.div.tabIndex=0,A.pageDiv.append(A.div),A.annotationEditorLayer=new a.AnnotationEditorLayer({uiManager:A.#e,div:A.div,annotationStorage:A.annotationStorage,accessibilityManager:A.accessibilityManager,pageIndex:A.pdfPage._pageIndex,l10n:A.l10n,viewport:y}),A.annotationEditorLayer.render({viewport:y,div:A.div,annotations:null,intent:r})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},w=>{let s;s=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:N(7668),w.exports=s},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.fixupLangCode=function S(r){return l[r?.toLowerCase()]||r},s.getL10nFallback=a;const f={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function a(r,A){switch(r){case"find_match_count":r=`find_match_count[${1===A.total?"one":"other"}]`;break;case"find_match_count_limit":r=`find_match_count_limit[${1===A.limit?"one":"other"}]`}return f[r]||""}const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};s.NullL10n={getLanguage:()=>p(function*(){return"en-us"})(),getDirection:()=>p(function*(){return"ltr"})(),get:(r,A=null,y=a(r,A))=>p(function*(){return function c(r,A){return A?r.replace(/\{\{\s*(\w+)\s*\}\}/g,(y,b)=>b in A?A[b]:"{{"+b+"}}"):r}(y,A)})(),translate:r=>p(function*(){})()}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayerBuilder=void 0;var a=f(3),l=f(4);s.AnnotationLayerBuilder=class S{constructor({pageDiv:o,pdfPage:r,linkService:A,downloadManager:y,annotationStorage:b=null,imageResourcesPath:d="",renderForms:e=!0,l10n:i=l.NullL10n,enableScripting:_=!1,hasJSActionsPromise:L=null,fieldObjectsPromise:F=null,mouseState:j=null,annotationCanvasMap:V=null,accessibilityManager:te=null}){this.pageDiv=o,this.pdfPage=r,this.linkService=A,this.downloadManager=y,this.imageResourcesPath=d,this.renderForms=e,this.l10n=i,this.annotationStorage=b,this.enableScripting=_,this._hasJSActionsPromise=L,this._fieldObjectsPromise=F,this._mouseState=j,this._annotationCanvasMap=V,this._accessibilityManager=te,this.div=null,this._cancelled=!1}render(o,r="display"){var A=this;return p(function*(){const[y,b=!1,d=null]=yield Promise.all([A.pdfPage.getAnnotations({intent:r}),A._hasJSActionsPromise,A._fieldObjectsPromise]);if(A._cancelled||0===y.length)return;const e={viewport:o.clone({dontFlip:!0}),div:A.div,annotations:y,page:A.pdfPage,imageResourcesPath:A.imageResourcesPath,renderForms:A.renderForms,linkService:A.linkService,downloadManager:A.downloadManager,annotationStorage:A.annotationStorage,enableScripting:A.enableScripting,hasJSActions:b,fieldObjects:d,mouseState:A._mouseState,annotationCanvasMap:A._annotationCanvasMap,accessibilityManager:A._accessibilityManager};A.div?a.AnnotationLayer.update(e):(A.div=document.createElement("div"),A.div.className="annotationLayer",A.pageDiv.append(A.div),e.div=A.div,a.AnnotationLayer.render(e),A.l10n.translate(A.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleLinkService=s.PDFLinkService=s.LinkTarget=void 0;var a=f(7);const S={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function c(A,{url:y,target:b,rel:d,enabled:e=!0}={}){if(!y||"string"!=typeof y)throw new Error('A valid "url" parameter must provided.');const i=(0,a.removeNullCharacters)(y);e?A.href=A.title=i:(A.href="",A.title=`Disabled: ${i}`,A.onclick=()=>!1);let _="";switch(b){case S.NONE:break;case S.SELF:_="_self";break;case S.BLANK:_="_blank";break;case S.PARENT:_="_parent";break;case S.TOP:_="_top"}A.target=_,A.rel="string"==typeof d?d:"noopener noreferrer nofollow"}s.LinkTarget=S;class o{#e=new Map;constructor({eventBus:y,externalLinkTarget:b=null,externalLinkRel:d=null,ignoreDestinationZoom:e=!1}={}){this.eventBus=y,this.externalLinkTarget=b,this.externalLinkRel=d,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=e,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(y,b=null){this.baseUrl=b,this.pdfDocument=y,this.#e.clear()}setViewer(y){this.pdfViewer=y}setHistory(y){this.pdfHistory=y}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(y){this.pdfViewer.currentPageNumber=y}get rotation(){return this.pdfViewer.pagesRotation}set rotation(y){this.pdfViewer.pagesRotation=y}#t(y,b=null,d){const e=d[0];let i;if("object"==typeof e&&null!==e){if(i=this._cachedPageNumber(e),!i)return void this.pdfDocument.getPageIndex(e).then(_=>{this.cachePageRef(_+1,e),this.#t(y,b,d)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${e}" is not a valid page reference, for dest="${y}".`)})}else{if(!Number.isInteger(e))return void console.error(`PDFLinkService.#goToDestinationHelper: "${e}" is not a valid destination reference, for dest="${y}".`);i=e+1}!i||i<1||i>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${i}" is not a valid page number, for dest="${y}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:b,explicitDest:d,pageNumber:i})),this.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:d,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToDestination(y){var b=this;return p(function*(){if(!b.pdfDocument)return;let d,e;"string"==typeof y?(d=y,e=yield b.pdfDocument.getDestination(y)):(d=null,e=yield y),Array.isArray(e)?b.#t(y,d,e):console.error(`PDFLinkService.goToDestination: "${e}" is not a valid destination array, for dest="${y}".`)})()}goToPage(y){if(!this.pdfDocument)return;const b="string"==typeof y&&this.pdfViewer.pageLabelToPageNumber(y)||0|y;Number.isInteger(b)&&b>0&&b<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(b)),this.pdfViewer.scrollPageIntoView({pageNumber:b})):console.error(`PDFLinkService.goToPage: "${y}" is not a valid page.`)}addLinkAttributes(y,b,d=!1){c(y,{url:b,target:d?S.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(y){if("string"==typeof y){if(y.length>0)return this.getAnchorUrl("#"+escape(y))}else if(Array.isArray(y)){const b=JSON.stringify(y);if(b.length>0)return this.getAnchorUrl("#"+escape(b))}return this.getAnchorUrl("")}getAnchorUrl(y){return(this.baseUrl||"")+y}setHash(y){if(!this.pdfDocument)return;let b,d;if(y.includes("=")){const e=(0,a.parseQueryString)(y);if(e.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:e.get("search").replace(/"/g,""),phraseSearch:"true"===e.get("phrase")}),e.has("page")&&(b=0|e.get("page")||1),e.has("zoom")){const i=e.get("zoom").split(","),_=i[0],L=parseFloat(_);_.includes("Fit")?"Fit"===_||"FitB"===_?d=[null,{name:_}]:"FitH"===_||"FitBH"===_||"FitV"===_||"FitBV"===_?d=[null,{name:_},i.length>1?0|i[1]:null]:"FitR"===_?5!==i.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):d=[null,{name:_},0|i[1],0|i[2],0|i[3],0|i[4]]:console.error(`PDFLinkService.setHash: "${_}" is not a valid zoom value.`):d=[null,{name:"XYZ"},i.length>1?0|i[1]:null,i.length>2?0|i[2]:null,L?L/100:_]}d?this.pdfViewer.scrollPageIntoView({pageNumber:b||this.page,destArray:d,allowNegativeOffset:!0}):b&&(this.page=b),e.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:e.get("pagemode")}),e.has("nameddest")&&this.goToDestination(e.get("nameddest"))}else{d=unescape(y);try{d=JSON.parse(d),Array.isArray(d)||(d=d.toString())}catch{}if("string"==typeof d||o.#n(d))return void this.goToDestination(d);console.error(`PDFLinkService.setHash: "${unescape(y)}" is not a valid destination.`)}}executeNamedAction(y){switch(y){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:y})}cachePageRef(y,b){b&&this.#e.set(0===b.gen?`${b.num}R`:`${b.num}R${b.gen}`,y)}_cachedPageNumber(y){return y&&this.#e.get(0===y.gen?`${y.num}R`:`${y.num}R${y.gen}`)||null}isPageVisible(y){return this.pdfViewer.isPageVisible(y)}isPageCached(y){return this.pdfViewer.isPageCached(y)}static#n(y){if(!Array.isArray(y))return!1;const b=y.length;if(b<2)return!1;const d=y[0];if(!("object"==typeof d&&Number.isInteger(d.num)&&Number.isInteger(d.gen)||Number.isInteger(d)&&d>=0))return!1;const e=y[1];if("object"!=typeof e||"string"!=typeof e.name)return!1;let i=!0;switch(e.name){case"XYZ":if(5!==b)return!1;break;case"Fit":case"FitB":return 2===b;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==b)return!1;break;case"FitR":if(6!==b)return!1;i=!1;break;default:return!1}for(let _=2;_<b;_++){const L=y[_];if(!("number"==typeof L||i&&null===L))return!1}return!0}}s.PDFLinkService=o,s.SimpleLinkService=class r{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(y){}get rotation(){return 0}set rotation(y){}goToDestination(y){return p(function*(){})()}goToPage(y){}addLinkAttributes(y,b,d=!1){c(y,{url:b,enabled:this.externalLinkEnabled})}getDestinationHash(y){return"#"}getAnchorUrl(y){return"#"}setHash(y){}executeNamedAction(y){}cachePageRef(y,b){}isPageVisible(y){return!0}isPageCached(y){return!0}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.animationStarted=s.VERTICAL_PADDING=s.UNKNOWN_SCALE=s.TextLayerMode=s.SpreadMode=s.SidebarView=s.ScrollMode=s.SCROLLBAR_PADDING=s.RenderingStates=s.RendererType=s.ProgressBar=s.PresentationModeState=s.OutputScale=s.MIN_SCALE=s.MAX_SCALE=s.MAX_AUTO_SCALE=s.DEFAULT_SCALE_VALUE=s.DEFAULT_SCALE_DELTA=s.DEFAULT_SCALE=s.AutoPrintRegExp=void 0,s.apiPageLayoutToViewerModes=function G($){let ne=L.VERTICAL,ae=F.NONE;switch($){case"SinglePage":ne=L.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ne=L.PAGE;case"TwoColumnLeft":ae=F.ODD;break;case"TwoPageRight":ne=L.PAGE;case"TwoColumnRight":ae=F.EVEN}return{scrollMode:ne,spreadMode:ae}},s.apiPageModeToSidebarView=function ee($){switch($){case"UseNone":return e.NONE;case"UseThumbs":return e.THUMBS;case"UseOutlines":return e.OUTLINE;case"UseAttachments":return e.ATTACHMENTS;case"UseOC":return e.LAYERS}return e.NONE},s.approximateFraction=function m($){if(Math.floor($)===$)return[$,1];const ne=1/$;if(ne>8)return[1,8];if(Math.floor(ne)===ne)return[1,ne];const ie=$>1?ne:$;let fe,ce=0,he=1,le=1,ue=1;for(;;){const me=ce+le,_e=he+ue;if(_e>8)break;ie<=me/_e?(le=me,ue=_e):(ce=me,he=_e)}return fe=ie-ce/he<le/ue-ie?ie===$?[ce,he]:[he,ce]:ie===$?[le,ue]:[ue,le],fe},s.backtrackBeforeAllVisibleElements=C,s.binarySearchFirstItem=T,s.docStyle=void 0,s.getActiveOrFocusedElement=function H(){let $=document,ne=$.activeElement||$.querySelector(":focus");for(;ne?.shadowRoot;)$=ne.shadowRoot,ne=$.activeElement||$.querySelector(":focus");return ne},s.getPageSizeInches=function h({view:$,userUnit:ne,rotate:ae}){const[ie,ce,he,le]=$,ue=ae%180!=0,fe=(he-ie)/72*ne,me=(le-ce)/72*ne;return{width:ue?me:fe,height:ue?fe:me}},s.getVisibleElements=function v({scrollEl:$,views:ne,sortByVisibility:ae=!1,horizontal:ie=!1,rtl:ce=!1}){const he=$.scrollTop,le=he+$.clientHeight,ue=$.scrollLeft,fe=ue+$.clientWidth,Pe=[],ye=new Set,be=ne.length;let xe=T(ne,ie?function _e(Ce){const Ae=Ce.div,re=Ae.offsetLeft+Ae.clientLeft;return ce?re<fe:re+Ae.clientWidth>ue}:function me(Ce){const Ae=Ce.div;return Ae.offsetTop+Ae.clientTop+Ae.clientHeight>he});xe>0&&xe<be&&!ie&&(xe=C(xe,ne,he));let Re=ie?fe:-1;for(let Ce=xe;Ce<be;Ce++){const Ae=ne[Ce],re=Ae.div,Q=re.offsetLeft+re.clientLeft,J=re.offsetTop+re.clientTop,oe=re.clientWidth,de=re.clientHeight,ge=Q+oe,pe=J+de;if(-1===Re)pe>=le&&(Re=pe);else if((ie?Q:J)>Re)break;if(pe<=he||J>=le||ge<=ue||Q>=fe)continue;const we=Math.max(0,he-J)+Math.max(0,pe-le),Se=(oe-(Math.max(0,ue-Q)+Math.max(0,ge-fe)))/oe;Pe.push({id:Ae.id,x:Q,y:J,view:Ae,percent:(de-we)/de*Se*100|0,widthPercent:100*Se|0}),ye.add(Ae.id)}const Be=Pe[0],Ve=Pe.at(-1);return ae&&Pe.sort(function(Ce,Ae){const re=Ce.percent-Ae.percent;return Math.abs(re)>.001?-re:Ce.id-Ae.id}),{first:Be,last:Ve,views:Pe,ids:ye}},s.isPortraitOrientation=function z($){return $.width<=$.height},s.isValidRotation=function O($){return Number.isInteger($)&&$%90==0},s.isValidScrollMode=function D($){return Number.isInteger($)&&Object.values(L).includes($)&&$!==L.UNKNOWN},s.isValidSpreadMode=function W($){return Number.isInteger($)&&Object.values(F).includes($)&&$!==F.UNKNOWN},s.noContextMenuHandler=function t($){$.preventDefault()},s.normalizeWheelEventDelta=function E($){let ne=g($);return 0===$.deltaMode?ne/=900:1===$.deltaMode&&(ne/=30),ne},s.normalizeWheelEventDirection=g,s.parseQueryString=function P($){const ne=new Map;for(const[ae,ie]of new URLSearchParams($))ne.set(ae.toLowerCase(),ie);return ne},s.removeNullCharacters=function M($,ne=!1){return"string"!=typeof $?(console.error("The argument must be a string."),$):(ne&&($=$.replace(I," ")),$.replace(R,""))},s.roundToDivide=function n($,ne){const ae=$%ne;return 0===ae?$:Math.round($-ae+ne)},s.scrollIntoView=function te($,ne,ae=!1){let ie=$.offsetParent;if(!ie)return void console.error("offsetParent is not set -- cannot scroll");let ce=$.offsetTop+$.clientTop,he=$.offsetLeft+$.clientLeft;for(;ie.clientHeight===ie.scrollHeight&&ie.clientWidth===ie.scrollWidth||ae&&(ie.classList.contains("markedContent")||"hidden"===getComputedStyle(ie).overflow);)if(ce+=ie.offsetTop,he+=ie.offsetLeft,ie=ie.offsetParent,!ie)return;ne&&(void 0!==ne.top&&(ce+=ne.top),void 0!==ne.left&&(he+=ne.left,ie.scrollLeft=he)),ie.scrollTop=ce},s.watchScroll=function Z($,ne){const ae=function(he){ce||(ce=window.requestAnimationFrame(function(){ce=null;const ue=$.scrollLeft,fe=ie.lastX;ue!==fe&&(ie.right=ue>fe),ie.lastX=ue;const me=$.scrollTop,_e=ie.lastY;me!==_e&&(ie.down=me>_e),ie.lastY=me,ne(ie)}))},ie={right:!0,down:!0,lastX:$.scrollLeft,lastY:$.scrollTop,_eventHandler:ae};let ce=null;return $.addEventListener("scroll",ae,!0),ie},s.DEFAULT_SCALE_VALUE="auto",s.DEFAULT_SCALE=1,s.DEFAULT_SCALE_DELTA=1.1,s.MIN_SCALE=.1,s.MAX_SCALE=10,s.UNKNOWN_SCALE=0,s.MAX_AUTO_SCALE=1.25,s.SCROLLBAR_PADDING=40,s.VERTICAL_PADDING=5,s.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const e={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};s.SidebarView=e,s.RendererType={CANVAS:"canvas",SVG:"svg"},s.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const L={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};s.ScrollMode=L;const F={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};s.SpreadMode=F,s.AutoPrintRegExp=/\bprint\s*\(/,s.OutputScale=class V{constructor(){const ne=window.devicePixelRatio||1;this.sx=ne,this.sy=ne}get scaled(){return 1!==this.sx||1!==this.sy}};const R=/\x00/g,I=/[\x01-\x1F]/g;function T($,ne,ae=0){let ie=ae,ce=$.length-1;if(ce<0||!ne($[ce]))return $.length;if(ne($[ie]))return ie;for(;ie<ce;){const he=ie+ce>>1;ne($[he])?ce=he:ie=he+1}return ie}function C($,ne,ae){if($<2)return $;let ie=ne[$].div,ce=ie.offsetTop+ie.clientTop;ce>=ae&&(ie=ne[$-1].div,ce=ie.offsetTop+ie.clientTop);for(let he=$-2;he>=0&&(ie=ne[he].div,!(ie.offsetTop+ie.clientTop+ie.clientHeight<=ce));--he)$=he;return $}function g($){let ne=Math.hypot($.deltaX,$.deltaY);const ae=Math.atan2($.deltaY,$.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(ne=-ne),ne}const X=new Promise(function($){window.requestAnimationFrame($)});s.animationStarted=X;const K=document.documentElement.style;s.docStyle=K,s.ProgressBar=class Y{#e=null;#t=0;#n=!0;constructor(ne){if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const ae=document.getElementById(ne);this.#e=ae.classList}get percent(){return this.#t}set percent(ne){this.#t=function B($,ne,ae){return Math.min(Math.max($,ne),ae)}(ne,0,100),isNaN(ne)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),K.setProperty("--progressBar-percent",`${this.#t}%`))}setWidth(ne){if(!ne)return;const ie=ne.parentNode.offsetWidth-ne.offsetWidth;ie>0&&K.setProperty("--progressBar-end-offset",`${ie}px`)}hide(){this.#n&&(this.#n=!1,this.#e.add("hidden"))}show(){this.#n||(this.#n=!0,this.#e.remove("hidden"))}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StructTreeLayerBuilder=void 0;const f={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},a=/^H(\d+)$/;s.StructTreeLayerBuilder=class l{constructor({pdfPage:c}){this.pdfPage=c}render(c){return this._walk(c)}_setAttributes(c,o){void 0!==c.alt&&o.setAttribute("aria-label",c.alt),void 0!==c.id&&o.setAttribute("aria-owns",c.id),void 0!==c.lang&&o.setAttribute("lang",c.lang)}_walk(c){if(!c)return null;const o=document.createElement("span");if("role"in c){const{role:r}=c,A=r.match(a);A?(o.setAttribute("role","heading"),o.setAttribute("aria-level",A[1])):f[r]&&o.setAttribute("role",f[r])}if(this._setAttributes(c,o),c.children)if(1===c.children.length&&"id"in c.children[0])this._setAttributes(c.children[0],o);else for(const r of c.children)o.append(this._walk(r));return o}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerBuilder=void 0;var a=f(3);s.TextLayerBuilder=class S{constructor({textLayerDiv:o,eventBus:r,pageIndex:A,viewport:y,highlighter:b=null,enhanceTextSelection:d=!1,accessibilityManager:e=null}){this.textLayerDiv=o,this.eventBus=r,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=A+1,this.viewport=y,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=b,this.enhanceTextSelection=d,this.accessibilityManager=e,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const o=document.createElement("div");o.className="endOfContent",this.textLayerDiv.append(o)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(o=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs);const r=document.createDocumentFragment();this.textLayerRenderTask=(0,a.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:r,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:o,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.append(r),this._finishRendering(),this.highlighter?.enable(),this.accessibilityManager?.enable()},function(A){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable()}setTextContentStream(o){this.cancel(),this.textContentStream=o}setTextContent(o){this.cancel(),this.textContent=o}_bindMouse(){const o=this.textLayerDiv;let r=null;o.addEventListener("mousedown",A=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(r&&(clearTimeout(r),r=null));const y=o.querySelector(".endOfContent");if(!y)return;let b=A.target!==o;if(b=b&&"none"!==window.getComputedStyle(y).getPropertyValue("-moz-user-select"),b){const d=o.getBoundingClientRect(),e=Math.max(0,(A.pageY-d.top)/d.height);y.style.top=(100*e).toFixed(2)+"%"}y.classList.add("active")}),o.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(r=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),r=null},300));const A=o.querySelector(".endOfContent");A&&(A.style.top="",A.classList.remove("active"))})}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayerBuilder=void 0;var a=f(3);s.XfaLayerBuilder=class l{constructor({pageDiv:c,pdfPage:o,annotationStorage:r=null,linkService:A,xfaHtml:y=null}){this.pageDiv=c,this.pdfPage=o,this.annotationStorage=r,this.linkService=A,this.xfaHtml=y,this.div=null,this._cancelled=!1}render(c,o="display"){if("print"===o){const r={viewport:c.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:o},A=document.createElement("div");this.pageDiv.append(A),r.div=A;const y=a.XfaLayer.render(r);return Promise.resolve(y)}return this.pdfPage.getXfa().then(r=>{if(this._cancelled||!r)return{textDivs:[]};const A={viewport:c.clone({dontFlip:!0}),div:this.div,xfaHtml:r,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:o};return this.div?a.XfaLayer.update(A):(this.div=document.createElement("div"),this.pageDiv.append(this.div),A.div=this.div,a.XfaLayer.render(A))}).catch(r=>{console.error(r)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFViewer=s.PDFSinglePageViewer=void 0;var a=f(7),l=f(12);s.PDFViewer=class S extends l.BaseViewer{},s.PDFSinglePageViewer=class c extends l.BaseViewer{_resetView(){super._resetView(),this._scrollMode=a.ScrollMode.PAGE,this._spreadMode=a.SpreadMode.NONE}set scrollMode(r){}_updateScrollMode(){}set spreadMode(r){}_updateSpreadMode(){}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PagesCountLimit=s.PDFPageViewBuffer=s.BaseViewer=void 0;var a=f(3),l=f(7),S=f(2),c=f(5),o=f(4),r=f(13),A=f(16),y=f(6),b=f(8),d=f(17),e=f(9),i=f(10);const L="enablePermissions",F={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function j(Z){return Object.values(a.AnnotationEditorType).includes(Z)&&Z!==a.AnnotationEditorType.DISABLE}s.PagesCountLimit=F;class V{#e=new Set;#t=0;constructor(P){this.#t=P}push(P){const R=this.#e;R.has(P)&&R.delete(P),R.add(P),R.size>this.#t&&this.#n()}resize(P,R=null){this.#t=P;const I=this.#e;if(R){const M=I.size;let T=1;for(const m of I)if(R.has(m.id)&&(I.delete(m),I.add(m)),++T>M)break}for(;I.size>this.#t;)this.#n()}has(P){return this.#e.has(P)}[Symbol.iterator](){return this.#e.keys()}#n(){const P=this.#e.keys().next().value;P?.destroy(),this.#e.delete(P)}}s.PDFPageViewBuffer=V;class te{#e=null;#t=a.AnnotationEditorType.DISABLE;#n=null;#i=a.AnnotationMode.ENABLE_FORMS;#r=!1;#c=0;#o=null;#s=null;constructor(P){if(this.constructor===te)throw new Error("Cannot initialize BaseViewer.");const R="2.16.105";if(a.version!==R)throw new Error(`The API version "${a.version}" does not match the Viewer version "${R}".`);if(this.container=P.container,this.viewer=P.viewer||P.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=P.eventBus,this.linkService=P.linkService||new y.SimpleLinkService,this.downloadManager=P.downloadManager||null,this.findController=P.findController||null,this._scriptingManager=P.scriptingManager||null,this.removePageBorders=P.removePageBorders||!1,this.textLayerMode=P.textLayerMode??l.TextLayerMode.ENABLE,this.#i=P.annotationMode??a.AnnotationMode.ENABLE_FORMS,this.#t=P.annotationEditorMode??a.AnnotationEditorType.DISABLE,this.imageResourcesPath=P.imageResourcesPath||"",this.enablePrintAutoRotate=P.enablePrintAutoRotate||!1,this.renderer=P.renderer||l.RendererType.CANVAS,this.useOnlyCssZoom=P.useOnlyCssZoom||!1,this.maxCanvasPixels=P.maxCanvasPixels,this.l10n=P.l10n||o.NullL10n,this.#r=P.enablePermissions||!1,this.pageColors=P.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!P.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new A.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=P.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(P){return this._pages[P]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(P){return P?.pdfPage})}get renderForms(){return this.#i===a.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(P){if(!Number.isInteger(P))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(P,!0)||console.error(`currentPageNumber: "${P}" is not a valid page.`))}_setCurrentPageNumber(P,R=!1){if(this._currentPageNumber===P)return R&&this.#f(),!0;if(!(0<P&&P<=this.pagesCount))return!1;const I=this._currentPageNumber;return this._currentPageNumber=P,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:P,pageLabel:this._pageLabels?.[P-1]??null,previous:I}),R&&this.#f(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(P){if(!this.pdfDocument)return;let R=0|P;if(this._pageLabels){const I=this._pageLabels.indexOf(P);I>=0&&(R=I+1)}this._setCurrentPageNumber(R,!0)||console.error(`currentPageLabel: "${P}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(P){if(isNaN(P))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(P,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(P){this.pdfDocument&&this._setScale(P,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(P){if(!(0,l.isValidRotation)(P))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((P%=360)<0&&(P+=360),this._pagesRotation===P))return;this._pagesRotation=P;const R=this._currentPageNumber,I={rotation:P};for(const M of this._pages)M.update(I);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:P,pageNumber:R}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#u(P){const R={annotationEditorMode:this.#t,annotationMode:this.#i,textLayerMode:this.textLayerMode};return P&&(P.includes(a.PermissionFlag.COPY)||this.viewer.classList.add(L),P.includes(a.PermissionFlag.MODIFY_CONTENTS)||(R.annotationEditorMode=a.AnnotationEditorType.DISABLE),!P.includes(a.PermissionFlag.MODIFY_ANNOTATIONS)&&!P.includes(a.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#i===a.AnnotationMode.ENABLE_FORMS&&(R.annotationMode=a.AnnotationMode.ENABLE)),R}#h(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const P=new Promise(R=>{this.#s=()=>{"hidden"===document.visibilityState&&(R(),document.removeEventListener("visibilitychange",this.#s),this.#s=null)},document.addEventListener("visibilitychange",this.#s)});return Promise.race([this._onePageRenderedCapability.promise,P])}setDocument(P){var R=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),this.#n&&(this.#n.destroy(),this.#n=null)),this.pdfDocument=P,!P)return;const I=P.isPureXfa,M=P.numPages,T=P.getPage(1),m=P.getOptionalContentConfig(),n=this.#r?P.getPermissions():Promise.resolve();if(M>F.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const h=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:h})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:M})},()=>{}),this._onBeforeDraw=h=>{const C=this._pages[h.pageNumber-1];C&&this.#e.push(C)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=h=>{h.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:h.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#s&&(document.removeEventListener("visibilitychange",this.#s),this.#s=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([T,n]).then(([h,C])=>{if(P!==this.pdfDocument)return;this._firstPageCapability.resolve(h),this._optionalContentConfigPromise=m;const{annotationEditorMode:v,annotationMode:t,textLayerMode:g}=this.#u(C);if(v!==a.AnnotationEditorType.DISABLE){const Y=v;I?console.warn("Warning: XFA-editing is not implemented."):j(Y)?(this.#n=new a.AnnotationEditorUIManager(this.container,this.eventBus),Y!==a.AnnotationEditorType.NONE&&this.#n.updateMode(Y)):console.error(`Invalid AnnotationEditor mode: ${Y}`)}const E=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,O=this.currentScale,D=h.getViewport({scale:O*a.PixelsPerInch.PDF_TO_CSS_UNITS}),W=g===l.TextLayerMode.DISABLE||I?null:this,z=t!==a.AnnotationMode.DISABLE?this:null,X=I?this:null,K=this.#n?this:null;for(let Y=1;Y<=M;++Y){const H=new r.PDFPageView({container:E,eventBus:this.eventBus,id:Y,scale:O,defaultViewport:D.clone(),optionalContentConfigPromise:m,renderingQueue:this.renderingQueue,textLayerFactory:W,textLayerMode:g,annotationLayerFactory:z,annotationMode:t,xfaLayerFactory:X,annotationEditorLayerFactory:K,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(H)}const B=this._pages[0];B&&(B.setPdfPage(h),this.linkService.cachePageRef(1,h.ref)),this._scrollMode===l.ScrollMode.PAGE?this.#l():this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),this.#h().then(p(function*(){if(R.findController&&R.findController.setDocument(P),R._scriptingManager&&R._scriptingManager.setDocument(P),R.#n&&R.eventBus.dispatch("annotationeditormodechanged",{source:R,mode:R.#t}),P.loadingParams.disableAutoFetch||M>F.FORCE_LAZY_PAGE_INIT)return void R._pagesCapability.resolve();let Y=M-1;if(Y<=0)R._pagesCapability.resolve();else for(let H=2;H<=M;++H){const G=P.getPage(H).then(ee=>{const $=R._pages[H-1];$.pdfPage||$.setPdfPage(ee),R.linkService.cachePageRef(H,ee.ref),0==--Y&&R._pagesCapability.resolve()},ee=>{console.error(`Unable to get page ${H} to initialize viewer`,ee),0==--Y&&R._pagesCapability.resolve()});H%F.PAUSE_EAGER_PAGE_INIT==0&&(yield G)}})),this.eventBus.dispatch("pagesinit",{source:this}),P.getMetadata().then(({info:Y})=>{P===this.pdfDocument&&Y.Language&&(this.viewer.lang=Y.Language)}),this.defaultRenderingQueue&&this.update()}).catch(h=>{console.error("Unable to initialize viewer",h),this._pagesCapability.reject(h)})}setPageLabels(P){if(this.pdfDocument){P?Array.isArray(P)&&this.pdfDocument.numPages===P.length?this._pageLabels=P:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let R=0,I=this._pages.length;R<I;R++)this._pages[R].setPageLabel(this._pageLabels?.[R]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new V(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,a.createPromiseCapability)(),this._onePageRenderedCapability=(0,a.createPromiseCapability)(),this._pagesCapability=(0,a.createPromiseCapability)(),this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,this.#o={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#s&&(document.removeEventListener("visibilitychange",this.#s),this.#s=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(L)}#l(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const P=this._currentPageNumber,R=this.#o,I=this.viewer;if(I.textContent="",R.pages.length=0,this._spreadMode!==l.SpreadMode.NONE||this.isInPresentationMode){const M=new Set,T=this._spreadMode-1;-1===T?M.add(P-1):P%2!==T?(M.add(P-1),M.add(P)):(M.add(P-2),M.add(P-1));const m=document.createElement("div");if(m.className="spread",this.isInPresentationMode){const n=document.createElement("div");n.className="dummyPage",m.append(n)}for(const n of M){const h=this._pages[n];h&&(m.append(h.div),R.pages.push(h))}I.append(m)}else{const M=this._pages[P-1];I.append(M.div),R.pages.push(M)}R.scrollDown=P>=R.previousPageNumber,R.previousPageNumber=P}_scrollUpdate(){0!==this.pagesCount&&this.update()}#a(P,R=null){const{div:I,id:M}=P;if(this._scrollMode===l.ScrollMode.PAGE&&(this._setCurrentPageNumber(M),this.#l(),this.update()),!R&&!this.isInPresentationMode){const T=I.offsetLeft+I.clientLeft,m=T+I.clientWidth,{scrollLeft:n,clientWidth:h}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||T<n||m>n+h)&&(R={left:0,top:0})}(0,l.scrollIntoView)(I,R)}#p(P){return P===this._currentScale||Math.abs(P-this._currentScale)<1e-15}_setScaleUpdatePages(P,R,I=!1,M=!1){if(this._currentScaleValue=R.toString(),this.#p(P))return void(M&&this.eventBus.dispatch("scalechanging",{source:this,scale:P,presetValue:R}));l.docStyle.setProperty("--scale-factor",P*a.PixelsPerInch.PDF_TO_CSS_UNITS);const T={scale:P};for(const m of this._pages)m.update(T);if(this._currentScale=P,!I){let n,m=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(m=this._location.pageNumber,n=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:m,destArray:n,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:P,presetValue:M?R:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1}_setScale(P,R=!1){let I=parseFloat(P);if(I>0)this._setScaleUpdatePages(I,P,R,!1);else{const M=this._pages[this._currentPageNumber-1];if(!M)return;let T=l.SCROLLBAR_PADDING,m=l.VERTICAL_PADDING;this.isInPresentationMode?T=m=4:this.removePageBorders?T=m=0:this._scrollMode===l.ScrollMode.HORIZONTAL&&([T,m]=[m,T]);const n=(this.container.clientWidth-T)/M.width*M.scale/this._pageWidthScaleFactor,h=(this.container.clientHeight-m)/M.height*M.scale;switch(P){case"page-actual":I=1;break;case"page-width":I=n;break;case"page-height":I=h;break;case"page-fit":I=Math.min(n,h);break;case"auto":const C=(0,l.isPortraitOrientation)(M)?n:Math.min(h,n);I=Math.min(l.MAX_AUTO_SCALE,C);break;default:return void console.error(`_setScale: "${P}" is an unknown zoom value.`)}this._setScaleUpdatePages(I,P,R,!0)}}#f(){const P=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this.#a(P)}pageLabelToPageNumber(P){if(!this._pageLabels)return null;const R=this._pageLabels.indexOf(P);return R<0?null:R+1}scrollPageIntoView({pageNumber:P,destArray:R=null,allowNegativeOffset:I=!1,ignoreDestinationZoom:M=!1}){if(!this.pdfDocument)return;const T=Number.isInteger(P)&&this._pages[P-1];if(!T)return void console.error(`scrollPageIntoView: "${P}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!R)return void this._setCurrentPageNumber(P,!0);let v,t,m=0,n=0,h=0,C=0;const g=T.rotation%180!=0,E=(g?T.height:T.width)/T.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS,O=(g?T.width:T.height)/T.scale/a.PixelsPerInch.PDF_TO_CSS_UNITS;let D=0;switch(R[1].name){case"XYZ":m=R[2],n=R[3],D=R[4],m=null!==m?m:0,n=null!==n?n:O;break;case"Fit":case"FitB":D="page-fit";break;case"FitH":case"FitBH":n=R[2],D="page-width",null===n&&this._location?(m=this._location.left,n=this._location.top):("number"!=typeof n||n<0)&&(n=O);break;case"FitV":case"FitBV":m=R[2],h=E,C=O,D="page-height";break;case"FitR":m=R[2],n=R[3],h=R[4]-m,C=R[5]-n,v=(this.container.clientWidth-(this.removePageBorders?0:l.SCROLLBAR_PADDING))/h/a.PixelsPerInch.PDF_TO_CSS_UNITS,t=(this.container.clientHeight-(this.removePageBorders?0:l.VERTICAL_PADDING))/C/a.PixelsPerInch.PDF_TO_CSS_UNITS,D=Math.min(Math.abs(v),Math.abs(t));break;default:return void console.error(`scrollPageIntoView: "${R[1].name}" is not a valid destination type.`)}if(M||(D&&D!==this._currentScale?this.currentScaleValue=D:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),"page-fit"===D&&!R[4])return void this.#a(T);const W=[T.viewport.convertToViewportPoint(m,n),T.viewport.convertToViewportPoint(m+h,n+C)];let z=Math.min(W[0][0],W[1][0]),X=Math.min(W[0][1],W[1][1]);I||(z=Math.max(z,0),X=Math.max(X,0)),this.#a(T,{left:z,top:X})}_updateLocation(P){const R=this._currentScale,I=this._currentScaleValue,M=parseFloat(I)===R?Math.round(1e4*R)/100:I,T=P.id,n=this.container,h=this._pages[T-1].getPagePoint(n.scrollLeft-P.x,n.scrollTop-P.y),C=Math.round(h[0]),v=Math.round(h[1]);let t=`#page=${T}`;this.isInPresentationMode||(t+=`&zoom=${M},${C},${v}`),this._location={pageNumber:T,scale:M,top:v,left:C,rotation:this._pagesRotation,pdfOpenParams:t}}update(){const P=this._getVisiblePages(),R=P.views,I=R.length;if(0===I)return;const M=Math.max(10,2*I+1);this.#e.resize(M,P.ids),this.renderingQueue.renderHighestPriority(P);const T=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),m=this._currentPageNumber;let n=!1;for(const h of R){if(h.percent<100)break;if(h.id===m&&T){n=!0;break}}this._setCurrentPageNumber(n?m:R[0].id),this._updateLocation(P.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(P){return this.container.contains(P)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const P=this._scrollMode===l.ScrollMode.PAGE?this.#o.pages:this._pages,R=this._scrollMode===l.ScrollMode.HORIZONTAL;return(0,l.getVisibleElements)({scrollEl:this.container,views:P,sortByVisibility:!0,horizontal:R,rtl:R&&this._isContainerRtl})}isPageVisible(P){return!!this.pdfDocument&&(Number.isInteger(P)&&P>0&&P<=this.pagesCount?this._getVisiblePages().ids.has(P):(console.error(`isPageVisible: "${P}" is not a valid page.`),!1))}isPageCached(P){return!!this.pdfDocument&&(Number.isInteger(P)&&P>0&&P<=this.pagesCount?this.#e.has(this._pages[P-1]):(console.error(`isPageCached: "${P}" is not a valid page.`),!1))}cleanup(){for(const P of this._pages)P.renderingState!==l.RenderingStates.FINISHED&&P.reset()}_cancelRendering(){for(const P of this._pages)P.cancelRendering()}#b(P){var R=this;return p(function*(){if(P.pdfPage)return P.pdfPage;try{const I=yield R.pdfDocument.getPage(P.id);return P.pdfPage||P.setPdfPage(I),R.linkService._cachedPageNumber?.(I.ref)||R.linkService.cachePageRef(P.id,I.ref),I}catch(I){return console.error("Unable to get page for page view",I),null}})()}#m(P){if(1===P.first?.id)return!0;if(P.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return this.#o.scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#_(P){for(const R of P)this._pages[R-1]?.toggleLoadingIconSpinner(!0);for(const R of this.#e)P.has(R.id)||R.toggleLoadingIconSpinner(!1)}forceRendering(P){const R=P||this._getVisiblePages(),I=this.#m(R),T=this.renderingQueue.getHighestPriority(R,this._pages,I,this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL);return this.#_(R.ids),!!T&&(this.#b(T).then(()=>{this.renderingQueue.renderView(T)}),!0)}createTextLayerBuilder({textLayerDiv:P,pageIndex:R,viewport:I,enhanceTextSelection:M=!1,eventBus:T,highlighter:m,accessibilityManager:n=null}){return new e.TextLayerBuilder({textLayerDiv:P,eventBus:T,pageIndex:R,viewport:I,enhanceTextSelection:!this.isInPresentationMode&&M,highlighter:m,accessibilityManager:n})}createTextHighlighter({pageIndex:P,eventBus:R}){return new d.TextHighlighter({eventBus:R,pageIndex:P,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:P,pdfPage:R,annotationStorage:I=this.pdfDocument?.annotationStorage,imageResourcesPath:M="",renderForms:T=!0,l10n:m=o.NullL10n,enableScripting:n=this.enableScripting,hasJSActionsPromise:h=this.pdfDocument?.hasJSActions(),mouseState:C=this._scriptingManager?.mouseState,fieldObjectsPromise:v=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:t=null,accessibilityManager:g=null}){return new c.AnnotationLayerBuilder({pageDiv:P,pdfPage:R,annotationStorage:I,imageResourcesPath:M,renderForms:T,linkService:this.linkService,downloadManager:this.downloadManager,l10n:m,enableScripting:n,hasJSActionsPromise:h,mouseState:C,fieldObjectsPromise:v,annotationCanvasMap:t,accessibilityManager:g})}createAnnotationEditorLayerBuilder({uiManager:P=this.#n,pageDiv:R,pdfPage:I,accessibilityManager:M=null,l10n:T,annotationStorage:m=this.pdfDocument?.annotationStorage}){return new S.AnnotationEditorLayerBuilder({uiManager:P,pageDiv:R,pdfPage:I,annotationStorage:m,accessibilityManager:M,l10n:T})}createXfaLayerBuilder({pageDiv:P,pdfPage:R,annotationStorage:I=this.pdfDocument?.annotationStorage}){return new i.XfaLayerBuilder({pageDiv:P,pdfPage:R,annotationStorage:I,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:P}){return new b.StructTreeLayerBuilder({pdfPage:P})}get hasEqualPageSizes(){const P=this._pages[0];for(let R=1,I=this._pages.length;R<I;++R){const M=this._pages[R];if(M.width!==P.width||M.height!==P.height)return!1}return!0}getPagesOverview(){return this._pages.map(P=>{const R=P.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,l.isPortraitOrientation)(R)?{width:R.width,height:R.height,rotation:R.rotation}:{width:R.height,height:R.width,rotation:(R.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(P){if(!(P instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${P}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=P;const R={optionalContentConfigPromise:P};for(const I of this._pages)I.update(R);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:P})}get scrollMode(){return this._scrollMode}set scrollMode(P){if(this._scrollMode!==P){if(!(0,l.isValidScrollMode)(P))throw new Error(`Invalid scroll mode: ${P}`);this.pagesCount>F.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=P,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:P}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(P=null){const R=this._scrollMode,I=this.viewer;I.classList.toggle("scrollHorizontal",R===l.ScrollMode.HORIZONTAL),I.classList.toggle("scrollWrapped",R===l.ScrollMode.WRAPPED),this.pdfDocument&&P&&(R===l.ScrollMode.PAGE?this.#l():this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(P,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(P){if(this._spreadMode!==P){if(!(0,l.isValidSpreadMode)(P))throw new Error(`Invalid spread mode: ${P}`);this._spreadMode=P,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:P}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(P=null){if(!this.pdfDocument)return;const R=this.viewer,I=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)this.#l();else if(R.textContent="",this._spreadMode===l.SpreadMode.NONE)for(const M of this._pages)R.append(M.div);else{const M=this._spreadMode-1;let T=null;for(let m=0,n=I.length;m<n;++m)null===T?(T=document.createElement("div"),T.className="spread",R.append(T)):m%2===M&&(T=T.cloneNode(!1),R.append(T)),T.append(I[m].div)}P&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(P,!0),this.update())}_getPageAdvance(P,R=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:I}=this._getVisiblePages(),M=new Map;for(const{id:T,y:m,percent:n,widthPercent:h}of I){if(0===n||h<100)continue;let C=M.get(m);C||M.set(m,C||=[]),C.push(T)}for(const T of M.values()){const m=T.indexOf(P);if(-1===m)continue;const n=T.length;if(1===n)break;if(R)for(let h=m-1,C=0;h>=C;h--){const t=T[h+1]-1;if(T[h]<t)return P-t}else for(let h=m+1,C=n;h<C;h++){const t=T[h-1]+1;if(T[h]>t)return t-P}if(R){const h=T[0];if(h<P)return P-h+1}else{const h=T[n-1];if(h>P)return h-P+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const I=this._spreadMode-1;if(R&&P%2!==I)break;if(!R&&P%2===I)break;const{views:M}=this._getVisiblePages(),T=R?P-1:P+1;for(const{id:m,percent:n,widthPercent:h}of M)if(m===T){if(n>0&&100===h)return 2;break}break}}return 1}nextPage(){const P=this._currentPageNumber,R=this.pagesCount;if(P>=R)return!1;const I=this._getPageAdvance(P,!1)||1;return this.currentPageNumber=Math.min(P+I,R),!0}previousPage(){const P=this._currentPageNumber;if(P<=1)return!1;const R=this._getPageAdvance(P,!0)||1;return this.currentPageNumber=Math.max(P-R,1),!0}increaseScale(P=1){let R=this._currentScale;do{R=(R*l.DEFAULT_SCALE_DELTA).toFixed(2),R=Math.ceil(10*R)/10,R=Math.min(l.MAX_SCALE,R)}while(--P>0&&R<l.MAX_SCALE);this.currentScaleValue=R}decreaseScale(P=1){let R=this._currentScale;do{R=(R/l.DEFAULT_SCALE_DELTA).toFixed(2),R=Math.floor(10*R)/10,R=Math.max(l.MIN_SCALE,R)}while(--P>0&&R>l.MIN_SCALE);this.currentScaleValue=R}updateContainerHeightCss(){const P=this.container.clientHeight;P!==this.#c&&(this.#c=P,l.docStyle.setProperty("--viewer-container-height",`${P}px`))}get annotationEditorMode(){return this.#n?this.#t:a.AnnotationEditorType.DISABLE}set annotationEditorMode(P){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");if(this.#t!==P){if(!j(P))throw new Error(`Invalid AnnotationEditor mode: ${P}`);this.pdfDocument&&(this.#t=P,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:P}),this.#n.updateMode(P))}}set annotationEditorParams({type:P,value:R}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");this.#n.updateParams(P,R)}refresh(){if(!this.pdfDocument)return;const P={};for(const R of this._pages)R.update(P);this.update()}}s.BaseViewer=te},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFPageView=void 0;var a=f(3),l=f(7),S=f(14),c=f(4),o=f(15);const r=S.compatibilityParams.maxCanvasPixels||16777216;s.PDFPageView=class A{#e=a.AnnotationMode.ENABLE_FORMS;#t={initialOptionalContent:!0,regularAnnotations:!0};constructor(b){const d=b.container,e=b.defaultViewport;this.id=b.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=b.scale||l.DEFAULT_SCALE,this.viewport=e,this.pdfPageRotate=e.rotation,this._optionalContentConfigPromise=b.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=b.textLayerMode??l.TextLayerMode.ENABLE,this.#e=b.annotationMode??a.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=b.imageResourcesPath||"",this.useOnlyCssZoom=b.useOnlyCssZoom||!1,this.maxCanvasPixels=b.maxCanvasPixels||r,this.pageColors=b.pageColors||null,this.eventBus=b.eventBus,this.renderingQueue=b.renderingQueue,this.textLayerFactory=b.textLayerFactory,this.annotationLayerFactory=b.annotationLayerFactory,this.annotationEditorLayerFactory=b.annotationEditorLayerFactory,this.xfaLayerFactory=b.xfaLayerFactory,this.textHighlighter=b.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=b.structTreeLayerFactory,this.renderer=b.renderer||l.RendererType.CANVAS,this.l10n=b.l10n||c.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=l.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const i=document.createElement("div");if(i.className="page",i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(_=>{i.setAttribute("aria-label",_)}),this.div=i,d?.append(i),this._isStandalone){const{optionalContentConfigPromise:_}=b;_&&_.then(L=>{_===this._optionalContentConfigPromise&&(this.#t.initialOptionalContent=L.hasInitialVisibility)})}}setPdfPage(b){this.pdfPage=b,this.pdfPageRotate=b.rotate,this.viewport=b.getViewport({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var b=this;return p(function*(){let d=null;try{yield b.annotationLayer.render(b.viewport,"display")}catch(e){console.error(`_renderAnnotationLayer: "${e}".`),d=e}finally{b.eventBus.dispatch("annotationlayerrendered",{source:b,pageNumber:b.id,error:d})}})()}_renderAnnotationEditorLayer(){var b=this;return p(function*(){let d=null;try{yield b.annotationEditorLayer.render(b.viewport,"display")}catch(e){console.error(`_renderAnnotationEditorLayer: "${e}".`),d=e}finally{b.eventBus.dispatch("annotationeditorlayerrendered",{source:b,pageNumber:b.id,error:d})}})()}_renderXfaLayer(){var b=this;return p(function*(){let d=null;try{const e=yield b.xfaLayer.render(b.viewport,"display");b.textHighlighter&&b._buildXfaTextContentItems(e.textDivs)}catch(e){console.error(`_renderXfaLayer: "${e}".`),d=e}finally{b.eventBus.dispatch("xfalayerrendered",{source:b,pageNumber:b.id,error:d})}})()}_buildXfaTextContentItems(b){var d=this;return p(function*(){const e=yield d.pdfPage.getTextContent(),i=[];for(const _ of e.items)i.push(_.str);d.textHighlighter.setTextMapping(b,i),d.textHighlighter.enable()})()}_resetZoomLayer(b=!1){if(!this.zoomLayer)return;const d=this.zoomLayer.firstChild;this.paintedViewportMap.delete(d),d.width=0,d.height=0,b&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:b=!1,keepAnnotationLayer:d=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1}={}){this.cancelRendering({keepAnnotationLayer:d,keepAnnotationEditorLayer:e,keepXfaLayer:i}),this.renderingState=l.RenderingStates.INITIAL;const _=this.div;_.style.width=Math.floor(this.viewport.width)+"px",_.style.height=Math.floor(this.viewport.height)+"px";const L=_.childNodes,F=b&&this.zoomLayer||null,j=d&&this.annotationLayer?.div||null,V=e&&this.annotationEditorLayer?.div||null,te=i&&this.xfaLayer?.div||null;for(let Z=L.length-1;Z>=0;Z--){const P=L[Z];switch(P){case F:case j:case V:case te:continue}P.remove()}_.removeAttribute("data-loaded"),j&&this.annotationLayer.hide(),V?this.annotationEditorLayer.hide():this.annotationEditorLayer?.destroy(),te&&this.xfaLayer.hide(),F||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(Z=>{this.loadingIconDiv?.setAttribute("aria-label",Z)}),_.append(this.loadingIconDiv)}update({scale:b=0,rotation:d=null,optionalContentConfigPromise:e=null}){if(this.scale=b||this.scale,"number"==typeof d&&(this.rotation=d),e instanceof Promise&&(this._optionalContentConfigPromise=e,e.then(L=>{e===this._optionalContentConfigPromise&&(this.#t.initialOptionalContent=L.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&l.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let _=!1;if(this.canvas&&this.maxCanvasPixels>0){const L=this.outputScale;(Math.floor(this.viewport.width)*L.sx|0)*(Math.floor(this.viewport.height)*L.sy|0)>this.maxCanvasPixels&&(_=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&_)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:b=!1,keepAnnotationEditorLayer:d=!1,keepXfaLayer:e=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!b||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!d||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!e||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:b,redrawAnnotationLayer:d=!1,redrawAnnotationEditorLayer:e=!1,redrawXfaLayer:i=!1}){const _=this.viewport.width,L=this.viewport.height,F=this.div;b.style.width=b.parentNode.style.width=F.style.width=Math.floor(_)+"px",b.style.height=b.parentNode.style.height=F.style.height=Math.floor(L)+"px";const j=this.viewport.rotation-this.paintedViewportMap.get(b).rotation,V=Math.abs(j);let te=1,Z=1;if((90===V||270===V)&&(te=L/_,Z=_/L),b.style.transform=`rotate(${j}deg) scale(${te}, ${Z})`,this.textLayer){const P=this.textLayer.viewport,I=Math.abs(this.viewport.rotation-P.rotation);let M=_/P.width;(90===I||270===I)&&(M=_/P.height);const T=this.textLayer.textLayerDiv;let m,n;switch(I){case 0:m=n=0;break;case 90:m=0,n="-"+T.style.height;break;case 180:m="-"+T.style.width,n="-"+T.style.height;break;case 270:m="-"+T.style.width,n=0;break;default:console.error("Bad rotation value.")}T.style.transform=`rotate(${I}deg) scale(${M}) translate(${m}, ${n})`,T.style.transformOrigin="0% 0%"}d&&this.annotationLayer&&this._renderAnnotationLayer(),e&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),i&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(b,d){return this.viewport.convertToPdfPoint(b,d)}toggleLoadingIconSpinner(b=!1){this.loadingIconDiv?.classList.toggle("notVisible",!b)}draw(){var b=this;this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:d,pdfPage:e}=this;if(!e)return this.renderingState=l.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=l.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=d.style.width,i.style.height=d.style.height,i.classList.add("canvasWrapper");const _=this.annotationLayer?.div||this.annotationEditorLayer?.div;_?_.before(i):d.append(i);let L=null;if(this.textLayerMode!==l.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new o.TextAccessibilityManager;const Z=document.createElement("div");Z.className="textLayer",Z.style.width=i.style.width,Z.style.height=i.style.height,_?_.before(Z):d.append(Z),L=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:Z,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===l.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=L,this.#e!==a.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:d,pdfPage:e,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===a.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})),this.xfaLayer?.div&&d.append(this.xfaLayer.div);let F=null;this.renderingQueue&&(F=Z=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=l.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,Z()});Z()});const j=function(){var Z=p(function*(P=null){if(V===b.paintTask&&(b.paintTask=null),P instanceof a.RenderingCancelledException)b._renderError=null;else if(b._renderError=P,b.renderingState=l.RenderingStates.FINISHED,b.loadingIconDiv&&(b.loadingIconDiv.remove(),delete b.loadingIconDiv),b._resetZoomLayer(!0),b.#t.regularAnnotations=!V.separateAnnots,b.eventBus.dispatch("pagerendered",{source:b,pageNumber:b.id,cssTransform:!1,timestamp:performance.now(),error:b._renderError}),P)throw P});return function(){return Z.apply(this,arguments)}}(),V=this.renderer===l.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);V.onRenderContinue=F,this.paintTask=V;const te=V.promise.then(()=>j(null).then(()=>{if(L){const Z=e.streamTextContent({includeMarkedContent:!0});L.setTextContentStream(Z),L.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:d,pdfPage:e,l10n:this.l10n,accessibilityManager:this._accessibilityManager}),this._renderAnnotationEditorLayer())})}),function(Z){return j(Z)});return this.xfaLayerFactory&&(this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:d,pdfPage:e}),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=Z=>{Z.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(P=>{if(!P||!this.canvas)return;const R=this.structTreeLayer.render(P);R.classList.add("structTree"),this.canvas.append(R)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:e})),d.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),te}paintOnCanvas(b){const d=(0,a.createPromiseCapability)(),e={promise:d.promise,onRenderContinue(M){M()},cancel(){I.cancel()},get separateAnnots(){return I.separateAnnots}},i=this.viewport,_=document.createElement("canvas");_.setAttribute("role","presentation"),_.hidden=!0;let L=!0;const F=function(){L&&(_.hidden=!1,L=!1)};b.append(_),this.canvas=_;const j=_.getContext("2d",{alpha:!1}),V=this.outputScale=new l.OutputScale;if(this.useOnlyCssZoom){const M=i.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});V.sx*=M.width/i.width,V.sy*=M.height/i.height}if(this.maxCanvasPixels>0){const T=Math.sqrt(this.maxCanvasPixels/(i.width*i.height));V.sx>T||V.sy>T?(V.sx=T,V.sy=T,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const te=(0,l.approximateFraction)(V.sx),Z=(0,l.approximateFraction)(V.sy);_.width=(0,l.roundToDivide)(i.width*V.sx,te[0]),_.height=(0,l.roundToDivide)(i.height*V.sy,Z[0]),_.style.width=(0,l.roundToDivide)(i.width,te[1])+"px",_.style.height=(0,l.roundToDivide)(i.height,Z[1])+"px",this.paintedViewportMap.set(_,i);const R={canvasContext:j,transform:V.scaled?[V.sx,0,0,V.sy,0,0]:null,viewport:this.viewport,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},I=this.pdfPage.render(R);return I.onContinue=function(M){F(),e.onRenderContinue?e.onRenderContinue(M):M()},I.promise.then(function(){F(),d.resolve()},function(M){F(),d.reject(M)}),e}paintOnSvg(b){let d=!1;const e=()=>{if(d)throw new a.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,_=this.viewport.clone({scale:a.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:this.#e}).then(F=>(e(),new a.SVGGraphics(i.commonObjs,i.objs).getSVG(F,_).then(V=>{e(),this.svg=V,this.paintedViewportMap.set(V,_),V.style.width=b.style.width,V.style.height=b.style.height,this.renderingState=l.RenderingStates.FINISHED,b.append(V)}))),onRenderContinue(F){F()},cancel(){d=!0},get separateAnnots(){return!1}}}setPageLabel(b){this.pageLabel="string"==typeof b?b:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:b,regularAnnotations:d}=this.#t;return b&&d?this.canvas:null}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.compatibilityParams=s.OptionKind=s.AppOptions=void 0;const f=Object.create(null);s.compatibilityParams=f;{const o=navigator.userAgent||"",r=navigator.platform||"",A=navigator.maxTouchPoints||1,y=/Android/.test(o);(/\b(iPad|iPhone|iPod)(?=;)/.test(o)||"MacIntel"===r&&A>1||y)&&(f.maxCanvasPixels=5242880)}const a={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};s.OptionKind=a;const l={annotationEditorMode:{value:-1,kind:a.VIEWER+a.PREFERENCE},annotationMode:{value:2,kind:a.VIEWER+a.PREFERENCE},cursorToolOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},defaultZoomValue:{value:"",kind:a.VIEWER+a.PREFERENCE},disableHistory:{value:!1,kind:a.VIEWER},disablePageLabels:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePermissions:{value:!1,kind:a.VIEWER+a.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:a.VIEWER+a.PREFERENCE},enableScripting:{value:!0,kind:a.VIEWER+a.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:a.VIEWER},externalLinkTarget:{value:0,kind:a.VIEWER+a.PREFERENCE},historyUpdateUrl:{value:!1,kind:a.VIEWER+a.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},imageResourcesPath:{value:"./images/",kind:a.VIEWER},maxCanvasPixels:{value:16777216,kind:a.VIEWER},forcePageColors:{value:!1,kind:a.VIEWER+a.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:a.VIEWER+a.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:a.VIEWER+a.PREFERENCE},pdfBugEnabled:{value:!1,kind:a.VIEWER+a.PREFERENCE},printResolution:{value:150,kind:a.VIEWER},sidebarViewOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},scrollModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},spreadModeOnLoad:{value:-1,kind:a.VIEWER+a.PREFERENCE},textLayerMode:{value:1,kind:a.VIEWER+a.PREFERENCE},useOnlyCssZoom:{value:!1,kind:a.VIEWER+a.PREFERENCE},viewerCssTheme:{value:0,kind:a.VIEWER+a.PREFERENCE},viewOnLoad:{value:0,kind:a.VIEWER+a.PREFERENCE},cMapPacked:{value:!0,kind:a.API},cMapUrl:{value:"../web/cmaps/",kind:a.API},disableAutoFetch:{value:!1,kind:a.API+a.PREFERENCE},disableFontFace:{value:!1,kind:a.API+a.PREFERENCE},disableRange:{value:!1,kind:a.API+a.PREFERENCE},disableStream:{value:!1,kind:a.API+a.PREFERENCE},docBaseUrl:{value:"",kind:a.API},enableXfa:{value:!0,kind:a.API+a.PREFERENCE},fontExtraProperties:{value:!1,kind:a.API},isEvalSupported:{value:!0,kind:a.API},maxImageSize:{value:-1,kind:a.API},pdfBug:{value:!1,kind:a.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:a.API},verbosity:{value:1,kind:a.API},workerPort:{value:null,kind:a.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:a.WORKER}};l.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:a.VIEWER},l.disablePreferences={value:!1,kind:a.VIEWER},l.locale={value:navigator.language||"en-US",kind:a.VIEWER},l.renderer={value:"canvas",kind:a.VIEWER+a.PREFERENCE},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:a.VIEWER};const S=Object.create(null);s.AppOptions=class c{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(r){const A=S[r];if(void 0!==A)return A;const y=l[r];return void 0!==y?f[r]??y.value:void 0}static getAll(r=null){const A=Object.create(null);for(const y in l){const b=l[y];if(r){if(!(r&b.kind))continue;if(r===a.PREFERENCE){const e=b.value,i=typeof e;if("boolean"===i||"string"===i||"number"===i&&Number.isInteger(e)){A[y]=e;continue}throw new Error(`Invalid type for preference: ${y}`)}}const d=S[y];A[y]=void 0!==d?d:f[y]??b.value}return A}static set(r,A){S[r]=A}static setAll(r){for(const A in r)S[A]=r[A]}static remove(r){delete S[r]}static _hasUserOptions(){return Object.keys(S).length>0}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextAccessibilityManager=void 0;var a=f(7);class l{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(c){this.#t=c}static#r(c,o){const r=c.getBoundingClientRect(),A=o.getBoundingClientRect();if(0===r.width&&0===r.height)return 1;if(0===A.width&&0===A.height)return-1;const d=r.y+r.height/2,_=A.y+A.height/2;return d<=A.y&&_>=r.y+r.height?-1:_<=r.y&&d>=A.y+A.height?1:r.x+r.width/2-(A.x+A.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(l.#r),this.#n.size>0){const c=this.#t;for(const[o,r]of this.#n)document.getElementById(o)?this.#c(o,c[r]):this.#n.delete(o)}for(const[c,o]of this.#i)this.addPointerInTextLayer(c,o);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(c){if(!this.#e)return void this.#i.delete(c);const o=this.#t;if(!o||0===o.length)return;const{id:r}=c,A=this.#n.get(r);if(void 0===A)return;const y=o[A];this.#n.delete(r);let b=y.getAttribute("aria-owns");b?.includes(r)&&(b=b.split(" ").filter(d=>d!==r).join(" "),b?y.setAttribute("aria-owns",b):(y.removeAttribute("aria-owns"),y.setAttribute("role","presentation")))}#c(c,o){const r=o.getAttribute("aria-owns");r?.includes(c)||o.setAttribute("aria-owns",r?`${r} ${c}`:c),o.removeAttribute("role")}addPointerInTextLayer(c,o){const{id:r}=c;if(!r)return;if(!this.#e)return void this.#i.set(c,o);o&&this.removePointerInTextLayer(c);const A=this.#t;if(!A||0===A.length)return;const y=(0,a.binarySearchFirstItem)(A,d=>l.#r(c,d)<0),b=Math.max(0,y-1);this.#c(r,A[b]),this.#n.set(r,b)}moveElementInDOM(c,o,r,A){if(this.addPointerInTextLayer(r,A),!c.hasChildNodes())return void c.append(o);const y=Array.from(c.childNodes).filter(e=>e!==o);if(0===y.length)return;const b=r||o,d=(0,a.binarySearchFirstItem)(y,e=>l.#r(b,e)<0);0===d?y[0].before(o):y[d-1].after(o)}}s.TextAccessibilityManager=l},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFRenderingQueue=void 0;var a=f(3),l=f(7);s.PDFRenderingQueue=class c{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(r){this.pdfViewer=r}setThumbnailViewer(r){this.pdfThumbnailViewer=r}isHighestPriority(r){return this.highestPriorityPage===r.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(r){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(r)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(r,A,y,b=!1){const d=r.views,e=d.length;if(0===e)return null;for(let j=0;j<e;j++){const V=d[j].view;if(!this.isViewFinished(V))return V}const i=r.first.id,_=r.last.id;if(_-i+1>e){const j=r.ids;for(let V=1,te=_-i;V<te;V++){const Z=y?i+V:_-V;if(j.has(Z))continue;const P=A[Z-1];if(!this.isViewFinished(P))return P}}let L=y?_:i-2,F=A[L];return F&&!this.isViewFinished(F)||b&&(L+=y?1:-1,F=A[L],F&&!this.isViewFinished(F))?F:null}isViewFinished(r){return r.renderingState===l.RenderingStates.FINISHED}renderView(r){switch(r.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=r.renderingId,r.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=r.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=r.renderingId,r.draw().finally(()=>{this.renderHighestPriority()}).catch(A=>{A instanceof a.RenderingCancelledException||console.error(`renderView: "${A}"`)})}return!0}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextHighlighter=void 0,s.TextHighlighter=class f{constructor({findController:l,eventBus:S,pageIndex:c}){this.findController=l,this.matches=[],this.eventBus=S,this.pageIdx=c,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,S){this.textDivs=l,this.textContentItemsStr=S}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||-1===l.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(l,S){if(!l)return[];const{textContentItemsStr:c}=this;let o=0,r=0;const A=c.length-1,y=[];for(let b=0,d=l.length;b<d;b++){let e=l[b];for(;o!==A&&e>=r+c[o].length;)r+=c[o].length,o++;o===c.length&&console.error("Could not find a matching mapping");const i={begin:{divIdx:o,offset:e-r}};for(e+=S[b];o!==A&&e>r+c[o].length;)r+=c[o].length,o++;i.end={divIdx:o,offset:e-r},y.push(i)}return y}_renderMatches(l){if(0===l.length)return;const{findController:S,pageIdx:c}=this,{textContentItemsStr:o,textDivs:r}=this,A=c===S.selected.pageIdx,y=S.selected.matchIdx;let d=null;function i(j,V){const te=j.divIdx;return r[te].textContent="",_(te,0,j.offset,V)}function _(j,V,te,Z){let P=r[j];if(P.nodeType===Node.TEXT_NODE){const M=document.createElement("span");P.before(M),M.append(P),r[j]=M,P=M}const R=o[j].substring(V,te),I=document.createTextNode(R);if(Z){const M=document.createElement("span");return M.className=`${Z} appended`,M.append(I),P.append(M),Z.includes("selected")?M.offsetLeft:0}return P.append(I),0}let L=y,F=L+1;if(S.state.highlightAll)L=0,F=l.length;else if(!A)return;for(let j=L;j<F;j++){const V=l[j],te=V.begin,Z=V.end,P=A&&j===y,R=P?" selected":"";let I=0;if(d&&te.divIdx===d.divIdx?_(d.divIdx,d.offset,te.offset):(null!==d&&_(d.divIdx,d.offset,void 0),i(te)),te.divIdx===Z.divIdx)I=_(te.divIdx,te.offset,Z.offset,"highlight"+R);else{I=_(te.divIdx,te.offset,void 0,"highlight begin"+R);for(let M=te.divIdx+1,T=Z.divIdx;M<T;M++)r[M].className="highlight middle"+R;i(Z,"highlight end"+R)}d=Z,P&&S.scrollMatchIntoView({element:r[te.divIdx],selectedLeft:I,pageIndex:c,matchIndex:y})}d&&_(d.divIdx,d.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:l,matches:S,pageIdx:c}=this,{textContentItemsStr:o,textDivs:r}=this;let A=-1;for(let d=0,e=S.length;d<e;d++){const i=S[d];for(let L=Math.max(A,i.begin.divIdx),F=i.end.divIdx;L<=F;L++){const j=r[L];j.textContent=o[L],j.className=""}A=i.end.divIdx+1}l?.highlightMatches&&(this.matches=this._convertMatches(l.pageMatches[c]||null,l.pageMatchesLength[c]||null),this._renderMatches(this.matches))}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DownloadManager=void 0;var a=f(3);function l(c,o){const r=document.createElement("a");if(!r.click)throw new Error('DownloadManager: "a.click()" is not supported.');r.href=c,r.target="_parent","download"in r&&(r.download=o),(document.body||document.documentElement).append(r),r.click(),r.remove()}s.DownloadManager=class S{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(o,r){(0,a.createValidAbsoluteUrl)(o,"http://example.com")?l(o+"#pdfjs.action=download",r):console.error(`downloadUrl - not a valid URL: ${o}`)}downloadData(o,r,A){l(URL.createObjectURL(new Blob([o],{type:A})),r)}openOrDownloadData(o,r,A){const y=(0,a.isPdfFile)(A),b=y?"application/pdf":"";if(y){let e,d=this._openBlobUrls.get(o);d||(d=URL.createObjectURL(new Blob([r],{type:b})),this._openBlobUrls.set(o,d)),e="?file="+encodeURIComponent(d+"#"+A);try{return window.open(e),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(d),this._openBlobUrls.delete(o)}}return this.downloadData(r,A,b),!1}download(o,r,A){l(URL.createObjectURL(o),A)}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WaitOnType=s.EventBus=s.AutomationEventBus=void 0,s.waitOnEventOrTimeout=function a({target:c,name:o,delay:r=0}){return new Promise(function(A,y){if("object"!=typeof c||!o||"string"!=typeof o||!(Number.isInteger(r)&&r>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function b(_){c instanceof l?c._off(o,d):c.removeEventListener(o,d),i&&clearTimeout(i),A(_)}const d=b.bind(null,f.EVENT);c instanceof l?c._on(o,d):c.addEventListener(o,d);const e=b.bind(null,f.TIMEOUT),i=setTimeout(e,r)})};const f={EVENT:"event",TIMEOUT:"timeout"};s.WaitOnType=f;class l{constructor(){this._listeners=Object.create(null)}on(o,r,A=null){this._on(o,r,{external:!0,once:A?.once})}off(o,r,A=null){this._off(o,r,{external:!0,once:A?.once})}dispatch(o,r){const A=this._listeners[o];if(!A||0===A.length)return;let y;for(const{listener:b,external:d,once:e}of A.slice(0))e&&this._off(o,b),d?(y||=[]).push(b):b(r);if(y){for(const b of y)b(r);y=null}}_on(o,r,A=null){(this._listeners[o]||=[]).push({listener:r,external:!0===A?.external,once:!0===A?.once})}_off(o,r,A=null){const y=this._listeners[o];if(y)for(let b=0,d=y.length;b<d;b++)if(y[b].listener===r)return void y.splice(b,1)}}s.EventBus=l,s.AutomationEventBus=class S extends l{dispatch(o,r){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericL10n=void 0,f(21);var a=f(4);const l=document.webL10n;s.GenericL10n=class S{constructor(o){this._lang=o,this._ready=new Promise((r,A)=>{l.setLanguage((0,a.fixupLangCode)(o),()=>{r(l)})})}getLanguage(){var o=this;return p(function*(){return(yield o._ready).getLanguage()})()}getDirection(){var o=this;return p(function*(){return(yield o._ready).getDirection()})()}get(o,r=null,A=(0,a.getL10nFallback)(o,r)){var y=this;return p(function*(){return(yield y._ready).get(o,r,A)})()}translate(o){var r=this;return p(function*(){return(yield r._ready).translate(o)})()}}},()=>{document.webL10n=function(w,s,f){var a={},l="",S="textContent",c="",o={},r="loading",A=!0;function i(M,T,m){T=T||function(C){},m=m||function(){};var n=new XMLHttpRequest;n.open("GET",M,A),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0===n.status?T(n.responseText):m())},n.onerror=m,n.ontimeout=m;try{n.send(null)}catch{m()}}function L(M,T){M&&(M=M.toLowerCase()),T=T||function(){},function F(){a={},l="",c=""}(),c=M;var m=function y(){return s.querySelectorAll('link[type="application/l10n"]')}(),n=m.length;if(0!==n){var t,g=0;t=function(){++g>=n&&(T(),r="complete")};for(var O=0;O<n;O++)new E(m[O]).load(M,t)}else{var h=function b(){var M=s.querySelector('script[type="application/l10n"]');return M?JSON.parse(M.innerHTML):null}();if(h&&h.locales&&h.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(a=h.locales[M])){var C=h.default_locale.toLowerCase();for(var v in h.locales){if((v=v.toLowerCase())===M){a=h.locales[M];break}v===C&&(a=h.locales[C])}}T()}else console.log("no resource to load, early way out");r="complete"}function E(W){var z=W.href;this.load=function(X,K){!function _(M,T,m,n){var h=M.replace(/[^\/]*$/,"")||"./";function C(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}i(M,function(t){l+=t,function v(t,g){var E={},O=/^\s*|\s*$/,D=/^\s*#|^\s*$/,W=/^\s*\[(.*)\]\s*$/,z=/^\s*@import\s+url\((.*)\)\s*$/i,X=/^([^=\s]*)\s*=\s*(.+)$/;function K(Y,H,G){var ee=Y.replace(O,"").split(/[\r\n]+/),$="*",ne=T.split("-",1)[0],ae=!1,ie="";!function ce(){for(;;){if(!ee.length)return void G();var he=ee.shift();if(!D.test(he)){if(H){if(ie=W.exec(he)){$=ie[1].toLowerCase(),ae="*"!==$&&$!==T&&$!==ne;continue}if(ae)continue;if(ie=z.exec(he))return void B(h+ie[1],ce)}var le=he.match(X);le&&3==le.length&&(E[le[1]]=C(le[2]))}}}()}function B(Y,H){i(Y,function(G){K(G,!1,H)},function(){console.warn(Y+" not found."),H()})}K(t,!0,function(){g(E)})}(t,function(g){for(var E in g){var O,D,W=E.lastIndexOf(".");W>0?(O=E.substring(0,W),D=E.substring(W+1)):(O=E,D=S),a[O]||(a[O]={}),a[O][D]=g[E]}m&&m()})},n)}(z,X,K,function(){console.warn(z+" not found."),console.warn('"'+X+'" resource not found'),c="",K()})}}}function V(M,T,m){var n=a[M];if(!n){if(console.warn("#"+M+" is undefined."),!m)return null;n=m}var h={};for(var C in n){var v=n[C];v=Z(v=te(v,T,M,C),T,M),h[C]=v}return h}function te(M,T,m,n){var C=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(M);if(!C||!C.length)return M;var g,v=C[1],t=C[2];return T&&t in T?g=T[t]:t in a&&(g=a[t]),v in o&&(M=(0,o[v])(M,g,m,n)),M}function Z(M,T,m){return M.replace(/\{\{\s*(.+?)\s*\}\}/g,function(h,C){return T&&C in T?T[C]:C in a?a[C]:(console.log("argument {{"+C+"}} for #"+m+" is undefined."),h)})}function P(M){var T=function e(M){if(!M)return{};var T=M.getAttribute("data-l10n-id"),m=M.getAttribute("data-l10n-args"),n={};if(m)try{n=JSON.parse(m)}catch{console.warn("could not parse arguments for #"+T)}return{id:T,args:n}}(M);if(T.id){var m=V(T.id,T.args);if(!m)return void console.warn("#"+T.id+" is undefined.");if(m[S]){if(0===function R(M){if(M.children)return M.children.length;if(typeof M.childElementCount<"u")return M.childElementCount;for(var T=0,m=0;m<M.childNodes.length;m++)T+=1===M.nodeType?1:0;return T}(M))M[S]=m[S];else{for(var n=M.childNodes,h=!1,C=0,v=n.length;C<v;C++)3===n[C].nodeType&&/\S/.test(n[C].nodeValue)&&(h?n[C].nodeValue="":(n[C].nodeValue=m[S],h=!0));if(!h){var t=s.createTextNode(m[S]);M.prepend(t)}}delete m[S]}for(var g in m)M[g]=m[g]}}return o.plural=function(M,T,m,n){var h=parseFloat(T);if(isNaN(h)||n!=S)return M;o._pluralRules||(o._pluralRules=function j(M){function m(v,t){return-1!==t.indexOf(v)}function n(v,t,g){return t<=v&&v<=g}var h={0:function(v){return"other"},1:function(v){return n(v%100,3,10)?"few":0===v?"zero":n(v%100,11,99)?"many":2==v?"two":1==v?"one":"other"},2:function(v){return 0!==v&&v%10==0?"many":2==v?"two":1==v?"one":"other"},3:function(v){return 1==v?"one":"other"},4:function(v){return n(v,0,1)?"one":"other"},5:function(v){return n(v,0,2)&&2!=v?"one":"other"},6:function(v){return 0===v?"zero":v%10==1&&v%100!=11?"one":"other"},7:function(v){return 2==v?"two":1==v?"one":"other"},8:function(v){return n(v,3,6)?"few":n(v,7,10)?"many":2==v?"two":1==v?"one":"other"},9:function(v){return 0===v||1!=v&&n(v%100,1,19)?"few":1==v?"one":"other"},10:function(v){return n(v%10,2,9)&&!n(v%100,11,19)?"few":v%10!=1||n(v%100,11,19)?"other":"one"},11:function(v){return n(v%10,2,4)&&!n(v%100,12,14)?"few":v%10==0||n(v%10,5,9)||n(v%100,11,14)?"many":v%10==1&&v%100!=11?"one":"other"},12:function(v){return n(v,2,4)?"few":1==v?"one":"other"},13:function(v){return n(v%10,2,4)&&!n(v%100,12,14)?"few":1!=v&&n(v%10,0,1)||n(v%10,5,9)||n(v%100,12,14)?"many":1==v?"one":"other"},14:function(v){return n(v%100,3,4)?"few":v%100==2?"two":v%100==1?"one":"other"},15:function(v){return 0===v||n(v%100,2,10)?"few":n(v%100,11,19)?"many":1==v?"one":"other"},16:function(v){return v%10==1&&11!=v?"one":"other"},17:function(v){return 3==v?"few":0===v?"zero":6==v?"many":2==v?"two":1==v?"one":"other"},18:function(v){return 0===v?"zero":n(v,0,2)&&0!==v&&2!=v?"one":"other"},19:function(v){return n(v,2,10)?"few":n(v,0,1)?"one":"other"},20:function(v){return!n(v%10,3,4)&&v%10!=9||n(v%100,10,19)||n(v%100,70,79)||n(v%100,90,99)?v%1e6==0&&0!==v?"many":v%10!=2||m(v%100,[12,72,92])?v%10!=1||m(v%100,[11,71,91])?"other":"one":"two":"few"},21:function(v){return 0===v?"zero":1==v?"one":"other"},22:function(v){return n(v,0,1)||n(v,11,99)?"one":"other"},23:function(v){return n(v%10,1,2)||v%20==0?"one":"other"},24:function(v){return n(v,3,10)||n(v,13,19)?"few":m(v,[2,12])?"two":m(v,[1,11])?"one":"other"}},C={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[M.replace(/-.*$/,"")];return C in h?h[C]:(console.warn("plural form unknown for ["+M+"]"),function(){return"other"})}(c));var C="["+o._pluralRules(h)+"]";return 0===h&&m+"[zero]"in a?M=a[m+"[zero]"][n]:1==h&&m+"[one]"in a?M=a[m+"[one]"][n]:2==h&&m+"[two]"in a?M=a[m+"[two]"][n]:m+C in a?M=a[m+C][n]:m+"[other]"in a&&(M=a[m+"[other]"][n]),M},{get:function(M,T,m){var C,n=M.lastIndexOf("."),h=S;n>0&&(h=M.substring(n+1),M=M.substring(0,n)),m&&((C={})[h]=m);var v=V(M,T,C);return v&&h in v?v[h]:"{{"+M+"}}"},getData:function(){return a},getText:function(){return l},getLanguage:function(){return c},setLanguage:function(M,T){L(M,function(){T&&T()})},getDirection:function(){var T=c.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(T)>=0?"rtl":"ltr"},translate:function I(M){for(var T=function d(M){return M?M.querySelectorAll("*[data-l10n-id]"):[]}(M=M||s.documentElement),m=T.length,n=0;n<m;n++)P(T[n]);P(M)},getReadyState:function(){return r},ready:function(M){M&&("complete"==r||"interactive"==r?w.setTimeout(function(){M()}):s.addEventListener&&s.addEventListener("localized",function T(){s.removeEventListener("localized",T),M()}))}}}(window,document)},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFindController=s.FindState=void 0;var a=f(7),l=f(3),S=f(23);const c={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};s.FindState=c;const y={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},b=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),d=[...b.values()].map(M=>String.fromCharCode(M)).join(""),e=/\p{M}+/gu,i=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,_=/([^\p{M}])\p{M}*$/u,L=/^\p{M}*([^\p{M}])/u,F=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,j=new Map;let te=null,Z=null;function P(M){const T=[];let m,n;for(;null!==(m=F.exec(M));){let{index:z}=m;for(const X of m[0]){let K=j.get(X);K||(K=X.normalize("NFD").length,j.set(X,K)),T.push([K,z++])}}if(0===T.length&&te)n=te;else if(T.length>0&&Z)n=Z;else{const X=`([${Object.keys(y).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;n=0===T.length?te=new RegExp(X+"|(\\u0000)","gum"):Z=new RegExp(X+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const h=[];for(;null!==(m=e.exec(M));)h.push([m[0].length,m.index]);let C=M.normalize("NFD");const v=[[0,0]];let t=0,g=0,E=0,O=0,D=0,W=!1;return C=C.replace(n,(z,X,K,B,Y,H,G)=>{if(G-=O,X){const ee=y[z],$=ee.length;for(let ne=1;ne<$;ne++)v.push([G-E+ne,E-ne]);return E-=$-1,ee}if(K){const ee=K.endsWith("\n"),$=ee?K.length-2:K.length;W=!0;let ne=$;G+D===h[t]?.[1]&&(ne-=h[t][0],++t);for(let ae=1;ae<=ne;ae++)v.push([G-1-E+ae,E-ae]);return E-=ne,O+=ne,ee?(v.push([(G+=$-1)-E+1,1+E]),E+=1,O+=1,D+=1,K.slice(0,$)):K}if(B)return v.push([G-E+1,1+E]),E+=1,O+=1,D+=1,B.charAt(0);if(Y)return v.push([G-E+1,E-1]),E-=1,O+=1,D+=1," ";if(G+D===T[g]?.[1]){const ee=T[g][0]-1;++g;for(let $=1;$<=ee;$++)v.push([G-(E-$),E-$]);E-=ee,O+=ee}return H}),v.push([C.length,E]),[C,v,W]}function R(M,T,m){if(!M)return[T,m];const n=T,h=T+m;let C=(0,a.binarySearchFirstItem)(M,t=>t[0]>=n);M[C][0]>n&&--C;let v=(0,a.binarySearchFirstItem)(M,t=>t[0]>=h,C);return M[v][0]>h&&--v,[n+M[C][1],m+M[v][1]-M[C][1]]}s.PDFFindController=class I{constructor({linkService:T,eventBus:m}){this._linkService=T,this._eventBus=m,this.#t(),m._on("find",this.#e.bind(this)),m._on("findbarclose",this.#_.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(T){this._pdfDocument&&this.#t(),T&&(this._pdfDocument=T,this._firstPageCapability.resolve())}#e(T){if(!T)return;const m=this._pdfDocument,{type:n}=T;(null===this._state||this.#i(T))&&(this._dirtyMatch=!0),this._state=T,"highlightallchange"!==n&&this.#d(c.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||m&&this._pdfDocument!==m)return;this.#u();const h=!this._highlightMatches,C=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),n?this._dirtyMatch?this.#a():"again"===n?(this.#a(),h&&this._state.highlightAll&&this.#l()):"highlightallchange"===n?(C?this.#a():this._highlightMatches=!0,this.#l()):this.#a():this._findTimeout=setTimeout(()=>{this.#a(),this._findTimeout=null},250)})}scrollMatchIntoView({element:T=null,selectedLeft:m=0,pageIndex:n=-1,matchIndex:h=-1}){this._scrollMatches&&T&&-1!==h&&h===this._selected.matchIdx&&-1!==n&&n===this._selected.pageIdx&&(this._scrollMatches=!1,(0,a.scrollIntoView)(T,{top:-50,left:m+-400},!0))}#t(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,l.createPromiseCapability)()}get#n(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=P(this._state.query)),this._normalizedQuery}#i(T){if(T.query!==this._state.query)return!0;switch(T.type){case"again":const m=this._selected.pageIdx+1,n=this._linkService;return m>=1&&m<=n.pagesCount&&m!==n.page&&!n.isPageVisible(m);case"highlightallchange":return!1}return!0}#r(T,m,n){let h=T.slice(0,m).match(_);if(h){const C=T.charCodeAt(m),v=h[1].charCodeAt(0);if((0,S.getCharacterType)(C)===(0,S.getCharacterType)(v))return!1}if(h=T.slice(m+n).match(L),h){const C=T.charCodeAt(m+n-1),v=h[1].charCodeAt(0);if((0,S.getCharacterType)(C)===(0,S.getCharacterType)(v))return!1}return!0}#c(T,m,n,h){const C=[],v=[],t=this._pageDiffs[n];let g;for(;null!==(g=T.exec(h));){if(m&&!this.#r(h,g.index,g[0].length))continue;const[E,O]=R(t,g.index,g[0].length);O&&(C.push(E),v.push(O))}this._pageMatches[n]=C,this._pageMatchesLength[n]=v}#o(T,m){const{matchDiacritics:n}=this._state;let h=!1;return(T=T.replace(i,(v,t,g,E,O,D)=>t?`[ ]*\\${t}[ ]*`:g?`[ ]*${g}[ ]*`:E?"[ ]+":n?O||D:O?b.has(O.charCodeAt(0))?O:"":m?(h=!0,`${D}\\p{M}*`):D)).endsWith("[ ]*")&&(T=T.slice(0,T.length-4)),n&&m&&(h=!0,T=`${T}(?=[${d}]|[^\\p{M}]|$)`),[h,T]}#s(T){let m=this.#n;if(0===m.length)return;const{caseSensitive:n,entireWord:h,phraseSearch:C}=this._state,v=this._pageContents[T],t=this._hasDiacritics[T];let g=!1;if(C)[g,m]=this.#o(m,t);else{const D=m.match(/\S+/g);D&&(m=D.sort().reverse().map(W=>{const[z,X]=this.#o(W,t);return g||=z,`(${X})`}).join("|"))}m=new RegExp(m,`g${g?"u":""}${n?"":"i"}`),this.#c(m,h,T,v),this._state.highlightAll&&this.#h(T),this._resumePageIdx===T&&(this._resumePageIdx=null,this.#f());const O=this._pageMatches[T].length;O>0&&(this._matchesCountTotal+=O,this.#v())}#u(){if(this._extractTextPromises.length>0)return;let T=Promise.resolve();for(let m=0,n=this._linkService.pagesCount;m<n;m++){const h=(0,l.createPromiseCapability)();this._extractTextPromises[m]=h.promise,T=T.then(()=>this._pdfDocument.getPage(m+1).then(C=>C.getTextContent()).then(C=>{const v=[];for(const t of C.items)v.push(t.str),t.hasEOL&&v.push("\n");[this._pageContents[m],this._pageDiffs[m],this._hasDiacritics[m]]=P(v.join("")),h.resolve()},C=>{console.error(`Unable to get text content for page ${m+1}`,C),this._pageContents[m]="",this._pageDiffs[m]=null,this._hasDiacritics[m]=!1,h.resolve()}))}}#h(T){this._scrollMatches&&this._selected.pageIdx===T&&(this._linkService.page=T+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:T})}#l(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#a(){const T=this._state.findPrevious,m=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=m,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this.#l();for(let C=0;C<n;C++)this._pendingFindMatches.has(C)||(this._pendingFindMatches.add(C),this._extractTextPromises[C].then(()=>{this._pendingFindMatches.delete(C),this.#s(C)}))}if(""===this.#n)return void this.#d(c.FOUND);if(this._resumePageIdx)return;const h=this._offset;if(this._pagesToSearch=n,null!==h.matchIdx){if(!T&&h.matchIdx+1<this._pageMatches[h.pageIdx].length||T&&h.matchIdx>0)return h.matchIdx=T?h.matchIdx-1:h.matchIdx+1,void this.#m(!0);this.#b(T)}this.#f()}#p(T){const m=this._offset,n=T.length,h=this._state.findPrevious;return n?(m.matchIdx=h?n-1:0,this.#m(!0),!0):(this.#b(h),!!(m.wrapped&&(m.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#f(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let T=null;do{const m=this._offset.pageIdx;if(T=this._pageMatches[m],!T){this._resumePageIdx=m;break}}while(!this.#p(T))}#b(T){const m=this._offset,n=this._linkService.pagesCount;m.pageIdx=T?m.pageIdx-1:m.pageIdx+1,m.matchIdx=null,this._pagesToSearch--,(m.pageIdx>=n||m.pageIdx<0)&&(m.pageIdx=T?n-1:0,m.wrapped=!0)}#m(T=!1){let m=c.NOT_FOUND;const n=this._offset.wrapped;if(this._offset.wrapped=!1,T){const h=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,m=n?c.WRAPPED:c.FOUND,-1!==h&&h!==this._selected.pageIdx&&this.#h(h)}this.#d(m,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#h(this._selected.pageIdx))}#_(T){const m=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||m&&this._pdfDocument!==m||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#d(c.FOUND),this._highlightMatches=!1,this.#l())})}#S(){const{pageIdx:T,matchIdx:m}=this._selected;let n=0,h=this._matchesCountTotal;if(-1!==m){for(let C=0;C<T;C++)n+=this._pageMatches[C]?.length||0;n+=m+1}return(n<1||n>h)&&(n=h=0),{current:n,total:h}}#v(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#S()})}#d(T,m=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:T,previous:m,matchesCount:this.#S(),rawQuery:this._state?.query??null})}}},(w,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterType=void 0,s.getCharacterType=function e(i){return function a(i){return i<11904}(i)?function l(i){return 0==(65408&i)}(i)?function o(i){return 32===i||9===i||13===i||10===i}(i)?f.SPACE:function S(i){return i>=97&&i<=122||i>=65&&i<=90}(i)||function c(i){return i>=48&&i<=57}(i)||95===i?f.ALPHA_LETTER:f.PUNCT:function d(i){return 3584==(65408&i)}(i)?f.THAI_LETTER:160===i?f.SPACE:f.ALPHA_LETTER:function r(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}(i)?f.HAN_LETTER:function A(i){return i>=12448&&i<=12543}(i)?f.KATAKANA_LETTER:function y(i){return i>=12352&&i<=12447}(i)?f.HIRAGANA_LETTER:function b(i){return i>=65376&&i<=65439}(i)?f.HALFWIDTH_KATAKANA_LETTER:f.ALPHA_LETTER};const f={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};s.CharacterType=f},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFHistory=void 0,s.isDestArraysEqual=b,s.isDestHashesEqual=y;var a=f(7),l=f(19);function r(){return document.location.hash}function y(d,e){return"string"==typeof d&&"string"==typeof e&&(d===e||(0,a.parseQueryString)(d).get("nameddest")===e)}function b(d,e){function i(_,L){if(typeof _!=typeof L||Array.isArray(_)||Array.isArray(L))return!1;if(null!==_&&"object"==typeof _&&null!==L){if(Object.keys(_).length!==Object.keys(L).length)return!1;for(const F in _)if(!i(_[F],L[F]))return!1;return!0}return _===L||Number.isNaN(_)&&Number.isNaN(L)}if(!Array.isArray(d)||!Array.isArray(e)||d.length!==e.length)return!1;for(let _=0,L=d.length;_<L;_++)if(!i(d[_],e[_]))return!1;return!0}s.PDFHistory=class A{constructor({linkService:e,eventBus:i}){this.linkService=e,this.eventBus=i,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",_=>{this._isPagesLoaded=!!_.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:i=!1,updateUrl:_=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const L=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===_,this._initialized=!0,this._bindEvents();const F=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=r(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(F,!0)||i){const{hash:V,page:te,rotation:Z}=this._parseCurrentHash(!0);return!V||L||i?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:V,page:te,rotation:Z},!0)}const j=F.destination;this._updateInternalState(j,F.uid,!0),void 0!==j.rotation&&(this._initialRotation=j.rotation),j.dest?(this._initialBookmark=JSON.stringify(j.dest),this._destination.page=null):j.hash?this._initialBookmark=j.hash:j.page&&(this._initialBookmark=`page=${j.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:i,pageNumber:_}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(i))return void console.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);if(!this._isValidPage(_)&&(null!==_||this._destination))return void console.error(`PDFHistory.push: "${_}" is not a valid pageNumber parameter.`);const L=e||JSON.stringify(i);if(!L)return;let F=!1;if(this._destination&&(y(this._destination.hash,L)||b(this._destination.dest,i))){if(this._destination.page)return;F=!0}this._popStateInProgress&&!F||(this._pushOrReplaceState({dest:i,hash:L,page:_,rotation:this.linkService.rotation},F),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this._isValidPage(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,i=!1){const _=i||!this._destination,L={fingerprint:this._fingerprint,uid:_?this._uid:this._uid+1,destination:e};let F;if(this._updateInternalState(e,L.uid),this._updateUrl&&e?.hash){const j=document.location.href.split("#")[0];j.startsWith("file://")||(F=`${j}#${e.hash}`)}_?window.history.replaceState(L,"",F):window.history.pushState(L,"",F)}_tryPushCurrentPosition(e=!1){if(!this._position)return;let i=this._position;if(e&&(i=Object.assign(Object.create(null),this._position),i.temporary=!0),!this._destination)return void this._pushOrReplaceState(i);if(this._destination.temporary)return void this._pushOrReplaceState(i,!0);if(this._destination.hash===i.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let _=!1;if(this._destination.page>=i.first&&this._destination.page<=i.page){if(void 0!==this._destination.dest||!this._destination.first)return;_=!0}this._pushOrReplaceState(i,_)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,i=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!i)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[_]=performance.getEntriesByType("navigation");if("reload"!==_?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}_updateInternalState(e,i,_=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),_&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=i,this._maxUid=Math.max(this._maxUid,i),this._numPositionUpdates=0}_parseCurrentHash(e=!1){const i=unescape(r()).substring(1),_=(0,a.parseQueryString)(i),L=_.get("nameddest")||"";let F=0|_.get("page");return(!this._isValidPage(F)||e&&L.length>0)&&(F=null),{hash:i,page:F,rotation:this.linkService.rotation}}_updateViewarea({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:e}){const i=r(),_=this._currentHash!==i;if(this._currentHash=i,!e){this._uid++;const{hash:F,page:j,rotation:V}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:F,page:j,rotation:V},!0)}if(!this._isValidState(e))return;this._popStateInProgress=!0,_&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const L=e.destination;this._updateInternalState(L,e.uid,!0),(0,a.isValidRotation)(L.rotation)&&(this.linkService.rotation=L.rotation),L.dest?this.linkService.goToDestination(L.dest):L.hash?this.linkService.setHash(L.hash):L.page&&(this.linkService.page=L.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFScriptingManager=void 0;var a=f(7),l=f(3);s.PDFScriptingManager=class S{constructor({eventBus:o,sandboxBundleSrc:r=null,scriptingFactory:A=null,docPropertiesLookup:y=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=o,this._sandboxBundleSrc=r,this._scriptingFactory=A,this._docPropertiesLookup=y,this._scriptingFactory||window.addEventListener("updatefromsandbox",b=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:b.detail})})}setViewer(o){this._pdfViewer=o}setDocument(o){var r=this;return p(function*(){if(r._pdfDocument&&(yield r._destroyScripting()),r._pdfDocument=o,!o)return;const[A,y,b]=yield Promise.all([o.getFieldObjects(),o.getCalculationOrderIds(),o.getJSActions()]);if(A||b){if(o===r._pdfDocument){try{r._scripting=r._createScripting()}catch(d){return console.error(`PDFScriptingManager.setDocument: "${d?.message}".`),void(yield r._destroyScripting())}r._internalEvents.set("updatefromsandbox",d=>{d?.source===window&&r._updateFromSandbox(d.detail)}),r._internalEvents.set("dispatcheventinsandbox",d=>{r._scripting?.dispatchEventInSandbox(d.detail)}),r._internalEvents.set("pagechanging",({pageNumber:d,previous:e})=>{d!==e&&(r._dispatchPageClose(e),r._dispatchPageOpen(d))}),r._internalEvents.set("pagerendered",({pageNumber:d})=>{r._pageOpenPending.has(d)&&d===r._pdfViewer.currentPageNumber&&r._dispatchPageOpen(d)}),r._internalEvents.set("pagesdestroy",function(){var d=p(function*(e){yield r._dispatchPageClose(r._pdfViewer.currentPageNumber),yield r._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),r._closeCapability?.resolve()});return function(e){return d.apply(this,arguments)}}()),r._domEvents.set("mousedown",d=>{r._mouseState.isDown=!0}),r._domEvents.set("mouseup",d=>{r._mouseState.isDown=!1});for(const[d,e]of r._internalEvents)r._eventBus._on(d,e);for(const[d,e]of r._domEvents)window.addEventListener(d,e,!0);try{const d=yield r._getDocProperties();if(o!==r._pdfDocument)return;yield r._scripting.createSandbox({objects:A,calculationOrder:y,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...d,actions:b}}),r._eventBus.dispatch("sandboxcreated",{source:r})}catch(d){return console.error(`PDFScriptingManager.setDocument: "${d?.message}".`),void(yield r._destroyScripting())}yield r._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield r._dispatchPageOpen(r._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{o===r._pdfDocument&&(r._ready=!0)})}}else yield r._destroyScripting()})()}dispatchWillSave(o){var r=this;return p(function*(){return r._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(o){var r=this;return p(function*(){return r._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(o){var r=this;return p(function*(){return r._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(o){var r=this;return p(function*(){return r._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,l.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(o){var r=this;return p(function*(){const A=r._pdfViewer.isInPresentationMode||r._pdfViewer.isChangingPresentationMode,{id:y,siblings:b,command:d,value:e}=o;if(!y){switch(d){case"clear":console.clear();break;case"error":console.error(e);break;case"layout":if(A)return;const _=(0,a.apiPageLayoutToViewerModes)(e);r._pdfViewer.spreadMode=_.spreadMode;break;case"page-num":r._pdfViewer.currentPageNumber=e+1;break;case"print":yield r._pdfViewer.pagesPromise,r._eventBus.dispatch("print",{source:r});break;case"println":console.log(e);break;case"zoom":if(A)return;r._pdfViewer.currentScaleValue=e;break;case"SaveAs":r._eventBus.dispatch("download",{source:r});break;case"FirstPage":r._pdfViewer.currentPageNumber=1;break;case"LastPage":r._pdfViewer.currentPageNumber=r._pdfViewer.pagesCount;break;case"NextPage":r._pdfViewer.nextPage();break;case"PrevPage":r._pdfViewer.previousPage();break;case"ZoomViewIn":if(A)return;r._pdfViewer.increaseScale();break;case"ZoomViewOut":if(A)return;r._pdfViewer.decreaseScale()}return}if(A&&o.focus)return;delete o.id,delete o.siblings;const i=b?[y,...b]:[y];for(const _ of i){const L=document.querySelector(`[data-element-id="${_}"]`);L?L.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:o})):r._pdfDocument?.annotationStorage.setValue(_,o)}})()}_dispatchPageOpen(o,r=!1){var A=this;return p(function*(){const y=A._pdfDocument,b=A._visitedPages;if(r&&(A._closeCapability=(0,l.createPromiseCapability)()),!A._closeCapability)return;const d=A._pdfViewer.getPageView(o-1);if(d?.renderingState!==a.RenderingStates.FINISHED)return void A._pageOpenPending.add(o);A._pageOpenPending.delete(o);const e=p(function*(){const i=yield b.has(o)?null:d.pdfPage?.getJSActions();y===A._pdfDocument&&(yield A._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:o,actions:i}))})();b.set(o,e)})()}_dispatchPageClose(o){var r=this;return p(function*(){const A=r._pdfDocument,y=r._visitedPages;if(!r._closeCapability||r._pageOpenPending.has(o))return;const b=y.get(o);b&&(y.set(o,null),yield b,A===r._pdfDocument&&(yield r._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:o})))})()}_getDocProperties(){var o=this;return p(function*(){if(o._docPropertiesLookup)return o._docPropertiesLookup(o._pdfDocument);const{docPropertiesLookup:r}=f(26);return r(o._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,l.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:o}=f(26);return new o(this._sandboxBundleSrc)}_destroyScripting(){var o=this;return p(function*(){if(!o._scripting)return o._pdfDocument=null,void o._destroyCapability?.resolve();o._closeCapability&&(yield Promise.race([o._closeCapability.promise,new Promise(r=>{setTimeout(r,1e3)})]).catch(r=>{}),o._closeCapability=null),o._pdfDocument=null;try{yield o._scripting.destroySandbox()}catch{}for(const[r,A]of o._internalEvents)o._eventBus._off(r,A);o._internalEvents.clear();for(const[r,A]of o._domEvents)window.removeEventListener(r,A,!0);o._domEvents.clear(),o._pageOpenPending.clear(),o._visitedPages.clear(),o._scripting=null,delete o._mouseState.isDown,o._ready=!1,o._destroyCapability?.resolve()})()}}},(w,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericScripting=void 0,s.docPropertiesLookup=function l(o){return S.apply(this,arguments)};var a=f(3);function S(){return(S=p(function*(o){const A="".split("#")[0];let{info:y,metadata:b,contentDispositionFilename:d,contentLength:e}=yield o.getMetadata();if(!e){const{length:i}=yield o.getDownloadInfo();e=i}return{...y,baseURL:A,filesize:e,filename:d||(0,a.getPdfFilenameFromUrl)(""),metadata:b?.getRaw(),authors:b?.get("dc:creator"),numPages:o.numPages,URL:""}})).apply(this,arguments)}s.GenericScripting=class c{constructor(r){this._ready=(0,a.loadScript)(r,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(r){var A=this;return p(function*(){(yield A._ready).create(r)})()}dispatchEventInSandbox(r){var A=this;return p(function*(){const y=yield A._ready;setTimeout(()=>y.dispatchEvent(r),0)})()}destroySandbox(){var r=this;return p(function*(){(yield r._ready).nukeSandbox()})()}}}],k={};function U(w){var s=k[w];if(void 0!==s)return s.exports;var f=k[w]={exports:{}};return x[w](f,f.exports,U),f.exports}var q={};return(()=>{var w=q;Object.defineProperty(w,"__esModule",{value:!0}),Object.defineProperty(w,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return S.AnnotationLayerBuilder}}),Object.defineProperty(w,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return s.DefaultAnnotationLayerFactory}}),Object.defineProperty(w,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return s.DefaultStructTreeLayerFactory}}),Object.defineProperty(w,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return s.DefaultTextLayerFactory}}),Object.defineProperty(w,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return s.DefaultXfaLayerFactory}}),Object.defineProperty(w,"DownloadManager",{enumerable:!0,get:function(){return c.DownloadManager}}),Object.defineProperty(w,"EventBus",{enumerable:!0,get:function(){return o.EventBus}}),Object.defineProperty(w,"GenericL10n",{enumerable:!0,get:function(){return r.GenericL10n}}),Object.defineProperty(w,"LinkTarget",{enumerable:!0,get:function(){return f.LinkTarget}}),Object.defineProperty(w,"NullL10n",{enumerable:!0,get:function(){return A.NullL10n}}),Object.defineProperty(w,"PDFFindController",{enumerable:!0,get:function(){return y.PDFFindController}}),Object.defineProperty(w,"PDFHistory",{enumerable:!0,get:function(){return b.PDFHistory}}),Object.defineProperty(w,"PDFLinkService",{enumerable:!0,get:function(){return f.PDFLinkService}}),Object.defineProperty(w,"PDFPageView",{enumerable:!0,get:function(){return d.PDFPageView}}),Object.defineProperty(w,"PDFScriptingManager",{enumerable:!0,get:function(){return e.PDFScriptingManager}}),Object.defineProperty(w,"PDFSinglePageViewer",{enumerable:!0,get:function(){return l.PDFSinglePageViewer}}),Object.defineProperty(w,"PDFViewer",{enumerable:!0,get:function(){return l.PDFViewer}}),Object.defineProperty(w,"ProgressBar",{enumerable:!0,get:function(){return a.ProgressBar}}),Object.defineProperty(w,"RenderingStates",{enumerable:!0,get:function(){return a.RenderingStates}}),Object.defineProperty(w,"ScrollMode",{enumerable:!0,get:function(){return a.ScrollMode}}),Object.defineProperty(w,"SimpleLinkService",{enumerable:!0,get:function(){return f.SimpleLinkService}}),Object.defineProperty(w,"SpreadMode",{enumerable:!0,get:function(){return a.SpreadMode}}),Object.defineProperty(w,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return i.StructTreeLayerBuilder}}),Object.defineProperty(w,"TextLayerBuilder",{enumerable:!0,get:function(){return _.TextLayerBuilder}}),Object.defineProperty(w,"XfaLayerBuilder",{enumerable:!0,get:function(){return L.XfaLayerBuilder}}),Object.defineProperty(w,"parseQueryString",{enumerable:!0,get:function(){return a.parseQueryString}});var s=U(1),f=U(6),a=U(7),l=U(11),S=U(5),c=U(18),o=U(19),r=U(20),A=U(4),y=U(22),b=U(24),d=U(13),e=U(25),i=U(8),_=U(9),L=U(10)})(),q})()},4069:()=>{},2339:()=>{},143:()=>{},7915:()=>{},5598:()=>{},372:()=>{},7156:se=>{function u(p,x,k,U,q,w,s){try{var f=p[w](s),a=f.value}catch(l){return void k(l)}f.done?x(a):Promise.resolve(a).then(U,q)}se.exports=function N(p){return function(){var x=this,k=arguments;return new Promise(function(U,q){var w=p.apply(x,k);function s(a){u(w,U,q,s,f,"next",a)}function f(a){u(w,U,q,s,f,"throw",a)}s(void 0)})}},se.exports.__esModule=!0,se.exports.default=se.exports}}]);