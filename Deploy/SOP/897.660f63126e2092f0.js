(self.webpackChunkorp_front=self.webpackChunkorp_front||[]).push([[897],{897:(ee,u,V)=>{"use strict";V.r(u),V.d(u,{ScreensModule:()=>g});var p=V(6814),x=V(4828),D=V(5879),j=V(9862);let H=(()=>{class m{constructor(E,O){this.http=E,this.router=O,this.API_URL="http://192.168.0.158:4000"}getScreenDetails(){return this.http.get(`${this.API_URL}/getAllScreens`)}getScreenDisplay(E){return this.http.get(`${this.API_URL}/getSOPDataByScreenId/${E}`)}static#e=this.\u0275fac=function(O){return new(O||m)(D.LFG(j.eN),D.LFG(x.F0))};static#t=this.\u0275prov=D.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})();var T=V(2939),s=V(2296),f=V(5195);function r(m,k){if(1&m){const E=D.EpF();D.TgZ(0,"div",6)(1,"div",7)(2,"div",8),D._UZ(3,"img",9),D.TgZ(4,"button",10),D.NdJ("click",function(){const z=D.CHM(E).$implicit,G=D.oxw();return D.KtG(G.navigateToScreen(z.ScreenID))}),D._uU(5),D.qZA()()()()}if(2&m){const E=k.$implicit;D.xp6(5),D.Oqu(E.ScreenName)}}let l=(()=>{class m{constructor(E,O,B){this.dashService=E,this.router=O,this.snackBar=B,this.ScreenOptions=[]}ngOnInit(){this.ScreenList()}ScreenList(){this.dashService.getScreenDetails().subscribe(E=>{this.ScreenOptions=E.getSOPData},E=>{this.snackBar.open("Error occurred while fetching screen details","Dismiss",{duration:3e3})})}navigateToScreen(E){E?this.router.navigate(["/screens/display",E]):console.error("Screen ID is undefined")}static#e=this.\u0275fac=function(O){return new(O||m)(D.Y36(H),D.Y36(x.F0),D.Y36(T.ux))};static#t=this.\u0275cmp=D.Xpm({type:m,selectors:[["app-screen-overview"]],decls:7,vars:1,consts:[[1,"content"],[1,"container-fluid"],[1,"row","py-2","mt-4","m-1"],[1,"main-card"],[1,"row","mt-3"],["class","col-md-3 col-sm-12 mb-2",4,"ngFor","ngForOf"],[1,"col-md-3","col-sm-12","mb-2"],[1,"card","sub-card"],[1,"card-body","d-flex","flex-column","align-items-center","justify-content-center"],["src","../../../assets/img/Computer-Screen-Transparent.png","alt","Logo",1,"mb-3",2,"height","100px"],["mat-raised-button","",2,"background-color","#000","color","white","border-radius","10px",3,"click"]],template:function(O,B){1&O&&(D.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"mat-card",3)(4,"mat-card-content")(5,"div",4),D.YNc(6,r,6,1,"div",5),D.qZA()()()()()()),2&O&&(D.xp6(6),D.Q6J("ngForOf",B.ScreenOptions))},dependencies:[p.sg,s.lW,f.a8,f.dn],styles:[".cover-card[_ngcontent-%COMP%]{border-radius:16px}.main-card[_ngcontent-%COMP%]{background:#f1f1f1;border-radius:16px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}.sub-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:16px}.sub-card[_ngcontent-%COMP%]:hover{border:1px solid #000;border-radius:16px;box-shadow:#00000040 0 14px 28px,#00000038 0 10px 10px}"]})}return m})();var P=V(2096),c=V(4664),o=V(6593);function a(m,k){if(1&m&&D._UZ(0,"img",9),2&m){const E=D.oxw(2);D.Q6J("src",E.getImageSource(),D.LSH)}}function S(m,k){if(1&m&&(D.TgZ(0,"div"),D._UZ(1,"iframe",10),D.qZA()),2&m){const E=D.oxw(2);D.xp6(1),D.Q6J("src",E.getSafeUrl(E.getImageSource()),D.uOi)}}function v(m,k){if(1&m&&D._UZ(0,"iframe",11),2&m){const E=D.oxw(2);D.Q6J("src",E.getImageSource(),D.uOi)}}function y(m,k){if(1&m&&D._UZ(0,"video",12),2&m){const E=D.oxw(2);D.Q6J("src",E.getImageSource(),D.LSH)}}function d(m,k){if(1&m&&(D.TgZ(0,"div",3)(1,"div",4),D.YNc(2,a,1,1,"img",5),D.YNc(3,S,2,1,"div",6),D.YNc(4,v,1,1,"iframe",7),D.YNc(5,y,1,1,"video",8),D.qZA()()),2&m){const E=D.oxw();D.xp6(1),D.Q6J("ngSwitch",!0),D.xp6(1),D.Q6J("ngSwitchCase",E.isImageType()),D.xp6(1),D.Q6J("ngSwitchCase",E.isPdfType()),D.xp6(1),D.Q6J("ngSwitchCase",E.isPptType()),D.xp6(1),D.Q6J("ngSwitchCase",E.isVideoType())}}function e(m,k){1&m&&(D.TgZ(0,"div",13),D._uU(1,"No data found. Contact Administrator."),D.qZA())}const R=[{path:"screens",component:l},{path:"display/:screenId",canActivate:[(()=>{class m{constructor(E){this.router=E}canActivate(E,O){return!!/^\d+$/.test(E.params.screenId)||(console.log("Invalid parameter. Redirecting to another page."),this.router.navigate(["/screen"]),!1)}static#e=this.\u0275fac=function(O){return new(O||m)(D.LFG(x.F0))};static#t=this.\u0275prov=D.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"})}return m})()],component:(()=>{class m{constructor(E,O,B){this.route=E,this.screenService=O,this.sanitizer=B,this.imageDataList=[],this.currentImageDataIndex=0,this.pdfSrc="../../assets/report_data.pdf"}ngOnInit(){this.route.paramMap.pipe((0,c.w)(E=>{const O=E.get("screenId");return O?this.screenService.getScreenDisplay(O):(0,P.of)(null)})).subscribe(E=>{E&&E.data&&E.data.length>0&&(this.imageDataList=E.data,this.showFullScreenImage())},E=>{console.error(E)})}getSafeUrl(E){return this.sanitizer.bypassSecurityTrustResourceUrl(E)}showFullScreenImage(){const E=this.imageDataList[this.currentImageDataIndex];this.currentImageDataIndex=(this.currentImageDataIndex+1)%this.imageDataList.length,setTimeout(()=>{this.showFullScreenImage()},1e3*E.Duration)}getImageSource(){const E=this.imageDataList[this.currentImageDataIndex],O=E.Base64File.mimeType;switch(O){case"image/jpeg":case"image/png":case"image/gif":case"application/pdf":case"video/mp4":case"video/webm":case"video/ogg":return`data:${O};base64,${E.Base64File.data}`;case"application/vnd.ms-powerpoint":case"application/vnd.openxmlformats-officedocument.presentationml.presentation":return`data:application/pdf;base64,${E.Base64File.data}`;default:return console.error("Unsupported content type:",O),""}}isImageType(){return["image/jpeg","image/png","image/gif"].includes(this.imageDataList[this.currentImageDataIndex].Base64File.mimeType)}isPdfType(){return"application/pdf"===this.imageDataList[this.currentImageDataIndex].Base64File.mimeType}isPptType(){const O=this.imageDataList[this.currentImageDataIndex].Base64File.mimeType;return"application/vnd.ms-powerpoint"===O||"application/vnd.openxmlformats-officedocument.presentationml.presentation"===O}isVideoType(){return["video/mp4","video/webm","video/ogg"].includes(this.imageDataList[this.currentImageDataIndex].Base64File.mimeType)}static#e=this.\u0275fac=function(O){return new(O||m)(D.Y36(x.gz),D.Y36(H),D.Y36(o.H7))};static#t=this.\u0275cmp=D.Xpm({type:m,selectors:[["app-display-screen"]],decls:4,vars:2,consts:[[1,"content","display"],["class","image-container",4,"ngIf","ngIfElse"],["noData",""],[1,"image-container"],[1,"full-screen",3,"ngSwitch"],["alt","Full Screen Image","class","img-fluid",3,"src",4,"ngSwitchCase"],[4,"ngSwitchCase"],["class","full-screen-ppt",3,"src",4,"ngSwitchCase"],["controls","","autoplay","","loop","","class","full-screen-video",3,"src",4,"ngSwitchCase"],["alt","Full Screen Image",1,"img-fluid",3,"src"],["width","100%","height","500px","frameborder","0",3,"src"],[1,"full-screen-ppt",3,"src"],["controls","","autoplay","","loop","",1,"full-screen-video",3,"src"],[1,"no-data-message"]],template:function(O,B){if(1&O&&(D.TgZ(0,"div",0),D.YNc(1,d,6,5,"div",1),D.YNc(2,e,2,0,"ng-template",null,2,D.W1O),D.qZA()),2&O){const z=D.MAs(3);D.xp6(1),D.Q6J("ngIf",B.imageDataList.length>0)("ngIfElse",z)}},dependencies:[p.O5,p.RF,p.n9],styles:[".display[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}.image-container[_ngcontent-%COMP%]{flex:1;display:flex;justify-content:center;align-items:center}.img-fluid[_ngcontent-%COMP%]{object-fit:cover;max-width:100%;max-height:80vh}.no-data-message[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:80vh;font-size:1.5rem;font-weight:550}"]})}return m})()},{path:"",redirectTo:"screens",pathMatch:"full"}];let I=(()=>{class m{static#e=this.\u0275fac=function(O){return new(O||m)};static#t=this.\u0275mod=D.oAB({type:m});static#n=this.\u0275inj=D.cJS({imports:[x.Bz.forChild(R),x.Bz]})}return m})();var W=V(617),U=V(1274),J=V(4104),K=V(3821),C=V(7668),F=V.t(C,2);V(8365),function h(){return typeof window>"u"}()||function n(m,k,E){m[k]=E}(F,"verbosity",C.VerbosityLevel.INFOS);let t=(()=>{class m{static \u0275fac=function(O){return new(O||m)};static \u0275mod=D.oAB({type:m});static \u0275inj=D.cJS({})}return m})(),g=(()=>{class m{static#e=this.\u0275fac=function(O){return new(O||m)};static#t=this.\u0275mod=D.oAB({type:m});static#n=this.\u0275inj=D.cJS({imports:[p.ez,I,W.Ps,U.g0,p.ez,K.I,s.ot,f.QW,J.Nh,t,T.ZX]})}return m})()},7668:(module,__unused_webpack_exports,__webpack_require__)=>{var _asyncToGenerator=__webpack_require__(7156).default,V;globalThis,V=()=>(()=>{"use strict";var __webpack_modules__=[,(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.VerbosityLevel=u.Util=u.UnknownErrorException=u.UnexpectedResponseException=u.UNSUPPORTED_FEATURES=u.TextRenderingMode=u.StreamType=u.RenderingIntentFlag=u.PermissionFlag=u.PasswordResponses=u.PasswordException=u.PageActionEventType=u.OPS=u.MissingPDFException=u.LINE_FACTOR=u.LINE_DESCENT_FACTOR=u.InvalidPDFException=u.ImageKind=u.IDENTITY_MATRIX=u.FormatError=u.FontType=u.FeatureTest=u.FONT_IDENTITY_MATRIX=u.DocumentActionEventType=u.CMapCompressionType=u.BaseException=u.AnnotationType=u.AnnotationStateModelType=u.AnnotationReviewState=u.AnnotationReplyType=u.AnnotationMode=u.AnnotationMarkedState=u.AnnotationFlag=u.AnnotationFieldFlag=u.AnnotationEditorType=u.AnnotationEditorPrefix=u.AnnotationEditorParamsType=u.AnnotationBorderStyleType=u.AnnotationActionEventType=u.AbortException=void 0,u.arrayByteLength=re,u.arraysToBytes=function q(ie){const $=ie.length;if(1===$&&ie[0]instanceof Uint8Array)return ie[0];let Y=0;for(let ge=0;ge<$;ge++)Y+=re(ie[ge]);let oe=0;const de=new Uint8Array(Y);for(let ge=0;ge<$;ge++){let pe=ie[ge];pe instanceof Uint8Array||(pe="string"==typeof pe?ne(pe):new Uint8Array(pe));const xe=pe.byteLength;de.set(pe,oe),oe+=xe}return de},u.assert=function A(ie,$){ie||w($)},u.bytesToString=function se(ie){("object"!=typeof ie||null===ie||void 0===ie.length)&&w("Invalid argument for bytesToString");const $=ie.length,Y=8192;if($<Y)return String.fromCharCode.apply(null,ie);const oe=[];for(let de=0;de<$;de+=Y){const ge=Math.min(de+Y,$),pe=ie.subarray(de,ge);oe.push(String.fromCharCode.apply(null,pe))}return oe.join("")},u.createPromiseCapability=function Ae(){const ie=Object.create(null);let $=!1;return Object.defineProperty(ie,"settled",{get:()=>$}),ie.promise=new Promise(function(Y,oe){ie.resolve=function(de){$=!0,Y(de)},ie.reject=function(de){$=!0,oe(de)}}),ie},u.createValidAbsoluteUrl=function g(ie,$=null,Y=null){if(!ie)return null;try{if(Y&&"string"==typeof ie){if(Y.addDefaultProtocol&&ie.startsWith("www.")){const de=ie.match(/\./g);de&&de.length>=2&&(ie=`http://${ie}`)}if(Y.tryConvertEncoding)try{ie=we(ie)}catch{}}const oe=$?new URL(ie,$):new URL(ie);if(function t(ie){if(!ie)return!1;switch(ie.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(oe))return oe}catch{}return null},u.escapeString=function Pe(ie){return ie.replace(/([()\\\n\r])/g,$=>"\n"===$?"\\n":"\r"===$?"\\r":`\\${$}`)},u.getModificationDate=function Ce(ie=new Date){return[ie.getUTCFullYear().toString(),(ie.getUTCMonth()+1).toString().padStart(2,"0"),ie.getUTCDate().toString().padStart(2,"0"),ie.getUTCHours().toString().padStart(2,"0"),ie.getUTCMinutes().toString().padStart(2,"0"),ie.getUTCSeconds().toString().padStart(2,"0")].join("")},u.getVerbosityLevel=function _(){return L},u.info=function n(ie){L>=J.INFOS&&console.log(`Info: ${ie}`)},u.isArrayBuffer=function Be(ie){return"object"==typeof ie&&null!==ie&&void 0!==ie.byteLength},u.isArrayEqual=function Ve(ie,$){if(ie.length!==$.length)return!1;for(let Y=0,oe=ie.length;Y<oe;Y++)if(ie[Y]!==$[Y])return!1;return!0},u.isAscii=function ye(ie){return/^[\x00-\x7F]*$/.test(ie)},u.objectFromMap=function Z(ie){const $=Object.create(null);for(const[Y,oe]of ie)$[Y]=oe;return $},u.objectSize=function ae(ie){return Object.keys(ie).length},u.setVerbosityLevel=function M(ie){Number.isInteger(ie)&&(L=ie)},u.shadow=m,u.string32=function te(ie){return String.fromCharCode(ie>>24&255,ie>>16&255,ie>>8&255,255&ie)},u.stringToBytes=ne,u.stringToPDFString=function _e(ie){if(ie[0]>="\xef"){let Y;if("\xfe"===ie[0]&&"\xff"===ie[1]?Y="utf-16be":"\xff"===ie[0]&&"\xfe"===ie[1]?Y="utf-16le":"\xef"===ie[0]&&"\xbb"===ie[1]&&"\xbf"===ie[2]&&(Y="utf-8"),Y)try{const oe=new TextDecoder(Y,{fatal:!0}),de=ne(ie);return oe.decode(de)}catch(oe){h(`stringToPDFString: "${oe}".`)}}const $=[];for(let Y=0,oe=ie.length;Y<oe;Y++){const de=me[ie.charCodeAt(Y)];$.push(de?String.fromCharCode(de):ie.charAt(Y))}return $.join("")},u.stringToUTF16BEString=function be(ie){const $=["\xfe\xff"];for(let Y=0,oe=ie.length;Y<oe;Y++){const de=ie.charCodeAt(Y);$.push(String.fromCharCode(de>>8&255),String.fromCharCode(255&de))}return $.join("")},u.stringToUTF8String=we,u.unreachable=w,u.utf8StringToString=function Re(ie){return unescape(encodeURIComponent(ie))},u.warn=h,V(2),u.IDENTITY_MATRIX=[1,0,0,1,0,0],u.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],u.LINE_FACTOR=1.35,u.LINE_DESCENT_FACTOR=.35,u.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},u.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},u.AnnotationEditorPrefix="pdfjs_internal_editor_",u.AnnotationEditorType={DISABLE:-1,NONE:0,FREETEXT:3,INK:15},u.AnnotationEditorParamsType={FREETEXT_SIZE:1,FREETEXT_COLOR:2,FREETEXT_OPACITY:3,INK_COLOR:11,INK_THICKNESS:12,INK_OPACITY:13},u.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},u.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},u.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},u.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},u.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},u.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},u.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},u.AnnotationReplyType={GROUP:"Group",REPLY:"R"},u.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},u.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},u.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},u.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},u.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},u.PageActionEventType={O:"PageOpen",C:"PageClose"},u.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},u.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const J={ERRORS:0,WARNINGS:1,INFOS:5};u.VerbosityLevel=J,u.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},u.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},u.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},u.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let L=J.WARNINGS;function h(ie){L>=J.WARNINGS&&console.log(`Warning: ${ie}`)}function w(ie){throw new Error(ie)}function m(ie,$,Y){return Object.defineProperty(ie,$,{value:Y,enumerable:!0,configurable:!0,writable:!1}),Y}const k=function(){function $(Y,oe){this.constructor===$&&w("Cannot initialize BaseException."),this.message=Y,this.name=oe}return $.prototype=new Error,$.constructor=$,$}();function ne(ie){"string"!=typeof ie&&w("Invalid argument for stringToBytes");const $=ie.length,Y=new Uint8Array($);for(let oe=0;oe<$;++oe)Y[oe]=255&ie.charCodeAt(oe);return Y}function re(ie){return void 0!==ie.length?ie.length:void 0!==ie.byteLength?ie.byteLength:void w("Invalid argument for arrayByteLength")}u.BaseException=k,u.PasswordException=class E extends k{constructor($,Y){super($,"PasswordException"),this.code=Y}},u.UnknownErrorException=class O extends k{constructor($,Y){super($,"UnknownErrorException"),this.details=Y}},u.InvalidPDFException=class B extends k{constructor($){super($,"InvalidPDFException")}},u.MissingPDFException=class z extends k{constructor($){super($,"MissingPDFException")}},u.UnexpectedResponseException=class G extends k{constructor($,Y){super($,"UnexpectedResponseException"),this.status=Y}},u.FormatError=class X extends k{constructor($){super($,"FormatError")}},u.AbortException=class Q extends k{constructor($){super($,"AbortException")}},u.FeatureTest=class le{static get isLittleEndian(){return m(this,"isLittleEndian",function ce(){const ie=new Uint8Array(4);return ie[0]=1,1===new Uint32Array(ie.buffer,0,1)[0]}())}static get isEvalSupported(){return m(this,"isEvalSupported",function he(){try{return new Function(""),!0}catch{return!1}}())}static get isOffscreenCanvasSupported(){return m(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}};const ue=[...Array(256).keys()].map(ie=>ie.toString(16).padStart(2,"0"));class fe{static makeHexColor($,Y,oe){return`#${ue[$]}${ue[Y]}${ue[oe]}`}static scaleMinMax($,Y){let oe;$[0]?($[0]<0&&(oe=Y[0],Y[0]=Y[1],Y[1]=oe),Y[0]*=$[0],Y[1]*=$[0],$[3]<0&&(oe=Y[2],Y[2]=Y[3],Y[3]=oe),Y[2]*=$[3],Y[3]*=$[3]):(oe=Y[0],Y[0]=Y[2],Y[2]=oe,oe=Y[1],Y[1]=Y[3],Y[3]=oe,$[1]<0&&(oe=Y[2],Y[2]=Y[3],Y[3]=oe),Y[2]*=$[1],Y[3]*=$[1],$[2]<0&&(oe=Y[0],Y[0]=Y[1],Y[1]=oe),Y[0]*=$[2],Y[1]*=$[2]),Y[0]+=$[4],Y[1]+=$[4],Y[2]+=$[5],Y[3]+=$[5]}static transform($,Y){return[$[0]*Y[0]+$[2]*Y[1],$[1]*Y[0]+$[3]*Y[1],$[0]*Y[2]+$[2]*Y[3],$[1]*Y[2]+$[3]*Y[3],$[0]*Y[4]+$[2]*Y[5]+$[4],$[1]*Y[4]+$[3]*Y[5]+$[5]]}static applyTransform($,Y){return[$[0]*Y[0]+$[1]*Y[2]+Y[4],$[0]*Y[1]+$[1]*Y[3]+Y[5]]}static applyInverseTransform($,Y){const oe=Y[0]*Y[3]-Y[1]*Y[2];return[($[0]*Y[3]-$[1]*Y[2]+Y[2]*Y[5]-Y[4]*Y[3])/oe,(-$[0]*Y[1]+$[1]*Y[0]+Y[4]*Y[1]-Y[5]*Y[0])/oe]}static getAxialAlignedBoundingBox($,Y){const oe=fe.applyTransform($,Y),de=fe.applyTransform($.slice(2,4),Y),ge=fe.applyTransform([$[0],$[3]],Y),pe=fe.applyTransform([$[2],$[1]],Y);return[Math.min(oe[0],de[0],ge[0],pe[0]),Math.min(oe[1],de[1],ge[1],pe[1]),Math.max(oe[0],de[0],ge[0],pe[0]),Math.max(oe[1],de[1],ge[1],pe[1])]}static inverseTransform($){const Y=$[0]*$[3]-$[1]*$[2];return[$[3]/Y,-$[1]/Y,-$[2]/Y,$[0]/Y,($[2]*$[5]-$[4]*$[3])/Y,($[4]*$[1]-$[5]*$[0])/Y]}static apply3dTransform($,Y){return[$[0]*Y[0]+$[1]*Y[1]+$[2]*Y[2],$[3]*Y[0]+$[4]*Y[1]+$[5]*Y[2],$[6]*Y[0]+$[7]*Y[1]+$[8]*Y[2]]}static singularValueDecompose2dScale($){const Y=[$[0],$[2],$[1],$[3]],oe=$[0]*Y[0]+$[1]*Y[2],pe=$[2]*Y[1]+$[3]*Y[3],xe=(oe+pe)/2,Me=Math.sqrt((oe+pe)**2-4*(oe*pe-($[2]*Y[0]+$[3]*Y[2])*($[0]*Y[1]+$[1]*Y[3])))/2,Se=xe-Me||1;return[Math.sqrt(xe+Me||1),Math.sqrt(Se)]}static normalizeRect($){const Y=$.slice(0);return $[0]>$[2]&&(Y[0]=$[2],Y[2]=$[0]),$[1]>$[3]&&(Y[1]=$[3],Y[3]=$[1]),Y}static intersect($,Y){const oe=Math.max(Math.min($[0],$[2]),Math.min(Y[0],Y[2])),de=Math.min(Math.max($[0],$[2]),Math.max(Y[0],Y[2]));if(oe>de)return null;const ge=Math.max(Math.min($[1],$[3]),Math.min(Y[1],Y[3])),pe=Math.min(Math.max($[1],$[3]),Math.max(Y[1],Y[3]));return ge>pe?null:[oe,ge,de,pe]}static bezierBoundingBox($,Y,oe,de,ge,pe,xe,Me){const Te=[],Se=[[],[]];let Le,ke,Ie,ve,De,Ne,Ue,je;for(let We=0;We<2;++We)if(0===We?(ke=6*$-12*oe+6*ge,Le=-3*$+9*oe-9*ge+3*xe,Ie=3*oe-3*$):(ke=6*Y-12*de+6*pe,Le=-3*Y+9*de-9*pe+3*Me,Ie=3*de-3*Y),Math.abs(Le)<1e-12){if(Math.abs(ke)<1e-12)continue;ve=-Ie/ke,0<ve&&ve<1&&Te.push(ve)}else Ue=ke*ke-4*Ie*Le,je=Math.sqrt(Ue),!(Ue<0)&&(De=(-ke+je)/(2*Le),0<De&&De<1&&Te.push(De),Ne=(-ke-je)/(2*Le),0<Ne&&Ne<1&&Te.push(Ne));let Ee,Oe=Te.length;const Fe=Oe;for(;Oe--;)ve=Te[Oe],Ee=1-ve,Se[0][Oe]=Ee*Ee*Ee*$+3*Ee*Ee*ve*oe+3*Ee*ve*ve*ge+ve*ve*ve*xe,Se[1][Oe]=Ee*Ee*Ee*Y+3*Ee*Ee*ve*de+3*Ee*ve*ve*pe+ve*ve*ve*Me;return Se[0][Fe]=$,Se[1][Fe]=Y,Se[0][Fe+1]=xe,Se[1][Fe+1]=Me,Se[0].length=Se[1].length=Fe+2,[Math.min(...Se[0]),Math.min(...Se[1]),Math.max(...Se[0]),Math.max(...Se[1])]}}u.Util=fe;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function we(ie){return decodeURIComponent(escape(ie))}},(ee,u,V)=>{V(3)},(ee,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isNodeJS=void 0;const V=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);u.isNodeJS=V},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(5),_display_utils=__w_pdfjs_require__(8),_font_loader=__w_pdfjs_require__(11),_canvas=__w_pdfjs_require__(12),_worker_options=__w_pdfjs_require__(15),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(16),_metadata=__w_pdfjs_require__(17),_optional_content_config=__w_pdfjs_require__(18),_transport_stream=__w_pdfjs_require__(19),_xfa_text=__w_pdfjs_require__(20);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:ee,NodeCMapReaderFactory:u,NodeStandardFontDataFactory:V}=__w_pdfjs_require__(21);exports.DefaultCanvasFactory=DefaultCanvasFactory=ee,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=u,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=V}function setPDFNetworkStreamFactory(ee){createPDFNetworkStream=ee}function getDocument(ee){const u=new PDFDocumentLoadingTask;let V;if("string"==typeof ee||ee instanceof URL)V={url:ee};else if((0,_util.isArrayBuffer)(ee))V={data:ee};else if(ee instanceof PDFDataRangeTransport)V={range:ee};else{if("object"!=typeof ee)throw new Error("Invalid parameter in getDocument, need either string, URL, TypedArray, or parameter object.");if(!ee.url&&!ee.data&&!ee.range)throw new Error("Invalid parameter object: need either .data, .range or .url");V=ee}const p=Object.create(null);let x=null,D=null;for(const H in V){const T=V[H];switch(H){case"url":if(typeof window<"u")try{p[H]=new URL(T,window.location).href;continue}catch(s){(0,_util.warn)(`Cannot create valid URL: "${s}".`)}else if("string"==typeof T||T instanceof URL){p[H]=T.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":x=T;continue;case"worker":D=T;continue;case"data":if(_is_node.isNodeJS&&typeof Buffer<"u"&&T instanceof Buffer)p[H]=new Uint8Array(T);else{if(T instanceof Uint8Array)break;if("string"==typeof T)p[H]=(0,_util.stringToBytes)(T);else if("object"!=typeof T||null===T||isNaN(T.length)){if(!(0,_util.isArrayBuffer)(T))throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.");p[H]=new Uint8Array(T)}else p[H]=new Uint8Array(T)}continue}p[H]=T}if(p.CMapReaderFactory=p.CMapReaderFactory||DefaultCMapReaderFactory,p.StandardFontDataFactory=p.StandardFontDataFactory||DefaultStandardFontDataFactory,p.ignoreErrors=!0!==p.stopAtErrors,p.fontExtraProperties=!0===p.fontExtraProperties,p.pdfBug=!0===p.pdfBug,p.enableXfa=!0===p.enableXfa,(!Number.isInteger(p.rangeChunkSize)||p.rangeChunkSize<1)&&(p.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof p.docBaseUrl||(0,_display_utils.isDataScheme)(p.docBaseUrl))&&(p.docBaseUrl=null),(!Number.isInteger(p.maxImageSize)||p.maxImageSize<-1)&&(p.maxImageSize=-1),"string"!=typeof p.cMapUrl&&(p.cMapUrl=null),"string"!=typeof p.standardFontDataUrl&&(p.standardFontDataUrl=null),"boolean"!=typeof p.useWorkerFetch&&(p.useWorkerFetch=p.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&p.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof p.isEvalSupported&&(p.isEvalSupported=!0),"boolean"!=typeof p.disableFontFace&&(p.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof p.useSystemFonts&&(p.useSystemFonts=!_is_node.isNodeJS&&!p.disableFontFace),("object"!=typeof p.ownerDocument||null===p.ownerDocument)&&(p.ownerDocument=globalThis.document),"boolean"!=typeof p.disableRange&&(p.disableRange=!1),"boolean"!=typeof p.disableStream&&(p.disableStream=!1),"boolean"!=typeof p.disableAutoFetch&&(p.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(p.verbosity),!D){const H={verbosity:p.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};D=H.port?PDFWorker.fromPort(H):new PDFWorker(H),u._worker=D}const j=u.docId;return D.promise.then(function(){if(u.destroyed)throw new Error("Loading aborted");const H=_fetchDocument(D,p,x,j),T=new Promise(function(s){let f;x?f=new _transport_stream.PDFDataTransportStream({length:p.length,initialData:p.initialData,progressiveDone:p.progressiveDone,contentDispositionFilename:p.contentDispositionFilename,disableRange:p.disableRange,disableStream:p.disableStream},x):p.data||(f=createPDFNetworkStream({url:p.url,length:p.length,httpHeaders:p.httpHeaders,withCredentials:p.withCredentials,rangeChunkSize:p.rangeChunkSize,disableRange:p.disableRange,disableStream:p.disableStream})),s(f)});return Promise.all([H,T]).then(function([s,f]){if(u.destroyed)throw new Error("Loading aborted");const r=new _message_handler.MessageHandler(j,s,D.port),l=new WorkerTransport(r,u,f,p);u._transport=l,r.send("Ready",null)})}).catch(u._capability.reject),u}function _fetchDocument(ee,u,V,p){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(ee,u,V,p){if(ee.destroyed)throw new Error("Worker was destroyed");V&&(u.length=V.length,u.initialData=V.initialData,u.progressiveDone=V.progressiveDone,u.contentDispositionFilename=V.contentDispositionFilename);const x=yield ee.messageHandler.sendWithPromise("GetDocRequest",{docId:p,apiVersion:"2.16.105",source:{data:u.data,url:u.url,password:u.password,disableAutoFetch:u.disableAutoFetch,rangeChunkSize:u.rangeChunkSize,length:u.length},maxImageSize:u.maxImageSize,disableFontFace:u.disableFontFace,docBaseUrl:u.docBaseUrl,ignoreErrors:u.ignoreErrors,isEvalSupported:u.isEvalSupported,fontExtraProperties:u.fontExtraProperties,enableXfa:u.enableXfa,useSystemFonts:u.useSystemFonts,cMapUrl:u.useWorkerFetch?u.cMapUrl:null,standardFontDataUrl:u.useWorkerFetch?u.standardFontDataUrl:null});if(u.data&&(u.data=null),ee.destroyed)throw new Error("Worker was destroyed");return x})).apply(this,arguments)}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+PDFDocumentLoadingTask.#e++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var u=this;return _asyncToGenerator(function*(){u.destroyed=!0,yield u._transport?.destroy(),u._transport=null,u._worker&&(u._worker.destroy(),u._worker=null)})()}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(u,V,p=!1,x=null){this.length=u,this.initialData=V,this.progressiveDone=p,this.contentDispositionFilename=x,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(u){this._rangeListeners.push(u)}addProgressListener(u){this._progressListeners.push(u)}addProgressiveReadListener(u){this._progressiveReadListeners.push(u)}addProgressiveDoneListener(u){this._progressiveDoneListeners.push(u)}onDataRange(u,V){for(const p of this._rangeListeners)p(u,V)}onDataProgress(u,V){this._readyCapability.promise.then(()=>{for(const p of this._progressListeners)p(u,V)})}onDataProgressiveRead(u){this._readyCapability.promise.then(()=>{for(const V of this._progressiveReadListeners)V(u)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const u of this._progressiveDoneListeners)u()})}transportReady(){this._readyCapability.resolve()}requestDataRange(u,V){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(u,V){var x,p=this;this._pdfInfo=u,this._transport=V,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(x=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),p.stats||{streamTypes:{},fontTypes:{}}}),function(){return x.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(u){return this._transport.getPage(u)}getPageIndex(u){return this._transport.getPageIndex(u)}getDestinations(){return this._transport.getDestinations()}getDestination(u){return this._transport.getDestination(u)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(u=!1){return this._transport.startCleanup(u||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(u,V,p,x,D=!1){this._pageIndex=u,this._pageInfo=V,this._ownerDocument=x,this._transport=p,this._stats=D?new _display_utils.StatTimer:null,this._pdfBug=D,this.commonObjs=p.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:u,rotation:V=this.rotate,offsetX:p=0,offsetY:x=0,dontFlip:D=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:u,rotation:V,offsetX:p,offsetY:x,dontFlip:D})}getAnnotations({intent:u="display"}={}){const V=this._transport.getRenderingIntent(u);let p=this._annotationPromises.get(V.cacheKey);return p||(p=this._transport.getAnnotations(this._pageIndex,V.renderingIntent),this._annotationPromises.set(V.cacheKey,p),p=p.then(x=>{for(const D of x)void 0!==D.titleObj&&Object.defineProperty(D,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),D.titleObj.str)}),void 0!==D.contentsObj&&Object.defineProperty(D,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),D.contentsObj.str)});return x})),p}getJSActions(){return this._jsActionsPromise||=this._transport.getPageJSActions(this._pageIndex)}getXfa(){var u=this;return _asyncToGenerator(function*(){return u._transport._htmlForXfa?.children[u._pageIndex]||null})()}render({canvasContext:u,viewport:V,intent:p="display",annotationMode:x=_util.AnnotationMode.ENABLE,transform:D=null,imageLayer:j=null,canvasFactory:H=null,background:T=null,optionalContentConfigPromise:s=null,annotationCanvasMap:f=null,pageColors:r=null,printAnnotationStorage:l=null}){void 0!==arguments[0]?.renderInteractiveForms&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&x===_util.AnnotationMode.ENABLE&&(x=_util.AnnotationMode.ENABLE_FORMS)),void 0!==arguments[0]?.includeAnnotationStorage&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&x===_util.AnnotationMode.ENABLE&&(x=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const P=this._transport.getRenderingIntent(p,x,l);this.pendingCleanup=!1,s||(s=this._transport.getOptionalContentConfig());let c=this._intentStates.get(P.cacheKey);c||(c=Object.create(null),this._intentStates.set(P.cacheKey,c)),c.streamReaderCancelTimeout&&(clearTimeout(c.streamReaderCancelTimeout),c.streamReaderCancelTimeout=null);const o=H||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),a=!!(P.renderingIntent&_util.RenderingIntentFlag.PRINT);c.displayReadyCapability||(c.displayReadyCapability=(0,_util.createPromiseCapability)(),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(P));const S=d=>{c.renderTasks.delete(v),(this.cleanupAfterRender||a)&&(this.pendingCleanup=!0),this._tryCleanup(),d?(v.capability.reject(d),this._abortOperatorList({intentState:c,reason:d instanceof Error?d:new Error(d)})):v.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},v=new InternalRenderTask({callback:S,params:{canvasContext:u,viewport:V,transform:D,imageLayer:j,background:T},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:f,operatorList:c.operatorList,pageIndex:this._pageIndex,canvasFactory:o,useRequestAnimationFrame:!a,pdfBug:this._pdfBug,pageColors:r});(c.renderTasks||=new Set).add(v);const y=v.task;return Promise.all([c.displayReadyCapability.promise,s]).then(([d,e])=>{this.pendingCleanup?S():(this._stats&&this._stats.time("Rendering"),v.initializeGraphics({transparency:d,optionalContentConfig:e}),v.operatorListChanged())}).catch(S),y}getOperatorList({intent:u="display",annotationMode:V=_util.AnnotationMode.ENABLE,printAnnotationStorage:p=null}={}){const D=this._transport.getRenderingIntent(u,V,p,!0);let H,j=this._intentStates.get(D.cacheKey);return j||(j=Object.create(null),this._intentStates.set(D.cacheKey,j)),j.opListReadCapability||(H=Object.create(null),H.operatorListChanged=function x(){j.operatorList.lastChunk&&(j.opListReadCapability.resolve(j.operatorList),j.renderTasks.delete(H))},j.opListReadCapability=(0,_util.createPromiseCapability)(),(j.renderTasks||=new Set).add(H),j.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(D)),j.opListReadCapability.promise}streamTextContent({disableCombineTextItems:u=!1,includeMarkedContent:V=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==u,includeMarkedContent:!0===V},{highWaterMark:100,size:x=>x.items.length})}getTextContent(u={}){if(this._transport._htmlForXfa)return this.getXfa().then(p=>_xfa_text.XfaText.textContent(p));const V=this.streamTextContent(u);return new Promise(function(p,x){const j=V.getReader(),H={items:[],styles:Object.create(null)};!function D(){j.read().then(function({value:T,done:s}){s?p(H):(Object.assign(H.styles,T.styles),H.items.push(...T.items),D())},x)}()})}getStructTree(){return this._structTreePromise||=this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const u=[];for(const V of this._intentStates.values())if(this._abortOperatorList({intentState:V,reason:new Error("Page was destroyed."),force:!0}),!V.opListReadCapability)for(const p of V.renderTasks)u.push(p.completed),p.cancel();this.objs.clear();for(const V of this._bitmaps)V.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(u)}cleanup(u=!1){return this.pendingCleanup=!0,this._tryCleanup(u)}_tryCleanup(u=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:V,operatorList:p}of this._intentStates.values())if(V.size>0||!p.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,u&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const V of this._bitmaps)V.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(u,V){const p=this._intentStates.get(V);p&&(this._stats&&this._stats.timeEnd("Page Request"),p.displayReadyCapability&&p.displayReadyCapability.resolve(u))}_renderPageChunk(u,V){for(let p=0,x=u.length;p<x;p++)V.operatorList.fnArray.push(u.fnArray[p]),V.operatorList.argsArray.push(u.argsArray[p]);V.operatorList.lastChunk=u.lastChunk,V.operatorList.separateAnnots=u.separateAnnots;for(const p of V.renderTasks)p.operatorListChanged();u.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:u,cacheKey:V,annotationStorageMap:p}){const D=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:u,cacheKey:V,annotationStorage:p}).getReader(),j=this._intentStates.get(V);j.streamReader=D;const H=()=>{D.read().then(({value:T,done:s})=>{s?j.streamReader=null:this._transport.destroyed||(this._renderPageChunk(T,j),H())},T=>{if(j.streamReader=null,!this._transport.destroyed){if(j.operatorList){j.operatorList.lastChunk=!0;for(const s of j.renderTasks)s.operatorListChanged();this._tryCleanup()}if(j.displayReadyCapability)j.displayReadyCapability.reject(T);else{if(!j.opListReadCapability)throw T;j.opListReadCapability.reject(T)}}})};H()}_abortOperatorList({intentState:u,reason:V,force:p=!1}){if(u.streamReader){if(!p){if(u.renderTasks.size>0)return;if(V instanceof _display_utils.RenderingCancelledException)return void(u.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:u,reason:V,force:!0}),u.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(u.streamReader.cancel(new _util.AbortException(V.message)).catch(()=>{}),u.streamReader=null,!this._transport.destroyed){for(const[x,D]of this._intentStates)if(D===u){this._intentStates.delete(x);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(u,V){const p={data:structuredClone(u,V)};this._deferred.then(()=>{for(const x of this._listeners)x.call(this,p)})}addEventListener(u,V){this._listeners.push(V)}removeEventListener(u,V){const p=this._listeners.indexOf(V);this._listeners.splice(p,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const ee=document?.currentScript?.src;ee&&(PDFWorkerUtil.fallbackWorkerSrc=ee.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(ee,u){let V;try{if(V=new URL(ee),!V.origin||"null"===V.origin)return!1}catch{return!1}const p=new URL(u,V);return V.origin===p.origin},PDFWorkerUtil.createCDNWrapper=function(ee){return URL.createObjectURL(new Blob([`importScripts("${ee}");`]))};class PDFWorker{static#workerPorts=new WeakMap;constructor({name:ee=null,port:u=null,verbosity:V=(0,_util.getVerbosityLevel)()}={}){if(u&&PDFWorker.#workerPorts.has(u))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=ee,this.destroyed=!1,this.verbosity=V,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,u)return PDFWorker.#workerPorts.set(u,this),void this._initializeFromPort(u);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(ee){this._port=ee,this._messageHandler=new _message_handler.MessageHandler("main","worker",ee),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:ee}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,ee)||(ee=PDFWorkerUtil.createCDNWrapper(new URL(ee,window.location).href));const u=new Worker(ee),V=new _message_handler.MessageHandler("main","worker",u),p=()=>{u.removeEventListener("error",x),V.destroy(),u.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},x=()=>{this._webWorker||p()};u.addEventListener("error",x),V.on("test",j=>{u.removeEventListener("error",x),this.destroyed?p():j?(this._messageHandler=V,this._port=u,this._webWorker=u,this._readyCapability.resolve(),V.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),V.destroy(),u.terminate())}),V.on("ready",j=>{if(u.removeEventListener("error",x),this.destroyed)p();else try{D()}catch{this._setupFakeWorker()}});const D=()=>{const j=new Uint8Array;V.send("test",j,[j.buffer])};return void D()}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(ee=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const u=new LoopbackPort;this._port=u;const V="fake"+PDFWorkerUtil.fakeWorkerId++,p=new _message_handler.MessageHandler(V+"_worker",V,u);ee.setup(p,u);const x=new _message_handler.MessageHandler(V,V+"_worker",u);this._messageHandler=x,this._readyCapability.resolve(),x.send("configure",{verbosity:this.verbosity})}).catch(ee=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${ee.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(ee){if(!ee?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return this.#workerPorts.has(ee.port)?this.#workerPorts.get(ee.port):new PDFWorker(ee)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function ee(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{#e=null;#t=new Map;#n=new Map;#i=null;constructor(u,V,p,x){this.messageHandler=u,this.loadingTask=V,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:V.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:x.ownerDocument,styleElement:x.styleElement}),this._params=x,x.useWorkerFetch||(this.CMapReaderFactory=new x.CMapReaderFactory({baseUrl:x.cMapUrl,isCompressed:x.cMapPacked}),this.StandardFontDataFactory=new x.StandardFontDataFactory({baseUrl:x.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=p,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return this.#e}getRenderingIntent(u,V=_util.AnnotationMode.ENABLE,p=null,x=!1){let D=_util.RenderingIntentFlag.DISPLAY,j=null;switch(u){case"any":D=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":D=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${u}`)}switch(V){case _util.AnnotationMode.DISABLE:D+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:D+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:D+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,j=(D&_util.RenderingIntentFlag.PRINT&&p instanceof _annotation_storage.PrintAnnotationStorage?p:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${V}`)}return x&&(D+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:D,cacheKey:`${D}_${_annotation_storage.AnnotationStorage.getHash(j)}`,annotationStorageMap:j}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const u=[];for(const p of this.#t.values())u.push(p._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const V=this.messageHandler.sendWithPromise("Terminate",null);return u.push(V),Promise.all(u).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#i=null,this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:u,loadingTask:V}=this;u.on("GetReader",(p,x)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=D=>{this._lastProgress={loaded:D.loaded,total:D.total}},x.onPull=()=>{this._fullReader.read().then(function({value:D,done:j}){j?x.close():((0,_util.assert)((0,_util.isArrayBuffer)(D),"GetReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(D),1,[D]))}).catch(D=>{x.error(D)})},x.onCancel=D=>{this._fullReader.cancel(D),x.ready.catch(j=>{if(!this.destroyed)throw j})}}),u.on("ReaderHeadersReady",p=>{const x=(0,_util.createPromiseCapability)(),D=this._fullReader;return D.headersReady.then(()=>{(!D.isStreamingSupported||!D.isRangeSupported)&&(this._lastProgress&&V.onProgress?.(this._lastProgress),D.onProgress=j=>{V.onProgress?.({loaded:j.loaded,total:j.total})}),x.resolve({isStreamingSupported:D.isStreamingSupported,isRangeSupported:D.isRangeSupported,contentLength:D.contentLength})},x.reject),x.promise}),u.on("GetRangeReader",(p,x)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const D=this._networkStream.getRangeReader(p.begin,p.end);D?(x.onPull=()=>{D.read().then(function({value:j,done:H}){H?x.close():((0,_util.assert)((0,_util.isArrayBuffer)(j),"GetRangeReader - expected an ArrayBuffer."),x.enqueue(new Uint8Array(j),1,[j]))}).catch(j=>{x.error(j)})},x.onCancel=j=>{D.cancel(j),x.ready.catch(H=>{if(!this.destroyed)throw H})}):x.close()}),u.on("GetDoc",({pdfInfo:p})=>{this._numPages=p.numPages,this._htmlForXfa=p.htmlForXfa,delete p.htmlForXfa,V._capability.resolve(new PDFDocumentProxy(p,this))}),u.on("DocException",function(p){let x;switch(p.name){case"PasswordException":x=new _util.PasswordException(p.message,p.code);break;case"InvalidPDFException":x=new _util.InvalidPDFException(p.message);break;case"MissingPDFException":x=new _util.MissingPDFException(p.message);break;case"UnexpectedResponseException":x=new _util.UnexpectedResponseException(p.message,p.status);break;case"UnknownErrorException":x=new _util.UnknownErrorException(p.message,p.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}V._capability.reject(x)}),u.on("PasswordRequest",p=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),V.onPassword){const x=D=>{D instanceof Error?this._passwordCapability.reject(D):this._passwordCapability.resolve({password:D})};try{V.onPassword(x,p.code)}catch(D){this._passwordCapability.reject(D)}}else this._passwordCapability.reject(new _util.PasswordException(p.message,p.code));return this._passwordCapability.promise}),u.on("DataLoaded",p=>{V.onProgress?.({loaded:p.length,total:p.length}),this.downloadInfoCapability.resolve(p)}),u.on("StartRenderPage",p=>{this.destroyed||this.#t.get(p.pageIndex)._startRenderPage(p.transparency,p.cacheKey)}),u.on("commonobj",([p,x,D])=>{if(!this.destroyed&&!this.commonObjs.has(p))switch(x){case"Font":const j=this._params;if("error"in D){const s=D.error;(0,_util.warn)(`Error during font loading: ${s}`),this.commonObjs.resolve(p,s);break}let H=null;j.pdfBug&&globalThis.FontInspector?.enabled&&(H={registerFont(s,f){globalThis.FontInspector.fontAdded(s,f)}});const T=new _font_loader.FontFaceObject(D,{isEvalSupported:j.isEvalSupported,disableFontFace:j.disableFontFace,ignoreErrors:j.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:H});this.fontLoader.bind(T).catch(s=>u.sendWithPromise("FontFallback",{id:p})).finally(()=>{!j.fontExtraProperties&&T.data&&(T.data=null),this.commonObjs.resolve(p,T)});break;case"FontPath":case"Image":this.commonObjs.resolve(p,D);break;default:throw new Error(`Got unknown common object type ${x}`)}}),u.on("obj",([p,x,D,j])=>{if(this.destroyed)return;const H=this.#t.get(x);if(!H.objs.has(p))switch(D){case"Image":H.objs.resolve(p,j);const T=8e6;if(j){let s;if(j.bitmap){const{bitmap:f,width:r,height:l}=j;s=r*l*4,H._bitmaps.add(f)}else s=j.data?.length||0;s>T&&(H.cleanupAfterRender=!0)}break;case"Pattern":H.objs.resolve(p,j);break;default:throw new Error(`Got unknown object type ${D}`)}}),u.on("DocProgress",p=>{this.destroyed||V.onProgress?.({loaded:p.loaded,total:p.total})}),u.on("DocStats",p=>{this.destroyed||(this.#e=Object.freeze({streamTypes:Object.freeze(p.streamTypes),fontTypes:Object.freeze(p.fontTypes)}))}),u.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),u.on("FetchBuiltInCMap",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(p):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),u.on("FetchStandardFontData",p=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(p):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:u}){this.destroyed||this.loadingTask.onUnsupportedFeature?.(u)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(u){if(!Number.isInteger(u)||u<=0||u>this._numPages)return Promise.reject(new Error("Invalid page request."));const V=u-1,p=this.#n.get(V);if(p)return p;const x=this.messageHandler.sendWithPromise("GetPage",{pageIndex:V}).then(D=>{if(this.destroyed)throw new Error("Transport destroyed");const j=new PDFPageProxy(V,D,this,this._params.ownerDocument,this._params.pdfBug);return this.#t.set(V,j),j});return this.#n.set(V,x),x}getPageIndex(u){return"object"!=typeof u||null===u||!Number.isInteger(u.num)||u.num<0||!Number.isInteger(u.gen)||u.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:u.num,gen:u.gen})}getAnnotations(u,V){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:u,intent:V})}saveDocument(){return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:this._fullReader?.filename??null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||=this.messageHandler.sendWithPromise("GetFieldObjects",null)}hasJSActions(){return this._hasJSActionsPromise||=this.messageHandler.sendWithPromise("HasJSActions",null)}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(u){return"string"!=typeof u?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:u})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(u){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:u})}getStructTree(u){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:u})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(u=>new _optional_content_config.OptionalContentConfig(u))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.#i||=this.messageHandler.sendWithPromise("GetMetadata",null).then(u=>({info:u[0],metadata:u[1]?new _metadata.Metadata(u[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(u=!1){var V=this;return _asyncToGenerator(function*(){if(yield V.messageHandler.sendWithPromise("Cleanup",null),!V.destroyed){for(const p of V.#t.values())if(!p.cleanup())throw new Error(`startCleanup: Page ${p.pageNumber} is currently rendering.`);V.commonObjs.clear(),u||V.fontLoader.clear(),V.#i=null,V._getFieldObjectsPromise=null,V._hasJSActionsPromise=null}})()}get loadingParams(){const u=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:u.disableAutoFetch,enableXfa:u.enableXfa})}}class PDFObjects{#e=Object.create(null);#t(u){return this.#e[u]||(this.#e[u]={capability:(0,_util.createPromiseCapability)(),data:null})}get(u,V=null){if(V){const x=this.#t(u);return x.capability.promise.then(()=>V(x.data)),null}const p=this.#e[u];if(!p?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${u}.`);return p.data}has(u){return this.#e[u]?.capability.settled||!1}resolve(u,V=null){const p=this.#t(u);p.data=V,p.capability.resolve()}clear(){this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(u){this.#e=u,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(){this.#e.cancel()}get separateAnnots(){const{separateAnnots:u}=this.#e.operatorList;if(!u)return!1;const{annotationCanvasMap:V}=this.#e;return u.form||u.canvas&&V?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:u,params:V,objs:p,commonObjs:x,annotationCanvasMap:D,operatorList:j,pageIndex:H,canvasFactory:T,useRequestAnimationFrame:s=!1,pdfBug:f=!1,pageColors:r=null}){this.callback=u,this.params=V,this.objs=p,this.commonObjs=x,this.annotationCanvasMap=D,this.operatorListIdx=null,this.operatorList=j,this._pageIndex=H,this.canvasFactory=T,this._pdfBug=f,this.pageColors=r,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===s&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=V.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:u=!1,optionalContentConfig:V}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:p,viewport:x,transform:D,imageLayer:j,background:H}=this.params;this.gfx=new _canvas.CanvasGraphics(p,this.commonObjs,this.objs,this.canvasFactory,j,V,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:D,viewport:x,transparency:u,background:H}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(u=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&InternalRenderTask.#e.delete(this._canvas),this.callback(u||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var u=this;return _asyncToGenerator(function*(){u.cancelled||(u.operatorListIdx=u.gfx.executeOperatorList(u.operatorList,u.operatorListIdx,u._continueBound,u.stepper),u.operatorListIdx===u.operatorList.argsArray.length&&(u.running=!1,u.operatorList.lastChunk&&(u.gfx.endDrawing(),u._canvas&&InternalRenderTask.#e.delete(u._canvas),u.callback())))})()}}const version="2.16.105";exports.version=version;const build="172ccdbe5";exports.build=build},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PrintAnnotationStorage=u.AnnotationStorage=void 0;var p=V(1),x=V(6),D=V(10);class j{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(s,f){const r=this._storage.get(s);return void 0===r?f:Object.assign(f,r)}getRawValue(s){return this._storage.get(s)}remove(s){if(this._storage.delete(s),0===this._storage.size&&this.resetModified(),"function"==typeof this.onAnnotationEditor){for(const f of this._storage.values())if(f instanceof x.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(s,f){const r=this._storage.get(s);let l=!1;if(void 0!==r)for(const[P,c]of Object.entries(f))r[P]!==c&&(l=!0,r[P]=c);else l=!0,this._storage.set(s,f);l&&this.#e(),f instanceof x.AnnotationEditor&&"function"==typeof this.onAnnotationEditor&&this.onAnnotationEditor(f.constructor._type)}has(s){return this._storage.has(s)}getAll(){return this._storage.size>0?(0,p.objectFromMap)(this._storage):null}get size(){return this._storage.size}#e(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get print(){return new H(this)}get serializable(){if(0===this._storage.size)return null;const s=new Map;for(const[f,r]of this._storage){const l=r instanceof x.AnnotationEditor?r.serialize():r;l&&s.set(f,l)}return s}static getHash(s){if(!s)return"";const f=new D.MurmurHash3_64;for(const[r,l]of s)f.update(`${r}:${JSON.stringify(l)}`);return f.hexdigest()}}u.AnnotationStorage=j;class H extends j{#e=null;constructor(s){super(),this.#e=structuredClone(s.serializable)}get print(){(0,p.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}u.PrintAnnotationStorage=H},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditor=void 0;var p=V(7),x=V(1);class D{#e=this.focusin.bind(this);#t=this.focusout.bind(this);#n=!1;#i=!1;#r=!1;#c=D._zIndex++;static _colorManager=new p.ColorManager;static _zIndex=1;constructor(H){this.constructor===D&&(0,x.unreachable)("Cannot initialize AnnotationEditor."),this.parent=H.parent,this.id=H.id,this.width=this.height=null,this.pageIndex=H.parent.pageIndex,this.name=H.name,this.div=null;const[T,s]=this.parent.viewportBaseDimensions;this.x=H.x/T,this.y=H.y/s,this.rotation=this.parent.viewport.rotation,this.isAttachedToDOM=!1}static get _defaultLineColor(){return(0,x.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#c}focusin(H){this.#n?this.#n=!1:this.parent.setSelected(this)}focusout(H){!this.isAttachedToDOM||H.relatedTarget?.closest(`#${this.id}`)||(H.preventDefault(),this.parent.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.parent.addToAnnotationStorage(this)}dragstart(H){const T=this.parent.div.getBoundingClientRect();this.startX=H.clientX-T.x,this.startY=H.clientY-T.y,H.dataTransfer.setData("text/plain",this.id),H.dataTransfer.effectAllowed="move"}setAt(H,T,s,f){const[r,l]=this.parent.viewportBaseDimensions;[s,f]=this.screenToPageTranslation(s,f),this.x=(H+s)/r,this.y=(T+f)/l,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}translate(H,T){const[s,f]=this.parent.viewportBaseDimensions;[H,T]=this.screenToPageTranslation(H,T),this.x+=H/s,this.y+=T/f,this.div.style.left=100*this.x+"%",this.div.style.top=100*this.y+"%"}screenToPageTranslation(H,T){const{rotation:s}=this.parent.viewport;switch(s){case 90:return[T,-H];case 180:return[-H,-T];case 270:return[-T,H];default:return[H,T]}}setDims(H,T){const[s,f]=this.parent.viewportBaseDimensions;this.div.style.width=100*H/s+"%",this.div.style.height=100*T/f+"%"}getInitialTranslation(){return[0,0]}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#e),this.div.addEventListener("focusout",this.#t);const[H,T]=this.getInitialTranslation();return this.translate(H,T),(0,p.bindEvents)(this,this.div,["dragstart","pointerdown"]),this.div}pointerdown(H){const T=p.KeyboardManager.platform.isMac;0!==H.button||H.ctrlKey&&T?H.preventDefault():(H.ctrlKey&&!T||H.shiftKey||H.metaKey&&T?this.parent.toggleSelected(this):this.parent.setSelected(this),this.#n=!0)}getRect(H,T){const[s,f]=this.parent.viewportBaseDimensions,[r,l]=this.parent.pageDimensions,P=r*H/s,c=l*T/f,o=this.x*r,a=this.y*l,S=this.width*r,v=this.height*l;switch(this.rotation){case 0:return[o+P,l-a-c-v,o+P+S,l-a-c];case 90:return[o+c,l-a+P,o+c+v,l-a+P+S];case 180:return[o-P-S,l-a+c,o-P,l-a+c+v];case 270:return[o-c-v,l-a-P-S,o-c,l-a-P];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(H,T){const[s,f,r,l]=H,P=r-s,c=l-f;switch(this.rotation){case 0:return[s,T-l,P,c];case 90:return[s,T-f,c,P];case 180:return[r,T-f,P,c];case 270:return[r,T-l,c,P];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#r=!0}disableEditMode(){this.#r=!1}isInEditMode(){return this.#r}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#e)}serialize(){(0,x.unreachable)("An editor must be serializable")}static deserialize(H,T){const s=new this.prototype.constructor({parent:T,id:T.getNextId()});s.rotation=H.rotation;const[f,r]=T.pageDimensions,[l,P,c,o]=s.getRectInCurrentCoords(H.rect,r);return s.x=l/f,s.y=P/r,s.width=c/f,s.height=o/r,s}remove(){this.div.removeEventListener("focusin",this.#e),this.div.removeEventListener("focusout",this.#t),this.isEmpty()||this.commit(),this.parent.remove(this)}select(){this.div?.classList.add("selectedEditor")}unselect(){this.div?.classList.remove("selectedEditor")}updateParams(H,T){}disableEditing(){}enableEditing(){}get propertiesToUpdate(){return{}}get contentDiv(){return this.div}get isEditing(){return this.#i}set isEditing(H){this.#i=H,H?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null)}}u.AnnotationEditor=D},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.KeyboardManager=u.CommandManager=u.ColorManager=u.AnnotationEditorUIManager=void 0,u.bindEvents=function D(P,c,o){for(const a of o)c.addEventListener(a,P[a].bind(P))},u.opacityToHex=function j(P){return Math.round(Math.min(255,Math.max(1,255*P))).toString(16).padStart(2,"0")};var p=V(1),x=V(8);class H{#e=0;getId(){return`${p.AnnotationEditorPrefix}${this.#e++}`}}class T{#e=[];#t=!1;#n;#i=-1;constructor(c=128){this.#n=c}add({cmd:c,undo:o,mustExec:a,type:S=NaN,overwriteIfSameType:v=!1,keepUndo:y=!1}){if(a&&c(),this.#t)return;const d={cmd:c,undo:o,type:S};if(-1===this.#i)return this.#e.length>0&&(this.#e.length=0),this.#i=0,void this.#e.push(d);if(v&&this.#e[this.#i].type===S)return y&&(d.undo=this.#e[this.#i].undo),void(this.#e[this.#i]=d);const e=this.#i+1;e===this.#n?this.#e.splice(0,1):(this.#i=e,e<this.#e.length&&this.#e.splice(e)),this.#e.push(d)}undo(){-1!==this.#i&&(this.#t=!0,this.#e[this.#i].undo(),this.#t=!1,this.#i-=1)}redo(){this.#i<this.#e.length-1&&(this.#i+=1,this.#t=!0,this.#e[this.#i].cmd(),this.#t=!1)}hasSomethingToUndo(){return-1!==this.#i}hasSomethingToRedo(){return this.#i<this.#e.length-1}destroy(){this.#e=null}}u.CommandManager=T;class s{constructor(c){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const o=s.platform.isMac;for(const[a,S]of c)for(const v of a){const y=v.startsWith("mac+");o&&y?(this.callbacks.set(v.slice(4),S),this.allKeys.add(v.split("+").at(-1))):!o&&!y&&(this.callbacks.set(v,S),this.allKeys.add(v.split("+").at(-1)))}}static get platform(){const c=typeof navigator<"u"?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:c.includes("Win"),isMac:c.includes("Mac")})}#e(c){c.altKey&&this.buffer.push("alt"),c.ctrlKey&&this.buffer.push("ctrl"),c.metaKey&&this.buffer.push("meta"),c.shiftKey&&this.buffer.push("shift"),this.buffer.push(c.key);const o=this.buffer.join("+");return this.buffer.length=0,o}exec(c,o){if(!this.allKeys.has(o.key))return;const a=this.callbacks.get(this.#e(o));a&&(a.bind(c)(),o.stopPropagation(),o.preventDefault())}}u.KeyboardManager=s;class f{#e=null;copy(c){c&&(Array.isArray(c)?this.#e=c.map(o=>o.serialize()):this.#e=[c.serialize()],this.#e=this.#e.filter(o=>!!o),0===this.#e.length&&(this.#e=null))}paste(){return this.#e}isEmpty(){return null===this.#e}destroy(){this.#e=null}}class r{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const c=new Map([["CanvasText",null],["Canvas",null]]);return(0,x.getColorValues)(c),(0,p.shadow)(this,"_colors",c)}convert(c){const o=(0,x.getRGB)(c);if(!window.matchMedia("(forced-colors: active)").matches)return o;for(const[a,S]of this._colors)if(S.every((v,y)=>v===o[y]))return r._colorsMapping.get(a);return o}getHexCode(c){const o=this._colors.get(c);return o?p.Util.makeHexColor(...o):c}}u.ColorManager=r;class l{#e=null;#t=new Map;#n=new Map;#i=new f;#r=new T;#c=0;#o=null;#s=null;#u=new H;#h=!1;#l=p.AnnotationEditorType.NONE;#a=new Set;#p=this.keydown.bind(this);#f=this.onEditingAction.bind(this);#b=this.onPageChanging.bind(this);#m={isEditing:!1,isEmpty:!0,hasEmptyClipboard:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#_=null;static _keyboardManager=new s([[["ctrl+a","mac+meta+a"],l.prototype.selectAll],[["ctrl+c","mac+meta+c"],l.prototype.copy],[["ctrl+v","mac+meta+v"],l.prototype.paste],[["ctrl+x","mac+meta+x"],l.prototype.cut],[["ctrl+z","mac+meta+z"],l.prototype.undo],[["ctrl+y","ctrl+shift+Z","mac+meta+shift+Z"],l.prototype.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete"],l.prototype.delete],[["Escape","mac+Escape"],l.prototype.unselectAll]]);constructor(c,o){this.#_=c,this.#s=o,this.#s._on("editingaction",this.#f),this.#s._on("pagechanging",this.#b)}destroy(){this.#v(),this.#s._off("editingaction",this.#f),this.#s._off("pagechanging",this.#b);for(const c of this.#n.values())c.destroy();this.#n.clear(),this.#t.clear(),this.#e=null,this.#a.clear(),this.#i.destroy(),this.#r.destroy()}onPageChanging({pageNumber:c}){this.#c=c-1}focusMainContainer(){this.#_.focus()}#S(){this.#_.addEventListener("keydown",this.#p)}#v(){this.#_.removeEventListener("keydown",this.#p)}keydown(c){this.getActive()?.shouldGetKeyboardEvents()||l._keyboardManager.exec(this,c)}onEditingAction(c){["undo","redo","cut","copy","paste","delete","selectAll"].includes(c.name)&&this[c.name]()}#d(c){Object.entries(c).some(([a,S])=>this.#m[a]!==S)&&this.#s.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#m,c)})}#P(c){this.#s.dispatch("annotationeditorparamschanged",{source:this,details:c})}setEditingState(c){c?(this.#S(),this.#d({isEditing:this.#l!==p.AnnotationEditorType.NONE,isEmpty:this.#y(),hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:this.#r.hasSomethingToRedo(),hasSelectedEditor:!1,hasEmptyClipboard:this.#i.isEmpty()})):(this.#v(),this.#d({isEditing:!1}))}registerEditorTypes(c){this.#o=c;for(const o of this.#o)this.#P(o.defaultPropertiesToUpdate)}getId(){return this.#u.getId()}addLayer(c){this.#n.set(c.pageIndex,c),this.#h?c.enable():c.disable()}removeLayer(c){this.#n.delete(c.pageIndex)}updateMode(c){if(this.#l=c,c===p.AnnotationEditorType.NONE)this.setEditingState(!1),this.#g();else{this.setEditingState(!0),this.#x();for(const o of this.#n.values())o.updateMode(c)}}updateToolbar(c){c!==this.#l&&this.#s.dispatch("switchannotationeditormode",{source:this,mode:c})}updateParams(c,o){for(const a of this.#a)a.updateParams(c,o);for(const a of this.#o)a.updateDefaultParams(c,o)}#x(){if(!this.#h){this.#h=!0;for(const c of this.#n.values())c.enable()}}#g(){if(this.unselectAll(),this.#h){this.#h=!1;for(const c of this.#n.values())c.disable()}}getEditors(c){const o=[];for(const a of this.#t.values())a.pageIndex===c&&o.push(a);return o}getEditor(c){return this.#t.get(c)}addEditor(c){this.#t.set(c.id,c)}removeEditor(c){this.#t.delete(c.id),this.unselect(c)}#E(c){const o=this.#n.get(c.pageIndex);o?o.addOrRebuild(c):this.addEditor(c)}setActiveEditor(c){this.#e!==c&&(this.#e=c,c&&this.#P(c.propertiesToUpdate))}toggleSelected(c){if(this.#a.has(c))return this.#a.delete(c),c.unselect(),void this.#d({hasSelectedEditor:this.hasSelection});this.#a.add(c),c.select(),this.#P(c.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}setSelected(c){for(const o of this.#a)o!==c&&o.unselect();this.#a.clear(),this.#a.add(c),c.select(),this.#P(c.propertiesToUpdate),this.#d({hasSelectedEditor:!0})}isSelected(c){return this.#a.has(c)}unselect(c){c.unselect(),this.#a.delete(c),this.#d({hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==this.#a.size}undo(){this.#r.undo(),this.#d({hasSomethingToUndo:this.#r.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#y()})}redo(){this.#r.redo(),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:this.#r.hasSomethingToRedo(),isEmpty:this.#y()})}addCommands(c){this.#r.add(c),this.#d({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#y()})}#y(){if(0===this.#t.size)return!0;if(1===this.#t.size)for(const c of this.#t.values())return c.isEmpty();return!1}delete(){if(this.#e&&this.#e.commitOrRemove(),!this.hasSelection)return;const c=[...this.#a];this.addCommands({cmd:()=>{for(const S of c)S.remove()},undo:()=>{for(const S of c)this.#E(S)},mustExec:!0})}copy(){if(this.#e&&this.#e.commitOrRemove(),this.hasSelection){const c=[];for(const o of this.#a)o.isEmpty()||c.push(o);if(0===c.length)return;this.#i.copy(c),this.#d({hasEmptyClipboard:!1})}}cut(){this.copy(),this.delete()}paste(){if(this.#i.isEmpty())return;this.unselectAll();const c=this.#n.get(this.#c),o=this.#i.paste().map(v=>c.deserialize(v));this.addCommands({cmd:()=>{for(const v of o)this.#E(v);this.#A(o)},undo:()=>{for(const v of o)v.remove()},mustExec:!0})}#A(c){this.#a.clear();for(const o of c)o.isEmpty()||(this.#a.add(o),o.select());this.#d({hasSelectedEditor:!0})}selectAll(){for(const c of this.#a)c.commit();this.#A(this.#t.values())}unselectAll(){if(this.#e)this.#e.commitOrRemove();else if(0!==this.#A.size){for(const c of this.#a)c.unselect();this.#a.clear(),this.#d({hasSelectedEditor:!1})}}isActive(c){return this.#e===c}getActive(){return this.#e}getMode(){return this.#l}}u.AnnotationEditorUIManager=l},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.StatTimer=u.RenderingCancelledException=u.PixelsPerInch=u.PageViewport=u.PDFDateString=u.DOMStandardFontDataFactory=u.DOMSVGFactory=u.DOMCanvasFactory=u.DOMCMapReaderFactory=u.AnnotationPrefix=void 0,u.deprecated=function b(F){console.log("Deprecated API usage: "+F)},u.getColorValues=function J(F){const N=document.createElement("span");N.style.visibility="hidden",document.body.append(N);for(const L of F.keys()){N.style.color=L;const M=window.getComputedStyle(N).color;F.set(L,U(M))}N.remove()},u.getCurrentTransform=function K(F){const{a:N,b:L,c:M,d:_,e:n,f:h}=F.getTransform();return[N,L,M,_,n,h]},u.getCurrentTransformInverse=function C(F){const{a:N,b:L,c:M,d:_,e:n,f:h}=F.getTransform().invertSelf();return[N,L,M,_,n,h]},u.getFilenameFromUrl=function v(F){const N=F.indexOf("#"),L=F.indexOf("?"),M=Math.min(N>0?N:F.length,L>0?L:F.length);return F.substring(F.lastIndexOf("/",M)+1,M)},u.getPdfFilenameFromUrl=function y(F,N="document.pdf"){if("string"!=typeof F)return N;if(a(F))return(0,x.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),N;const M=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,_=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(F);let n=M.exec(_[1])||M.exec(_[2])||M.exec(_[3]);if(n&&(n=n[0],n.includes("%")))try{n=M.exec(decodeURIComponent(n))[0]}catch{}return n||N},u.getRGB=U,u.getXfaPageViewport=function W(F,{scale:N=1,rotation:L=0}){const{width:M,height:_}=F.attributes.style,n=[0,0,parseInt(M),parseInt(_)];return new c({viewBox:n,scale:N,rotation:L})},u.isDataScheme=a,u.isPdfFile=function S(F){return"string"==typeof F&&/\.pdf$/i.test(F)},u.isValidFetchUrl=e,u.loadScript=function i(F,N=!1){return new Promise((L,M)=>{const _=document.createElement("script");_.src=F,_.onload=function(n){N&&_.remove(),L(n)},_.onerror=function(){M(new Error(`Cannot load script at: ${_.src}`))},(document.head||document.documentElement).append(_)})};var p=V(9),x=V(1);function s(F){return f.apply(this,arguments)}function f(){return(f=_asyncToGenerator(function*(F,N=!1){if(e(F,document.baseURI)){const L=yield fetch(F);if(!L.ok)throw new Error(L.statusText);return N?new Uint8Array(yield L.arrayBuffer()):(0,x.stringToBytes)(yield L.text())}return new Promise((L,M)=>{const _=new XMLHttpRequest;_.open("GET",F,!0),N&&(_.responseType="arraybuffer"),_.onreadystatechange=()=>{if(_.readyState===XMLHttpRequest.DONE){if(200===_.status||0===_.status){let n;if(N&&_.response?n=new Uint8Array(_.response):!N&&_.responseText&&(n=(0,x.stringToBytes)(_.responseText)),n)return void L(n)}M(new Error(_.statusText))}},_.send(null)})})).apply(this,arguments)}u.AnnotationPrefix="pdfjs_internal_id_",u.PixelsPerInch=class H{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF},u.DOMCanvasFactory=class T extends p.BaseCanvasFactory{constructor({ownerDocument:N=globalThis.document}={}){super(),this._document=N}_createCanvas(N,L){const M=this._document.createElement("canvas");return M.width=N,M.height=L,M}},u.DOMCMapReaderFactory=class r extends p.BaseCMapReaderFactory{_fetchData(N,L){return s(N,this.isCompressed).then(M=>({cMapData:M,compressionType:L}))}},u.DOMStandardFontDataFactory=class l extends p.BaseStandardFontDataFactory{_fetchData(N){return s(N,!0)}},u.DOMSVGFactory=class P extends p.BaseSVGFactory{_createSVG(N){return document.createElementNS("http://www.w3.org/2000/svg",N)}};class c{constructor({viewBox:N,scale:L,rotation:M,offsetX:_=0,offsetY:n=0,dontFlip:h=!1}){this.viewBox=N,this.scale=L,this.rotation=M,this.offsetX=_,this.offsetY=n;const w=(N[2]+N[0])/2,A=(N[3]+N[1])/2;let t,g,m,k,E,O,B,z;switch((M%=360)<0&&(M+=360),M){case 180:t=-1,g=0,m=0,k=1;break;case 90:t=0,g=1,m=1,k=0;break;case 270:t=0,g=-1,m=-1,k=0;break;case 0:t=1,g=0,m=0,k=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}h&&(m=-m,k=-k),0===t?(E=Math.abs(A-N[1])*L+_,O=Math.abs(w-N[0])*L+n,B=Math.abs(N[3]-N[1])*L,z=Math.abs(N[2]-N[0])*L):(E=Math.abs(w-N[0])*L+_,O=Math.abs(A-N[1])*L+n,B=Math.abs(N[2]-N[0])*L,z=Math.abs(N[3]-N[1])*L),this.transform=[t*L,g*L,m*L,k*L,E-t*L*w-m*L*A,O-g*L*w-k*L*A],this.width=B,this.height=z}clone({scale:N=this.scale,rotation:L=this.rotation,offsetX:M=this.offsetX,offsetY:_=this.offsetY,dontFlip:n=!1}={}){return new c({viewBox:this.viewBox.slice(),scale:N,rotation:L,offsetX:M,offsetY:_,dontFlip:n})}convertToViewportPoint(N,L){return x.Util.applyTransform([N,L],this.transform)}convertToViewportRectangle(N){const L=x.Util.applyTransform([N[0],N[1]],this.transform),M=x.Util.applyTransform([N[2],N[3]],this.transform);return[L[0],L[1],M[0],M[1]]}convertToPdfPoint(N,L){return x.Util.applyInverseTransform([N,L],this.transform)}}function a(F){const N=F.length;let L=0;for(;L<N&&""===F[L].trim();)L++;return"data:"===F.substring(L,L+5).toLowerCase()}function e(F,N){try{const{protocol:L}=N?new URL(F,N):new URL(F);return"http:"===L||"https:"===L}catch{return!1}}let R;function U(F){if(F.startsWith("#")){const N=parseInt(F.slice(1),16);return[(16711680&N)>>16,(65280&N)>>8,255&N]}return F.startsWith("rgb(")?F.slice(4,-1).split(",").map(N=>parseInt(N)):F.startsWith("rgba(")?F.slice(5,-1).split(",").map(N=>parseInt(N)).slice(0,3):((0,x.warn)(`Not a valid color format: "${F}"`),[0,0,0])}u.PageViewport=c,u.RenderingCancelledException=class o extends x.BaseException{constructor(N,L){super(N,"RenderingCancelledException"),this.type=L}},u.StatTimer=class d{constructor(){this.started=Object.create(null),this.times=[]}time(N){N in this.started&&(0,x.warn)(`Timer is already running for ${N}`),this.started[N]=Date.now()}timeEnd(N){N in this.started||(0,x.warn)(`Timer has not been started for ${N}`),this.times.push({name:N,start:this.started[N],end:Date.now()}),delete this.started[N]}toString(){const N=[];let L=0;for(const M of this.times){const _=M.name;_.length>L&&(L=_.length)}for(const M of this.times){const _=M.end-M.start;N.push(`${M.name.padEnd(L)} ${_}ms\n`)}return N.join("")}},u.PDFDateString=class I{static toDateObject(N){if(!N||"string"!=typeof N)return null;R||(R=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const L=R.exec(N);if(!L)return null;const M=parseInt(L[1],10);let _=parseInt(L[2],10);_=_>=1&&_<=12?_-1:0;let n=parseInt(L[3],10);n=n>=1&&n<=31?n:1;let h=parseInt(L[4],10);h=h>=0&&h<=23?h:0;let w=parseInt(L[5],10);w=w>=0&&w<=59?w:0;let A=parseInt(L[6],10);A=A>=0&&A<=59?A:0;const t=L[7]||"Z";let g=parseInt(L[8],10);g=g>=0&&g<=23?g:0;let m=parseInt(L[9],10)||0;return m=m>=0&&m<=59?m:0,"-"===t?(h+=g,w+=m):"+"===t&&(h-=g,w-=m),new Date(Date.UTC(M,_,n,h,w,A))}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.BaseStandardFontDataFactory=u.BaseSVGFactory=u.BaseCanvasFactory=u.BaseCMapReaderFactory=void 0;var p=V(1);class x{constructor(){this.constructor===x&&(0,p.unreachable)("Cannot initialize BaseCanvasFactory.")}create(s,f){if(s<=0||f<=0)throw new Error("Invalid canvas size");const r=this._createCanvas(s,f);return{canvas:r,context:r.getContext("2d")}}reset(s,f,r){if(!s.canvas)throw new Error("Canvas is not specified");if(f<=0||r<=0)throw new Error("Invalid canvas size");s.canvas.width=f,s.canvas.height=r}destroy(s){if(!s.canvas)throw new Error("Canvas is not specified");s.canvas.width=0,s.canvas.height=0,s.canvas=null,s.context=null}_createCanvas(s,f){(0,p.unreachable)("Abstract method `_createCanvas` called.")}}u.BaseCanvasFactory=x;class D{constructor({baseUrl:s=null,isCompressed:f=!1}){this.constructor===D&&(0,p.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=s,this.isCompressed=f}fetch({name:s}){var f=this;return _asyncToGenerator(function*(){if(!f.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!s)throw new Error("CMap name must be specified.");const r=f.baseUrl+s+(f.isCompressed?".bcmap":"");return f._fetchData(r,f.isCompressed?p.CMapCompressionType.BINARY:p.CMapCompressionType.NONE).catch(P=>{throw new Error(`Unable to load ${f.isCompressed?"binary ":""}CMap at: ${r}`)})})()}_fetchData(s,f){(0,p.unreachable)("Abstract method `_fetchData` called.")}}u.BaseCMapReaderFactory=D;class j{constructor({baseUrl:s=null}){this.constructor===j&&(0,p.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=s}fetch({filename:s}){var f=this;return _asyncToGenerator(function*(){if(!f.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!s)throw new Error("Font filename must be specified.");const r=`${f.baseUrl}${s}`;return f._fetchData(r).catch(l=>{throw new Error(`Unable to load font data at: ${r}`)})})()}_fetchData(s){(0,p.unreachable)("Abstract method `_fetchData` called.")}}u.BaseStandardFontDataFactory=j;class H{constructor(){this.constructor===H&&(0,p.unreachable)("Cannot initialize BaseSVGFactory.")}create(s,f,r=!1){if(s<=0||f<=0)throw new Error("Invalid SVG dimensions");const l=this._createSVG("svg:svg");return l.setAttribute("version","1.1"),r||(l.setAttribute("width",`${s}px`),l.setAttribute("height",`${f}px`)),l.setAttribute("preserveAspectRatio","none"),l.setAttribute("viewBox",`0 0 ${s} ${f}`),l}createElement(s){if("string"!=typeof s)throw new Error("Invalid SVG element type");return this._createSVG(s)}_createSVG(s){(0,p.unreachable)("Abstract method `_createSVG` called.")}}u.BaseSVGFactory=H},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MurmurHash3_64=void 0;var p=V(1);const x=3285377520,D=4294901760,j=65535;u.MurmurHash3_64=class H{constructor(s){this.h1=s?4294967295&s:x,this.h2=s?4294967295&s:x}update(s){let f,r;if("string"==typeof s){f=new Uint8Array(2*s.length),r=0;for(let b=0,R=s.length;b<R;b++){const I=s.charCodeAt(b);I<=255?f[r++]=I:(f[r++]=I>>>8,f[r++]=255&I)}}else{if(!(0,p.isArrayBuffer)(s))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");f=s.slice(),r=f.byteLength}const l=r>>2,P=r-4*l,c=new Uint32Array(f.buffer,0,l);let o=0,a=0,S=this.h1,v=this.h2;const y=3432918353,d=461845907,e=y&j,i=d&j;for(let b=0;b<l;b++)1&b?(o=c[b],o=o*y&D|o*e&j,o=o<<15|o>>>17,o=o*d&D|o*i&j,S^=o,S=S<<13|S>>>19,S=5*S+3864292196):(a=c[b],a=a*y&D|a*e&j,a=a<<15|a>>>17,a=a*d&D|a*i&j,v^=a,v=v<<13|v>>>19,v=5*v+3864292196);switch(o=0,P){case 3:o^=f[4*l+2]<<16;case 2:o^=f[4*l+1]<<8;case 1:o^=f[4*l],o=o*y&D|o*e&j,o=o<<15|o>>>17,o=o*d&D|o*i&j,1&l?S^=o:v^=o}this.h1=S,this.h2=v}hexdigest(){let s=this.h1,f=this.h2;s^=f>>>1,s=3981806797*s&D|36045*s&j,f=4283543511*f&D|(2950163797*(f<<16|s>>>16)&D)>>>16,s^=f>>>1,s=444984403*s&D|60499*s&j,f=3301882366*f&D|(3120437893*(f<<16|s>>>16)&D)>>>16,s^=f>>>1;const r=(s>>>0).toString(16),l=(f>>>0).toString(16);return r.padStart(8,"0")+l.padStart(8,"0")}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FontLoader=u.FontFaceObject=void 0;var p=V(1);class x{constructor({docId:T,onUnsupportedFeature:s,ownerDocument:f=globalThis.document,styleElement:r=null}){this.constructor===x&&(0,p.unreachable)("Cannot initialize BaseFontLoader."),this.docId=T,this._onUnsupportedFeature=s,this._document=f,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(T){this.nativeFontFaces.push(T),this._document.fonts.add(T)}insertRule(T){let s=this.styleElement;s||(s=this.styleElement=this._document.createElement("style"),s.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].append(s));const f=s.sheet;f.insertRule(T,f.cssRules.length)}clear(){for(const T of this.nativeFontFaces)this._document.fonts.delete(T);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(T){var s=this;return _asyncToGenerator(function*(){if(T.attached||T.missingFile)return;if(T.attached=!0,s.isFontLoadingAPISupported){const r=T.createNativeFontFace();if(r){s.addNativeFontFace(r);try{yield r.loaded}catch(l){throw s._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,p.warn)(`Failed to load font '${r.family}': '${l}'.`),T.disableFontFace=!0,l}}return}const f=T.createFontFaceRule();if(f){if(s.insertRule(f),s.isSyncFontLoadingSupported)return;yield new Promise(r=>{const l=s._queueLoadingCallback(r);s._prepareFontLoadEvent([f],[T],l)})}})()}_queueLoadingCallback(T){(0,p.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){return(0,p.shadow)(this,"isFontLoadingAPISupported",!!this._document?.fonts)}get isSyncFontLoadingSupported(){(0,p.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,p.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(T,s,f){(0,p.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let D;u.FontLoader=D,u.FontLoader=D=class extends x{constructor(T){super(T),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let T=!1;return(typeof navigator>"u"||/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent)?.[1]>=14)&&(T=!0),(0,p.shadow)(this,"isSyncFontLoadingSupported",T)}_queueLoadingCallback(T){const f=this.loadingContext,r={id:"pdfjs-font-loading-"+f.nextRequestId++,done:!1,complete:function s(){for((0,p.assert)(!r.done,"completeRequest() cannot be called twice."),r.done=!0;f.requests.length>0&&f.requests[0].done;){const l=f.requests.shift();setTimeout(l.callback,0)}},callback:T};return f.requests.push(r),r}get _loadTestFont(){return(0,p.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(T,s,f){function r(K,C){return K.charCodeAt(C)<<24|K.charCodeAt(C+1)<<16|K.charCodeAt(C+2)<<8|255&K.charCodeAt(C+3)}function l(K,C,F,N){return K.substring(0,C)+N+K.substring(C+F)}let P,c;const o=this._document.createElement("canvas");o.width=1,o.height=1;const a=o.getContext("2d");let S=0;const y=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=l(d,976,y.length,y);const b=1482184792;let R=r(d,16);for(P=0,c=y.length-3;P<c;P+=4)R=R-b+r(y,P)|0;P<y.length&&(R=R-b+r(y+"XXX",P)|0),d=l(d,16,4,(0,p.string32)(R));const I=`url(data:font/opentype;base64,${btoa(d)});`;this.insertRule(`@font-face {font-family:"${y}";src:${I}}`);const U=[];for(const K of s)U.push(K.loadedName);U.push(y);const J=this._document.createElement("div");J.style.visibility="hidden",J.style.width=J.style.height="10px",J.style.position="absolute",J.style.top=J.style.left="0px";for(const K of U){const C=this._document.createElement("span");C.textContent="Hi",C.style.fontFamily=K,J.append(C)}this._document.body.append(J),function v(K,C){if(S++,S>30)return(0,p.warn)("Load test font never loaded."),void C();a.font="30px "+K,a.fillText(".",0,20),a.getImageData(0,0,1,1).data[3]>0?C():setTimeout(v.bind(null,K,C))}(y,()=>{J.remove(),f.complete()})}},u.FontFaceObject=class j{constructor(T,{isEvalSupported:s=!0,disableFontFace:f=!1,ignoreErrors:r=!1,onUnsupportedFeature:l,fontRegistry:P=null}){this.compiledGlyphs=Object.create(null);for(const c in T)this[c]=T[c];this.isEvalSupported=!1!==s,this.disableFontFace=!0===f,this.ignoreErrors=!0===r,this._onUnsupportedFeature=l,this.fontRegistry=P}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let T;if(this.cssFontInfo){const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),T=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}else T=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),T}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const T=(0,p.bytesToString)(this.data),s=`url(data:${this.mimetype};base64,${btoa(T)});`;let f;if(this.cssFontInfo){let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),f=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${s}}`}else f=`@font-face {font-family:"${this.loadedName}";src:${s}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,s),f}getPathGenerator(T,s){if(void 0!==this.compiledGlyphs[s])return this.compiledGlyphs[s];let f;try{f=T.get(this.loadedName+"_path_"+s)}catch(r){if(!this.ignoreErrors)throw r;return this._onUnsupportedFeature({featureId:p.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,p.warn)(`getPathGenerator - ignoring character: "${r}".`),this.compiledGlyphs[s]=function(l,P){}}if(this.isEvalSupported&&p.FeatureTest.isEvalSupported){const r=[];for(const l of f){const P=void 0!==l.args?l.args.join(","):"";r.push("c.",l.cmd,"(",P,");\n")}return this.compiledGlyphs[s]=new Function("c","size",r.join(""))}return this.compiledGlyphs[s]=function(r,l){for(const P of f)"scale"===P.cmd&&(P.args=[l,-l]),r[P.cmd].apply(r,P.args)}}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.CanvasGraphics=void 0;var p=V(8),x=V(1),D=V(13),j=V(14),H=V(3);const f=4096,P=H.isNodeJS&&typeof Path2D>"u"?-1:1e3,c=16;class a{constructor(n){this.canvasFactory=n,this.cache=Object.create(null)}getCanvas(n,h,w){let A;return void 0!==this.cache[n]?(A=this.cache[n],this.canvasFactory.reset(A,h,w)):(A=this.canvasFactory.create(h,w),this.cache[n]=A),A}delete(n){delete this.cache[n]}clear(){for(const n in this.cache)this.canvasFactory.destroy(this.cache[n]),delete this.cache[n]}}function S(_,n,h,w,A,t,g,m,k,E){const[O,B,z,G,X,Q]=(0,p.getCurrentTransform)(_);if(0===B&&0===z){const q=Math.round(g*O+X),ae=Math.round(m*G+Q),ce=Math.abs(Math.round((g+k)*O+X)-q)||1,le=Math.abs(Math.round((m+E)*G+Q)-ae)||1;return _.setTransform(Math.sign(O),0,0,Math.sign(G),q,ae),_.drawImage(n,h,w,A,t,0,0,ce,le),_.setTransform(O,B,z,G,X,Q),[ce,le]}if(0===O&&0===G){const q=Math.round(m*z+X),ae=Math.round(g*B+Q),ce=Math.abs(Math.round((m+E)*z+X)-q)||1,le=Math.abs(Math.round((g+k)*B+Q)-ae)||1;return _.setTransform(0,Math.sign(B),Math.sign(z),0,q,ae),_.drawImage(n,h,w,A,t,0,0,le,ce),_.setTransform(O,B,z,G,X,Q),[le,ce]}return _.drawImage(n,h,w,A,t,g,m,k,E),[Math.hypot(O,B)*k,Math.hypot(z,G)*E]}class y{constructor(n,h){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=x.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=x.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,n,h])}clone(){const n=Object.create(this);return n.clipBox=this.clipBox.slice(),n}setCurrentPoint(n,h){this.x=n,this.y=h}updatePathMinMax(n,h,w){[h,w]=x.Util.applyTransform([h,w],n),this.minX=Math.min(this.minX,h),this.minY=Math.min(this.minY,w),this.maxX=Math.max(this.maxX,h),this.maxY=Math.max(this.maxY,w)}updateRectMinMax(n,h){const w=x.Util.applyTransform(h,n),A=x.Util.applyTransform(h.slice(2),n);this.minX=Math.min(this.minX,w[0],A[0]),this.minY=Math.min(this.minY,w[1],A[1]),this.maxX=Math.max(this.maxX,w[0],A[0]),this.maxY=Math.max(this.maxY,w[1],A[1])}updateScalingPathMinMax(n,h){x.Util.scaleMinMax(n,h),this.minX=Math.min(this.minX,h[0]),this.maxX=Math.max(this.maxX,h[1]),this.minY=Math.min(this.minY,h[2]),this.maxY=Math.max(this.maxY,h[3])}updateCurvePathMinMax(n,h,w,A,t,g,m,k,E,O){const B=x.Util.bezierBoundingBox(h,w,A,t,g,m,k,E);if(O)return O[0]=Math.min(O[0],B[0],B[2]),O[1]=Math.max(O[1],B[0],B[2]),O[2]=Math.min(O[2],B[1],B[3]),void(O[3]=Math.max(O[3],B[1],B[3]));this.updateRectMinMax(n,B)}getPathBoundingBox(n=D.PathType.FILL,h=null){const w=[this.minX,this.minY,this.maxX,this.maxY];if(n===D.PathType.STROKE){h||(0,x.unreachable)("Stroke bounding box must include transform.");const A=x.Util.singularValueDecompose2dScale(h),t=A[0]*this.lineWidth/2,g=A[1]*this.lineWidth/2;w[0]-=t,w[1]-=g,w[2]+=t,w[3]+=g}return w}updateClipFromPath(){const n=x.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(n||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(n){this.clipBox=n,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(n=D.PathType.FILL,h=null){return x.Util.intersect(this.clipBox,this.getPathBoundingBox(n,h))}}function d(_,n,h=null){if(typeof ImageData<"u"&&n instanceof ImageData)return void _.putImageData(n,0,0);const w=n.height,A=n.width,t=w%c,g=(w-t)/c,m=0===t?g:g+1,k=_.createImageData(A,c);let O,E=0;const B=n.data,z=k.data;let G,X,Q,se,ne,re,q,te;if(h)switch(h.length){case 1:ne=h[0],re=h[0],q=h[0],te=h[0];break;case 4:ne=h[0],re=h[1],q=h[2],te=h[3]}if(n.kind===x.ImageKind.GRAYSCALE_1BPP){const ae=B.byteLength,Z=new Uint32Array(z.buffer,0,z.byteLength>>2),ce=Z.length,he=A+7>>3;let le=4294967295,ue=x.FeatureTest.isLittleEndian?4278190080:255;for(te&&255===te[0]&&0===te[255]&&([le,ue]=[ue,le]),G=0;G<m;G++){for(Q=G<g?c:t,O=0,X=0;X<Q;X++){const fe=ae-E;let me=0;const _e=fe>he?A:8*fe-7,Pe=-8&_e;let ye=0,be=0;for(;me<Pe;me+=8)be=B[E++],Z[O++]=128&be?le:ue,Z[O++]=64&be?le:ue,Z[O++]=32&be?le:ue,Z[O++]=16&be?le:ue,Z[O++]=8&be?le:ue,Z[O++]=4&be?le:ue,Z[O++]=2&be?le:ue,Z[O++]=1&be?le:ue;for(;me<_e;me++)0===ye&&(be=B[E++],ye=128),Z[O++]=be&ye?le:ue,ye>>=1}for(;O<ce;)Z[O++]=0;_.putImageData(k,0,G*c)}}else if(n.kind===x.ImageKind.RGBA_32BPP){const ae=!!(ne||re||q);for(X=0,se=A*c*4,G=0;G<g;G++){if(z.set(B.subarray(E,E+se)),E+=se,ae)for(let Z=0;Z<se;Z+=4)ne&&(z[Z+0]=ne[z[Z+0]]),re&&(z[Z+1]=re[z[Z+1]]),q&&(z[Z+2]=q[z[Z+2]]);_.putImageData(k,0,X),X+=c}if(G<m){if(se=A*t*4,z.set(B.subarray(E,E+se)),ae)for(let Z=0;Z<se;Z+=4)ne&&(z[Z+0]=ne[z[Z+0]]),re&&(z[Z+1]=re[z[Z+1]]),q&&(z[Z+2]=q[z[Z+2]]);_.putImageData(k,0,X)}}else{if(n.kind!==x.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${n.kind}`);{const ae=!!(ne||re||q);for(Q=c,se=A*Q,G=0;G<m;G++){for(G>=g&&(Q=t,se=A*Q),O=0,X=se;X--;)z[O++]=B[E++],z[O++]=B[E++],z[O++]=B[E++],z[O++]=255;if(ae)for(let Z=0;Z<O;Z+=4)ne&&(z[Z+0]=ne[z[Z+0]]),re&&(z[Z+1]=re[z[Z+1]]),q&&(z[Z+2]=q[z[Z+2]]);_.putImageData(k,0,G*c)}}}}function e(_,n){if(n.bitmap)return void _.drawImage(n.bitmap,0,0);const h=n.height,w=n.width,A=h%c,t=(h-A)/c,g=0===A?t:t+1,m=_.createImageData(w,c);let k=0;const E=n.data,O=m.data;for(let B=0;B<g;B++){const z=B<t?c:A;({srcPos:k}=(0,j.applyMaskImageData)({src:E,srcPos:k,dest:O,width:w,height:z})),_.putImageData(m,0,B*c)}}function i(_,n){const h=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let w=0,A=h.length;w<A;w++){const t=h[w];void 0!==_[t]&&(n[t]=_[t])}void 0!==_.setLineDash&&(n.setLineDash(_.getLineDash()),n.lineDashOffset=_.lineDashOffset)}function b(_,n){_.strokeStyle=_.fillStyle=n||"#000000",_.fillRule="nonzero",_.globalAlpha=1,_.lineWidth=1,_.lineCap="butt",_.lineJoin="miter",_.miterLimit=10,_.globalCompositeOperation="source-over",_.font="10px sans-serif",void 0!==_.setLineDash&&(_.setLineDash([]),_.lineDashOffset=0)}function R(_,n,h,w){const A=_.length;for(let t=3;t<A;t+=4){const g=_[t];if(0===g)_[t-3]=n,_[t-2]=h,_[t-1]=w;else if(g<255){const m=255-g;_[t-3]=_[t-3]*g+n*m>>8,_[t-2]=_[t-2]*g+h*m>>8,_[t-1]=_[t-1]*g+w*m>>8}}}function I(_,n,h){const w=_.length;for(let t=3;t<w;t+=4)n[t]=n[t]*(h?h[_[t]]:_[t])*.00392156862745098|0}function W(_,n,h){const w=_.length;for(let A=3;A<w;A+=4){const t=77*_[A-3]+152*_[A-2]+28*_[A-1];n[A]=h?n[A]*h[t>>8]>>8:n[A]*t>>16}}function K(_,n){const h=x.Util.singularValueDecompose2dScale(_);h[0]=Math.fround(h[0]),h[1]=Math.fround(h[1]);const w=Math.fround((globalThis.devicePixelRatio||1)*p.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==n?n:h[0]<=w||h[1]<=w}const C=["butt","round","square"],F=["miter","round","bevel"],N={},L={};class M{constructor(n,h,w,A,t,g,m,k){this.ctx=n,this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=h,this.objs=w,this.canvasFactory=A,this.imageLayer=t,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=g,this.cachedCanvases=new a(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=m,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=k?.background||null,this.foregroundColor=k?.foreground||null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(n,h=null){return"string"==typeof n?n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n):h}beginDrawing({transform:n,viewport:h,transparency:w=!1,background:A=null}){const t=this.ctx.canvas.width,g=this.ctx.canvas.height,m=A||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const k=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const E=this.backgroundColor=this.ctx.fillStyle;let O=!0,B=m;if(this.ctx.fillStyle=m,B=this.ctx.fillStyle,O="string"==typeof B&&/^#[0-9A-Fa-f]{6}$/.test(B),"#000000"===k&&"#ffffff"===E||k===E||!O)this.foregroundColor=this.backgroundColor=null;else{const[z,G,X]=(0,p.getRGB)(B),Q=ne=>(ne/=255)<=.03928?ne/12.92:((ne+.055)/1.055)**2.4,se=Math.round(.2126*Q(z)+.7152*Q(G)+.0722*Q(X));this.selectColor=(ne,re,q)=>{const te=.2126*Q(ne)+.7152*Q(re)+.0722*Q(q);return Math.round(te)===se?E:k}}}if(this.ctx.fillStyle=this.backgroundColor||m,this.ctx.fillRect(0,0,t,g),this.ctx.restore(),w){const k=this.cachedCanvases.getCanvas("transparent",t,g);this.compositeCtx=this.ctx,this.transparentCanvas=k.canvas,this.ctx=k.context,this.ctx.save(),this.ctx.transform(...(0,p.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),b(this.ctx,this.foregroundColor),n&&(this.ctx.transform(...n),this.outputScaleX=n[0],this.outputScaleY=n[0]),this.ctx.transform(...h.transform),this.viewportScale=h.scale,this.baseTransform=(0,p.getCurrentTransform)(this.ctx),this.imageLayer&&((0,p.deprecated)("The `imageLayer` functionality will be removed in the future."),this.imageLayer.beginLayout())}executeOperatorList(n,h,w,A){const t=n.argsArray,g=n.fnArray;let m=h||0;const k=t.length;if(k===m)return m;const E=k-m>10&&"function"==typeof w,O=E?Date.now()+15:0;let B=0;const z=this.commonObjs,G=this.objs;let X;for(;;){if(void 0!==A&&m===A.nextBreakPoint)return A.breakIt(m,w),m;if(X=g[m],X!==x.OPS.dependency)this[X].apply(this,t[m]);else for(const Q of t[m]){const se=Q.startsWith("g_")?z:G;if(!se.has(Q))return se.get(Q,w),m}if(m++,m===k)return m;if(E&&++B>10){if(Date.now()>O)return w(),m;B=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const n of this._cachedBitmapsMap.values()){for(const h of n.values())typeof HTMLCanvasElement<"u"&&h instanceof HTMLCanvasElement&&(h.width=h.height=0);n.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(n,h){const w=n.width,A=n.height;let O,B,t=Math.max(Math.hypot(h[0],h[1]),1),g=Math.max(Math.hypot(h[2],h[3]),1),m=w,k=A,E="prescale1";for(;t>2&&m>1||g>2&&k>1;){let z=m,G=k;t>2&&m>1&&(z=Math.ceil(m/2),t/=m/z),g>2&&k>1&&(G=Math.ceil(k/2),g/=k/G),O=this.cachedCanvases.getCanvas(E,z,G),B=O.context,B.clearRect(0,0,z,G),B.drawImage(n,0,0,m,k,0,0,z,G),n=O.canvas,m=z,k=G,E="prescale1"===E?"prescale2":"prescale1"}return{img:n,paintWidth:m,paintHeight:k}}_createMaskCanvas(n){const h=this.ctx,{width:w,height:A}=n,t=this.current.fillColor,g=this.current.patternFill,m=(0,p.getCurrentTransform)(h);let k,E,O,B;if((n.bitmap||n.data)&&n.count>1){const ce=n.bitmap||n.data.buffer,he=m.slice(0,4);E=JSON.stringify(g?he:[he,t]),k=this._cachedBitmapsMap.get(ce),k||(k=new Map,this._cachedBitmapsMap.set(ce,k));const le=k.get(E);if(le&&!g)return{canvas:le,offsetX:Math.round(Math.min(m[0],m[2])+m[4]),offsetY:Math.round(Math.min(m[1],m[3])+m[5])};O=le}O||(B=this.cachedCanvases.getCanvas("maskCanvas",w,A),e(B.context,n));let z=x.Util.transform(m,[1/w,0,0,-1/A,0,0]);z=x.Util.transform(z,[1,0,0,1,0,-A]);const G=x.Util.applyTransform([0,0],z),X=x.Util.applyTransform([w,A],z),Q=x.Util.normalizeRect([G[0],G[1],X[0],X[1]]),se=Math.round(Q[2]-Q[0])||1,ne=Math.round(Q[3]-Q[1])||1,re=this.cachedCanvases.getCanvas("fillCanvas",se,ne),q=re.context,te=Math.min(G[0],X[0]),ae=Math.min(G[1],X[1]);q.translate(-te,-ae),q.transform(...z),O||(O=this._scaleImage(B.canvas,(0,p.getCurrentTransformInverse)(q)),O=O.img,k&&g&&k.set(E,O)),q.imageSmoothingEnabled=K((0,p.getCurrentTransform)(q),n.interpolate),S(q,O,0,0,O.width,O.height,0,0,w,A),q.globalCompositeOperation="source-in";const Z=x.Util.transform((0,p.getCurrentTransformInverse)(q),[1,0,0,1,-te,-ae]);return q.fillStyle=g?t.getPattern(h,this,Z,D.PathType.FILL):t,q.fillRect(0,0,w,A),k&&!g&&(this.cachedCanvases.delete("fillCanvas"),k.set(E,re.canvas)),{canvas:re.canvas,offsetX:Math.round(te),offsetY:Math.round(ae)}}setLineWidth(n){n!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=n,this.ctx.lineWidth=n}setLineCap(n){this.ctx.lineCap=C[n]}setLineJoin(n){this.ctx.lineJoin=F[n]}setMiterLimit(n){this.ctx.miterLimit=n}setDash(n,h){const w=this.ctx;void 0!==w.setLineDash&&(w.setLineDash(n),w.lineDashOffset=h)}setRenderingIntent(n){}setFlatness(n){}setGState(n){for(let h=0,w=n.length;h<w;h++){const A=n[h],g=A[1];switch(A[0]){case"LW":this.setLineWidth(g);break;case"LC":this.setLineCap(g);break;case"LJ":this.setLineJoin(g);break;case"ML":this.setMiterLimit(g);break;case"D":this.setDash(g[0],g[1]);break;case"RI":this.setRenderingIntent(g);break;case"FL":this.setFlatness(g);break;case"Font":this.setFont(g[0],g[1]);break;case"CA":this.current.strokeAlpha=A[1];break;case"ca":this.current.fillAlpha=A[1],this.ctx.globalAlpha=A[1];break;case"BM":this.ctx.globalCompositeOperation=g;break;case"SMask":this.current.activeSMask=g?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=g}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const n=this.inSMaskMode;this.current.activeSMask&&!n?this.beginSMaskMode():!this.current.activeSMask&&n&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const A=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height);this.suspendedCtx=this.ctx,this.ctx=A.context;const t=this.ctx;t.setTransform(...(0,p.getCurrentTransform)(this.suspendedCtx)),i(this.suspendedCtx,t),function o(_,n){if(_._removeMirroring)throw new Error("Context is already forwarding operations.");_.__originalSave=_.save,_.__originalRestore=_.restore,_.__originalRotate=_.rotate,_.__originalScale=_.scale,_.__originalTranslate=_.translate,_.__originalTransform=_.transform,_.__originalSetTransform=_.setTransform,_.__originalResetTransform=_.resetTransform,_.__originalClip=_.clip,_.__originalMoveTo=_.moveTo,_.__originalLineTo=_.lineTo,_.__originalBezierCurveTo=_.bezierCurveTo,_.__originalRect=_.rect,_.__originalClosePath=_.closePath,_.__originalBeginPath=_.beginPath,_._removeMirroring=()=>{_.save=_.__originalSave,_.restore=_.__originalRestore,_.rotate=_.__originalRotate,_.scale=_.__originalScale,_.translate=_.__originalTranslate,_.transform=_.__originalTransform,_.setTransform=_.__originalSetTransform,_.resetTransform=_.__originalResetTransform,_.clip=_.__originalClip,_.moveTo=_.__originalMoveTo,_.lineTo=_.__originalLineTo,_.bezierCurveTo=_.__originalBezierCurveTo,_.rect=_.__originalRect,_.closePath=_.__originalClosePath,_.beginPath=_.__originalBeginPath,delete _._removeMirroring},_.save=function(){n.save(),this.__originalSave()},_.restore=function(){n.restore(),this.__originalRestore()},_.translate=function(w,A){n.translate(w,A),this.__originalTranslate(w,A)},_.scale=function(w,A){n.scale(w,A),this.__originalScale(w,A)},_.transform=function(w,A,t,g,m,k){n.transform(w,A,t,g,m,k),this.__originalTransform(w,A,t,g,m,k)},_.setTransform=function(w,A,t,g,m,k){n.setTransform(w,A,t,g,m,k),this.__originalSetTransform(w,A,t,g,m,k)},_.resetTransform=function(){n.resetTransform(),this.__originalResetTransform()},_.rotate=function(w){n.rotate(w),this.__originalRotate(w)},_.clip=function(w){n.clip(w),this.__originalClip(w)},_.moveTo=function(h,w){n.moveTo(h,w),this.__originalMoveTo(h,w)},_.lineTo=function(h,w){n.lineTo(h,w),this.__originalLineTo(h,w)},_.bezierCurveTo=function(h,w,A,t,g,m){n.bezierCurveTo(h,w,A,t,g,m),this.__originalBezierCurveTo(h,w,A,t,g,m)},_.rect=function(h,w,A,t){n.rect(h,w,A,t),this.__originalRect(h,w,A,t)},_.closePath=function(){n.closePath(),this.__originalClosePath()},_.beginPath=function(){n.beginPath(),this.__originalBeginPath()}}(t,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),i(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(n){this.current.activeSMask&&(n?(n[0]=Math.floor(n[0]),n[1]=Math.floor(n[1]),n[2]=Math.ceil(n[2]),n[3]=Math.ceil(n[3])):n=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function J(_,n,h,w){const A=w[0],t=w[1],g=w[2]-A,m=w[3]-t;0===g||0===m||(function U(_,n,h,w,A,t,g,m,k,E,O){const B=!!t,z=B?t[0]:0,G=B?t[1]:0,X=B?t[2]:0;let Q;Q="Luminosity"===A?W:I;const ne=Math.min(w,Math.ceil(1048576/h));for(let re=0;re<w;re+=ne){const q=Math.min(ne,w-re),te=_.getImageData(m-E,re+(k-O),h,q),ae=n.getImageData(m,re+k,h,q);B&&R(te.data,z,G,X),Q(te.data,ae.data,g),n.putImageData(ae,m,re+k)}}(n.context,h,g,m,n.subtype,n.backdrop,n.transferMap,A,t,n.offsetX,n.offsetY),_.save(),_.globalAlpha=1,_.globalCompositeOperation="source-over",_.setTransform(1,0,0,1,0,0),_.drawImage(h.canvas,0,0),_.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,n),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(i(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),i(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(n,h,w,A,t,g){this.ctx.transform(n,h,w,A,t,g),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(n,h,w){const A=this.ctx,t=this.current;let k,E,g=t.x,m=t.y;const O=(0,p.getCurrentTransform)(A),B=0===O[0]&&0===O[3]||0===O[1]&&0===O[2],z=B?w.slice(0):null;for(let G=0,X=0,Q=n.length;G<Q;G++)switch(0|n[G]){case x.OPS.rectangle:g=h[X++],m=h[X++];const se=h[X++],ne=h[X++],re=g+se,q=m+ne;A.moveTo(g,m),0===se||0===ne?A.lineTo(re,q):(A.lineTo(re,m),A.lineTo(re,q),A.lineTo(g,q)),B||t.updateRectMinMax(O,[g,m,re,q]),A.closePath();break;case x.OPS.moveTo:g=h[X++],m=h[X++],A.moveTo(g,m),B||t.updatePathMinMax(O,g,m);break;case x.OPS.lineTo:g=h[X++],m=h[X++],A.lineTo(g,m),B||t.updatePathMinMax(O,g,m);break;case x.OPS.curveTo:k=g,E=m,g=h[X+4],m=h[X+5],A.bezierCurveTo(h[X],h[X+1],h[X+2],h[X+3],g,m),t.updateCurvePathMinMax(O,k,E,h[X],h[X+1],h[X+2],h[X+3],g,m,z),X+=6;break;case x.OPS.curveTo2:k=g,E=m,A.bezierCurveTo(g,m,h[X],h[X+1],h[X+2],h[X+3]),t.updateCurvePathMinMax(O,k,E,g,m,h[X],h[X+1],h[X+2],h[X+3],z),g=h[X+2],m=h[X+3],X+=4;break;case x.OPS.curveTo3:k=g,E=m,g=h[X+2],m=h[X+3],A.bezierCurveTo(h[X],h[X+1],g,m,g,m),t.updateCurvePathMinMax(O,k,E,h[X],h[X+1],g,m,g,m,z),X+=4;break;case x.OPS.closePath:A.closePath()}B&&t.updateScalingPathMinMax(O,z),t.setCurrentPoint(g,m)}closePath(){this.ctx.closePath()}stroke(n){n=!(typeof n<"u")||n;const h=this.ctx,w=this.current.strokeColor;h.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof w&&w?.getPattern?(h.save(),h.strokeStyle=w.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),D.PathType.STROKE),this.rescaleAndStroke(!1),h.restore()):this.rescaleAndStroke(!0)),n&&this.consumePath(this.current.getClippedPathBoundingBox()),h.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(n){n=!(typeof n<"u")||n;const h=this.ctx,w=this.current.fillColor;let t=!1;this.current.patternFill&&(h.save(),h.fillStyle=w.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),D.PathType.FILL),t=!0);const g=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==g&&(this.pendingEOFill?(h.fill("evenodd"),this.pendingEOFill=!1):h.fill()),t&&h.restore(),n&&this.consumePath(g)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=N}eoClip(){this.pendingClip=L}beginText(){this.current.textMatrix=x.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const n=this.pendingTextPaths,h=this.ctx;if(void 0!==n){h.save(),h.beginPath();for(const w of n)h.setTransform(...w.transform),h.translate(w.x,w.y),w.addToPath(h,w.fontSize);h.restore(),h.clip(),h.beginPath(),delete this.pendingTextPaths}else h.beginPath()}setCharSpacing(n){this.current.charSpacing=n}setWordSpacing(n){this.current.wordSpacing=n}setHScale(n){this.current.textHScale=n/100}setLeading(n){this.current.leading=-n}setFont(n,h){const w=this.commonObjs.get(n),A=this.current;if(!w)throw new Error(`Can't find font for ${n}`);if(A.fontMatrix=w.fontMatrix||x.FONT_IDENTITY_MATRIX,(0===A.fontMatrix[0]||0===A.fontMatrix[3])&&(0,x.warn)("Invalid font matrix for font "+n),h<0?(h=-h,A.fontDirection=-1):A.fontDirection=1,this.current.font=w,this.current.fontSize=h,w.isType3Font)return;let g="normal";w.black?g="900":w.bold&&(g="bold");const m=w.italic?"italic":"normal",k=`"${w.loadedName||"sans-serif"}", ${w.fallbackName}`;let E=h;h<16?E=16:h>100&&(E=100),this.current.fontSizeScale=h/E,this.ctx.font=`${m} ${g} ${E}px ${k}`}setTextRenderingMode(n){this.current.textRenderingMode=n}setTextRise(n){this.current.textRise=n}moveText(n,h){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=h}setLeadingMoveText(n,h){this.setLeading(-h),this.moveText(n,h)}setTextMatrix(n,h,w,A,t,g){this.current.textMatrix=[n,h,w,A,t,g],this.current.textMatrixScale=Math.hypot(n,h),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(n,h,w,A){const t=this.ctx,g=this.current,m=g.font,k=g.textRenderingMode,E=g.fontSize/g.fontSizeScale,O=k&x.TextRenderingMode.FILL_STROKE_MASK,B=!!(k&x.TextRenderingMode.ADD_TO_PATH_FLAG),z=g.patternFill&&!m.missingFile;let G;(m.disableFontFace||B||z)&&(G=m.getPathGenerator(this.commonObjs,n)),m.disableFontFace||z?(t.save(),t.translate(h,w),t.beginPath(),G(t,E),A&&t.setTransform(...A),(O===x.TextRenderingMode.FILL||O===x.TextRenderingMode.FILL_STROKE)&&t.fill(),(O===x.TextRenderingMode.STROKE||O===x.TextRenderingMode.FILL_STROKE)&&t.stroke(),t.restore()):((O===x.TextRenderingMode.FILL||O===x.TextRenderingMode.FILL_STROKE)&&t.fillText(n,h,w),(O===x.TextRenderingMode.STROKE||O===x.TextRenderingMode.FILL_STROKE)&&t.strokeText(n,h,w)),B&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,p.getCurrentTransform)(t),x:h,y:w,fontSize:E,addToPath:G})}get isFontSubpixelAAEnabled(){const{context:n}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);n.scale(1.5,1),n.fillText("I",0,10);const h=n.getImageData(0,0,10,10).data;let w=!1;for(let A=3;A<h.length;A+=4)if(h[A]>0&&h[A]<255){w=!0;break}return(0,x.shadow)(this,"isFontSubpixelAAEnabled",w)}showText(n){const h=this.current,w=h.font;if(w.isType3Font)return this.showType3Text(n);const A=h.fontSize;if(0===A)return;const t=this.ctx,g=h.fontSizeScale,m=h.charSpacing,k=h.wordSpacing,E=h.fontDirection,O=h.textHScale*E,B=n.length,z=w.vertical,G=z?1:-1,X=w.defaultVMetrics,Q=A*h.fontMatrix[0],se=h.textRenderingMode===x.TextRenderingMode.FILL&&!w.disableFontFace&&!h.patternFill;let ne;if(t.save(),t.transform(...h.textMatrix),t.translate(h.x,h.y+h.textRise),t.scale(O,E>0?-1:1),h.patternFill){t.save();const Z=h.fillColor.getPattern(t,this,(0,p.getCurrentTransformInverse)(t),D.PathType.FILL);ne=(0,p.getCurrentTransform)(t),t.restore(),t.fillStyle=Z}let re=h.lineWidth;const q=h.textMatrixScale;if(0===q||0===re){const Z=h.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;(Z===x.TextRenderingMode.STROKE||Z===x.TextRenderingMode.FILL_STROKE)&&(re=this.getSinglePixelWidth())}else re/=q;1!==g&&(t.scale(g,g),re/=g),t.lineWidth=re;let ae,te=0;for(ae=0;ae<B;++ae){const Z=n[ae];if("number"==typeof Z){te+=G*Z*A/1e3;continue}let ce=!1;const he=(Z.isSpace?k:0)+m,le=Z.fontChar,ue=Z.accent;let fe,me,Pe,_e=Z.width;if(z){const ye=Z.vmetric||X,be=-(Z.vmetric?ye[1]:.5*_e)*Q;_e=ye?-ye[0]:_e,fe=be/g,me=(te+ye[2]*Q)/g}else fe=te/g,me=0;if(w.remeasure&&_e>0){const ye=1e3*t.measureText(le).width/A*g;if(_e<ye&&this.isFontSubpixelAAEnabled){const be=_e/ye;ce=!0,t.save(),t.scale(be,1),fe/=be}else _e!==ye&&(fe+=(_e-ye)/2e3*A/g)}this.contentVisible&&(Z.isInFont||w.missingFile)&&(se&&!ue?t.fillText(le,fe,me):(this.paintChar(le,fe,me,ne),ue&&this.paintChar(ue.fontChar,fe+A*ue.offset.x/g,me-A*ue.offset.y/g,ne))),Pe=z?_e*Q-he*E:_e*Q+he*E,te+=Pe,ce&&t.restore()}z?h.y-=te:h.x+=te*O,t.restore(),this.compose()}showType3Text(n){const h=this.ctx,w=this.current,A=w.font,t=w.fontSize,g=w.fontDirection,m=A.vertical?1:-1,k=w.charSpacing,E=w.wordSpacing,O=w.textHScale*g,B=w.fontMatrix||x.FONT_IDENTITY_MATRIX,z=n.length;let X,Q,se,ne;if(w.textRenderingMode!==x.TextRenderingMode.INVISIBLE&&0!==t){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,h.save(),h.transform(...w.textMatrix),h.translate(w.x,w.y),h.scale(O,g),X=0;X<z;++X){if(Q=n[X],"number"==typeof Q){ne=m*Q*t/1e3,this.ctx.translate(ne,0),w.x+=ne*O;continue}const re=(Q.isSpace?E:0)+k,q=A.charProcOperatorList[Q.operatorListId];q?(this.contentVisible&&(this.processingType3=Q,this.save(),h.scale(t,t),h.transform(...B),this.executeOperatorList(q),this.restore()),se=x.Util.applyTransform([Q.width,0],B)[0]*t+re,h.translate(se,0),w.x+=se*O):(0,x.warn)(`Type3 character "${Q.operatorListId}" is not available.`)}h.restore(),this.processingType3=null}}setCharWidth(n,h){}setCharWidthAndBounds(n,h,w,A,t,g){this.ctx.rect(w,A,t-w,g-A),this.ctx.clip(),this.endPath()}getColorN_Pattern(n){let h;if("TilingPattern"===n[0]){const w=n[1],A=this.baseTransform||(0,p.getCurrentTransform)(this.ctx);h=new D.TilingPattern(n,w,this.ctx,{createCanvasGraphics:g=>new M(g,this.commonObjs,this.objs,this.canvasFactory)},A)}else h=this._getPattern(n[1],n[2]);return h}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(n,h,w){const A=this.selectColor?.(n,h,w)||x.Util.makeHexColor(n,h,w);this.ctx.strokeStyle=A,this.current.strokeColor=A}setFillRGBColor(n,h,w){const A=this.selectColor?.(n,h,w)||x.Util.makeHexColor(n,h,w);this.ctx.fillStyle=A,this.current.fillColor=A,this.current.patternFill=!1}_getPattern(n,h=null){let w;return this.cachedPatterns.has(n)?w=this.cachedPatterns.get(n):(w=(0,D.getShadingPattern)(this.objs.get(n)),this.cachedPatterns.set(n,w)),h&&(w.matrix=h),w}shadingFill(n){if(!this.contentVisible)return;const h=this.ctx;this.save();const w=this._getPattern(n);h.fillStyle=w.getPattern(h,this,(0,p.getCurrentTransformInverse)(h),D.PathType.SHADING);const A=(0,p.getCurrentTransformInverse)(h);if(A){const t=h.canvas,g=t.width,m=t.height,k=x.Util.applyTransform([0,0],A),E=x.Util.applyTransform([0,m],A),O=x.Util.applyTransform([g,0],A),B=x.Util.applyTransform([g,m],A),z=Math.min(k[0],E[0],O[0],B[0]),G=Math.min(k[1],E[1],O[1],B[1]),X=Math.max(k[0],E[0],O[0],B[0]),Q=Math.max(k[1],E[1],O[1],B[1]);this.ctx.fillRect(z,G,X-z,Q-G)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,x.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,x.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(n,h){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&6===n.length&&this.transform(...n),this.baseTransform=(0,p.getCurrentTransform)(this.ctx),h)&&(this.ctx.rect(h[0],h[1],h[2]-h[0],h[3]-h[1]),this.current.updateRectMinMax((0,p.getCurrentTransform)(this.ctx),h),this.clip(),this.endPath())}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(n){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const h=this.ctx;n.isolated||(0,x.info)("TODO: Support non-isolated groups."),n.knockout&&(0,x.warn)("Knockout groups not supported.");const w=(0,p.getCurrentTransform)(h);if(n.matrix&&h.transform(...n.matrix),!n.bbox)throw new Error("Bounding box is required.");let A=x.Util.getAxialAlignedBoundingBox(n.bbox,(0,p.getCurrentTransform)(h));A=x.Util.intersect(A,[0,0,h.canvas.width,h.canvas.height])||[0,0,0,0];const g=Math.floor(A[0]),m=Math.floor(A[1]);let k=Math.max(Math.ceil(A[2])-g,1),E=Math.max(Math.ceil(A[3])-m,1),O=1,B=1;k>f&&(O=k/f,k=f),E>f&&(B=E/f,E=f),this.current.startNewPathAndClipBox([0,0,k,E]);let z="groupAt"+this.groupLevel;n.smask&&(z+="_smask_"+this.smaskCounter++%2);const G=this.cachedCanvases.getCanvas(z,k,E),X=G.context;X.scale(1/O,1/B),X.translate(-g,-m),X.transform(...w),n.smask?this.smaskStack.push({canvas:G.canvas,context:X,offsetX:g,offsetY:m,scaleX:O,scaleY:B,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(h.setTransform(1,0,0,1,0,0),h.translate(g,m),h.scale(O,B),h.save()),i(h,X),this.ctx=X,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(h),this.groupLevel++}endGroup(n){if(!this.contentVisible)return;this.groupLevel--;const h=this.ctx,w=this.groupStack.pop();if(this.ctx=w,this.ctx.imageSmoothingEnabled=!1,n.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const A=(0,p.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...A);const t=x.Util.getAxialAlignedBoundingBox([0,0,h.canvas.width,h.canvas.height],A);this.ctx.drawImage(h.canvas,0,0),this.ctx.restore(),this.compose(t)}}beginAnnotation(n,h,w,A,t){if(this.#e(),b(this.ctx,this.foregroundColor),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(h)&&4===h.length){const g=h[2]-h[0],m=h[3]-h[1];if(t&&this.annotationCanvasMap){(w=w.slice())[4]-=h[0],w[5]-=h[1],(h=h.slice())[0]=h[1]=0,h[2]=g,h[3]=m;const[k,E]=x.Util.singularValueDecompose2dScale((0,p.getCurrentTransform)(this.ctx)),{viewportScale:O}=this,B=Math.ceil(g*this.outputScaleX*O),z=Math.ceil(m*this.outputScaleY*O);this.annotationCanvas=this.canvasFactory.create(B,z);const{canvas:G,context:X}=this.annotationCanvas;this.annotationCanvasMap.set(n,G),this.annotationCanvas.savedCtx=this.ctx,this.ctx=X,this.ctx.setTransform(k,0,0,-E,0,m*E),b(this.ctx,this.foregroundColor)}else b(this.ctx,this.foregroundColor),this.ctx.rect(h[0],h[1],g,m),this.ctx.clip(),this.endPath()}this.current=new y(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...w),this.transform(...A)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(n){if(!this.contentVisible)return;const h=n.count;(n=this.getObject(n.data,n)).count=h;const w=this.ctx,A=this.processingType3;if(A&&(void 0===A.compiled&&(A.compiled=function v(_){const{width:n,height:h}=_;if(n>P||h>P)return null;const A=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),t=n+1;let m,k,E,g=new Uint8Array(t*(h+1));const O=n+7&-8;let B=new Uint8Array(O*h),z=0;for(const ne of _.data){let re=128;for(;re>0;)B[z++]=ne&re?0:255,re>>=1}let G=0;for(z=0,0!==B[z]&&(g[0]=1,++G),k=1;k<n;k++)B[z]!==B[z+1]&&(g[k]=B[z]?2:1,++G),z++;for(0!==B[z]&&(g[k]=2,++G),m=1;m<h;m++){z=m*O,E=m*t,B[z-O]!==B[z]&&(g[E]=B[z]?1:8,++G);let ne=(B[z]?4:0)+(B[z-O]?8:0);for(k=1;k<n;k++)ne=(ne>>2)+(B[z+1]?4:0)+(B[z-O+1]?8:0),A[ne]&&(g[E+k]=A[ne],++G),z++;if(B[z-O]!==B[z]&&(g[E+k]=B[z]?2:4,++G),G>1e3)return null}for(z=O*(h-1),E=m*t,0!==B[z]&&(g[E]=8,++G),k=1;k<n;k++)B[z]!==B[z+1]&&(g[E+k]=B[z]?4:8,++G),z++;if(0!==B[z]&&(g[E+k]=4,++G),G>1e3)return null;const X=new Int32Array([0,t,-1,0,-t,0,0,0,1]),Q=new Path2D;for(m=0;G&&m<=h;m++){let ne=m*t;const re=ne+n;for(;ne<re&&!g[ne];)ne++;if(ne===re)continue;Q.moveTo(ne%t,m);const q=ne;let te=g[ne];do{const ae=X[te];do{ne+=ae}while(!g[ne]);const Z=g[ne];5!==Z&&10!==Z?(te=Z,g[ne]=0):(te=Z&51*te>>4,g[ne]&=te>>2|te<<2),Q.lineTo(ne%t,ne/t|0),g[ne]||--G}while(q!==ne);--m}return B=null,g=null,function(ne){ne.save(),ne.scale(1/n,-1/h),ne.translate(0,-h),ne.fill(Q),ne.beginPath(),ne.restore()}}(n)),A.compiled))return void A.compiled(w);const t=this._createMaskCanvas(n),g=t.canvas;w.save(),w.setTransform(1,0,0,1,0,0),w.drawImage(g,t.offsetX,t.offsetY),w.restore(),this.compose()}paintImageMaskXObjectRepeat(n,h,w=0,A=0,t,g){if(!this.contentVisible)return;n=this.getObject(n.data,n);const m=this.ctx;m.save();const k=(0,p.getCurrentTransform)(m);m.transform(h,w,A,t,0,0);const E=this._createMaskCanvas(n);m.setTransform(1,0,0,1,0,0);for(let O=0,B=g.length;O<B;O+=2){const z=x.Util.transform(k,[h,w,A,t,g[O],g[O+1]]),[G,X]=x.Util.applyTransform([0,0],z);m.drawImage(E.canvas,G,X)}m.restore(),this.compose()}paintImageMaskXObjectGroup(n){if(!this.contentVisible)return;const h=this.ctx,w=this.current.fillColor,A=this.current.patternFill;for(const t of n){const{data:g,width:m,height:k,transform:E}=t,O=this.cachedCanvases.getCanvas("maskCanvas",m,k),B=O.context;B.save(),e(B,this.getObject(g,t)),B.globalCompositeOperation="source-in",B.fillStyle=A?w.getPattern(B,this,(0,p.getCurrentTransformInverse)(h),D.PathType.FILL):w,B.fillRect(0,0,m,k),B.restore(),h.save(),h.transform(...E),h.scale(1,-1),S(h,O.canvas,0,0,m,k,0,-1,1,1),h.restore()}this.compose()}paintImageXObject(n){if(!this.contentVisible)return;const h=this.getObject(n);h?this.paintInlineImageXObject(h):(0,x.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(n,h,w,A){if(!this.contentVisible)return;const t=this.getObject(n);if(!t)return void(0,x.warn)("Dependent image isn't ready yet");const g=t.width,m=t.height,k=[];for(let E=0,O=A.length;E<O;E+=2)k.push({transform:[h,0,0,w,A[E],A[E+1]],x:0,y:0,w:g,h:m});this.paintInlineImageXObjectGroup(t,k)}paintInlineImageXObject(n){if(!this.contentVisible)return;const h=n.width,w=n.height,A=this.ctx;let t;if(this.save(),A.scale(1/h,-1/w),"function"==typeof HTMLElement&&n instanceof HTMLElement||!n.data)t=n;else{const E=this.cachedCanvases.getCanvas("inlineImage",h,w);d(E.context,n,this.current.transferMaps),t=E.canvas}const g=this._scaleImage(t,(0,p.getCurrentTransformInverse)(A));A.imageSmoothingEnabled=K((0,p.getCurrentTransform)(A),n.interpolate);const[m,k]=S(A,g.img,0,0,g.paintWidth,g.paintHeight,0,-w,h,w);if(this.imageLayer){const[E,O]=x.Util.applyTransform([0,-w],(0,p.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:n,left:E,top:O,width:m,height:k})}this.compose(),this.restore()}paintInlineImageXObjectGroup(n,h){if(!this.contentVisible)return;const w=this.ctx,A=n.width,t=n.height,g=this.cachedCanvases.getCanvas("inlineImage",A,t);d(g.context,n,this.current.transferMaps);for(const k of h){if(w.save(),w.transform(...k.transform),w.scale(1,-1),S(w,g.canvas,k.x,k.y,k.w,k.h,0,-1,1,1),this.imageLayer){const[E,O]=x.Util.applyTransform([k.x,k.y],(0,p.getCurrentTransform)(this.ctx));this.imageLayer.appendImage({imgData:n,left:E,top:O,width:A,height:t})}w.restore()}this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(n){}markPointProps(n,h){}beginMarkedContent(n){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(n,h){this.markedContentStack.push("OC"===n?{visible:this.optionalContentConfig.isVisible(h)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(n){const h=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const w=this.ctx;this.pendingClip&&(h||(this.pendingClip===L?w.clip("evenodd"):w.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),w.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const n=(0,p.getCurrentTransform)(this.ctx);if(0===n[1]&&0===n[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(n[0]),Math.abs(n[3]));else{const h=Math.abs(n[0]*n[3]-n[2]*n[1]),w=Math.hypot(n[0],n[2]),A=Math.hypot(n[1],n[3]);this._cachedGetSinglePixelWidth=Math.max(w,A)/h}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:n}=this.current,h=(0,p.getCurrentTransform)(this.ctx);let w,A;if(0===h[1]&&0===h[2]){const t=Math.abs(h[0]),g=Math.abs(h[3]);if(0===n)w=1/t,A=1/g;else{const m=t*n,k=g*n;w=m<1?1/m:1,A=k<1?1/k:1}}else{const t=Math.abs(h[0]*h[3]-h[2]*h[1]),g=Math.hypot(h[0],h[1]),m=Math.hypot(h[2],h[3]);if(0===n)w=m/t,A=g/t;else{const k=n*t;w=m>k?m/k:1,A=g>k?g/k:1}}this._cachedScaleForStroking=[w,A]}return this._cachedScaleForStroking}rescaleAndStroke(n){const{ctx:h}=this,{lineWidth:w}=this.current,[A,t]=this.getScaleForStroking();if(h.lineWidth=w||1,1===A&&1===t)return void h.stroke();let g,m,k;n&&(g=(0,p.getCurrentTransform)(h),m=h.getLineDash().slice(),k=h.lineDashOffset),h.scale(A,t);const E=Math.max(A,t);h.setLineDash(h.getLineDash().map(O=>O/E)),h.lineDashOffset/=E,h.stroke(),n&&(h.setTransform(...g),h.setLineDash(m),h.lineDashOffset=k)}isContentVisible(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}}u.CanvasGraphics=M;for(const _ in x.OPS)void 0!==M.prototype[_]&&(M.prototype[x.OPS[_]]=M.prototype[_])},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TilingPattern=u.PathType=void 0,u.getShadingPattern=function c(S){switch(S[0]){case"RadialAxial":return new s(S);case"Mesh":return new l(S);case"Dummy":return new P}throw new Error(`Unknown IR type: ${S[0]}`)};var p=V(1),x=V(8),D=V(3);const j={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function H(S,v){if(!v||D.isNodeJS)return;const y=v[2]-v[0],d=v[3]-v[1],e=new Path2D;e.rect(v[0],v[1],y,d),S.clip(e)}u.PathType=j;class T{constructor(){this.constructor===T&&(0,p.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,p.unreachable)("Abstract method `getPattern` called.")}}class s extends T{constructor(v){super(),this._type=v[1],this._bbox=v[2],this._colorStops=v[3],this._p0=v[4],this._p1=v[5],this._r0=v[6],this._r1=v[7],this.matrix=null}_createGradient(v){let y;"axial"===this._type?y=v.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(y=v.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const d of this._colorStops)y.addColorStop(d[0],d[1]);return y}getPattern(v,y,d,e){let i;if(e===j.STROKE||e===j.FILL){const b=y.current.getClippedPathBoundingBox(e,(0,x.getCurrentTransform)(v))||[0,0,0,0],R=Math.ceil(b[2]-b[0])||1,I=Math.ceil(b[3]-b[1])||1,W=y.cachedCanvases.getCanvas("pattern",R,I,!0),U=W.context;U.clearRect(0,0,U.canvas.width,U.canvas.height),U.beginPath(),U.rect(0,0,U.canvas.width,U.canvas.height),U.translate(-b[0],-b[1]),d=p.Util.transform(d,[1,0,0,1,b[0],b[1]]),U.transform(...y.baseTransform),this.matrix&&U.transform(...this.matrix),H(U,this._bbox),U.fillStyle=this._createGradient(U),U.fill(),i=v.createPattern(W.canvas,"no-repeat");const J=new DOMMatrix(d);try{i.setTransform(J)}catch(K){(0,p.warn)(`RadialAxialShadingPattern.getPattern: "${K?.message}".`)}}else H(v,this._bbox),i=this._createGradient(v);return i}}function f(S,v,y,d,e,i,b,R){const I=v.coords,W=v.colors,U=S.data,J=4*S.width;let K;I[y+1]>I[d+1]&&(K=y,y=d,d=K,K=i,i=b,b=K),I[d+1]>I[e+1]&&(K=d,d=e,e=K,K=b,b=R,R=K),I[y+1]>I[d+1]&&(K=y,y=d,d=K,K=i,i=b,b=K);const C=(I[y]+v.offsetX)*v.scaleX,F=(I[y+1]+v.offsetY)*v.scaleY,N=(I[d]+v.offsetX)*v.scaleX,L=(I[d+1]+v.offsetY)*v.scaleY,M=(I[e]+v.offsetX)*v.scaleX,_=(I[e+1]+v.offsetY)*v.scaleY;if(F>=_)return;const n=W[i],h=W[i+1],w=W[i+2],A=W[b],t=W[b+1],g=W[b+2],m=W[R],k=W[R+1],E=W[R+2],O=Math.round(F),B=Math.round(_);let z,G,X,Q,se,ne,re,q;for(let te=O;te<=B;te++){if(te<L){let le;le=te<F?0:(F-te)/(F-L),z=C-(C-N)*le,G=n-(n-A)*le,X=h-(h-t)*le,Q=w-(w-g)*le}else{let le;le=te>_?1:L===_?0:(L-te)/(L-_),z=N-(N-M)*le,G=A-(A-m)*le,X=t-(t-k)*le,Q=g-(g-E)*le}let ae;ae=te<F?0:te>_?1:(F-te)/(F-_),se=C-(C-M)*ae,ne=n-(n-m)*ae,re=h-(h-k)*ae,q=w-(w-E)*ae;const Z=Math.round(Math.min(z,se)),ce=Math.round(Math.max(z,se));let he=J*te+4*Z;for(let le=Z;le<=ce;le++)ae=(z-le)/(z-se),ae<0?ae=0:ae>1&&(ae=1),U[he++]=G-(G-ne)*ae|0,U[he++]=X-(X-re)*ae|0,U[he++]=Q-(Q-q)*ae|0,U[he++]=255}}function r(S,v,y){const d=v.coords,e=v.colors;let i,b;switch(v.type){case"lattice":const R=v.verticesPerRow,I=Math.floor(d.length/R)-1,W=R-1;for(i=0;i<I;i++){let U=i*R;for(let J=0;J<W;J++,U++)f(S,y,d[U],d[U+1],d[U+R],e[U],e[U+1],e[U+R]),f(S,y,d[U+R+1],d[U+1],d[U+R],e[U+R+1],e[U+1],e[U+R])}break;case"triangles":for(i=0,b=d.length;i<b;i+=3)f(S,y,d[i],d[i+1],d[i+2],e[i],e[i+1],e[i+2]);break;default:throw new Error("illegal figure")}}class l extends T{constructor(v){super(),this._coords=v[2],this._colors=v[3],this._figures=v[4],this._bounds=v[5],this._bbox=v[7],this._background=v[8],this.matrix=null}_createMeshCanvas(v,y,d){const R=Math.floor(this._bounds[0]),I=Math.floor(this._bounds[1]),W=Math.ceil(this._bounds[2])-R,U=Math.ceil(this._bounds[3])-I,J=Math.min(Math.ceil(Math.abs(W*v[0]*1.1)),3e3),K=Math.min(Math.ceil(Math.abs(U*v[1]*1.1)),3e3),C=W/J,F=U/K,N={coords:this._coords,colors:this._colors,offsetX:-R,offsetY:-I,scaleX:1/C,scaleY:1/F},_=d.getCanvas("mesh",J+4,K+4,!1),n=_.context,h=n.createImageData(J,K);if(y){const A=h.data;for(let t=0,g=A.length;t<g;t+=4)A[t]=y[0],A[t+1]=y[1],A[t+2]=y[2],A[t+3]=255}for(const A of this._figures)r(h,A,N);return n.putImageData(h,2,2),{canvas:_.canvas,offsetX:R-2*C,offsetY:I-2*F,scaleX:C,scaleY:F}}getPattern(v,y,d,e){let i;if(H(v,this._bbox),e===j.SHADING)i=p.Util.singularValueDecompose2dScale((0,x.getCurrentTransform)(v));else if(i=p.Util.singularValueDecompose2dScale(y.baseTransform),this.matrix){const R=p.Util.singularValueDecompose2dScale(this.matrix);i=[i[0]*R[0],i[1]*R[1]]}const b=this._createMeshCanvas(i,e===j.SHADING?null:this._background,y.cachedCanvases);return e!==j.SHADING&&(v.setTransform(...y.baseTransform),this.matrix&&v.transform(...this.matrix)),v.translate(b.offsetX,b.offsetY),v.scale(b.scaleX,b.scaleY),v.createPattern(b.canvas,"no-repeat")}}class P extends T{getPattern(){return"hotpink"}}class a{static get MAX_PATTERN_SIZE(){return(0,p.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(v,y,d,e,i){this.operatorList=v[2],this.matrix=v[3]||[1,0,0,1,0,0],this.bbox=v[4],this.xstep=v[5],this.ystep=v[6],this.paintType=v[7],this.tilingType=v[8],this.color=y,this.ctx=d,this.canvasGraphicsFactory=e,this.baseTransform=i}createPatternCanvas(v){const y=this.operatorList,d=this.bbox,e=this.xstep,i=this.ystep,b=this.paintType,I=this.color,W=this.canvasGraphicsFactory;(0,p.info)("TilingType: "+this.tilingType);const U=d[0],J=d[1],K=d[2],C=d[3],F=p.Util.singularValueDecompose2dScale(this.matrix),N=p.Util.singularValueDecompose2dScale(this.baseTransform),L=[F[0]*N[0],F[1]*N[1]],M=this.getSizeAndScale(e,this.ctx.canvas.width,L[0]),_=this.getSizeAndScale(i,this.ctx.canvas.height,L[1]),n=v.cachedCanvases.getCanvas("pattern",M.size,_.size,!0),h=n.context,w=W.createCanvasGraphics(h);w.groupLevel=v.groupLevel,this.setFillAndStrokeStyleToContext(w,b,I);let A=U,t=J,g=K,m=C;return U<0&&(A=0,g+=Math.abs(U)),J<0&&(t=0,m+=Math.abs(J)),h.translate(-M.scale*A,-_.scale*t),w.transform(M.scale,0,0,_.scale,0,0),h.save(),this.clipBbox(w,A,t,g,m),w.baseTransform=(0,x.getCurrentTransform)(w.ctx),w.executeOperatorList(y),w.endDrawing(),{canvas:n.canvas,scaleX:M.scale,scaleY:_.scale,offsetX:A,offsetY:t}}getSizeAndScale(v,y,d){v=Math.abs(v);const e=Math.max(a.MAX_PATTERN_SIZE,y);let i=Math.ceil(v*d);return i>=e?i=e:d=i/v,{scale:d,size:i}}clipBbox(v,y,d,e,i){v.ctx.rect(y,d,e-y,i-d),v.current.updateRectMinMax((0,x.getCurrentTransform)(v.ctx),[y,d,e,i]),v.clip(),v.endPath()}setFillAndStrokeStyleToContext(v,y,d){const e=v.ctx,i=v.current;switch(y){case 1:const b=this.ctx;e.fillStyle=b.fillStyle,e.strokeStyle=b.strokeStyle,i.fillColor=b.fillStyle,i.strokeColor=b.strokeStyle;break;case 2:const R=p.Util.makeHexColor(d[0],d[1],d[2]);e.fillStyle=R,e.strokeStyle=R,i.fillColor=R,i.strokeColor=R;break;default:throw new p.FormatError(`Unsupported paint type: ${y}`)}}getPattern(v,y,d,e){let i=d;e!==j.SHADING&&(i=p.Util.transform(i,y.baseTransform),this.matrix&&(i=p.Util.transform(i,this.matrix)));const b=this.createPatternCanvas(y);let R=new DOMMatrix(i);R=R.translate(b.offsetX,b.offsetY),R=R.scale(1/b.scaleX,1/b.scaleY);const I=v.createPattern(b.canvas,"repeat");try{I.setTransform(R)}catch(W){(0,p.warn)(`TilingPattern.getPattern: "${W?.message}".`)}return I}}u.TilingPattern=a},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.applyMaskImageData=function x({src:D,srcPos:j=0,dest:H,destPos:T=0,width:s,height:f,inverseDecode:r=!1}){const l=p.FeatureTest.isLittleEndian?4278190080:255,[P,c]=r?[0,l]:[l,0],o=s>>3,a=7&s,S=D.length;H=new Uint32Array(H.buffer);for(let v=0;v<f;v++){for(const d=j+o;j<d;j++){const e=j<S?D[j]:255;H[T++]=128&e?c:P,H[T++]=64&e?c:P,H[T++]=32&e?c:P,H[T++]=16&e?c:P,H[T++]=8&e?c:P,H[T++]=4&e?c:P,H[T++]=2&e?c:P,H[T++]=1&e?c:P}if(0===a)continue;const y=j<S?D[j++]:255;for(let d=0;d<a;d++)H[T++]=y&1<<7-d?c:P}return{srcPos:j,destPos:T}};var p=V(1)},(ee,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.GlobalWorkerOptions=void 0;const V=Object.create(null);u.GlobalWorkerOptions=V,V.workerPort=void 0===V.workerPort?null:V.workerPort,V.workerSrc=void 0===V.workerSrc?"":V.workerSrc},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.MessageHandler=void 0;var p=V(1);function j(T){switch(T instanceof Error||"object"==typeof T&&null!==T||(0,p.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),T.name){case"AbortException":return new p.AbortException(T.message);case"MissingPDFException":return new p.MissingPDFException(T.message);case"PasswordException":return new p.PasswordException(T.message,T.code);case"UnexpectedResponseException":return new p.UnexpectedResponseException(T.message,T.status);case"UnknownErrorException":return new p.UnknownErrorException(T.message,T.details);default:return new p.UnknownErrorException(T.message,T.toString())}}u.MessageHandler=class H{constructor(s,f,r){this.sourceName=s,this.targetName=f,this.comObj=r,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=l=>{const P=l.data;if(P.targetName!==this.sourceName)return;if(P.stream)return void this._processStreamMessage(P);if(P.callback){const o=P.callbackId,a=this.callbackCapabilities[o];if(!a)throw new Error(`Cannot resolve callback ${o}`);if(delete this.callbackCapabilities[o],1===P.callback)a.resolve(P.data);else{if(2!==P.callback)throw new Error("Unexpected callback case");a.reject(j(P.reason))}return}const c=this.actionHandler[P.action];if(!c)throw new Error(`Unknown action from worker: ${P.action}`);if(P.callbackId){const o=this.sourceName,a=P.sourceName;new Promise(function(S){S(c(P.data))}).then(function(S){r.postMessage({sourceName:o,targetName:a,callback:1,callbackId:P.callbackId,data:S})},function(S){r.postMessage({sourceName:o,targetName:a,callback:2,callbackId:P.callbackId,reason:j(S)})})}else P.streamId?this._createStreamSink(P):c(P.data)},r.addEventListener("message",this._onComObjOnMessage)}on(s,f){const r=this.actionHandler;if(r[s])throw new Error(`There is already an actionName called "${s}"`);r[s]=f}send(s,f,r){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:s,data:f},r)}sendWithPromise(s,f,r){const l=this.callbackId++,P=(0,p.createPromiseCapability)();this.callbackCapabilities[l]=P;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:s,callbackId:l,data:f},r)}catch(c){P.reject(c)}return P.promise}sendWithStream(s,f,r,l){const P=this.streamId++,c=this.sourceName,o=this.targetName,a=this.comObj;return new ReadableStream({start:S=>{const v=(0,p.createPromiseCapability)();return this.streamControllers[P]={controller:S,startCall:v,pullCall:null,cancelCall:null,isClosed:!1},a.postMessage({sourceName:c,targetName:o,action:s,streamId:P,data:f,desiredSize:S.desiredSize},l),v.promise},pull:S=>{const v=(0,p.createPromiseCapability)();return this.streamControllers[P].pullCall=v,a.postMessage({sourceName:c,targetName:o,stream:6,streamId:P,desiredSize:S.desiredSize}),v.promise},cancel:S=>{(0,p.assert)(S instanceof Error,"cancel must have a valid reason");const v=(0,p.createPromiseCapability)();return this.streamControllers[P].cancelCall=v,this.streamControllers[P].isClosed=!0,a.postMessage({sourceName:c,targetName:o,stream:1,streamId:P,reason:j(S)}),v.promise}},r)}_createStreamSink(s){const f=s.streamId,r=this.sourceName,l=s.sourceName,P=this.comObj,c=this,o=this.actionHandler[s.action],a={enqueue(S,v=1,y){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=v,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,p.createPromiseCapability)(),this.ready=this.sinkCapability.promise),P.postMessage({sourceName:r,targetName:l,stream:4,streamId:f,chunk:S},y)},close(){this.isCancelled||(this.isCancelled=!0,P.postMessage({sourceName:r,targetName:l,stream:3,streamId:f}),delete c.streamSinks[f])},error(S){(0,p.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,P.postMessage({sourceName:r,targetName:l,stream:5,streamId:f,reason:j(S)}))},sinkCapability:(0,p.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:s.desiredSize,ready:null};a.sinkCapability.resolve(),a.ready=a.sinkCapability.promise,this.streamSinks[f]=a,new Promise(function(S){S(o(s.data,a))}).then(function(){P.postMessage({sourceName:r,targetName:l,stream:8,streamId:f,success:!0})},function(S){P.postMessage({sourceName:r,targetName:l,stream:8,streamId:f,reason:j(S)})})}_processStreamMessage(s){const f=s.streamId,r=this.sourceName,l=s.sourceName,P=this.comObj,c=this.streamControllers[f],o=this.streamSinks[f];switch(s.stream){case 8:s.success?c.startCall.resolve():c.startCall.reject(j(s.reason));break;case 7:s.success?c.pullCall.resolve():c.pullCall.reject(j(s.reason));break;case 6:if(!o){P.postMessage({sourceName:r,targetName:l,stream:7,streamId:f,success:!0});break}o.desiredSize<=0&&s.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=s.desiredSize,new Promise(function(a){a(o.onPull&&o.onPull())}).then(function(){P.postMessage({sourceName:r,targetName:l,stream:7,streamId:f,success:!0})},function(a){P.postMessage({sourceName:r,targetName:l,stream:7,streamId:f,reason:j(a)})});break;case 4:if((0,p.assert)(c,"enqueue should have stream controller"),c.isClosed)break;c.controller.enqueue(s.chunk);break;case 3:if((0,p.assert)(c,"close should have stream controller"),c.isClosed)break;c.isClosed=!0,c.controller.close(),this._deleteStreamController(c,f);break;case 5:(0,p.assert)(c,"error should have stream controller"),c.controller.error(j(s.reason)),this._deleteStreamController(c,f);break;case 2:s.success?c.cancelCall.resolve():c.cancelCall.reject(j(s.reason)),this._deleteStreamController(c,f);break;case 1:if(!o)break;new Promise(function(a){a(o.onCancel&&o.onCancel(j(s.reason)))}).then(function(){P.postMessage({sourceName:r,targetName:l,stream:2,streamId:f,success:!0})},function(a){P.postMessage({sourceName:r,targetName:l,stream:2,streamId:f,reason:j(a)})}),o.sinkCapability.reject(j(s.reason)),o.isCancelled=!0,delete this.streamSinks[f];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(s,f){var r=this;return _asyncToGenerator(function*(){yield Promise.allSettled([s.startCall&&s.startCall.promise,s.pullCall&&s.pullCall.promise,s.cancelCall&&s.cancelCall.promise]),delete r.streamControllers[f]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.Metadata=void 0;var p=V(1);u.Metadata=class x{#e;#t;constructor({parsedData:j,rawData:H}){this.#e=j,this.#t=H}getRaw(){return this.#t}get(j){return this.#e.get(j)??null}getAll(){return(0,p.objectFromMap)(this.#e)}has(j){return this.#e.has(j)}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.OptionalContentConfig=void 0;var p=V(1);const x=Symbol("INTERNAL");class D{#e=!0;constructor(T,s){this.name=T,this.intent=s}get visible(){return this.#e}_setVisible(T,s){T!==x&&(0,p.unreachable)("Internal method `_setVisible` called."),this.#e=s}}u.OptionalContentConfig=class j{#e=!0;#t=new Map;#n=null;#i=null;constructor(T){if(this.name=null,this.creator=null,null!==T){this.name=T.name,this.creator=T.creator,this.#i=T.order;for(const s of T.groups)this.#t.set(s.id,new D(s.name,s.intent));if("OFF"===T.baseState)for(const s of this.#t.values())s._setVisible(x,!1);for(const s of T.on)this.#t.get(s)._setVisible(x,!0);for(const s of T.off)this.#t.get(s)._setVisible(x,!1);this.#n=new Map;for(const[s,f]of this.#t)this.#n.set(s,f.visible)}}#r(T){const s=T.length;if(s<2)return!0;const f=T[0];for(let r=1;r<s;r++){const l=T[r];let P;if(Array.isArray(l))P=this.#r(l);else{if(!this.#t.has(l))return(0,p.warn)(`Optional content group not found: ${l}`),!0;P=this.#t.get(l).visible}switch(f){case"And":if(!P)return!1;break;case"Or":if(P)return!0;break;case"Not":return!P;default:return!0}}return"And"===f}isVisible(T){if(0===this.#t.size)return!0;if(!T)return(0,p.warn)("Optional content group not defined."),!0;if("OCG"===T.type)return this.#t.has(T.id)?this.#t.get(T.id).visible:((0,p.warn)(`Optional content group not found: ${T.id}`),!0);if("OCMD"===T.type){if(T.expression)return this.#r(T.expression);if(!T.policy||"AnyOn"===T.policy){for(const s of T.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!0}return!1}if("AllOn"===T.policy){for(const s of T.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!1}return!0}if("AnyOff"===T.policy){for(const s of T.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(!this.#t.get(s).visible)return!0}return!1}if("AllOff"===T.policy){for(const s of T.ids){if(!this.#t.has(s))return(0,p.warn)(`Optional content group not found: ${s}`),!0;if(this.#t.get(s).visible)return!1}return!0}return(0,p.warn)(`Unknown optional content policy ${T.policy}.`),!0}return(0,p.warn)(`Unknown group type ${T.type}.`),!0}setVisibility(T,s=!0){this.#t.has(T)?(this.#t.get(T)._setVisible(x,!!s),this.#e=null):(0,p.warn)(`Optional content group not found: ${T}`)}get hasInitialVisibility(){if(null!==this.#e)return this.#e;for(const[T,s]of this.#t){const f=this.#n.get(T);if(s.visible!==f)return this.#e=!1}return this.#e=!0}getOrder(){return this.#t.size?this.#i?this.#i.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,p.objectFromMap)(this.#t):null}getGroup(T){return this.#t.get(T)||null}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFDataTransportStream=void 0;var p=V(1),x=V(8);u.PDFDataTransportStream=class D{constructor(s,f){(0,p.assert)(f,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=s.progressiveDone||!1,this._contentDispositionFilename=s.contentDispositionFilename||null;const r=s.initialData;if(r?.length>0){const l=new Uint8Array(r).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=f,this._isStreamingSupported=!s.disableStream,this._isRangeSupported=!s.disableRange,this._contentLength=s.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((l,P)=>{this._onReceiveData({begin:l,chunk:P})}),this._pdfDataRangeTransport.addProgressListener((l,P)=>{this._onProgress({loaded:l,total:P})}),this._pdfDataRangeTransport.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(s){const f=new Uint8Array(s.chunk).buffer;if(void 0===s.begin)this._fullRequestReader?this._fullRequestReader._enqueue(f):this._queuedChunks.push(f);else{const r=this._rangeReaders.some(function(l){return l._begin===s.begin&&(l._enqueue(f),!0)});(0,p.assert)(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(s){if(void 0===s.total){const f=this._rangeReaders[0];f?.onProgress&&f.onProgress({loaded:s.loaded})}else{const f=this._fullRequestReader;f?.onProgress&&f.onProgress({loaded:s.loaded,total:s.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(s){const f=this._rangeReaders.indexOf(s);f>=0&&this._rangeReaders.splice(f,1)}getFullReader(){(0,p.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const s=this._queuedChunks;return this._queuedChunks=null,new j(this,s,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(s,f){if(f<=this._progressiveDataLength)return null;const r=new H(this,s,f);return this._pdfDataRangeTransport.requestDataRange(s,f),this._rangeReaders.push(r),r}cancelAllRequests(s){this._fullRequestReader&&this._fullRequestReader.cancel(s);for(const f of this._rangeReaders.slice(0))f.cancel(s);this._pdfDataRangeTransport.abort()}};class j{constructor(s,f,r=!1,l=null){this._stream=s,this._done=r||!1,this._filename=(0,x.isPdfFile)(l)?l:null,this._queuedChunks=f||[],this._loaded=0;for(const P of this._queuedChunks)this._loaded+=P.byteLength;this._requests=[],this._headersReady=Promise.resolve(),s._fullRequestReader=this,this.onProgress=null}_enqueue(s){this._done||(this._requests.length>0?this._requests.shift().resolve({value:s,done:!1}):this._queuedChunks.push(s),this._loaded+=s.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var s=this;return _asyncToGenerator(function*(){if(s._queuedChunks.length>0)return{value:s._queuedChunks.shift(),done:!1};if(s._done)return{value:void 0,done:!0};const f=(0,p.createPromiseCapability)();return s._requests.push(f),f.promise})()}cancel(s){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class H{constructor(s,f,r){this._stream=s,this._begin=f,this._end=r,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(s){if(!this._done){if(0===this._requests.length)this._queuedChunk=s;else{this._requests.shift().resolve({value:s,done:!1});for(const r of this._requests)r.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var s=this;return _asyncToGenerator(function*(){if(s._queuedChunk){const r=s._queuedChunk;return s._queuedChunk=null,{value:r,done:!1}}if(s._done)return{value:void 0,done:!0};const f=(0,p.createPromiseCapability)();return s._requests.push(f),f.promise})()}cancel(s){this._done=!0;for(const f of this._requests)f.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(ee,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaText=void 0;class V{static textContent(x){const D=[],j={items:D,styles:Object.create(null)};return function H(T){if(!T)return;let s=null;const f=T.name;if("#text"===f)s=T.value;else{if(!V.shouldBuildText(f))return;T?.attributes?.textContent?s=T.attributes.textContent:T.value&&(s=T.value)}if(null!==s&&D.push({str:s}),T.children)for(const r of T.children)H(r)}(x),j}static shouldBuildText(x){return!("textarea"===x||"input"===x||"option"===x||"select"===x)}}u.XfaText=V},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.NodeStandardFontDataFactory=u.NodeCanvasFactory=u.NodeCMapReaderFactory=void 0;var p=V(9);const x=function(T){return new Promise((s,f)=>{__webpack_require__(2339).readFile(T,(l,P)=>{!l&&P?s(new Uint8Array(P)):f(new Error(l))})})};u.NodeCanvasFactory=class D extends p.BaseCanvasFactory{_createCanvas(s,f){return __webpack_require__(4069).createCanvas(s,f)}},u.NodeCMapReaderFactory=class j extends p.BaseCMapReaderFactory{_fetchData(s,f){return x(s).then(r=>({cMapData:r,compressionType:f}))}},u.NodeStandardFontDataFactory=class H extends p.BaseStandardFontDataFactory{_fetchData(s){return x(s)}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationEditorLayer=void 0;var p=V(7),x=V(1),D=V(23),j=V(24);u.AnnotationEditorLayer=(()=>{class T{#e;#t=!1;#n=this.pointerup.bind(this);#i=this.pointerdown.bind(this);#r=new Map;#c=!1;#o=!1;#s;static _initialized=!1;constructor(f){T._initialized||(T._initialized=!0,D.FreeTextEditor.initialize(f.l10n),j.InkEditor.initialize(f.l10n),f.uiManager.registerEditorTypes([D.FreeTextEditor,j.InkEditor])),this.#s=f.uiManager,this.annotationStorage=f.annotationStorage,this.pageIndex=f.pageIndex,this.div=f.div,this.#e=f.accessibilityManager,this.#s.addLayer(this)}updateToolbar(f){this.#s.updateToolbar(f)}updateMode(f=this.#s.getMode()){this.#a(),f===x.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),this.#s.unselectAll()}addInkEditorIfNeeded(f){if(f||this.#s.getMode()===x.AnnotationEditorType.INK){if(!f)for(const l of this.#r.values())if(l.isEmpty())return void l.setInBackground();this.#l({offsetX:0,offsetY:0}).setInBackground()}}setEditingState(f){this.#s.setEditingState(f)}addCommands(f){this.#s.addCommands(f)}enable(){this.div.style.pointerEvents="auto";for(const f of this.#r.values())f.enableEditing()}disable(){this.div.style.pointerEvents="none";for(const f of this.#r.values())f.disableEditing()}setActiveEditor(f){this.#s.getActive()!==f&&this.#s.setActiveEditor(f)}enableClick(){this.div.addEventListener("pointerdown",this.#i),this.div.addEventListener("pointerup",this.#n)}disableClick(){this.div.removeEventListener("pointerdown",this.#i),this.div.removeEventListener("pointerup",this.#n)}attach(f){this.#r.set(f.id,f)}detach(f){this.#r.delete(f.id),this.#e?.removePointerInTextLayer(f.contentDiv)}remove(f){this.#s.removeEditor(f),this.detach(f),this.annotationStorage.remove(f.id),f.div.style.display="none",setTimeout(()=>{f.div.style.display="",f.div.remove(),f.isAttachedToDOM=!1,document.activeElement===document.body&&this.#s.focusMainContainer()},0),this.#o||this.addInkEditorIfNeeded(!1)}#u(f){f.parent!==this&&(this.attach(f),f.pageIndex=this.pageIndex,f.parent?.detach(f),f.parent=this,f.div&&f.isAttachedToDOM&&(f.div.remove(),this.div.append(f.div)))}add(f){if(this.#u(f),this.#s.addEditor(f),this.attach(f),!f.isAttachedToDOM){const r=f.render();this.div.append(r),f.isAttachedToDOM=!0}this.moveEditorInDOM(f),f.onceAdded(),this.addToAnnotationStorage(f)}moveEditorInDOM(f){this.#e?.moveElementInDOM(this.div,f.div,f.contentDiv,!0)}addToAnnotationStorage(f){!f.isEmpty()&&!this.annotationStorage.has(f.id)&&this.annotationStorage.setValue(f.id,f)}addOrRebuild(f){f.needsToBeRebuilt()?f.rebuild():this.add(f)}addANewEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!0})}addUndoableEditor(f){this.addCommands({cmd:()=>{this.addOrRebuild(f)},undo:()=>{f.remove()},mustExec:!1})}getNextId(){return this.#s.getId()}#h(f){switch(this.#s.getMode()){case x.AnnotationEditorType.FREETEXT:return new D.FreeTextEditor(f);case x.AnnotationEditorType.INK:return new j.InkEditor(f)}return null}deserialize(f){switch(f.annotationType){case x.AnnotationEditorType.FREETEXT:return D.FreeTextEditor.deserialize(f,this);case x.AnnotationEditorType.INK:return j.InkEditor.deserialize(f,this)}return null}#l(f){const r=this.getNextId(),l=this.#h({parent:this,id:r,x:f.offsetX,y:f.offsetY});return l&&this.add(l),l}setSelected(f){this.#s.setSelected(f)}toggleSelected(f){this.#s.toggleSelected(f)}isSelected(f){return this.#s.isSelected(f)}unselect(f){this.#s.unselect(f)}pointerup(f){if(!(0!==f.button||f.ctrlKey&&p.KeyboardManager.platform.isMac)&&f.target===this.div&&this.#c){if(this.#c=!1,!this.#t)return void(this.#t=!0);this.#l(f)}}pointerdown(f){if(0!==f.button||f.ctrlKey&&p.KeyboardManager.platform.isMac||f.target!==this.div)return;this.#c=!0;const l=this.#s.getActive();this.#t=!l||l.isEmpty()}drop(f){const r=f.dataTransfer.getData("text/plain"),l=this.#s.getEditor(r);if(!l)return;f.preventDefault(),f.dataTransfer.dropEffect="move",this.#u(l);const P=this.div.getBoundingClientRect();l.translate(f.clientX-P.x-l.startX,f.clientY-P.y-l.startY),this.moveEditorInDOM(l),l.div.focus()}dragover(f){f.preventDefault()}destroy(){this.#s.getActive()?.parent===this&&this.#s.setActiveEditor(null);for(const f of this.#r.values())this.#e?.removePointerInTextLayer(f.contentDiv),f.isAttachedToDOM=!1,f.div.remove(),f.parent=null;this.div=null,this.#r.clear(),this.#s.removeLayer(this)}#a(){this.#o=!0;for(const f of this.#r.values())f.isEmpty()&&f.remove();this.#o=!1}render(f){this.viewport=f.viewport,(0,p.bindEvents)(this,this.div,["dragover","drop"]),this.setDimensions();for(const r of this.#s.getEditors(this.pageIndex))this.add(r);this.updateMode()}update(f){this.viewport=f.viewport,this.setDimensions(),this.updateMode()}get scaleFactor(){return this.viewport.scale}get pageDimensions(){const[f,r,l,P]=this.viewport.viewBox;return[l-f,P-r]}get viewportBaseDimensions(){const{width:f,height:r,rotation:l}=this.viewport;return l%180==0?[f,r]:[r,f]}setDimensions(){const{width:f,height:r,rotation:l}=this.viewport,P=l%180!=0,c=Math.floor(f)+"px",o=Math.floor(r)+"px";this.div.style.width=P?o:c,this.div.style.height=P?c:o,this.div.setAttribute("data-main-rotation",l)}}return T})()},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.FreeTextEditor=void 0;var p=V(1),x=V(7),D=V(6);class j extends D.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivKeydown.bind(this);#i;#r="";#c=!1;#o;static _freeTextDefaultContent="";static _l10nPromise;static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static _keyboardManager=new x.KeyboardManager([[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],j.prototype.commitOrRemove]]);static _type="freetext";constructor(T){super({...T,name:"freeTextEditor"}),this.#i=T.color||j._defaultColor||D.AnnotationEditor._defaultLineColor,this.#o=T.fontSize||j._defaultFontSize}static initialize(T){this._l10nPromise=new Map(["free_text_default_content","editor_free_text_aria_label"].map(f=>[f,T.get(f)]));const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(T,s){switch(T){case p.AnnotationEditorParamsType.FREETEXT_SIZE:j._defaultFontSize=s;break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:j._defaultColor=s}}updateParams(T,s){switch(T){case p.AnnotationEditorParamsType.FREETEXT_SIZE:this.#s(s);break;case p.AnnotationEditorParamsType.FREETEXT_COLOR:this.#u(s)}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,j._defaultFontSize],[p.AnnotationEditorParamsType.FREETEXT_COLOR,j._defaultColor||D.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.FREETEXT_SIZE,this.#o],[p.AnnotationEditorParamsType.FREETEXT_COLOR,this.#i]]}#s(T){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--scale-factor))`,this.translate(0,-(r-this.#o)*this.parent.scaleFactor),this.#o=r,this.#l()},f=this.#o;this.parent.addCommands({cmd:()=>{s(T)},undo:()=>{s(f)},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#u(T){const s=this.#i;this.parent.addCommands({cmd:()=>{this.#i=T,this.editorDiv.style.color=T},undo:()=>{this.#i=s,this.editorDiv.style.color=s},mustExec:!0,type:p.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}getInitialTranslation(){return[-j._internalPadding*this.parent.scaleFactor,-(j._internalPadding+this.#o)*this.parent.scaleFactor]}rebuild(){super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(p.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.enableEditing(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this.div.draggable=!1,this.editorDiv.addEventListener("keydown",this.#n),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.disableEditing(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.draggable=!0,this.editorDiv.removeEventListener("keydown",this.#n),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.div.focus(),this.isEditing=!1)}focusin(T){super.focusin(T),T.target!==this.editorDiv&&this.editorDiv.focus()}onceAdded(){this.width||(this.enableEditMode(),this.editorDiv.focus())}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent.setEditingState(!0),super.remove()}#h(){const T=this.editorDiv.getElementsByTagName("div");if(0===T.length)return this.editorDiv.innerText;const s=[];for(let f=0,r=T.length;f<r;f++){const P=T[f].firstChild;s.push("#text"===P?.nodeName?P.data:"")}return s.join("\n")}#l(){const[T,s]=this.parent.viewportBaseDimensions,f=this.div.getBoundingClientRect();this.width=f.width/T,this.height=f.height/s}commit(){super.commit(),this.#c||(this.#c=!0,this.parent.addUndoableEditor(this)),this.disableEditMode(),this.#r=this.#h().trimEnd(),this.#l()}shouldGetKeyboardEvents(){return this.isInEditMode()}dblclick(T){this.enableEditMode(),this.editorDiv.focus()}keydown(T){T.target===this.div&&"Enter"===T.key&&(this.enableEditMode(),this.editorDiv.focus())}editorDivKeydown(T){j._keyboardManager.exec(this,T)}editorDivFocus(T){this.isEditing=!0}editorDivBlur(T){this.isEditing=!1}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let T,s;this.width&&(T=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",`${this.id}-editor`),this.enableEditing(),j._l10nPromise.get("editor_free_text_aria_label").then(r=>this.editorDiv?.setAttribute("aria-label",r)),j._l10nPromise.get("free_text_default_content").then(r=>this.editorDiv?.setAttribute("default-content",r)),this.editorDiv.contentEditable=!0;const{style:f}=this.editorDiv;if(f.fontSize=`calc(${this.#o}px * var(--scale-factor))`,f.color=this.#i,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,x.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[r,l]=this.parent.viewportBaseDimensions;this.setAt(T*r,s*l,this.width*r,this.height*l);for(const P of this.#r.split("\n")){const c=document.createElement("div");c.append(P?document.createTextNode(P):document.createElement("br")),this.editorDiv.append(c)}this.div.draggable=!0,this.editorDiv.contentEditable=!1}else this.div.draggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(T,s){const f=super.deserialize(T,s);return f.#o=T.fontSize,f.#i=p.Util.makeHexColor(...T.color),f.#r=T.value,f}serialize(){if(this.isEmpty())return null;const T=j._internalPadding*this.parent.scaleFactor,s=this.getRect(T,T),f=D.AnnotationEditor._colorManager.convert(getComputedStyle(this.editorDiv).color);return{annotationType:p.AnnotationEditorType.FREETEXT,color:f,fontSize:this.#o,value:this.#r,pageIndex:this.parent.pageIndex,rect:s,rotation:this.rotation}}}u.FreeTextEditor=j},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.InkEditor=void 0,Object.defineProperty(u,"fitCurve",{enumerable:!0,get:function(){return D.fitCurve}});var p=V(1),x=V(6),D=V(25),j=V(7);const H=16;u.InkEditor=(()=>{class s extends x.AnnotationEditor{#e=0;#t=0;#n=0;#i=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#c=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=!1;#u=!1;#h=null;#l=null;#a=0;#p=0;#f=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _l10nPromise;static _type="ink";constructor(r){super({...r,name:"inkEditor"}),this.color=r.color||null,this.thickness=r.thickness||null,this.opacity=r.opacity||null,this.paths=[],this.bezierPath2D=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0}static initialize(r){this._l10nPromise=new Map(["editor_ink_canvas_aria_label","editor_ink_aria_label"].map(l=>[l,r.get(l)]))}static updateDefaultParams(r,l){switch(r){case p.AnnotationEditorParamsType.INK_THICKNESS:s._defaultThickness=l;break;case p.AnnotationEditorParamsType.INK_COLOR:s._defaultColor=l;break;case p.AnnotationEditorParamsType.INK_OPACITY:s._defaultOpacity=l/100}}updateParams(r,l){switch(r){case p.AnnotationEditorParamsType.INK_THICKNESS:this.#b(l);break;case p.AnnotationEditorParamsType.INK_COLOR:this.#m(l);break;case p.AnnotationEditorParamsType.INK_OPACITY:this.#_(l)}}static get defaultPropertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,s._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,s._defaultColor||x.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*s._defaultOpacity)]]}get propertiesToUpdate(){return[[p.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||s._defaultThickness],[p.AnnotationEditorParamsType.INK_COLOR,this.color||s._defaultColor||x.AnnotationEditor._defaultLineColor],[p.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??s._defaultOpacity))]]}#b(r){const l=this.thickness;this.parent.addCommands({cmd:()=>{this.thickness=r,this.#w()},undo:()=>{this.thickness=l,this.#w()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#m(r){const l=this.color;this.parent.addCommands({cmd:()=>{this.color=r,this.#g()},undo:()=>{this.color=l,this.#g()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#_(r){r/=100;const l=this.opacity;this.parent.addCommands({cmd:()=>{this.opacity=r,this.#g()},undo:()=>{this.opacity=l,this.#g()},mustExec:!0,type:p.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){super.rebuild(),null!==this.div&&(this.canvas||(this.#y(),this.#A()),this.isAttachedToDOM||(this.parent.add(this),this.#C()),this.#w())}remove(){null!==this.canvas&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#l.disconnect(),this.#l=null,super.remove())}enableEditMode(){this.#s||null===this.canvas||(super.enableEditMode(),this.div.draggable=!1,this.canvas.addEventListener("pointerdown",this.#o),this.canvas.addEventListener("pointerup",this.#c))}disableEditMode(){!this.isInEditMode()||null===this.canvas||(super.disableEditMode(),this.div.draggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o),this.canvas.removeEventListener("pointerup",this.#c))}onceAdded(){this.div.draggable=!this.isEmpty()}isEmpty(){return 0===this.paths.length||1===this.paths.length&&0===this.paths[0].length}#S(){const{width:r,height:l,rotation:P}=this.parent.viewport;switch(P){case 90:return[0,r,r,l];case 180:return[r,l,r,l];case 270:return[l,0,r,l];default:return[0,0,r,l]}}#v(){this.ctx.lineWidth=this.thickness*this.parent.scaleFactor/this.scaleFactor,this.ctx.lineCap="round",this.ctx.lineJoin="round",this.ctx.miterLimit=10,this.ctx.strokeStyle=`${this.color}${(0,j.opacityToHex)(this.opacity)}`}#d(r,l){this.isEditing=!0,this.#u||(this.#u=!0,this.#C(),this.thickness||=s._defaultThickness,this.color||=s._defaultColor||x.AnnotationEditor._defaultLineColor,this.opacity??=s._defaultOpacity),this.currentPath.push([r,l]),this.#h=null,this.#v(),this.ctx.beginPath(),this.ctx.moveTo(r,l),this.#f=()=>{this.#f&&(this.#h&&(this.isEmpty()?(this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)):this.#g(),this.ctx.lineTo(...this.#h),this.#h=null,this.ctx.stroke()),window.requestAnimationFrame(this.#f))},window.requestAnimationFrame(this.#f)}#P(r,l){const[P,c]=this.currentPath.at(-1);r===P&&l===c||(this.currentPath.push([r,l]),this.#h=[r,l])}#x(r,l){this.ctx.closePath(),this.#f=null,r=Math.min(Math.max(r,0),this.canvas.width),l=Math.min(Math.max(l,0),this.canvas.height);const[P,c]=this.currentPath.at(-1);let o;if((r!==P||l!==c)&&this.currentPath.push([r,l]),1!==this.currentPath.length)o=(0,D.fitCurve)(this.currentPath,30,null);else{const y=[r,l];o=[[y,y.slice(),y.slice(),y]]}const a=s.#k(o);this.currentPath.length=0,this.parent.addCommands({cmd:()=>{this.paths.push(o),this.bezierPath2D.push(a),this.rebuild()},undo:()=>{this.paths.pop(),this.bezierPath2D.pop(),0===this.paths.length?this.remove():(this.canvas||(this.#y(),this.#A()),this.#w())},mustExec:!0})}#g(){if(this.isEmpty())return void this.#T();this.#v();const{canvas:r,ctx:l}=this;l.setTransform(1,0,0,1,0,0),l.clearRect(0,0,r.width,r.height),this.#T();for(const P of this.bezierPath2D)l.stroke(P)}commit(){this.#s||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#s=!0,this.div.classList.add("disabled"),this.#w(!0),this.parent.addInkEditorIfNeeded(!0),this.parent.moveEditorInDOM(this),this.div.focus())}focusin(r){super.focusin(r),this.enableEditMode()}canvasPointerdown(r){0!==r.button||!this.isInEditMode()||this.#s||(this.setInForeground(),"mouse"!==r.type&&this.div.focus(),r.stopPropagation(),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#i),this.#d(r.offsetX,r.offsetY))}canvasPointermove(r){r.stopPropagation(),this.#P(r.offsetX,r.offsetY)}canvasPointerup(r){0===r.button&&this.isInEditMode()&&0!==this.currentPath.length&&(r.stopPropagation(),this.#E(r),this.setInBackground())}canvasPointerleave(r){this.#E(r),this.setInBackground()}#E(r){this.#x(r.offsetX,r.offsetY),this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#i),this.parent.addToAnnotationStorage(this)}#y(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",s._l10nPromise.get("editor_ink_canvas_aria_label").then(r=>this.canvas?.setAttribute("aria-label",r)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#A(){this.#l=new ResizeObserver(r=>{const l=r[0].contentRect;l.width&&l.height&&this.setDimensions(l.width,l.height)}),this.#l.observe(this.div)}render(){if(this.div)return this.div;let r,l;this.width&&(r=this.x,l=this.y),super.render(),s._l10nPromise.get("editor_ink_aria_label").then(S=>this.div?.setAttribute("aria-label",S));const[P,c,o,a]=this.#S();if(this.setAt(P,c,0,0),this.setDims(o,a),this.#y(),this.width){const[S,v]=this.parent.viewportBaseDimensions;this.setAt(r*S,l*v,this.width*S,this.height*v),this.#u=!0,this.#C(),this.setDims(this.width*S,this.height*v),this.#g(),this.#O(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#A(),this.div}#C(){if(!this.#u)return;const[r,l]=this.parent.viewportBaseDimensions;this.canvas.width=Math.ceil(this.width*r),this.canvas.height=Math.ceil(this.height*l),this.#T()}setDimensions(r,l){const P=Math.round(r),c=Math.round(l);if(this.#a===P&&this.#p===c)return;this.#a=P,this.#p=c,this.canvas.style.visibility="hidden",this.#e&&Math.abs(this.#e-r/l)>.01&&(l=Math.ceil(r/this.#e),this.setDims(r,l));const[o,a]=this.parent.viewportBaseDimensions;this.width=r/o,this.height=l/a,this.#s&&this.#L(r,l),this.#C(),this.#g(),this.canvas.style.visibility="visible"}#L(r,l){const P=this.#M(),c=(r-P)/this.#n,o=(l-P)/this.#t;this.scaleFactor=Math.min(c,o)}#T(){const r=this.#M()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+r,this.translationY*this.scaleFactor+r)}static#k(r){const l=new Path2D;for(let P=0,c=r.length;P<c;P++){const[o,a,S,v]=r[P];0===P&&l.moveTo(...o),l.bezierCurveTo(a[0],a[1],S[0],S[1],v[0],v[1])}return l}#F(r,l,P,c){const a=[],S=this.thickness/2;let v,y;for(const d of this.paths){v=[],y=[];for(let e=0,i=d.length;e<i;e++){const[b,R,I,W]=d[e],U=r*(b[0]+l)+S,J=c-r*(b[1]+P)-S,K=r*(R[0]+l)+S,C=c-r*(R[1]+P)-S,F=r*(I[0]+l)+S,N=c-r*(I[1]+P)-S,L=r*(W[0]+l)+S,M=c-r*(W[1]+P)-S;0===e&&(v.push(U,J),y.push(U,J)),v.push(K,C,F,N,L,M),this.#I(U,J,K,C,F,N,L,M,4,y)}a.push({bezier:v,points:y})}return a}#I(r,l,P,c,o,a,S,v,y,d){if(this.#D(r,l,P,c,o,a,S,v))d.push(S,v);else{for(let e=1;e<y-1;e++){const i=e/y,b=1-i;let R=i*r+b*P,I=i*l+b*c,W=i*P+b*o,U=i*c+b*a;R=i*R+b*W,I=i*I+b*U,W=i*W+b*(i*o+b*S),U=i*U+b*(i*a+b*v),R=i*R+b*W,I=i*I+b*U,d.push(R,I)}d.push(S,v)}}#D(r,l,P,c,o,a,S,v){const e=(3*c-2*l-v)**2,b=(3*a-l-2*v)**2;return Math.max((3*P-2*r-S)**2,(3*o-r-2*S)**2)+Math.max(e,b)<=10}#R(){let r=1/0,l=-1/0,P=1/0,c=-1/0;for(const o of this.paths)for(const[a,S,v,y]of o){const d=p.Util.bezierBoundingBox(...a,...S,...v,...y);r=Math.min(r,d[0]),P=Math.min(P,d[1]),l=Math.max(l,d[2]),c=Math.max(c,d[3])}return[r,P,l,c]}#M(){return this.#s?Math.ceil(this.thickness*this.parent.scaleFactor):0}#w(r=!1){if(this.isEmpty())return;if(!this.#s)return void this.#g();const l=this.#R(),P=this.#M();this.#n=Math.max(H,l[2]-l[0]),this.#t=Math.max(H,l[3]-l[1]);const c=Math.ceil(P+this.#n*this.scaleFactor),o=Math.ceil(P+this.#t*this.scaleFactor),[a,S]=this.parent.viewportBaseDimensions;this.width=c/a,this.height=o/S,this.#e=c/o,this.#O();const v=this.translationX,y=this.translationY;this.translationX=-l[0],this.translationY=-l[1],this.#C(),this.#g(),this.#a=c,this.#p=o,this.setDims(c,o);const d=r?P/this.scaleFactor/2:0;this.translate(v-this.translationX-d,y-this.translationY-d)}#O(){const{style:r}=this.div;this.#e>=1?(r.minHeight="16px",r.minWidth=`${Math.round(this.#e*H)}px`):(r.minWidth="16px",r.minHeight=`${Math.round(H/this.#e)}px`)}static deserialize(r,l){const P=super.deserialize(r,l);P.thickness=r.thickness,P.color=p.Util.makeHexColor(...r.color),P.opacity=r.opacity;const[c,o]=l.pageDimensions,a=P.width*c,S=P.height*o,v=l.scaleFactor,y=r.thickness/2;P.#e=a/S,P.#s=!0,P.#a=Math.round(a),P.#p=Math.round(S);for(const{bezier:e}of r.paths){const i=[];P.paths.push(i);let b=v*(e[0]-y),R=v*(S-e[1]-y);for(let W=2,U=e.length;W<U;W+=6){const N=v*(e[W+4]-y),L=v*(S-e[W+5]-y);i.push([[b,R],[v*(e[W]-y),v*(S-e[W+1]-y)],[v*(e[W+2]-y),v*(S-e[W+3]-y)],[N,L]]),b=N,R=L}const I=this.#k(i);P.bezierPath2D.push(I)}const d=P.#R();return P.#n=Math.max(H,d[2]-d[0]),P.#t=Math.max(H,d[3]-d[1]),P.#L(a,S),P}serialize(){if(this.isEmpty())return null;const r=this.getRect(0,0),l=this.rotation%180==0?r[3]-r[1]:r[2]-r[0],P=x.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:p.AnnotationEditorType.INK,color:P,thickness:this.thickness,opacity:this.opacity,paths:this.#F(this.scaleFactor/this.parent.scaleFactor,this.translationX,this.translationY,l),pageIndex:this.parent.pageIndex,rect:r,rotation:this.rotation}}}return s})()},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.fitCurve=void 0;const p=V(26);u.fitCurve=p},ee=>{function V(c,o,a,S,v){var d,e,i,b,R,I,W,U,J,K,C,F,N;if(2===c.length)return F=l.vectorLen(l.subtract(c[0],c[1]))/3,[d=[c[0],l.addArrays(c[0],l.mulItems(o,F)),l.addArrays(c[1],l.mulItems(a,F)),c[1]]];if(e=function H(c){var a,S,v,o=[];return c.forEach((y,d)=>{a=d?S+l.vectorLen(l.subtract(y,v)):0,o.push(a),S=a,v=y}),o=o.map(y=>y/S)}(c),[d,b,I]=p(c,e,e,o,a,v),0===b||b<S)return[d];if(b<S*S)for(i=e,R=b,W=I,N=0;N<20;N++){if(i=D(d,c,i),[d,b,I]=p(c,e,i,o,a,v),b<S)return[d];if(I===W){let L=b/R;if(L>.9999&&L<1.0001)break}R=b,W=I}return C=[],(U=l.subtract(c[I-1],c[I+1])).every(L=>0===L)&&(U=l.subtract(c[I-1],c[I]),[U[0],U[1]]=[-U[1],U[0]]),J=l.normalize(U),K=l.mulItems(J,-1),(C=C.concat(V(c.slice(0,I+1),o,J,S,v))).concat(V(c.slice(I),K,a,S,v))}function p(c,o,a,S,v,y){var d,e,i;return d=function x(c,o,a,S){var v,y,d,e,i,b,W,U,J,K,C,F,N,L,M,_=c[0],n=c[c.length-1];for(v=[_,null,null,n],y=l.zeros_Xx2x2(o.length),C=0,F=o.length;C<F;C++)(d=y[C])[0]=l.mulItems(a,3*(L=o[C])*((M=1-L)*M)),d[1]=l.mulItems(S,3*M*(L*L));for(e=[[0,0],[0,0]],i=[0,0],C=0,F=c.length;C<F;C++)L=o[C],e[0][0]+=l.dot((d=y[C])[0],d[0]),e[0][1]+=l.dot(d[0],d[1]),e[1][0]+=l.dot(d[0],d[1]),e[1][1]+=l.dot(d[1],d[1]),N=l.subtract(c[C],P.q([_,_,n,n],L)),i[0]+=l.dot(d[0],N),i[1]+=l.dot(d[1],N);return W=0==(b=e[0][0]*e[1][1]-e[1][0]*e[0][1])?0:(i[0]*e[1][1]-i[1]*e[0][1])/b,U=0===b?0:(e[0][0]*i[1]-e[1][0]*i[0])/b,W<(J=1e-6*(K=l.vectorLen(l.subtract(_,n))))||U<J?(v[1]=l.addArrays(_,l.mulItems(a,K/3)),v[2]=l.addArrays(n,l.mulItems(S,K/3))):(v[1]=l.addArrays(_,l.mulItems(a,W)),v[2]=l.addArrays(n,l.mulItems(S,U))),v}(c,a,S,v),[e,i]=function T(c,o,a){var S,v,y,d,e,i,b,R;v=0,y=Math.floor(c.length/2);const I=s(o,10);for(e=0,i=c.length;e<i;e++)b=c[e],R=f(0,a[e],I,10),(S=(d=l.subtract(P.q(o,R),b))[0]*d[0]+d[1]*d[1])>v&&(v=S,y=e);return[v,y]}(c,d,o),y&&y({bez:d,points:c,params:o,maxErr:e,maxPoint:i}),[d,e,i]}function D(c,o,a){return a.map((S,v)=>function j(c,o,a){var S=l.subtract(P.q(c,a),o),v=P.qprime(c,a),y=l.mulMatrix(S,v),d=l.sum(l.squareItems(v))+2*l.mulMatrix(S,P.qprimeprime(c,a));return 0===d?a:a-y/d}(c,o[v],S))}var s=function(c,o){for(var a,S=[0],v=c[0],y=0,d=1;d<=o;d++)a=P.q(c,d/o),y+=l.vectorLen(l.subtract(a,v)),S.push(y),v=a;return S.map(e=>e/y)};function f(c,o,a,S){if(o<0)return 0;if(o>1)return 1;for(var y,e,i,b=1;b<=S;b++)if(o<=a[b]){i=(o-(y=a[b-1]))/(a[b]-y)*(b/S-(e=(b-1)/S))+e;break}return i}function r(c,o){return l.normalize(l.subtract(c,o))}class l{static zeros_Xx2x2(o){for(var a=[];o--;)a.push([0,0]);return a}static mulItems(o,a){return o.map(S=>S*a)}static mulMatrix(o,a){return o.reduce((S,v,y)=>S+v*a[y],0)}static subtract(o,a){return o.map((S,v)=>S-a[v])}static addArrays(o,a){return o.map((S,v)=>S+a[v])}static addItems(o,a){return o.map(S=>S+a)}static sum(o){return o.reduce((a,S)=>a+S)}static dot(o,a){return l.mulMatrix(o,a)}static vectorLen(o){return Math.hypot(...o)}static divItems(o,a){return o.map(S=>S/a)}static squareItems(o){return o.map(a=>a*a)}static normalize(o){return this.divItems(o,this.vectorLen(o))}}class P{static q(o,a){var S=1-a,v=l.mulItems(o[0],S*S*S),y=l.mulItems(o[1],3*S*S*a),d=l.mulItems(o[2],3*S*a*a),e=l.mulItems(o[3],a*a*a);return l.addArrays(l.addArrays(v,y),l.addArrays(d,e))}static qprime(o,a){var S=1-a,v=l.mulItems(l.subtract(o[1],o[0]),3*S*S),y=l.mulItems(l.subtract(o[2],o[1]),6*S*a),d=l.mulItems(l.subtract(o[3],o[2]),3*a*a);return l.addArrays(l.addArrays(v,y),d)}static qprimeprime(o,a){return l.addArrays(l.mulItems(l.addArrays(l.subtract(o[2],l.mulItems(o[1],2)),o[0]),6*(1-a)),l.mulItems(l.addArrays(l.subtract(o[3],l.mulItems(o[2],2)),o[1]),6*a))}}ee.exports=function u(c,o,a){if(!Array.isArray(c))throw new TypeError("First argument should be an array");if(c.forEach(d=>{if(!Array.isArray(d)||d.some(e=>"number"!=typeof e)||d.length!==c[0].length)throw Error("Each point should be an array of numbers. Each point should have the same amount of numbers.")}),(c=c.filter((d,e)=>0===e||!d.every((i,b)=>i===c[e-1][b]))).length<2)return[];const S=c.length,v=r(c[1],c[0]),y=r(c[S-2],c[S-1]);return V(c,v,y,o,a)},ee.exports.fitCubic=V,ee.exports.createTangent=r},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.AnnotationLayer=void 0;var p=V(1),x=V(8),D=V(5),j=V(28),H=V(29);const T=1e3,f=new WeakSet;function r(A){return{width:A[2]-A[0],height:A[3]-A[1]}}class l{static create(t){switch(t.data.annotationType){case p.AnnotationType.LINK:return new c(t);case p.AnnotationType.TEXT:return new o(t);case p.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new S(t);case"Btn":return t.data.radioButton?new y(t):t.data.checkBox?new v(t):new d(t);case"Ch":return new e(t)}return new a(t);case p.AnnotationType.POPUP:return new i(t);case p.AnnotationType.FREETEXT:return new R(t);case p.AnnotationType.LINE:return new I(t);case p.AnnotationType.SQUARE:return new W(t);case p.AnnotationType.CIRCLE:return new U(t);case p.AnnotationType.POLYLINE:return new J(t);case p.AnnotationType.CARET:return new C(t);case p.AnnotationType.INK:return new F(t);case p.AnnotationType.POLYGON:return new K(t);case p.AnnotationType.HIGHLIGHT:return new N(t);case p.AnnotationType.UNDERLINE:return new L(t);case p.AnnotationType.SQUIGGLY:return new M(t);case p.AnnotationType.STRIKEOUT:return new _(t);case p.AnnotationType.STAMP:return new n(t);case p.AnnotationType.FILEATTACHMENT:return new h(t);default:return new P(t)}}}class P{constructor(t,{isRenderable:g=!1,ignoreBorder:m=!1,createQuadrilaterals:k=!1}={}){this.isRenderable=g,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,g&&(this.container=this._createContainer(m)),k&&(this.quadrilaterals=this._createQuadrilaterals(m))}_createContainer(t=!1){const g=this.data,m=this.page,k=this.viewport,E=document.createElement("section"),{width:O,height:B}=r(g.rect),[z,G,X,Q]=k.viewBox,se=X-z,ne=Q-G;E.setAttribute("data-annotation-id",g.id);const re=p.Util.normalizeRect([g.rect[0],m.view[3]-g.rect[1]+m.view[1],g.rect[2],m.view[3]-g.rect[3]+m.view[1]]);if(!t&&g.borderStyle.width>0){E.style.borderWidth=`${g.borderStyle.width}px`;const te=g.borderStyle.horizontalCornerRadius,ae=g.borderStyle.verticalCornerRadius;switch(te>0||ae>0?E.style.borderRadius=`calc(${te}px * var(--scale-factor)) / calc(${ae}px * var(--scale-factor))`:this instanceof y&&(E.style.borderRadius=`calc(${O}px * var(--scale-factor)) / calc(${B}px * var(--scale-factor))`),g.borderStyle.style){case p.AnnotationBorderStyleType.SOLID:E.style.borderStyle="solid";break;case p.AnnotationBorderStyleType.DASHED:E.style.borderStyle="dashed";break;case p.AnnotationBorderStyleType.BEVELED:(0,p.warn)("Unimplemented border style: beveled");break;case p.AnnotationBorderStyleType.INSET:(0,p.warn)("Unimplemented border style: inset");break;case p.AnnotationBorderStyleType.UNDERLINE:E.style.borderBottomStyle="solid"}const Z=g.borderColor||null;Z?E.style.borderColor=p.Util.makeHexColor(0|Z[0],0|Z[1],0|Z[2]):E.style.borderWidth=0}E.style.left=100*(re[0]-z)/se+"%",E.style.top=100*(re[1]-G)/ne+"%";const{rotation:q}=g;return g.hasOwnCanvas||0===q?(E.style.width=100*O/se+"%",E.style.height=100*B/ne+"%"):this.setRotation(q,E),E}setRotation(t,g=this.container){const[m,k,E,O]=this.viewport.viewBox,B=E-m,z=O-k,{width:G,height:X}=r(this.data.rect);let Q,se;t%180==0?(Q=100*G/B,se=100*X/z):(Q=100*X/B,se=100*G/z),g.style.width=`${Q}%`,g.style.height=`${se}%`,g.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(g,m,k)=>{const E=k.detail[g];k.target.style[m]=j.ColorConverters[`${E[0]}_HTML`](E.slice(1))};return(0,p.shadow)(this,"_commonActions",{display:g=>{const m=g.detail.display%2==1;this.container.style.visibility=m?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:m,print:0===g.detail.display||3===g.detail.display})},print:g=>{this.annotationStorage.setValue(this.data.id,{print:g.detail.print})},hidden:g=>{this.container.style.visibility=g.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:g.detail.hidden})},focus:g=>{setTimeout(()=>g.target.focus({preventScroll:!1}),0)},userName:g=>{g.target.title=g.detail.userName},readonly:g=>{g.detail.readonly?g.target.setAttribute("readonly",""):g.target.removeAttribute("readonly")},required:g=>{this._setRequired(g.target,g.detail.required)},bgColor:g=>{t("bgColor","backgroundColor",g)},fillColor:g=>{t("fillColor","backgroundColor",g)},fgColor:g=>{t("fgColor","color",g)},textColor:g=>{t("textColor","color",g)},borderColor:g=>{t("borderColor","borderColor",g)},strokeColor:g=>{t("strokeColor","borderColor",g)},rotation:g=>{const m=g.detail.rotation;this.setRotation(m),this.annotationStorage.setValue(this.data.id,{rotation:m})}})}_dispatchEventFromSandbox(t,g){const m=this._commonActions;for(const k of Object.keys(g.detail)){const E=t[k]||m[k];E&&E(g)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const g=this.annotationStorage.getRawValue(this.data.id);if(!g)return;const m=this._commonActions;for(const[k,E]of Object.entries(g)){const O=m[k];O&&(O({detail:{[k]:E},target:t}),delete g[k])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const g=[],m=this.data.rect;for(const k of this.data.quadPoints)this.data.rect=[k[2].x,k[2].y,k[1].x,k[1].y],g.push(this._createContainer(t));return this.data.rect=m,g}_createPopup(t,g){let m=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,m=this.quadrilaterals[0]),t||((t=document.createElement("div")).className="popupTriggerArea",m.append(t));const E=new b({container:m,trigger:t,color:g.color,titleObj:g.titleObj,modificationDate:g.modificationDate,contentsObj:g.contentsObj,richText:g.richText,hideWrapper:!0}).render();E.style.left="100%",m.append(E)}_renderQuadrilaterals(t){for(const g of this.quadrilaterals)g.className=t;return this.quadrilaterals}render(){(0,p.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,g=null){const m=[];if(this._fieldObjects){const k=this._fieldObjects[t];if(k)for(const{page:E,id:O,exportValues:B}of k){if(-1===E||O===g)continue;const z="string"==typeof B?B:null,G=document.querySelector(`[data-element-id="${O}"]`);!G||f.has(G)?m.push({id:O,exportValue:z,domElement:G}):(0,p.warn)(`_getElementsByName - element not allowed: ${O}`)}return m}for(const k of document.getElementsByName(t)){const{id:E,exportValue:O}=k;E!==g&&f.has(k)&&m.push({id:E,exportValue:O,domElement:k})}return m}static get platform(){const t=typeof navigator<"u"?navigator.platform:"";return(0,p.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class c extends P{constructor(t,g=null){super(t,{isRenderable:!0,ignoreBorder:!!g?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:g}=this,m=document.createElement("a");m.setAttribute("data-element-id",t.id);let k=!1;return t.url?(g.addLinkAttributes(m,t.url,t.newWindow),k=!0):t.action?(this._bindNamedAction(m,t.action),k=!0):t.dest?(this._bindLink(m,t.dest),k=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(m,t),k=!0),t.resetForm?(this._bindResetFormAction(m,t.resetForm),k=!0):this.isTooltipOnly&&!k&&(this._bindLink(m,""),k=!0)),this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((E,O)=>{const B=0===O?m:m.cloneNode();return E.append(B),E}):(this.container.className="linkAnnotation",k&&this.container.append(m),this.container)}_bindLink(t,g){t.href=this.linkService.getDestinationHash(g),t.onclick=()=>(g&&this.linkService.goToDestination(g),!1),(g||""===g)&&(t.className="internalLink")}_bindNamedAction(t,g){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(g),!1),t.className="internalLink"}_bindJSAction(t,g){t.href=this.linkService.getAnchorUrl("");const m=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const k of Object.keys(g.actions)){const E=m.get(k);E&&(t[E]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g.id,name:k}}),!1))}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,g){const m=t.onclick;if(m||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,p.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(m||(t.onclick=()=>!1));t.onclick=()=>{m&&m();const{fields:k,refs:E,include:O}=g,B=[];if(0!==k.length||0!==E.length){const X=new Set(E);for(const Q of k){const se=this._fieldObjects[Q]||[];for(const{id:ne}of se)X.add(ne)}for(const Q of Object.values(this._fieldObjects))for(const se of Q)X.has(se.id)===O&&B.push(se)}else for(const X of Object.values(this._fieldObjects))B.push(...X);const z=this.annotationStorage,G=[];for(const X of B){const{id:Q}=X;switch(G.push(Q),X.type){case"text":case"combobox":case"listbox":z.setValue(Q,{value:X.defaultValue||""});break;case"checkbox":case"radiobutton":z.setValue(Q,{value:X.defaultValue===X.exportValues});break;default:continue}const se=document.querySelector(`[data-element-id="${Q}"]`);se&&(f.has(se)?se.dispatchEvent(new Event("resetform")):(0,p.warn)(`_bindResetFormAction - element not allowed: ${Q}`))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:G,name:"ResetForm"}}),!1}}}class o extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.append(t),this.container}}class a extends P{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:g,isMac:m}=P.platform;return g&&t.ctrlKey||m&&t.metaKey}_setEventListener(t,g,m,k){g.includes("mouse")?t.addEventListener(g,E=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:k(E),shift:E.shiftKey,modifier:this._getKeyModifier(E)}})}):t.addEventListener(g,E=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:m,value:k(E)}})})}_setEventListeners(t,g,m){for(const[k,E]of g)("Action"===E||this.data.actions?.[E])&&this._setEventListener(t,k,E,m)}_setBackgroundColor(t){const g=this.data.backgroundColor||null;t.style.backgroundColor=null===g?"transparent":p.Util.makeHexColor(g[0],g[1],g[2])}_setTextStyle(t){const{fontColor:m}=this.data.defaultAppearanceData,k=this.data.defaultAppearanceData.fontSize||9,E=t.style;let O;if(this.data.multiLine){const B=Math.abs(this.data.rect[3]-this.data.rect[1]),z=Math.round(B/(p.LINE_FACTOR*k))||1;O=Math.min(k,Math.round(B/z/p.LINE_FACTOR))}else{const B=Math.abs(this.data.rect[3]-this.data.rect[1]);O=Math.min(k,Math.round(B/p.LINE_FACTOR))}E.fontSize=`calc(${O}px * var(--scale-factor))`,E.color=p.Util.makeHexColor(m[0],m[1],m[2]),null!==this.data.textAlignment&&(E.textAlign=["left","center","right"][this.data.textAlignment])}_setRequired(t,g){g?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",g)}}class S extends a{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,g,m,k){const E=this.annotationStorage;for(const O of this._getElementsByName(t.name,t.id))O.domElement&&(O.domElement[g]=m),E.setValue(O.id,{[k]:m})}render(){const t=this.annotationStorage,g=this.data.id;this.container.className="textWidgetAnnotation";let m=null;if(this.renderForms){const k=t.getValue(g,{value:this.data.fieldValue});let E=k.formattedValue||k.value||"";const O=t.getValue(g,{charLimit:this.data.maxLen}).charLimit;O&&E.length>O&&(E=E.slice(0,O));const B={userValue:E,formattedValue:null,valueOnFocus:""};this.data.multiLine?(m=document.createElement("textarea"),m.textContent=E,this.data.doNotScroll&&(m.style.overflowY="hidden")):(m=document.createElement("input"),m.type="text",m.setAttribute("value",E),this.data.doNotScroll&&(m.style.overflowX="hidden")),f.add(m),m.setAttribute("data-element-id",g),m.disabled=this.data.readOnly,m.name=this.data.fieldName,m.tabIndex=T,this._setRequired(m,this.data.required),O&&(m.maxLength=O),m.addEventListener("input",G=>{t.setValue(g,{value:G.target.value}),this.setPropertyOnSiblings(m,"value",G.target.value,"value")}),m.addEventListener("resetform",G=>{m.value=B.userValue=this.data.defaultFieldValue??"",B.formattedValue=null});let z=G=>{const{formattedValue:X}=B;null!=X&&(G.target.value=X),G.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){m.addEventListener("focus",X=>{B.userValue&&(X.target.value=B.userValue),B.valueOnFocus=X.target.value}),m.addEventListener("updatefromsandbox",X=>{this._dispatchEventFromSandbox({value(se){B.userValue=se.detail.value??"",t.setValue(g,{value:B.userValue.toString()}),se.target.value=B.userValue},formattedValue(se){const{formattedValue:ne}=se.detail;B.formattedValue=ne,null!=ne&&se.target!==document.activeElement&&(se.target.value=ne),t.setValue(g,{formattedValue:ne})},selRange(se){se.target.setSelectionRange(...se.detail.selRange)},charLimit:se=>{const{charLimit:ne}=se.detail,{target:re}=se;if(0===ne)return void re.removeAttribute("maxLength");re.setAttribute("maxLength",ne);let q=B.userValue;!q||q.length<=ne||(q=q.slice(0,ne),re.value=B.userValue=q,t.setValue(g,{value:q}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:q,willCommit:!0,commitKey:1,selStart:re.selectionStart,selEnd:re.selectionEnd}}))}},X)}),m.addEventListener("keydown",X=>{let Q=-1;if("Escape"===X.key?Q=0:"Enter"===X.key?Q=2:"Tab"===X.key&&(Q=3),-1===Q)return;const{value:se}=X.target;B.valueOnFocus!==se&&(B.userValue=se,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:se,willCommit:!0,commitKey:Q,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}))});const G=z;z=null,m.addEventListener("blur",X=>{const{value:Q}=X.target;B.userValue=Q,this._mouseState.isDown&&B.valueOnFocus!==Q&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Q,willCommit:!0,commitKey:1,selStart:X.target.selectionStart,selEnd:X.target.selectionEnd}}),G(X)}),this.data.actions?.Keystroke&&m.addEventListener("beforeinput",X=>{const{data:Q,target:se}=X,{value:ne,selectionStart:re,selectionEnd:q}=se;let te=re,ae=q;switch(X.inputType){case"deleteWordBackward":{const Z=ne.substring(0,re).match(/\w*[^\w]*$/);Z&&(te-=Z[0].length);break}case"deleteWordForward":{const Z=ne.substring(re).match(/^[^\w]*\w*/);Z&&(ae+=Z[0].length);break}case"deleteContentBackward":re===q&&(te-=1);break;case"deleteContentForward":re===q&&(ae+=1)}X.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:ne,change:Q||"",willCommit:!1,selStart:te,selEnd:ae}})}),this._setEventListeners(m,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],X=>X.target.value)}if(z&&m.addEventListener("blur",z),this.data.comb){const X=(this.data.rect[2]-this.data.rect[0])/O;m.classList.add("comb"),m.style.letterSpacing=`calc(${X}px * var(--scale-factor) - 1ch)`}}else m=document.createElement("div"),m.textContent=this.data.fieldValue,m.style.verticalAlign="middle",m.style.display="table-cell";return this._setTextStyle(m),this._setBackgroundColor(m),this._setDefaultPropertiesFromJS(m),this.container.append(m),this.container}}class v extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,g=this.data,m=g.id;let k=t.getValue(m,{value:g.exportValue===g.fieldValue}).value;"string"==typeof k&&(k="Off"!==k,t.setValue(m,{value:k})),this.container.className="buttonWidgetAnnotation checkBox";const E=document.createElement("input");return f.add(E),E.setAttribute("data-element-id",m),E.disabled=g.readOnly,this._setRequired(E,this.data.required),E.type="checkbox",E.name=g.fieldName,k&&E.setAttribute("checked",!0),E.setAttribute("exportValue",g.exportValue),E.tabIndex=T,E.addEventListener("change",O=>{const{name:B,checked:z}=O.target;for(const G of this._getElementsByName(B,m)){const X=z&&G.exportValue===g.exportValue;G.domElement&&(G.domElement.checked=X),t.setValue(G.id,{value:X})}t.setValue(m,{value:z})}),E.addEventListener("resetform",O=>{O.target.checked=(g.defaultFieldValue||"Off")===g.exportValue}),this.enableScripting&&this.hasJSActions&&(E.addEventListener("updatefromsandbox",O=>{this._dispatchEventFromSandbox({value(z){z.target.checked="Off"!==z.detail.value,t.setValue(m,{value:z.target.checked})}},O)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],O=>O.target.checked)),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class y extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,g=this.data,m=g.id;let k=t.getValue(m,{value:g.fieldValue===g.buttonValue}).value;"string"==typeof k&&(k=k!==g.buttonValue,t.setValue(m,{value:k}));const E=document.createElement("input");if(f.add(E),E.setAttribute("data-element-id",m),E.disabled=g.readOnly,this._setRequired(E,this.data.required),E.type="radio",E.name=g.fieldName,k&&E.setAttribute("checked",!0),E.tabIndex=T,E.addEventListener("change",O=>{const{name:B,checked:z}=O.target;for(const G of this._getElementsByName(B,m))t.setValue(G.id,{value:!1});t.setValue(m,{value:z})}),E.addEventListener("resetform",O=>{const B=g.defaultFieldValue;O.target.checked=null!=B&&B===g.buttonValue}),this.enableScripting&&this.hasJSActions){const O=g.buttonValue;E.addEventListener("updatefromsandbox",B=>{this._dispatchEventFromSandbox({value:G=>{const X=O===G.detail.value;for(const Q of this._getElementsByName(G.target.name)){const se=X&&Q.id===m;Q.domElement&&(Q.domElement.checked=se),t.setValue(Q.id,{value:se})}}},B)}),this._setEventListeners(E,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],B=>B.target.checked)}return this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.append(E),this.container}}class d extends c{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText);const g=t.lastChild;return this.enableScripting&&this.hasJSActions&&g&&(this._setDefaultPropertiesFromJS(g),g.addEventListener("updatefromsandbox",m=>{this._dispatchEventFromSandbox({},m)})),t}}class e extends a{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,g=this.data.id,m=t.getValue(g,{value:this.data.fieldValue}),k=document.createElement("select");f.add(k),k.setAttribute("data-element-id",g),k.disabled=this.data.readOnly,this._setRequired(k,this.data.required),k.name=this.data.fieldName,k.tabIndex=T;let E=this.data.combo&&this.data.options.length>0;this.data.combo||(k.size=this.data.options.length,this.data.multiSelect&&(k.multiple=!0)),k.addEventListener("resetform",G=>{const X=this.data.defaultFieldValue;for(const Q of k.options)Q.selected=Q.value===X});for(const G of this.data.options){const X=document.createElement("option");X.textContent=G.displayValue,X.value=G.exportValue,m.value.includes(G.exportValue)&&(X.setAttribute("selected",!0),E=!1),k.append(X)}let O=null;if(E){const G=document.createElement("option");G.value=" ",G.setAttribute("hidden",!0),G.setAttribute("selected",!0),k.prepend(G),O=()=>{G.remove(),k.removeEventListener("input",O),O=null},k.addEventListener("input",O)}const B=(G,X)=>{const Q=X?"value":"textContent",se=G.target.options;return G.target.multiple?Array.prototype.filter.call(se,ne=>ne.selected).map(ne=>ne[Q]):-1===se.selectedIndex?null:se[se.selectedIndex][Q]},z=G=>Array.prototype.map.call(G.target.options,Q=>({displayValue:Q.textContent,exportValue:Q.value}));return this.enableScripting&&this.hasJSActions?(k.addEventListener("updatefromsandbox",G=>{this._dispatchEventFromSandbox({value(Q){O?.();const se=Q.detail.value,ne=new Set(Array.isArray(se)?se:[se]);for(const re of k.options)re.selected=ne.has(re.value);t.setValue(g,{value:B(Q,!0)})},multipleSelection(Q){k.multiple=!0},remove(Q){const se=k.options,ne=Q.detail.remove;se[ne].selected=!1,k.remove(ne),se.length>0&&-1===Array.prototype.findIndex.call(se,q=>q.selected)&&(se[0].selected=!0),t.setValue(g,{value:B(Q,!0),items:z(Q)})},clear(Q){for(;0!==k.length;)k.remove(0);t.setValue(g,{value:null,items:[]})},insert(Q){const{index:se,displayValue:ne,exportValue:re}=Q.detail.insert,q=k.children[se],te=document.createElement("option");te.textContent=ne,te.value=re,q?q.before(te):k.append(te),t.setValue(g,{value:B(Q,!0),items:z(Q)})},items(Q){const{items:se}=Q.detail;for(;0!==k.length;)k.remove(0);for(const ne of se){const{displayValue:re,exportValue:q}=ne,te=document.createElement("option");te.textContent=re,te.value=q,k.append(te)}k.options.length>0&&(k.options[0].selected=!0),t.setValue(g,{value:B(Q,!0),items:z(Q)})},indices(Q){const se=new Set(Q.detail.indices);for(const ne of Q.target.options)ne.selected=se.has(ne.index);t.setValue(g,{value:B(Q,!0)})},editable(Q){Q.target.disabled=!Q.detail.editable}},G)}),k.addEventListener("input",G=>{const X=B(G,!0),Q=B(G,!1);t.setValue(g,{value:X}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:g,name:"Keystroke",value:Q,changeEx:X,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(k,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],G=>G.target.checked)):k.addEventListener("input",function(G){t.setValue(g,{value:B(G,!0)})}),this.data.combo&&this._setTextStyle(k),this._setBackgroundColor(k),this._setDefaultPropertiesFromJS(k),this.container.append(k),this.container}}class i extends P{constructor(t){super(t,{isRenderable:!!(t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str)})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const m=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===m.length)return this.container;const k=new b({container:this.container,trigger:Array.from(m),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),E=this.page,O=p.Util.normalizeRect([this.data.parentRect[0],E.view[3]-this.data.parentRect[1]+E.view[1],this.data.parentRect[2],E.view[3]-this.data.parentRect[3]+E.view[1]]),B=O[0]+this.data.parentRect[2]-this.data.parentRect[0],z=O[1],[G,X,Q,se]=this.viewport.viewBox,re=se-X;return this.container.style.left=100*(B-G)/(Q-G)+"%",this.container.style.top=100*(z-X)/re+"%",this.container.append(k.render()),this.container}}class b{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){const g=document.createElement("div");g.className="popupWrapper",this.hideElement=this.hideWrapper?g:this.container,this.hideElement.hidden=!0;const m=document.createElement("div");m.className="popup";const k=this.color;k&&(m.style.backgroundColor=p.Util.makeHexColor(0|.7*(255-k[0])+k[0],0|.7*(255-k[1])+k[1],0|.7*(255-k[2])+k[2]));const E=document.createElement("h1");E.dir=this.titleObj.dir,E.textContent=this.titleObj.str,m.append(E);const O=x.PDFDateString.toDateObject(this.modificationDate);if(O){const B=document.createElement("span");B.className="popupDate",B.textContent="{{date}}, {{time}}",B.dataset.l10nId="annotation_date_string",B.dataset.l10nArgs=JSON.stringify({date:O.toLocaleDateString(),time:O.toLocaleTimeString()}),m.append(B)}if(!this.richText?.str||this.contentsObj?.str&&this.contentsObj.str!==this.richText.str){const B=this._formatContents(this.contentsObj);m.append(B)}else H.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:m}),m.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const B of this.trigger)B.addEventListener("click",this._toggle.bind(this)),B.addEventListener("mouseover",this._show.bind(this,!1)),B.addEventListener("mouseout",this._hide.bind(this,!1));return m.addEventListener("click",this._hide.bind(this,!0)),g.append(m),g}_formatContents({str:t,dir:g}){const m=document.createElement("p");m.className="popupContent",m.dir=g;const k=t.split(/(?:\r\n?|\n)/);for(let E=0,O=k.length;E<O;++E)m.append(document.createTextNode(k[E])),E<O-1&&m.append(document.createElement("br"));return m}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex=parseInt(this.container.style.zIndex)+1e3)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex=parseInt(this.container.style.zIndex)-1e3)}}class R extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.textContent=t.data.textContent}render(){if(this.container.className="freeTextAnnotation",this.textContent){const t=document.createElement("div");t.className="annotationTextContent",t.setAttribute("role","comment");for(const g of this.textContent){const m=document.createElement("span");m.textContent=g,t.append(m)}this.container.append(t)}return this.data.hasPopup||this._createPopup(null,this.data),this.container}}class I extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:g,height:m}=r(t.rect),k=this.svgFactory.create(g,m,!0),E=this.svgFactory.createElement("svg:line");return E.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),E.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),E.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),E.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),E.setAttribute("stroke-width",t.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),k.append(E),this.container.append(k),this._createPopup(E,t),this.container}}class W extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:g,height:m}=r(t.rect),k=this.svgFactory.create(g,m,!0),E=t.borderStyle.width,O=this.svgFactory.createElement("svg:rect");return O.setAttribute("x",E/2),O.setAttribute("y",E/2),O.setAttribute("width",g-E),O.setAttribute("height",m-E),O.setAttribute("stroke-width",E||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),k.append(O),this.container.append(k),this._createPopup(O,t),this.container}}class U extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:g,height:m}=r(t.rect),k=this.svgFactory.create(g,m,!0),E=t.borderStyle.width,O=this.svgFactory.createElement("svg:ellipse");return O.setAttribute("cx",g/2),O.setAttribute("cy",m/2),O.setAttribute("rx",g/2-E/2),O.setAttribute("ry",m/2-E/2),O.setAttribute("stroke-width",E||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),k.append(O),this.container.append(k),this._createPopup(O,t),this.container}}class J extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:g,height:m}=r(t.rect),k=this.svgFactory.create(g,m,!0);let E=[];for(const B of t.vertices)E.push(B.x-t.rect[0]+","+(t.rect[3]-B.y));E=E.join(" ");const O=this.svgFactory.createElement(this.svgElementName);return O.setAttribute("points",E),O.setAttribute("stroke-width",t.borderStyle.width||1),O.setAttribute("stroke","transparent"),O.setAttribute("fill","transparent"),k.append(O),this.container.append(k),this._createPopup(O,t),this.container}}class K extends J{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class C extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class F extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:g,height:m}=r(t.rect),k=this.svgFactory.create(g,m,!0);for(const E of t.inkLists){let O=[];for(const z of E)O.push(`${z.x-t.rect[0]},${t.rect[3]-z.y}`);O=O.join(" ");const B=this.svgFactory.createElement(this.svgElementName);B.setAttribute("points",O),B.setAttribute("stroke-width",t.borderStyle.width||1),B.setAttribute("stroke","transparent"),B.setAttribute("fill","transparent"),this._createPopup(B,t),k.append(B)}return this.container.append(k),this.container}}class N extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class L extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class M extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class _ extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class n extends P{constructor(t){super(t,{isRenderable:!!(t.data.hasPopup||t.data.titleObj?.str||t.data.contentsObj?.str||t.data.richText?.str),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class h extends P{constructor(t){super(t,{isRenderable:!0});const{filename:g,content:m}=this.data.file;this.filename=(0,x.getFilenameFromUrl)(g),this.content=m,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:g,content:m})}render(){this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.className="popupTriggerArea",t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.titleObj?.str||this.data.contentsObj?.str||this.data.richText)&&this._createPopup(t,this.data),this.container.append(t),this.container}_download(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class w{static#e(t,g,m,k){const E=t.firstChild||t;E.id=`${x.AnnotationPrefix}${g}`,m.append(t),k?.moveElementInDOM(m,t,E,!1)}static render(t){const{annotations:g,div:m,viewport:k,accessibilityManager:E}=t;this.#t(m,k);let O=0;for(const B of g){if(B.annotationType!==p.AnnotationType.POPUP){const{width:G,height:X}=r(B.rect);if(G<=0||X<=0)continue}const z=l.create({data:B,layer:m,page:t.page,viewport:k,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new x.DOMSVGFactory,annotationStorage:t.annotationStorage||new D.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(z.isRenderable){const G=z.render();if(B.hidden&&(G.style.visibility="hidden"),Array.isArray(G))for(const X of G)X.style.zIndex=O++,w.#e(X,B.id,m,E);else G.style.zIndex=O++,z instanceof i?m.prepend(G):w.#e(G,B.id,m,E)}}this.#n(m,t.annotationCanvasMap)}static update(t){const{annotationCanvasMap:g,div:m,viewport:k}=t;this.#t(m,k),this.#n(m,g),m.hidden=!1}static#t(t,{width:g,height:m,rotation:k}){const{style:E}=t,O=k%180!=0,B=Math.floor(g)+"px",z=Math.floor(m)+"px";E.width=O?z:B,E.height=O?B:z,t.setAttribute("data-main-rotation",k)}static#n(t,g){if(g){for(const[m,k]of g){const E=t.querySelector(`[data-annotation-id="${m}"]`);if(!E)continue;const{firstChild:O}=E;O?"CANVAS"===O.nodeName?O.replaceWith(k):O.before(k):E.append(k)}g.clear()}}}u.AnnotationLayer=w},(ee,u)=>{function V(x){return Math.floor(255*Math.max(0,Math.min(1,x))).toString(16).padStart(2,"0")}Object.defineProperty(u,"__esModule",{value:!0}),u.ColorConverters=void 0,u.ColorConverters=class p{static CMYK_G([D,j,H,T]){return["G",1-Math.min(1,.3*D+.59*H+.11*j+T)]}static G_CMYK([D]){return["CMYK",0,0,0,1-D]}static G_RGB([D]){return["RGB",D,D,D]}static G_HTML([D]){const j=V(D);return`#${j}${j}${j}`}static RGB_G([D,j,H]){return["G",.3*D+.59*j+.11*H]}static RGB_HTML([D,j,H]){return`#${V(D)}${V(j)}${V(H)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([D,j,H,T]){return["RGB",1-Math.min(1,D+T),1-Math.min(1,H+T),1-Math.min(1,j+T)]}static CMYK_HTML(D){const j=this.CMYK_RGB(D).slice(1);return this.RGB_HTML(j)}static RGB_CMYK([D,j,H]){const T=1-D,s=1-j,f=1-H;return["CMYK",T,s,f,Math.min(T,s,f)]}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.XfaLayer=void 0;var p=V(20);u.XfaLayer=class x{static setupStorage(j,H,T,s,f){const r=s.getValue(H,{value:null});switch(T.name){case"textarea":if(null!==r.value&&(j.textContent=r.value),"print"===f)break;j.addEventListener("input",l=>{s.setValue(H,{value:l.target.value})});break;case"input":if("radio"===T.attributes.type||"checkbox"===T.attributes.type){if(r.value===T.attributes.xfaOn?j.setAttribute("checked",!0):r.value===T.attributes.xfaOff&&j.removeAttribute("checked"),"print"===f)break;j.addEventListener("change",l=>{s.setValue(H,{value:l.target.getAttribute(l.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==r.value&&j.setAttribute("value",r.value),"print"===f)break;j.addEventListener("input",l=>{s.setValue(H,{value:l.target.value})})}break;case"select":if(null!==r.value)for(const l of T.children)l.attributes.value===r.value&&(l.attributes.selected=!0);j.addEventListener("input",l=>{const P=l.target.options;s.setValue(H,{value:-1===P.selectedIndex?"":P[P.selectedIndex].value})})}}static setAttributes({html:j,element:H,storage:T=null,intent:s,linkService:f}){const{attributes:r}=H,l=j instanceof HTMLAnchorElement;"radio"===r.type&&(r.name=`${r.name}-${s}`);for(const[P,c]of Object.entries(r))if(null!=c)switch(P){case"class":c.length&&j.setAttribute(P,c.join(" "));break;case"dataId":break;case"id":j.setAttribute("data-element-id",c);break;case"style":Object.assign(j.style,c);break;case"textContent":j.textContent=c;break;default:(!l||"href"!==P&&"newWindow"!==P)&&j.setAttribute(P,c)}l&&f.addLinkAttributes(j,r.href,r.newWindow),T&&r.dataId&&this.setupStorage(j,r.dataId,H,T)}static render(j){const H=j.annotationStorage,T=j.linkService,s=j.xfaHtml,f=j.intent||"display",r=document.createElement(s.name);s.attributes&&this.setAttributes({html:r,element:s,intent:f,linkService:T});const l=[[s,-1,r]],P=j.div;if(P.append(r),j.viewport){const o=`matrix(${j.viewport.transform.join(",")})`;P.style.transform=o}"richText"!==f&&P.setAttribute("class","xfaLayer xfaFont");const c=[];for(;l.length>0;){const[o,a,S]=l.at(-1);if(a+1===o.children.length){l.pop();continue}const v=o.children[++l.at(-1)[1]];if(null===v)continue;const{name:y}=v;if("#text"===y){const e=document.createTextNode(v.value);c.push(e),S.append(e);continue}let d;if(d=v?.attributes?.xmlns?document.createElementNS(v.attributes.xmlns,y):document.createElement(y),S.append(d),v.attributes&&this.setAttributes({html:d,element:v,storage:H,intent:f,linkService:T}),v.children&&v.children.length>0)l.push([v,-1,d]);else if(v.value){const e=document.createTextNode(v.value);p.XfaText.shouldBuildText(y)&&c.push(e),d.append(e)}}for(const o of P.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))o.setAttribute("readOnly",!0);return{textDivs:c}}static update(j){const H=`matrix(${j.viewport.transform.join(",")})`;j.div.style.transform=H,j.div.hidden=!1}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.TextLayerRenderTask=void 0,u.renderTextLayer=function v(y){const d=new S({textContent:y.textContent,textContentStream:y.textContentStream,container:y.container,viewport:y.viewport,textDivs:y.textDivs,textContentItemsStr:y.textContentItemsStr,enhanceTextSelection:y.enhanceTextSelection});return d._render(y.timeout),d};var p=V(1),x=V(8);const j=30,T=new Map,s=/^\s+$/g;function r(y,d,e,i){const b=document.createElement("span"),R=y._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==d.str,hasEOL:d.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1,fontSize:0}:{angle:0,canvasWidth:0,hasText:""!==d.str,hasEOL:d.hasEOL,fontSize:0};y._textDivs.push(b);const I=p.Util.transform(y._viewport.transform,d.transform);let W=Math.atan2(I[1],I[0]);const U=e[d.fontName];U.vertical&&(W+=Math.PI/2);const J=Math.hypot(I[2],I[3]),K=J*function f(y,d){const e=T.get(y);if(e)return e;d.save(),d.font=`30px ${y}`;const i=d.measureText("");let b=i.fontBoundingBoxAscent,R=Math.abs(i.fontBoundingBoxDescent);if(b){d.restore();const W=b/(b+R);return T.set(y,W),W}d.strokeStyle="red",d.clearRect(0,0,j,j),d.strokeText("g",0,0);let I=d.getImageData(0,0,j,j).data;R=0;for(let W=I.length-1-3;W>=0;W-=4)if(I[W]>0){R=Math.ceil(W/4/j);break}d.clearRect(0,0,j,j),d.strokeText("A",0,j),I=d.getImageData(0,0,j,j).data,b=0;for(let W=0,U=I.length;W<U;W+=4)if(I[W]>0){b=j-Math.floor(W/4/j);break}if(d.restore(),b){const W=b/(b+R);return T.set(y,W),W}return T.set(y,.8),.8}(U.fontFamily,i);let C,F;0===W?(C=I[4],F=I[5]-K):(C=I[4]+K*Math.sin(W),F=I[5]-K*Math.cos(W)),b.style.left=`${C}px`,b.style.top=`${F}px`,b.style.fontSize=`${J}px`,b.style.fontFamily=U.fontFamily,R.fontSize=J,b.setAttribute("role","presentation"),b.textContent=d.str,b.dir=d.dir,y._fontInspectorEnabled&&(b.dataset.fontName=d.fontName),0!==W&&(R.angle=W*(180/Math.PI));let N=!1;if(d.str.length>1||y._enhanceTextSelection&&s.test(d.str))N=!0;else if(" "!==d.str&&d.transform[0]!==d.transform[3]){const L=Math.abs(d.transform[0]),M=Math.abs(d.transform[3]);L!==M&&Math.max(L,M)/Math.min(L,M)>1.5&&(N=!0)}if(N&&(R.canvasWidth=U.vertical?d.height*y._viewport.scale:d.width*y._viewport.scale),y._textDivProperties.set(b,R),y._textContentStream&&y._layoutText(b),y._enhanceTextSelection&&R.hasText){let L=1,M=0;0!==W&&(L=Math.cos(W),M=Math.sin(W));const _=(U.vertical?d.height:d.width)*y._viewport.scale,n=J;let h,w;0!==W?(h=[L,M,-M,L,C,F],w=p.Util.getAxialAlignedBoundingBox([0,0,_,n],h)):w=[C,F,C+_,F+n],y._bounds.push({left:w[0],top:w[1],right:w[2],bottom:w[3],div:b,size:[_,n],m:h})}}function l(y){if(y._canceled)return;const d=y._textDivs,e=y._capability,i=d.length;if(i>1e5)return y._renderingDone=!0,void e.resolve();if(!y._textContentStream)for(let b=0;b<i;b++)y._layoutText(d[b]);y._renderingDone=!0,e.resolve()}function P(y,d,e){let i=0;for(let b=0;b<e;b++){const R=y[d++];R>0&&(i=i?Math.min(R,i):R)}return i}function a(y,d){d.sort(function(b,R){return b.x1-R.x1||b.index-R.index});const i=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const b of d){let R=0;for(;R<i.length&&i[R].end<=b.y1;)R++;let I=i.length-1;for(;I>=0&&i[I].start>=b.y2;)I--;let W,U,J,K,C=-1/0;for(J=R;J<=I;J++){let L;W=i[J],U=W.boundary,L=U.x2>b.x1?U.index>b.index?U.x1New:b.x1:void 0===U.x2New?(U.x2+b.x1)/2:U.x2New,L>C&&(C=L)}for(b.x1New=C,J=R;J<=I;J++)W=i[J],U=W.boundary,void 0===U.x2New?U.x2>b.x1?U.index>b.index&&(U.x2New=U.x2):U.x2New=C:U.x2New>C&&(U.x2New=Math.max(C,U.x2));const F=[];let N=null;for(J=R;J<=I;J++){W=i[J],U=W.boundary;const L=U.x2>b.x2?U:b;N===L?F.at(-1).end=W.end:(F.push({start:W.start,end:W.end,boundary:L}),N=L)}for(i[R].start<b.y1&&(F[0].start=b.y1,F.unshift({start:i[R].start,end:b.y1,boundary:i[R].boundary})),b.y2<i[I].end&&(F.at(-1).end=b.y2,F.push({start:b.y2,end:i[I].end,boundary:i[I].boundary})),J=R;J<=I;J++){if(W=i[J],U=W.boundary,void 0!==U.x2New)continue;let L=!1;for(K=R-1;!L&&K>=0&&i[K].start>=U.y1;K--)L=i[K].boundary===U;for(K=I+1;!L&&K<i.length&&i[K].end<=U.y2;K++)L=i[K].boundary===U;for(K=0;!L&&K<F.length;K++)L=F[K].boundary===U;L||(U.x2New=C)}Array.prototype.splice.apply(i,[R,I-R+1,...F])}for(const b of i){const R=b.boundary;void 0===R.x2New&&(R.x2New=Math.max(y,R.x2))}}class S{constructor({textContent:d,textContentStream:e,container:i,viewport:b,textDivs:R,textContentItemsStr:I,enhanceTextSelection:W}){W&&(0,x.deprecated)("The `enhanceTextSelection` functionality will be removed in the future."),this._textContent=d,this._textContentStream=e,this._container=i,this._document=i.ownerDocument,this._viewport=b,this._textDivs=R||[],this._textContentItemsStr=I||[],this._enhanceTextSelection=!!W,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,p.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._devicePixelRatio=globalThis.devicePixelRatio||1,this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new p.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(d,e){for(let i=0,b=d.length;i<b;i++)if(void 0!==d[i].str)this._textContentItemsStr.push(d[i].str),r(this,d[i],e,this._layoutTextCtx);else if("beginMarkedContentProps"===d[i].type||"beginMarkedContent"===d[i].type){const R=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==d[i].id&&this._container.setAttribute("id",`${d[i].id}`),R.append(this._container)}else"endMarkedContent"===d[i].type&&(this._container=this._container.parentNode)}_layoutText(d){const e=this._textDivProperties.get(d);let i="";if(0!==e.canvasWidth&&e.hasText){const{fontFamily:b}=d.style,{fontSize:R}=e;(R!==this._layoutTextLastFontSize||b!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${R*this._devicePixelRatio}px ${b}`,this._layoutTextLastFontSize=R,this._layoutTextLastFontFamily=b);const{width:I}=this._layoutTextCtx.measureText(d.textContent);if(I>0){const W=this._devicePixelRatio*e.canvasWidth/I;this._enhanceTextSelection&&(e.scale=W),i=`scaleX(${W})`}}if(0!==e.angle&&(i=`rotate(${e.angle}deg) ${i}`),i.length>0&&(this._enhanceTextSelection&&(e.originalTransform=i),d.style.transform=i),e.hasText&&this._container.append(d),e.hasEOL){const b=document.createElement("br");b.setAttribute("role","presentation"),this._container.append(b)}}_render(d=0){const e=(0,p.createPromiseCapability)();let i=Object.create(null);const b=this._document.createElement("canvas");if(b.height=b.width=j,this._layoutTextCtx=b.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),e.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const R=()=>{this._reader.read().then(({value:I,done:W})=>{W?e.resolve():(Object.assign(i,I.styles),this._processItems(I.items,i),R())},e.reject)};this._reader=this._textContentStream.getReader(),R()}}e.promise.then(()=>{i=null,d?this._renderTimer=setTimeout(()=>{l(this),this._renderTimer=null},d):l(this)},this._capability.reject)}expandTextDivs(d=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function c(y){const d=y._bounds,e=y._viewport,i=function o(y,d,e){const i=e.map(function(R,I){return{x1:R.left,y1:R.top,x2:R.right,y2:R.bottom,index:I,x1New:void 0,x2New:void 0}});a(y,i);const b=new Array(e.length);for(const R of i)b[R.index]={left:R.x1New,top:0,right:R.x2New,bottom:0};e.map(function(R,I){const W=b[I],U=i[I];U.x1=R.top,U.y1=y-W.right,U.x2=R.bottom,U.y2=y-W.left,U.index=I,U.x1New=void 0,U.x2New=void 0}),a(d,i);for(const R of i){const I=R.index;b[I].top=R.x1New,b[I].bottom=R.x2New}return b}(e.width,e.height,d);for(let b=0;b<i.length;b++){const R=d[b].div,I=y._textDivProperties.get(R);if(0===I.angle){I.paddingLeft=d[b].left-i[b].left,I.paddingTop=d[b].top-i[b].top,I.paddingRight=i[b].right-d[b].right,I.paddingBottom=i[b].bottom-d[b].bottom,y._textDivProperties.set(R,I);continue}const W=i[b],U=d[b],J=U.m,K=J[0],C=J[1],F=[[0,0],[0,U.size[1]],[U.size[0],0],U.size],N=new Float64Array(64);for(let M=0,_=F.length;M<_;M++){const n=p.Util.applyTransform(F[M],J);N[M+0]=K&&(W.left-n[0])/K,N[M+4]=C&&(W.top-n[1])/C,N[M+8]=K&&(W.right-n[0])/K,N[M+12]=C&&(W.bottom-n[1])/C,N[M+16]=C&&(W.left-n[0])/-C,N[M+20]=K&&(W.top-n[1])/K,N[M+24]=C&&(W.right-n[0])/-C,N[M+28]=K&&(W.bottom-n[1])/K,N[M+32]=K&&(W.left-n[0])/-K,N[M+36]=C&&(W.top-n[1])/-C,N[M+40]=K&&(W.right-n[0])/-K,N[M+44]=C&&(W.bottom-n[1])/-C,N[M+48]=C&&(W.left-n[0])/C,N[M+52]=K&&(W.top-n[1])/-K,N[M+56]=C&&(W.right-n[0])/C,N[M+60]=K&&(W.bottom-n[1])/-K}const L=1+Math.min(Math.abs(K),Math.abs(C));I.paddingLeft=P(N,32,16)/L,I.paddingTop=P(N,48,16)/L,I.paddingRight=P(N,0,16)/L,I.paddingBottom=P(N,16,16)/L,y._textDivProperties.set(R,I)}}(this),this._bounds=null);const e=[],i=[];for(let b=0,R=this._textDivs.length;b<R;b++){const I=this._textDivs[b],W=this._textDivProperties.get(I);W.hasText&&(d?(e.length=0,i.length=0,W.originalTransform&&e.push(W.originalTransform),W.paddingTop>0?(i.push(`${W.paddingTop}px`),e.push(`translateY(${-W.paddingTop}px)`)):i.push(0),i.push(W.paddingRight>0?W.paddingRight/W.scale+"px":0),i.push(W.paddingBottom>0?`${W.paddingBottom}px`:0),W.paddingLeft>0?(i.push(W.paddingLeft/W.scale+"px"),e.push(`translateX(${-W.paddingLeft/W.scale}px)`)):i.push(0),I.style.padding=i.join(" "),e.length&&(I.style.transform=e.join(" "))):(I.style.padding=null,I.style.transform=W.originalTransform))}}}u.TextLayerRenderTask=S},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.SVGGraphics=void 0;var p=V(8),x=V(1),D=V(3);let j=class{constructor(){(0,x.unreachable)("Not implemented: SVGGraphics")}};u.SVGGraphics=j;{let o=function(e){let i=[];const b=[];for(const R of e)"save"!==R.fn?"restore"===R.fn?i=b.pop():i.push(R):(i.push({fnId:92,fn:"group",items:[]}),b.push(i),i=i.at(-1).items);return i},a=function(e){if(Number.isInteger(e))return e.toString();const i=e.toFixed(10);let b=i.length-1;if("0"!==i[b])return i;do{b--}while("0"===i[b]);return i.substring(0,"."===i[b]?b:b+1)},S=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${a(e[0])} ${a(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const i=180*Math.acos(e[0])/Math.PI;return`rotate(${a(i)})`}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${a(e[4])} ${a(e[5])})`;return`matrix(${a(e[0])} ${a(e[1])} ${a(e[2])} ${a(e[3])} ${a(e[4])} ${a(e[5])})`};const H={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},T="http://www.w3.org/XML/1998/namespace",s="http://www.w3.org/1999/xlink",f=["butt","round","square"],r=["miter","round","bevel"],l=function(e,i="",b=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!b)return URL.createObjectURL(new Blob([e],{type:i}));const R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let I=`data:${i};base64,`;for(let W=0,U=e.length;W<U;W+=3){const J=255&e[W],K=255&e[W+1],C=255&e[W+2];I+=R[J>>2]+R[(3&J)<<4|K>>4]+R[W+1<U?(15&K)<<2|C>>6:64]+R[W+2<U?63&C:64]}return I},P=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),b=new Int32Array(256);for(let C=0;C<256;C++){let F=C;for(let N=0;N<8;N++)F=1&F?3988292384^F>>1&2147483647:F>>1&2147483647;b[C]=F}function I(C,F,N,L){let M=L;const _=F.length;N[M]=_>>24&255,N[M+1]=_>>16&255,N[M+2]=_>>8&255,N[M+3]=255&_,M+=4,N[M]=255&C.charCodeAt(0),N[M+1]=255&C.charCodeAt(1),N[M+2]=255&C.charCodeAt(2),N[M+3]=255&C.charCodeAt(3),M+=4,N.set(F,M),M+=F.length;const n=function R(C,F,N){let L=-1;for(let M=F;M<N;M++)L=L>>>8^b[255&(L^C[M])];return-1^L}(N,L+4,M);N[M]=n>>24&255,N[M+1]=n>>16&255,N[M+2]=n>>8&255,N[M+3]=255&n}function J(C){let F=C.length;const N=65535,L=Math.ceil(F/N),M=new Uint8Array(2+F+5*L+4);let _=0;M[_++]=120,M[_++]=156;let n=0;for(;F>N;)M[_++]=0,M[_++]=255,M[_++]=255,M[_++]=0,M[_++]=0,M.set(C.subarray(n,n+N),_),_+=N,n+=N,F-=N;M[_++]=1,M[_++]=255&F,M[_++]=F>>8&255,M[_++]=255&~F,M[_++]=(65535&~F)>>8&255,M.set(C.subarray(n),_),_+=C.length-n;const h=function W(C,F,N){let L=1,M=0;for(let _=F;_<N;++_)L=(L+(255&C[_]))%65521,M=(M+L)%65521;return M<<16|L}(C,0,C.length);return M[_++]=h>>24&255,M[_++]=h>>16&255,M[_++]=h>>8&255,M[_++]=255&h,M}return function(F,N,L){return function K(C,F,N,L){const M=C.width,_=C.height;let n,h,w;const A=C.data;switch(F){case x.ImageKind.GRAYSCALE_1BPP:h=0,n=1,w=M+7>>3;break;case x.ImageKind.RGB_24BPP:h=2,n=8,w=3*M;break;case x.ImageKind.RGBA_32BPP:h=6,n=8,w=4*M;break;default:throw new Error("invalid format")}const t=new Uint8Array((1+w)*_);let g=0,m=0;for(let G=0;G<_;++G)t[g++]=0,t.set(A.subarray(m,m+w),g),m+=w,g+=w;if(F===x.ImageKind.GRAYSCALE_1BPP&&L){g=0;for(let G=0;G<_;G++){g++;for(let X=0;X<w;X++)t[g++]^=255}}const k=new Uint8Array([M>>24&255,M>>16&255,M>>8&255,255&M,_>>24&255,_>>16&255,_>>8&255,255&_,n,h,0,0,0]),E=function U(C){if(!D.isNodeJS)return J(C);try{let F;F=parseInt(process.versions.node)>=8?C:Buffer.from(C);const N=__webpack_require__(372).deflateSync(F,{level:9});return N instanceof Uint8Array?N:new Uint8Array(N)}catch(F){(0,x.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+F)}return J(C)}(t),B=new Uint8Array(e.length+36+k.length+E.length);let z=0;return B.set(e,z),z+=e.length,I("IHDR",k,B,z),z+=12+k.length,I("IDATA",E,B,z),z+=12+E.length,I("IEND",new Uint8Array(0),B,z),l(B,"image/png",N)}(F,void 0===F.kind?x.ImageKind.GRAYSCALE_1BPP:F.kind,N,L)}}();class c{constructor(){this.fontSizeScale=1,this.fontWeight=H.fontWeight,this.fontSize=0,this.textMatrix=x.IDENTITY_MATRIX,this.fontMatrix=x.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=x.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=H.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,b){this.x=i,this.y=b}}let v=0,y=0,d=0;u.SVGGraphics=j=class{constructor(e,i,b=!1){(0,p.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new p.DOMSVGFactory,this.current=new c,this.transformMatrix=x.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!b,this._operatorIdMapping=[];for(const R in x.OPS)this._operatorIdMapping[x.OPS[R]]=R}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const i=e.fnArray,b=e.argsArray;for(let R=0,I=i.length;R<I;R++)if(i[R]===x.OPS.dependency)for(const W of b[R]){const U=W.startsWith("g_")?this.commonObjs:this.objs,J=new Promise(K=>{U.get(W,K)});this.current.dependencies.push(J)}return Promise.all(this.current.dependencies)}transform(e,i,b,R,I,W){this.transformMatrix=x.Util.transform(this.transformMatrix,[e,i,b,R,I,W]),this.tgrp=null}getSVG(e,i){this.viewport=i;const b=this._initialize(i);return this.loadDependencies(e).then(()=>(this.transformMatrix=x.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),b))}convertOpList(e){const i=this._operatorIdMapping,b=e.argsArray,R=e.fnArray,I=[];for(let W=0,U=R.length;W<U;W++){const J=R[W];I.push({fnId:J,fn:i[J],args:b[W]})}return o(I)}executeOpTree(e){for(const i of e){const b=i.fn,I=i.args;switch(0|i.fnId){case x.OPS.beginText:this.beginText();break;case x.OPS.dependency:break;case x.OPS.setLeading:this.setLeading(I);break;case x.OPS.setLeadingMoveText:this.setLeadingMoveText(I[0],I[1]);break;case x.OPS.setFont:this.setFont(I);break;case x.OPS.showText:case x.OPS.showSpacedText:this.showText(I[0]);break;case x.OPS.endText:this.endText();break;case x.OPS.moveText:this.moveText(I[0],I[1]);break;case x.OPS.setCharSpacing:this.setCharSpacing(I[0]);break;case x.OPS.setWordSpacing:this.setWordSpacing(I[0]);break;case x.OPS.setHScale:this.setHScale(I[0]);break;case x.OPS.setTextMatrix:this.setTextMatrix(I[0],I[1],I[2],I[3],I[4],I[5]);break;case x.OPS.setTextRise:this.setTextRise(I[0]);break;case x.OPS.setTextRenderingMode:this.setTextRenderingMode(I[0]);break;case x.OPS.setLineWidth:this.setLineWidth(I[0]);break;case x.OPS.setLineJoin:this.setLineJoin(I[0]);break;case x.OPS.setLineCap:this.setLineCap(I[0]);break;case x.OPS.setMiterLimit:this.setMiterLimit(I[0]);break;case x.OPS.setFillRGBColor:this.setFillRGBColor(I[0],I[1],I[2]);break;case x.OPS.setStrokeRGBColor:this.setStrokeRGBColor(I[0],I[1],I[2]);break;case x.OPS.setStrokeColorN:this.setStrokeColorN(I);break;case x.OPS.setFillColorN:this.setFillColorN(I);break;case x.OPS.shadingFill:this.shadingFill(I[0]);break;case x.OPS.setDash:this.setDash(I[0],I[1]);break;case x.OPS.setRenderingIntent:this.setRenderingIntent(I[0]);break;case x.OPS.setFlatness:this.setFlatness(I[0]);break;case x.OPS.setGState:this.setGState(I[0]);break;case x.OPS.fill:this.fill();break;case x.OPS.eoFill:this.eoFill();break;case x.OPS.stroke:this.stroke();break;case x.OPS.fillStroke:this.fillStroke();break;case x.OPS.eoFillStroke:this.eoFillStroke();break;case x.OPS.clip:this.clip("nonzero");break;case x.OPS.eoClip:this.clip("evenodd");break;case x.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case x.OPS.paintImageXObject:this.paintImageXObject(I[0]);break;case x.OPS.paintInlineImageXObject:this.paintInlineImageXObject(I[0]);break;case x.OPS.paintImageMaskXObject:this.paintImageMaskXObject(I[0]);break;case x.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(I[0],I[1]);break;case x.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case x.OPS.closePath:this.closePath();break;case x.OPS.closeStroke:this.closeStroke();break;case x.OPS.closeFillStroke:this.closeFillStroke();break;case x.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case x.OPS.nextLine:this.nextLine();break;case x.OPS.transform:this.transform(I[0],I[1],I[2],I[3],I[4],I[5]);break;case x.OPS.constructPath:this.constructPath(I[0],I[1]);break;case x.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,x.warn)(`Unimplemented operator ${b}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,i,b,R,I,W){const U=this.current;U.textMatrix=U.lineMatrix=[e,i,b,R,I,W],U.textMatrixScale=Math.hypot(e,i),U.x=U.lineX=0,U.y=U.lineY=0,U.xcoords=[],U.ycoords=[],U.tspan=this.svgFactory.createElement("svg:tspan"),U.tspan.setAttributeNS(null,"font-family",U.fontFamily),U.tspan.setAttributeNS(null,"font-size",`${a(U.fontSize)}px`),U.tspan.setAttributeNS(null,"y",a(-U.y)),U.txtElement=this.svgFactory.createElement("svg:text"),U.txtElement.append(U.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=x.IDENTITY_MATRIX,e.lineMatrix=x.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,i){const b=this.current;b.x=b.lineX+=e,b.y=b.lineY+=i,b.xcoords=[],b.ycoords=[],b.tspan=this.svgFactory.createElement("svg:tspan"),b.tspan.setAttributeNS(null,"font-family",b.fontFamily),b.tspan.setAttributeNS(null,"font-size",`${a(b.fontSize)}px`),b.tspan.setAttributeNS(null,"y",a(-b.y))}showText(e){const i=this.current,b=i.font,R=i.fontSize;if(0===R)return;const I=i.fontSizeScale,W=i.charSpacing,U=i.wordSpacing,J=i.fontDirection,K=i.textHScale*J,C=b.vertical,F=C?1:-1,N=b.defaultVMetrics,L=R*i.fontMatrix[0];let M=0;for(const h of e){if(null===h){M+=J*U;continue}if("number"==typeof h){M+=F*h*R/1e3;continue}const w=(h.isSpace?U:0)+W,A=h.fontChar;let t,g,k,m=h.width;if(C){let E;const O=h.vmetric||N;E=h.vmetric?O[1]:.5*m,E=-E*L,m=O?-O[0]:m,t=E/I,g=(M+O[2]*L)/I}else t=M/I,g=0;(h.isInFont||b.missingFile)&&(i.xcoords.push(i.x+t),C&&i.ycoords.push(-i.y+g),i.tspan.textContent+=A),k=C?m*L-w*J:m*L+w*J,M+=k}i.tspan.setAttributeNS(null,"x",i.xcoords.map(a).join(" ")),i.tspan.setAttributeNS(null,"y",C?i.ycoords.map(a).join(" "):a(-i.y)),C?i.y-=M:i.x+=M*K,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${a(i.fontSize)}px`),i.fontStyle!==H.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==H.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const _=i.textRenderingMode&x.TextRenderingMode.FILL_STROKE_MASK;_===x.TextRenderingMode.FILL||_===x.TextRenderingMode.FILL_STROKE?(i.fillColor!==H.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===x.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(_===x.TextRenderingMode.STROKE||_===x.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let n=i.textMatrix;0!==i.textRise&&(n=n.slice(),n[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${S(n)} scale(${a(K)}, -1)`),i.txtElement.setAttributeNS(T,"xml:space","preserve"),i.txtElement.append(i.tspan),i.txtgrp.append(i.txtElement),this._ensureTransformGroup().append(i.txtElement)}setLeadingMoveText(e,i){this.setLeading(-i),this.moveText(e,i)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const i=l(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${i}); }\n`}setFont(e){const i=this.current,b=this.commonObjs.get(e[0]);let R=e[1];i.font=b,this.embedFonts&&!b.missingFile&&!this.embeddedFonts[b.loadedName]&&(this.addFontStyle(b),this.embeddedFonts[b.loadedName]=b),i.fontMatrix=b.fontMatrix||x.FONT_IDENTITY_MATRIX;let I="normal";b.black?I="900":b.bold&&(I="bold");const W=b.italic?"italic":"normal";R<0?(R=-R,i.fontDirection=-1):i.fontDirection=1,i.fontSize=R,i.fontFamily=b.loadedName,i.fontWeight=I,i.fontStyle=W,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",a(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){const e=this.current;e.textRenderingMode&x.TextRenderingMode.ADD_TO_PATH_FLAG&&e.txtElement?.hasChildNodes()&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=f[e]}setLineJoin(e){this.current.lineJoin=r[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,i,b){this.current.strokeColor=x.Util.makeHexColor(e,i,b)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,i,b){this.current.fillColor=x.Util.makeHexColor(e,i,b),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const i=this.viewport.width,b=this.viewport.height,R=x.Util.inverseTransform(this.transformMatrix),I=x.Util.applyTransform([0,0],R),W=x.Util.applyTransform([0,b],R),U=x.Util.applyTransform([i,0],R),J=x.Util.applyTransform([i,b],R),K=Math.min(I[0],W[0],U[0],J[0]),C=Math.min(I[1],W[1],U[1],J[1]),F=Math.max(I[0],W[0],U[0],J[0]),N=Math.max(I[1],W[1],U[1],J[1]),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",K),L.setAttributeNS(null,"y",C),L.setAttributeNS(null,"width",F-K),L.setAttributeNS(null,"height",N-C),L.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(L)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const i=e[1],b=e[2],R=e[3]||x.IDENTITY_MATRIX,[I,W,U,J]=e[4],K=e[5],C=e[6],F=e[7],N="shading"+d++,[L,M,_,n]=x.Util.normalizeRect([...x.Util.applyTransform([I,W],R),...x.Util.applyTransform([U,J],R)]),[h,w]=x.Util.singularValueDecompose2dScale(R),A=K*h,t=C*w,g=this.svgFactory.createElement("svg:pattern");g.setAttributeNS(null,"id",N),g.setAttributeNS(null,"patternUnits","userSpaceOnUse"),g.setAttributeNS(null,"width",A),g.setAttributeNS(null,"height",t),g.setAttributeNS(null,"x",`${L}`),g.setAttributeNS(null,"y",`${M}`);const m=this.svg,k=this.transformMatrix,E=this.current.fillColor,O=this.current.strokeColor,B=this.svgFactory.create(_-L,n-M);if(this.svg=B,this.transformMatrix=R,2===F){const z=x.Util.makeHexColor(...i);this.current.fillColor=z,this.current.strokeColor=z}return this.executeOpTree(this.convertOpList(b)),this.svg=m,this.transformMatrix=k,this.current.fillColor=E,this.current.strokeColor=O,g.append(B.childNodes[0]),this.defs.append(g),`url(#${N})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const i="shading"+d++,b=e[3];let R;switch(e[1]){case"axial":const I=e[4],W=e[5];R=this.svgFactory.createElement("svg:linearGradient"),R.setAttributeNS(null,"id",i),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"x1",I[0]),R.setAttributeNS(null,"y1",I[1]),R.setAttributeNS(null,"x2",W[0]),R.setAttributeNS(null,"y2",W[1]);break;case"radial":const U=e[4],J=e[5],K=e[6],C=e[7];R=this.svgFactory.createElement("svg:radialGradient"),R.setAttributeNS(null,"id",i),R.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),R.setAttributeNS(null,"cx",J[0]),R.setAttributeNS(null,"cy",J[1]),R.setAttributeNS(null,"r",C),R.setAttributeNS(null,"fx",U[0]),R.setAttributeNS(null,"fy",U[1]),R.setAttributeNS(null,"fr",K);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const I of b){const W=this.svgFactory.createElement("svg:stop");W.setAttributeNS(null,"offset",I[0]),W.setAttributeNS(null,"stop-color",I[1]),R.append(W)}return this.defs.append(R),`url(#${i})`;case"Mesh":return(0,x.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,i){this.current.dashArray=e,this.current.dashPhase=i}constructPath(e,i){const b=this.current;let R=b.x,I=b.y,W=[],U=0;for(const J of e)switch(0|J){case x.OPS.rectangle:R=i[U++],I=i[U++];const F=R+i[U++],N=I+i[U++];W.push("M",a(R),a(I),"L",a(F),a(I),"L",a(F),a(N),"L",a(R),a(N),"Z");break;case x.OPS.moveTo:R=i[U++],I=i[U++],W.push("M",a(R),a(I));break;case x.OPS.lineTo:R=i[U++],I=i[U++],W.push("L",a(R),a(I));break;case x.OPS.curveTo:R=i[U+4],I=i[U+5],W.push("C",a(i[U]),a(i[U+1]),a(i[U+2]),a(i[U+3]),a(R),a(I)),U+=6;break;case x.OPS.curveTo2:W.push("C",a(R),a(I),a(i[U]),a(i[U+1]),a(i[U+2]),a(i[U+3])),R=i[U+2],I=i[U+3],U+=4;break;case x.OPS.curveTo3:R=i[U+2],I=i[U+3],W.push("C",a(i[U]),a(i[U+1]),a(R),a(I),a(R),a(I)),U+=4;break;case x.OPS.closePath:W.push("Z")}W=W.join(" "),b.path&&e.length>0&&e[0]!==x.OPS.rectangle&&e[0]!==x.OPS.moveTo?W=b.path.getAttributeNS(null,"d")+W:(b.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(b.path)),b.path.setAttributeNS(null,"d",W),b.path.setAttributeNS(null,"fill","none"),b.element=b.path,b.setCurrentPoint(R,I)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const i="clippath"+v++,b=this.svgFactory.createElement("svg:clipPath");b.setAttributeNS(null,"id",i),b.setAttributeNS(null,"transform",S(this.transformMatrix));const R=e.element.cloneNode(!0);if(R.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,b.append(R),this.defs.append(b),e.activeClipUrl){e.clipGroup=null;for(const I of this.extraStack)I.clipGroup=null;b.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const i=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",i)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[i,b]of e)switch(i){case"LW":this.setLineWidth(b);break;case"LC":this.setLineCap(b);break;case"LJ":this.setLineJoin(b);break;case"ML":this.setMiterLimit(b);break;case"D":this.setDash(b[0],b[1]);break;case"RI":this.setRenderingIntent(b);break;case"FL":this.setFlatness(b);break;case"Font":this.setFont(b);break;case"CA":this.setStrokeAlpha(b);break;case"ca":this.setFillAlpha(b);break;default:(0,x.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,i=1){const b=this.current;let R=b.dashArray;1!==i&&R.length>0&&(R=R.map(function(I){return i*I})),e.setAttributeNS(null,"stroke",b.strokeColor),e.setAttributeNS(null,"stroke-opacity",b.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",a(b.miterLimit)),e.setAttributeNS(null,"stroke-linecap",b.lineCap),e.setAttributeNS(null,"stroke-linejoin",b.lineJoin),e.setAttributeNS(null,"stroke-width",a(i*b.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",R.map(a).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",a(i*b.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(e)}paintImageXObject(e){const i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);i?this.paintInlineImageXObject(i):(0,x.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,i){const b=e.width,R=e.height,I=P(e,this.forceDataSchema,!!i),W=this.svgFactory.createElement("svg:rect");W.setAttributeNS(null,"x","0"),W.setAttributeNS(null,"y","0"),W.setAttributeNS(null,"width",a(b)),W.setAttributeNS(null,"height",a(R)),this.current.element=W,this.clip("nonzero");const U=this.svgFactory.createElement("svg:image");U.setAttributeNS(s,"xlink:href",I),U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y",a(-R)),U.setAttributeNS(null,"width",a(b)+"px"),U.setAttributeNS(null,"height",a(R)+"px"),U.setAttributeNS(null,"transform",`scale(${a(1/b)} ${a(-1/R)})`),i?i.append(U):this._ensureTransformGroup().append(U)}paintImageMaskXObject(e){const i=this.current,b=e.width,R=e.height,I=i.fillColor;i.maskId="mask"+y++;const W=this.svgFactory.createElement("svg:mask");W.setAttributeNS(null,"id",i.maskId);const U=this.svgFactory.createElement("svg:rect");U.setAttributeNS(null,"x","0"),U.setAttributeNS(null,"y","0"),U.setAttributeNS(null,"width",a(b)),U.setAttributeNS(null,"height",a(R)),U.setAttributeNS(null,"fill",I),U.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.append(W),this._ensureTransformGroup().append(U),this.paintInlineImageXObject(e,W)}paintFormXObjectBegin(e,i){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i){const b=i[2]-i[0],R=i[3]-i[1],I=this.svgFactory.createElement("svg:rect");I.setAttributeNS(null,"x",i[0]),I.setAttributeNS(null,"y",i[1]),I.setAttributeNS(null,"width",a(b)),I.setAttributeNS(null,"height",a(R)),this.current.element=I,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const i=this.svgFactory.create(e.width,e.height),b=this.svgFactory.createElement("svg:defs");i.append(b),this.defs=b;const R=this.svgFactory.createElement("svg:g");return R.setAttributeNS(null,"transform",S(e.transform)),i.append(R),this.svg=R,i}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",S(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNodeStream=void 0;var p=V(1),x=V(33);const D=__webpack_require__(2339),j=__webpack_require__(143),H=__webpack_require__(7915),T=__webpack_require__(5598),s=/^file:\/\/\/[a-zA-Z]:\//;u.PDFNodeStream=class r{constructor(d){this.source=d,this.url=function f(y){const d=T.parse(y);return"file:"===d.protocol||d.host?d:/^[a-z]:[/\\]/i.test(y)?T.parse(`file:///${y}`):(d.host||(d.protocol="file:"),d)}(d.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new o(this),this._fullRequestReader}getRangeReader(d,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new v(this,d,e):new a(this,d,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const e of this._rangeRequestReaders.slice(0))e.cancel(d)}};class l{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=d.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._headersCapability=(0,p.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){if(yield d._readCapability.promise,d._done)return{value:void 0,done:!0};if(d._storedError)throw d._storedError;const e=d._readableStream.read();return null===e?(d._readCapability=(0,p.createPromiseCapability)(),d.read()):(d._loaded+=e.length,d.onProgress&&d.onProgress({loaded:d._loaded,total:d._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(d){this._readableStream?this._readableStream.destroy(d):this._error(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new p.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class P{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!d.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var d=this;return _asyncToGenerator(function*(){if(yield d._readCapability.promise,d._done)return{value:void 0,done:!0};if(d._storedError)throw d._storedError;const e=d._readableStream.read();return null===e?(d._readCapability=(0,p.createPromiseCapability)(),d.read()):(d._loaded+=e.length,d.onProgress&&d.onProgress({loaded:d._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(d){this._readableStream?this._readableStream.destroy(d):this._error(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function c(y,d){return{protocol:y.protocol,auth:y.auth,host:y.hostname,port:y.port,path:y.path,method:"GET",headers:d}}class o extends l{constructor(d){super(d);const e=i=>{if(404===i.statusCode){const W=new p.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=W,void this._headersCapability.reject(W)}this._headersCapability.resolve(),this._setReadableStream(i);const b=W=>this._readableStream.headers[W.toLowerCase()],{allowRangeRequests:R,suggestedLength:I}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:b,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=R,this._contentLength=I||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(b)};this._request=null,this._request="http:"===this._url.protocol?j.request(c(this._url,d.httpHeaders),e):H.request(c(this._url,d.httpHeaders),e),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class a extends P{constructor(d,e,i){super(d),this._httpHeaders={};for(const R in d.httpHeaders){const I=d.httpHeaders[R];typeof I>"u"||(this._httpHeaders[R]=I)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const b=R=>{if(404!==R.statusCode)this._setReadableStream(R);else{const I=new p.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=I}};this._request=null,this._request="http:"===this._url.protocol?j.request(c(this._url,this._httpHeaders),b):H.request(c(this._url,this._httpHeaders),b),this._request.on("error",R=>{this._storedError=R}),this._request.end()}}class S extends l{constructor(d){super(d);let e=decodeURIComponent(this._url.path);s.test(this._url.href)&&(e=e.replace(/^\//,"")),D.lstat(e,(i,b)=>{if(i)return"ENOENT"===i.code&&(i=new p.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=b.size,this._setReadableStream(D.createReadStream(e)),this._headersCapability.resolve()})}}class v extends P{constructor(d,e,i){super(d);let b=decodeURIComponent(this._url.path);s.test(this._url.href)&&(b=b.replace(/^\//,"")),this._setReadableStream(D.createReadStream(b,{start:e,end:i-1}))}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.createResponseStatusError=function T(f,r){return 404===f||0===f&&r.startsWith("file:")?new p.MissingPDFException('Missing PDF "'+r+'".'):new p.UnexpectedResponseException(`Unexpected server response (${f}) while retrieving PDF "${r}".`,f)},u.extractFilenameFromHeader=function H(f){const r=f("Content-Disposition");if(r){let l=(0,x.getFilenameFromContentDispositionHeader)(r);if(l.includes("%"))try{l=decodeURIComponent(l)}catch{}if((0,D.isPdfFile)(l))return l}return null},u.validateRangeRequestCapabilities=function j({getResponseHeader:f,isHttp:r,rangeChunkSize:l,disableRange:P}){const c={allowRangeRequests:!1,suggestedLength:void 0},o=parseInt(f("Content-Length"),10);return!Number.isInteger(o)||(c.suggestedLength=o,o<=2*l)||P||!r||"bytes"!==f("Accept-Ranges")||"identity"!==(f("Content-Encoding")||"identity")||(c.allowRangeRequests=!0),c},u.validateResponseStatus=function s(f){return 200===f||206===f};var p=V(1),x=V(34),D=V(8)},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.getFilenameFromContentDispositionHeader=function x(D){let j=!0,H=T("filename\\*","i").exec(D);if(H){H=H[1];let o=l(H);return o=unescape(o),o=P(o),o=c(o),f(o)}if(H=function r(o){const a=[];let S;const v=T("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(S=v.exec(o));){let[,d,e,i]=S;if(d=parseInt(d,10),d in a){if(0===d)break}else a[d]=[e,i]}const y=[];for(let d=0;d<a.length&&d in a;++d){let[e,i]=a[d];i=l(i),e&&(i=unescape(i),0===d&&(i=P(i))),y.push(i)}return y.join("")}(D),H)return f(c(H));if(H=T("filename","i").exec(D),H){H=H[1];let o=l(H);return o=c(o),f(o)}function T(o,a){return new RegExp("(?:^|;)\\s*"+o+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',a)}function s(o,a){if(o){if(!/^[\x00-\xFF]+$/.test(a))return a;try{const S=new TextDecoder(o,{fatal:!0}),v=(0,p.stringToBytes)(a);a=S.decode(v),j=!1}catch{}}return a}function f(o){return j&&/[\x80-\xff]/.test(o)&&(o=s("utf-8",o),j&&(o=s("iso-8859-1",o))),o}function l(o){if(o.startsWith('"')){const a=o.slice(1).split('\\"');for(let S=0;S<a.length;++S){const v=a[S].indexOf('"');-1!==v&&(a[S]=a[S].slice(0,v),a.length=S+1),a[S]=a[S].replace(/\\(.)/g,"$1")}o=a.join('"')}return o}function P(o){const a=o.indexOf("'");return-1===a?o:s(o.slice(0,a),o.slice(a+1).replace(/^[^']*'/,""))}function c(o){return!o.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(o)?o:o.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(a,S,v,y){if("q"===v||"Q"===v)return s(S,y=(y=y.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(d,e){return String.fromCharCode(parseInt(e,16))}));try{y=atob(y)}catch{}return s(S,y)})}return""};var p=V(1)},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFNetworkStream=void 0;var p=V(1),x=V(33);class T{constructor(P,c={}){this.url=P,this.isHttp=/^https?:/i.test(P),this.httpHeaders=this.isHttp&&c.httpHeaders||Object.create(null),this.withCredentials=c.withCredentials||!1,this.getXhr=c.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(P,c,o){const a={begin:P,end:c};for(const S in o)a[S]=o[S];return this.request(a)}requestFull(P){return this.request(P)}request(P){const c=this.getXhr(),o=this.currXhrId++,a=this.pendingRequests[o]={xhr:c};c.open("GET",this.url),c.withCredentials=this.withCredentials;for(const S in this.httpHeaders){const v=this.httpHeaders[S];typeof v>"u"||c.setRequestHeader(S,v)}return this.isHttp&&"begin"in P&&"end"in P?(c.setRequestHeader("Range",`bytes=${P.begin}-${P.end-1}`),a.expectedStatus=206):a.expectedStatus=200,c.responseType="arraybuffer",P.onError&&(c.onerror=function(S){P.onError(c.status)}),c.onreadystatechange=this.onStateChange.bind(this,o),c.onprogress=this.onProgress.bind(this,o),a.onHeadersReceived=P.onHeadersReceived,a.onDone=P.onDone,a.onError=P.onError,a.onProgress=P.onProgress,c.send(null),o}onProgress(P,c){const o=this.pendingRequests[P];o&&o.onProgress?.(c)}onStateChange(P,c){const o=this.pendingRequests[P];if(!o)return;const a=o.xhr;if(a.readyState>=2&&o.onHeadersReceived&&(o.onHeadersReceived(),delete o.onHeadersReceived),4!==a.readyState||!(P in this.pendingRequests))return;if(delete this.pendingRequests[P],0===a.status&&this.isHttp)return void o.onError?.(a.status);const S=a.status||200;if((200!==S||206!==o.expectedStatus)&&S!==o.expectedStatus)return void o.onError?.(a.status);const y=function H(l){const P=l.response;return"string"!=typeof P?P:(0,p.stringToBytes)(P).buffer}(a);if(206===S){const d=a.getResponseHeader("Content-Range"),e=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);o.onDone({begin:parseInt(e[1],10),chunk:y})}else y?o.onDone({begin:0,chunk:y}):o.onError?.(a.status)}getRequestXhr(P){return this.pendingRequests[P].xhr}isPendingRequest(P){return P in this.pendingRequests}abortRequest(P){const c=this.pendingRequests[P].xhr;delete this.pendingRequests[P],c.abort()}}u.PDFNetworkStream=class s{constructor(P){this._source=P,this._manager=new T(P.url,{httpHeaders:P.httpHeaders,withCredentials:P.withCredentials}),this._rangeChunkSize=P.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(P){const c=this._rangeRequestReaders.indexOf(P);c>=0&&this._rangeRequestReaders.splice(c,1)}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new f(this._manager,this._source),this._fullRequestReader}getRangeReader(P,c){const o=new r(this._manager,P,c);return o.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(o),o}cancelAllRequests(P){this._fullRequestReader?.cancel(P);for(const c of this._rangeRequestReaders.slice(0))c.cancel(P)}};class f{constructor(P,c){this._manager=P;const o={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=c.url,this._fullRequestId=P.requestFull(o),this._headersReceivedCapability=(0,p.createPromiseCapability)(),this._disableRange=c.disableRange||!1,this._contentLength=c.length,this._rangeChunkSize=c.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const P=this._fullRequestId,c=this._manager.getRequestXhr(P),o=v=>c.getResponseHeader(v),{allowRangeRequests:a,suggestedLength:S}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=S||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(o),this._isRangeSupported&&this._manager.abortRequest(P),this._headersReceivedCapability.resolve()}_onDone(P){if(P&&(this._requests.length>0?this._requests.shift().resolve({value:P.chunk,done:!1}):this._cachedChunks.push(P.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(P){this._storedError=(0,x.createResponseStatusError)(P,this._url),this._headersReceivedCapability.reject(this._storedError);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(P){this.onProgress?.({loaded:P.loaded,total:P.lengthComputable?P.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var P=this;return _asyncToGenerator(function*(){if(P._storedError)throw P._storedError;if(P._cachedChunks.length>0)return{value:P._cachedChunks.shift(),done:!1};if(P._done)return{value:void 0,done:!0};const c=(0,p.createPromiseCapability)();return P._requests.push(c),c.promise})()}cancel(P){this._done=!0,this._headersReceivedCapability.reject(P);for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class r{constructor(P,c,o){this._manager=P;const a={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=P.url,this._requestId=P.requestRange(c,o,a),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(P){const c=P.chunk;this._requests.length>0?this._requests.shift().resolve({value:c,done:!1}):this._queuedChunk=c,this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(P){this._storedError=(0,x.createResponseStatusError)(P,this._url);for(const c of this._requests)c.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(P){this.isStreamingSupported||this.onProgress?.({loaded:P.loaded})}get isStreamingSupported(){return!1}read(){var P=this;return _asyncToGenerator(function*(){if(P._storedError)throw P._storedError;if(null!==P._queuedChunk){const o=P._queuedChunk;return P._queuedChunk=null,{value:o,done:!1}}if(P._done)return{value:void 0,done:!0};const c=(0,p.createPromiseCapability)();return P._requests.push(c),c.promise})()}cancel(P){this._done=!0;for(const c of this._requests)c.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(ee,u,V)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.PDFFetchStream=void 0;var p=V(1),x=V(33);function D(f,r,l){return{method:"GET",headers:f,signal:l.signal,mode:"cors",credentials:r?"include":"same-origin",redirect:"follow"}}function j(f){const r=new Headers;for(const l in f){const P=f[l];typeof P>"u"||r.append(l,P)}return r}u.PDFFetchStream=class H{constructor(r){this.source=r,this.isHttp=/^https?:/i.test(r.url),this.httpHeaders=this.isHttp&&r.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,p.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new T(this),this._fullRequestReader}getRangeReader(r,l){if(l<=this._progressiveDataLength)return null;const P=new s(this,r,l);return this._rangeRequestReaders.push(P),P}cancelAllRequests(r){this._fullRequestReader&&this._fullRequestReader.cancel(r);for(const l of this._rangeRequestReaders.slice(0))l.cancel(r)}};class T{constructor(r){this._stream=r,this._reader=null,this._loaded=0,this._filename=null;const l=r.source;this._withCredentials=l.withCredentials||!1,this._contentLength=l.length,this._headersCapability=(0,p.createPromiseCapability)(),this._disableRange=l.disableRange||!1,this._rangeChunkSize=l.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!l.disableStream,this._isRangeSupported=!l.disableRange,this._headers=j(this._stream.httpHeaders);const P=l.url;fetch(P,D(this._headers,this._withCredentials,this._abortController)).then(c=>{if(!(0,x.validateResponseStatus)(c.status))throw(0,x.createResponseStatusError)(c.status,P);this._reader=c.body.getReader(),this._headersCapability.resolve();const o=v=>c.headers.get(v),{allowRangeRequests:a,suggestedLength:S}=(0,x.validateRangeRequestCapabilities)({getResponseHeader:o,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=S||this._contentLength,this._filename=(0,x.extractFilenameFromHeader)(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new p.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var r=this;return _asyncToGenerator(function*(){yield r._headersCapability.promise;const{value:l,done:P}=yield r._reader.read();return P?{value:l,done:P}:(r._loaded+=l.byteLength,r.onProgress&&r.onProgress({loaded:r._loaded,total:r._contentLength}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(r){this._reader&&this._reader.cancel(r),this._abortController.abort()}}class s{constructor(r,l,P){this._stream=r,this._reader=null,this._loaded=0;const c=r.source;this._withCredentials=c.withCredentials||!1,this._readCapability=(0,p.createPromiseCapability)(),this._isStreamingSupported=!c.disableStream,this._abortController=new AbortController,this._headers=j(this._stream.httpHeaders),this._headers.append("Range",`bytes=${l}-${P-1}`);const o=c.url;fetch(o,D(this._headers,this._withCredentials,this._abortController)).then(a=>{if(!(0,x.validateResponseStatus)(a.status))throw(0,x.createResponseStatusError)(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var r=this;return _asyncToGenerator(function*(){yield r._readCapability.promise;const{value:l,done:P}=yield r._reader.read();return P?{value:l,done:P}:(r._loaded+=l.byteLength,r.onProgress&&r.onProgress({loaded:r._loaded}),{value:new Uint8Array(l).buffer,done:!1})})()}cancel(r){this._reader&&this._reader.cancel(r),this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(ee){var u=__webpack_module_cache__[ee];if(void 0!==u)return u.exports;var V=__webpack_module_cache__[ee]={exports:{}};return __webpack_modules__[ee](V,V.exports,__w_pdfjs_require__),V.exports}var __nested_webpack_exports__={};return(()=>{var ee=__nested_webpack_exports__;Object.defineProperty(ee,"__esModule",{value:!0}),Object.defineProperty(ee,"AnnotationEditorLayer",{enumerable:!0,get:function(){return x.AnnotationEditorLayer}}),Object.defineProperty(ee,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return u.AnnotationEditorParamsType}}),Object.defineProperty(ee,"AnnotationEditorType",{enumerable:!0,get:function(){return u.AnnotationEditorType}}),Object.defineProperty(ee,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return D.AnnotationEditorUIManager}}),Object.defineProperty(ee,"AnnotationLayer",{enumerable:!0,get:function(){return j.AnnotationLayer}}),Object.defineProperty(ee,"AnnotationMode",{enumerable:!0,get:function(){return u.AnnotationMode}}),Object.defineProperty(ee,"CMapCompressionType",{enumerable:!0,get:function(){return u.CMapCompressionType}}),Object.defineProperty(ee,"GlobalWorkerOptions",{enumerable:!0,get:function(){return H.GlobalWorkerOptions}}),Object.defineProperty(ee,"InvalidPDFException",{enumerable:!0,get:function(){return u.InvalidPDFException}}),Object.defineProperty(ee,"LoopbackPort",{enumerable:!0,get:function(){return V.LoopbackPort}}),Object.defineProperty(ee,"MissingPDFException",{enumerable:!0,get:function(){return u.MissingPDFException}}),Object.defineProperty(ee,"OPS",{enumerable:!0,get:function(){return u.OPS}}),Object.defineProperty(ee,"PDFDataRangeTransport",{enumerable:!0,get:function(){return V.PDFDataRangeTransport}}),Object.defineProperty(ee,"PDFDateString",{enumerable:!0,get:function(){return p.PDFDateString}}),Object.defineProperty(ee,"PDFWorker",{enumerable:!0,get:function(){return V.PDFWorker}}),Object.defineProperty(ee,"PasswordResponses",{enumerable:!0,get:function(){return u.PasswordResponses}}),Object.defineProperty(ee,"PermissionFlag",{enumerable:!0,get:function(){return u.PermissionFlag}}),Object.defineProperty(ee,"PixelsPerInch",{enumerable:!0,get:function(){return p.PixelsPerInch}}),Object.defineProperty(ee,"RenderingCancelledException",{enumerable:!0,get:function(){return p.RenderingCancelledException}}),Object.defineProperty(ee,"SVGGraphics",{enumerable:!0,get:function(){return f.SVGGraphics}}),Object.defineProperty(ee,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return u.UNSUPPORTED_FEATURES}}),Object.defineProperty(ee,"UnexpectedResponseException",{enumerable:!0,get:function(){return u.UnexpectedResponseException}}),Object.defineProperty(ee,"Util",{enumerable:!0,get:function(){return u.Util}}),Object.defineProperty(ee,"VerbosityLevel",{enumerable:!0,get:function(){return u.VerbosityLevel}}),Object.defineProperty(ee,"XfaLayer",{enumerable:!0,get:function(){return r.XfaLayer}}),Object.defineProperty(ee,"build",{enumerable:!0,get:function(){return V.build}}),Object.defineProperty(ee,"createPromiseCapability",{enumerable:!0,get:function(){return u.createPromiseCapability}}),Object.defineProperty(ee,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return u.createValidAbsoluteUrl}}),Object.defineProperty(ee,"getDocument",{enumerable:!0,get:function(){return V.getDocument}}),Object.defineProperty(ee,"getFilenameFromUrl",{enumerable:!0,get:function(){return p.getFilenameFromUrl}}),Object.defineProperty(ee,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return p.getPdfFilenameFromUrl}}),Object.defineProperty(ee,"getXfaPageViewport",{enumerable:!0,get:function(){return p.getXfaPageViewport}}),Object.defineProperty(ee,"isPdfFile",{enumerable:!0,get:function(){return p.isPdfFile}}),Object.defineProperty(ee,"loadScript",{enumerable:!0,get:function(){return p.loadScript}}),Object.defineProperty(ee,"renderTextLayer",{enumerable:!0,get:function(){return s.renderTextLayer}}),Object.defineProperty(ee,"shadow",{enumerable:!0,get:function(){return u.shadow}}),Object.defineProperty(ee,"version",{enumerable:!0,get:function(){return V.version}});var u=__w_pdfjs_require__(1),V=__w_pdfjs_require__(4),p=__w_pdfjs_require__(8),x=__w_pdfjs_require__(22),D=__w_pdfjs_require__(7),j=__w_pdfjs_require__(27),H=__w_pdfjs_require__(15),T=__w_pdfjs_require__(3),s=__w_pdfjs_require__(30),f=__w_pdfjs_require__(31),r=__w_pdfjs_require__(29);if(T.isNodeJS){const{PDFNodeStream:c}=__w_pdfjs_require__(32);(0,V.setPDFNetworkStreamFactory)(o=>new c(o))}else{const{PDFNetworkStream:c}=__w_pdfjs_require__(35),{PDFFetchStream:o}=__w_pdfjs_require__(36);(0,V.setPDFNetworkStreamFactory)(a=>(0,p.isValidFetchUrl)(a.url)?new o(a):new c(a))}})(),__nested_webpack_exports__})(),module.exports=V()},8365:(ee,u,V)=>{var p=V(7156).default;globalThis,ee.exports=(()=>{"use strict";var x=[,(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DefaultXfaLayerFactory=s.DefaultTextLayerFactory=s.DefaultStructTreeLayerFactory=s.DefaultAnnotationLayerFactory=s.DefaultAnnotationEditorLayerFactory=void 0;var r=f(2),l=f(5),P=f(4),c=f(6),o=f(8),a=f(9),S=f(10);s.DefaultAnnotationLayerFactory=class v{createAnnotationLayerBuilder({pageDiv:R,pdfPage:I,annotationStorage:W=null,imageResourcesPath:U="",renderForms:J=!0,l10n:K=P.NullL10n,enableScripting:C=!1,hasJSActionsPromise:F=null,mouseState:N=null,fieldObjectsPromise:L=null,annotationCanvasMap:M=null,accessibilityManager:_=null}){return new l.AnnotationLayerBuilder({pageDiv:R,pdfPage:I,imageResourcesPath:U,renderForms:J,linkService:new c.SimpleLinkService,l10n:K,annotationStorage:W,enableScripting:C,hasJSActionsPromise:F,fieldObjectsPromise:L,mouseState:N,annotationCanvasMap:M,accessibilityManager:_})}},s.DefaultAnnotationEditorLayerFactory=class y{createAnnotationEditorLayerBuilder({uiManager:R=null,pageDiv:I,pdfPage:W,accessibilityManager:U=null,l10n:J,annotationStorage:K=null}){return new r.AnnotationEditorLayerBuilder({uiManager:R,pageDiv:I,pdfPage:W,accessibilityManager:U,l10n:J,annotationStorage:K})}},s.DefaultStructTreeLayerFactory=class d{createStructTreeLayerBuilder({pdfPage:R}){return new o.StructTreeLayerBuilder({pdfPage:R})}},s.DefaultTextLayerFactory=class e{createTextLayerBuilder({textLayerDiv:R,pageIndex:I,viewport:W,enhanceTextSelection:U=!1,eventBus:J,highlighter:K,accessibilityManager:C=null}){return new a.TextLayerBuilder({textLayerDiv:R,pageIndex:I,viewport:W,enhanceTextSelection:U,eventBus:J,highlighter:K,accessibilityManager:C})}},s.DefaultXfaLayerFactory=class i{createXfaLayerBuilder({pageDiv:R,pdfPage:I,annotationStorage:W=null}){return new S.XfaLayerBuilder({pageDiv:R,pdfPage:I,annotationStorage:W,linkService:new c.SimpleLinkService})}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationEditorLayerBuilder=void 0;var r=f(3),l=f(4);s.AnnotationEditorLayerBuilder=class P{#e;constructor(o){this.pageDiv=o.pageDiv,this.pdfPage=o.pdfPage,this.annotationStorage=o.annotationStorage||null,this.accessibilityManager=o.accessibilityManager,this.l10n=o.l10n||l.NullL10n,this.annotationEditorLayer=null,this.div=null,this._cancelled=!1,this.#e=o.uiManager}render(o,a="display"){var S=this;return p(function*(){if("display"!==a||S._cancelled)return;const v=o.clone({dontFlip:!0});if(S.div)return S.annotationEditorLayer.update({viewport:v}),void S.show();S.div=document.createElement("div"),S.div.className="annotationEditorLayer",S.div.tabIndex=0,S.pageDiv.append(S.div),S.annotationEditorLayer=new r.AnnotationEditorLayer({uiManager:S.#e,div:S.div,annotationStorage:S.annotationStorage,accessibilityManager:S.accessibilityManager,pageIndex:S.pdfPage._pageIndex,l10n:S.l10n,viewport:v}),S.annotationEditorLayer.render({viewport:v,div:S.div,annotations:null,intent:a})})()}cancel(){this._cancelled=!0,this.destroy()}hide(){this.div&&(this.div.hidden=!0)}show(){this.div&&(this.div.hidden=!1)}destroy(){this.div&&(this.pageDiv=null,this.annotationEditorLayer.destroy(),this.div.remove())}}},T=>{let s;s=typeof window<"u"&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:V(7668),T.exports=s},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.NullL10n=void 0,s.fixupLangCode=function P(a){return l[a?.toLowerCase()]||a},s.getL10nFallback=r;const f={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text_default_content:"Enter text\u2026",editor_free_text_aria_label:"FreeText Editor",editor_ink_aria_label:"Ink Editor",editor_ink_canvas_aria_label:"User-created image"};function r(a,S){switch(a){case"find_match_count":a=`find_match_count[${1===S.total?"one":"other"}]`;break;case"find_match_count_limit":a=`find_match_count_limit[${1===S.limit?"one":"other"}]`}return f[a]||""}const l={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};s.NullL10n={getLanguage:()=>p(function*(){return"en-us"})(),getDirection:()=>p(function*(){return"ltr"})(),get:(a,S=null,v=r(a,S))=>p(function*(){return function c(a,S){return S?a.replace(/\{\{\s*(\w+)\s*\}\}/g,(v,y)=>y in S?S[y]:"{{"+y+"}}"):a}(v,S)})(),translate:a=>p(function*(){})()}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.AnnotationLayerBuilder=void 0;var r=f(3),l=f(4);s.AnnotationLayerBuilder=class P{constructor({pageDiv:o,pdfPage:a,linkService:S,downloadManager:v,annotationStorage:y=null,imageResourcesPath:d="",renderForms:e=!0,l10n:i=l.NullL10n,enableScripting:b=!1,hasJSActionsPromise:R=null,fieldObjectsPromise:I=null,mouseState:W=null,annotationCanvasMap:U=null,accessibilityManager:J=null}){this.pageDiv=o,this.pdfPage=a,this.linkService=S,this.downloadManager=v,this.imageResourcesPath=d,this.renderForms=e,this.l10n=i,this.annotationStorage=y,this.enableScripting=b,this._hasJSActionsPromise=R,this._fieldObjectsPromise=I,this._mouseState=W,this._annotationCanvasMap=U,this._accessibilityManager=J,this.div=null,this._cancelled=!1}render(o,a="display"){var S=this;return p(function*(){const[v,y=!1,d=null]=yield Promise.all([S.pdfPage.getAnnotations({intent:a}),S._hasJSActionsPromise,S._fieldObjectsPromise]);if(S._cancelled||0===v.length)return;const e={viewport:o.clone({dontFlip:!0}),div:S.div,annotations:v,page:S.pdfPage,imageResourcesPath:S.imageResourcesPath,renderForms:S.renderForms,linkService:S.linkService,downloadManager:S.downloadManager,annotationStorage:S.annotationStorage,enableScripting:S.enableScripting,hasJSActions:y,fieldObjects:d,mouseState:S._mouseState,annotationCanvasMap:S._annotationCanvasMap,accessibilityManager:S._accessibilityManager};S.div?r.AnnotationLayer.update(e):(S.div=document.createElement("div"),S.div.className="annotationLayer",S.pageDiv.append(S.div),e.div=S.div,r.AnnotationLayer.render(e),S.l10n.translate(S.div))})()}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.SimpleLinkService=s.PDFLinkService=s.LinkTarget=void 0;var r=f(7);const P={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function c(S,{url:v,target:y,rel:d,enabled:e=!0}={}){if(!v||"string"!=typeof v)throw new Error('A valid "url" parameter must provided.');const i=(0,r.removeNullCharacters)(v);e?S.href=S.title=i:(S.href="",S.title=`Disabled: ${i}`,S.onclick=()=>!1);let b="";switch(y){case P.NONE:break;case P.SELF:b="_self";break;case P.BLANK:b="_blank";break;case P.PARENT:b="_parent";break;case P.TOP:b="_top"}S.target=b,S.rel="string"==typeof d?d:"noopener noreferrer nofollow"}s.LinkTarget=P;class o{#e=new Map;constructor({eventBus:v,externalLinkTarget:y=null,externalLinkRel:d=null,ignoreDestinationZoom:e=!1}={}){this.eventBus=v,this.externalLinkTarget=y,this.externalLinkRel=d,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=e,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(v,y=null){this.baseUrl=y,this.pdfDocument=v,this.#e.clear()}setViewer(v){this.pdfViewer=v}setHistory(v){this.pdfHistory=v}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(v){this.pdfViewer.currentPageNumber=v}get rotation(){return this.pdfViewer.pagesRotation}set rotation(v){this.pdfViewer.pagesRotation=v}#t(v,y=null,d){const e=d[0];let i;if("object"==typeof e&&null!==e){if(i=this._cachedPageNumber(e),!i)return void this.pdfDocument.getPageIndex(e).then(b=>{this.cachePageRef(b+1,e),this.#t(v,y,d)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${e}" is not a valid page reference, for dest="${v}".`)})}else{if(!Number.isInteger(e))return void console.error(`PDFLinkService.#goToDestinationHelper: "${e}" is not a valid destination reference, for dest="${v}".`);i=e+1}!i||i<1||i>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${i}" is not a valid page number, for dest="${v}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:y,explicitDest:d,pageNumber:i})),this.pdfViewer.scrollPageIntoView({pageNumber:i,destArray:d,ignoreDestinationZoom:this._ignoreDestinationZoom}))}goToDestination(v){var y=this;return p(function*(){if(!y.pdfDocument)return;let d,e;"string"==typeof v?(d=v,e=yield y.pdfDocument.getDestination(v)):(d=null,e=yield v),Array.isArray(e)?y.#t(v,d,e):console.error(`PDFLinkService.goToDestination: "${e}" is not a valid destination array, for dest="${v}".`)})()}goToPage(v){if(!this.pdfDocument)return;const y="string"==typeof v&&this.pdfViewer.pageLabelToPageNumber(v)||0|v;Number.isInteger(y)&&y>0&&y<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(y)),this.pdfViewer.scrollPageIntoView({pageNumber:y})):console.error(`PDFLinkService.goToPage: "${v}" is not a valid page.`)}addLinkAttributes(v,y,d=!1){c(v,{url:y,target:d?P.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(v){if("string"==typeof v){if(v.length>0)return this.getAnchorUrl("#"+escape(v))}else if(Array.isArray(v)){const y=JSON.stringify(v);if(y.length>0)return this.getAnchorUrl("#"+escape(y))}return this.getAnchorUrl("")}getAnchorUrl(v){return(this.baseUrl||"")+v}setHash(v){if(!this.pdfDocument)return;let y,d;if(v.includes("=")){const e=(0,r.parseQueryString)(v);if(e.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:e.get("search").replace(/"/g,""),phraseSearch:"true"===e.get("phrase")}),e.has("page")&&(y=0|e.get("page")||1),e.has("zoom")){const i=e.get("zoom").split(","),b=i[0],R=parseFloat(b);b.includes("Fit")?"Fit"===b||"FitB"===b?d=[null,{name:b}]:"FitH"===b||"FitBH"===b||"FitV"===b||"FitBV"===b?d=[null,{name:b},i.length>1?0|i[1]:null]:"FitR"===b?5!==i.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):d=[null,{name:b},0|i[1],0|i[2],0|i[3],0|i[4]]:console.error(`PDFLinkService.setHash: "${b}" is not a valid zoom value.`):d=[null,{name:"XYZ"},i.length>1?0|i[1]:null,i.length>2?0|i[2]:null,R?R/100:b]}d?this.pdfViewer.scrollPageIntoView({pageNumber:y||this.page,destArray:d,allowNegativeOffset:!0}):y&&(this.page=y),e.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:e.get("pagemode")}),e.has("nameddest")&&this.goToDestination(e.get("nameddest"))}else{d=unescape(v);try{d=JSON.parse(d),Array.isArray(d)||(d=d.toString())}catch{}if("string"==typeof d||o.#n(d))return void this.goToDestination(d);console.error(`PDFLinkService.setHash: "${unescape(v)}" is not a valid destination.`)}}executeNamedAction(v){switch(v){case"GoBack":this.pdfHistory?.back();break;case"GoForward":this.pdfHistory?.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:v})}cachePageRef(v,y){y&&this.#e.set(0===y.gen?`${y.num}R`:`${y.num}R${y.gen}`,v)}_cachedPageNumber(v){return v&&this.#e.get(0===v.gen?`${v.num}R`:`${v.num}R${v.gen}`)||null}isPageVisible(v){return this.pdfViewer.isPageVisible(v)}isPageCached(v){return this.pdfViewer.isPageCached(v)}static#n(v){if(!Array.isArray(v))return!1;const y=v.length;if(y<2)return!1;const d=v[0];if(!("object"==typeof d&&Number.isInteger(d.num)&&Number.isInteger(d.gen)||Number.isInteger(d)&&d>=0))return!1;const e=v[1];if("object"!=typeof e||"string"!=typeof e.name)return!1;let i=!0;switch(e.name){case"XYZ":if(5!==y)return!1;break;case"Fit":case"FitB":return 2===y;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==y)return!1;break;case"FitR":if(6!==y)return!1;i=!1;break;default:return!1}for(let b=2;b<y;b++){const R=v[b];if(!("number"==typeof R||i&&null===R))return!1}return!0}}s.PDFLinkService=o,s.SimpleLinkService=class a{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(v){}get rotation(){return 0}set rotation(v){}goToDestination(v){return p(function*(){})()}goToPage(v){}addLinkAttributes(v,y,d=!1){c(v,{url:y,enabled:this.externalLinkEnabled})}getDestinationHash(v){return"#"}getAnchorUrl(v){return"#"}setHash(v){}executeNamedAction(v){}cachePageRef(v,y){}isPageVisible(v){return!0}isPageCached(v){return!0}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.animationStarted=s.VERTICAL_PADDING=s.UNKNOWN_SCALE=s.TextLayerMode=s.SpreadMode=s.SidebarView=s.ScrollMode=s.SCROLLBAR_PADDING=s.RenderingStates=s.RendererType=s.ProgressBar=s.PresentationModeState=s.OutputScale=s.MIN_SCALE=s.MAX_SCALE=s.MAX_AUTO_SCALE=s.DEFAULT_SCALE_VALUE=s.DEFAULT_SCALE_DELTA=s.DEFAULT_SCALE=s.AutoPrintRegExp=void 0,s.apiPageLayoutToViewerModes=function ne(q){let te=R.VERTICAL,ae=I.NONE;switch(q){case"SinglePage":te=R.PAGE;break;case"OneColumn":break;case"TwoPageLeft":te=R.PAGE;case"TwoColumnLeft":ae=I.ODD;break;case"TwoPageRight":te=R.PAGE;case"TwoColumnRight":ae=I.EVEN}return{scrollMode:te,spreadMode:ae}},s.apiPageModeToSidebarView=function re(q){switch(q){case"UseNone":return e.NONE;case"UseThumbs":return e.THUMBS;case"UseOutlines":return e.OUTLINE;case"UseAttachments":return e.ATTACHMENTS;case"UseOC":return e.LAYERS}return e.NONE},s.approximateFraction=function _(q){if(Math.floor(q)===q)return[q,1];const te=1/q;if(te>8)return[1,8];if(Math.floor(te)===te)return[1,te];const Z=q>1?te:q;let fe,ce=0,he=1,le=1,ue=1;for(;;){const me=ce+le,_e=he+ue;if(_e>8)break;Z<=me/_e?(le=me,ue=_e):(ce=me,he=_e)}return fe=Z-ce/he<le/ue-Z?Z===q?[ce,he]:[he,ce]:Z===q?[le,ue]:[ue,le],fe},s.backtrackBeforeAllVisibleElements=w,s.binarySearchFirstItem=M,s.docStyle=void 0,s.getActiveOrFocusedElement=function se(){let q=document,te=q.activeElement||q.querySelector(":focus");for(;te?.shadowRoot;)q=te.shadowRoot,te=q.activeElement||q.querySelector(":focus");return te},s.getPageSizeInches=function h({view:q,userUnit:te,rotate:ae}){const[Z,ce,he,le]=q,ue=ae%180!=0,fe=(he-Z)/72*te,me=(le-ce)/72*te;return{width:ue?me:fe,height:ue?fe:me}},s.getVisibleElements=function A({scrollEl:q,views:te,sortByVisibility:ae=!1,horizontal:Z=!1,rtl:ce=!1}){const he=q.scrollTop,le=he+q.clientHeight,ue=q.scrollLeft,fe=ue+q.clientWidth,Pe=[],ye=new Set,be=te.length;let we=M(te,Z?function _e(Ce){const Ae=Ce.div,ie=Ae.offsetLeft+Ae.clientLeft;return ce?ie<fe:ie+Ae.clientWidth>ue}:function me(Ce){const Ae=Ce.div;return Ae.offsetTop+Ae.clientTop+Ae.clientHeight>he});we>0&&we<be&&!Z&&(we=w(we,te,he));let Re=Z?fe:-1;for(let Ce=we;Ce<be;Ce++){const Ae=te[Ce],ie=Ae.div,$=ie.offsetLeft+ie.clientLeft,Y=ie.offsetTop+ie.clientTop,oe=ie.clientWidth,de=ie.clientHeight,ge=$+oe,pe=Y+de;if(-1===Re)pe>=le&&(Re=pe);else if((Z?$:Y)>Re)break;if(pe<=he||Y>=le||ge<=ue||$>=fe)continue;const xe=Math.max(0,he-Y)+Math.max(0,pe-le),Se=(oe-(Math.max(0,ue-$)+Math.max(0,ge-fe)))/oe;Pe.push({id:Ae.id,x:$,y:Y,view:Ae,percent:(de-xe)/de*Se*100|0,widthPercent:100*Se|0}),ye.add(Ae.id)}const Be=Pe[0],Ve=Pe.at(-1);return ae&&Pe.sort(function(Ce,Ae){const ie=Ce.percent-Ae.percent;return Math.abs(ie)>.001?-ie:Ce.id-Ae.id}),{first:Be,last:Ve,views:Pe,ids:ye}},s.isPortraitOrientation=function B(q){return q.width<=q.height},s.isValidRotation=function k(q){return Number.isInteger(q)&&q%90==0},s.isValidScrollMode=function E(q){return Number.isInteger(q)&&Object.values(R).includes(q)&&q!==R.UNKNOWN},s.isValidSpreadMode=function O(q){return Number.isInteger(q)&&Object.values(I).includes(q)&&q!==I.UNKNOWN},s.noContextMenuHandler=function t(q){q.preventDefault()},s.normalizeWheelEventDelta=function m(q){let te=g(q);return 0===q.deltaMode?te/=900:1===q.deltaMode&&(te/=30),te},s.normalizeWheelEventDirection=g,s.parseQueryString=function C(q){const te=new Map;for(const[ae,Z]of new URLSearchParams(q))te.set(ae.toLowerCase(),Z);return te},s.removeNullCharacters=function L(q,te=!1){return"string"!=typeof q?(console.error("The argument must be a string."),q):(te&&(q=q.replace(N," ")),q.replace(F,""))},s.roundToDivide=function n(q,te){const ae=q%te;return 0===ae?q:Math.round(q-ae+te)},s.scrollIntoView=function J(q,te,ae=!1){let Z=q.offsetParent;if(!Z)return void console.error("offsetParent is not set -- cannot scroll");let ce=q.offsetTop+q.clientTop,he=q.offsetLeft+q.clientLeft;for(;Z.clientHeight===Z.scrollHeight&&Z.clientWidth===Z.scrollWidth||ae&&(Z.classList.contains("markedContent")||"hidden"===getComputedStyle(Z).overflow);)if(ce+=Z.offsetTop,he+=Z.offsetLeft,Z=Z.offsetParent,!Z)return;te&&(void 0!==te.top&&(ce+=te.top),void 0!==te.left&&(he+=te.left,Z.scrollLeft=he)),Z.scrollTop=ce},s.watchScroll=function K(q,te){const ae=function(he){ce||(ce=window.requestAnimationFrame(function(){ce=null;const ue=q.scrollLeft,fe=Z.lastX;ue!==fe&&(Z.right=ue>fe),Z.lastX=ue;const me=q.scrollTop,_e=Z.lastY;me!==_e&&(Z.down=me>_e),Z.lastY=me,te(Z)}))},Z={right:!0,down:!0,lastX:q.scrollLeft,lastY:q.scrollTop,_eventHandler:ae};let ce=null;return q.addEventListener("scroll",ae,!0),Z},s.DEFAULT_SCALE_VALUE="auto",s.DEFAULT_SCALE=1,s.DEFAULT_SCALE_DELTA=1.1,s.MIN_SCALE=.1,s.MAX_SCALE=10,s.UNKNOWN_SCALE=0,s.MAX_AUTO_SCALE=1.25,s.SCROLLBAR_PADDING=40,s.VERTICAL_PADDING=5,s.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},s.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const e={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};s.SidebarView=e,s.RendererType={CANVAS:"canvas",SVG:"svg"},s.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const R={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};s.ScrollMode=R;const I={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};s.SpreadMode=I,s.AutoPrintRegExp=/\bprint\s*\(/,s.OutputScale=class U{constructor(){const te=window.devicePixelRatio||1;this.sx=te,this.sy=te}get scaled(){return 1!==this.sx||1!==this.sy}};const F=/\x00/g,N=/[\x01-\x1F]/g;function M(q,te,ae=0){let Z=ae,ce=q.length-1;if(ce<0||!te(q[ce]))return q.length;if(te(q[Z]))return Z;for(;Z<ce;){const he=Z+ce>>1;te(q[he])?ce=he:Z=he+1}return Z}function w(q,te,ae){if(q<2)return q;let Z=te[q].div,ce=Z.offsetTop+Z.clientTop;ce>=ae&&(Z=te[q-1].div,ce=Z.offsetTop+Z.clientTop);for(let he=q-2;he>=0&&(Z=te[he].div,!(Z.offsetTop+Z.clientTop+Z.clientHeight<=ce));--he)q=he;return q}function g(q){let te=Math.hypot(q.deltaX,q.deltaY);const ae=Math.atan2(q.deltaY,q.deltaX);return-.25*Math.PI<ae&&ae<.75*Math.PI&&(te=-te),te}const z=new Promise(function(q){window.requestAnimationFrame(q)});s.animationStarted=z;const G=document.documentElement.style;s.docStyle=G,s.ProgressBar=class Q{#e=null;#t=0;#n=!0;constructor(te){if(arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");const ae=document.getElementById(te);this.#e=ae.classList}get percent(){return this.#t}set percent(te){this.#t=function X(q,te,ae){return Math.min(Math.max(q,te),ae)}(te,0,100),isNaN(te)?this.#e.add("indeterminate"):(this.#e.remove("indeterminate"),G.setProperty("--progressBar-percent",`${this.#t}%`))}setWidth(te){if(!te)return;const Z=te.parentNode.offsetWidth-te.offsetWidth;Z>0&&G.setProperty("--progressBar-end-offset",`${Z}px`)}hide(){this.#n&&(this.#n=!1,this.#e.add("hidden"))}show(){this.#n||(this.#n=!0,this.#e.remove("hidden"))}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.StructTreeLayerBuilder=void 0;const f={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},r=/^H(\d+)$/;s.StructTreeLayerBuilder=class l{constructor({pdfPage:c}){this.pdfPage=c}render(c){return this._walk(c)}_setAttributes(c,o){void 0!==c.alt&&o.setAttribute("aria-label",c.alt),void 0!==c.id&&o.setAttribute("aria-owns",c.id),void 0!==c.lang&&o.setAttribute("lang",c.lang)}_walk(c){if(!c)return null;const o=document.createElement("span");if("role"in c){const{role:a}=c,S=a.match(r);S?(o.setAttribute("role","heading"),o.setAttribute("aria-level",S[1])):f[a]&&o.setAttribute("role",f[a])}if(this._setAttributes(c,o),c.children)if(1===c.children.length&&"id"in c.children[0])this._setAttributes(c.children[0],o);else for(const a of c.children)o.append(this._walk(a));return o}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextLayerBuilder=void 0;var r=f(3);s.TextLayerBuilder=class P{constructor({textLayerDiv:o,eventBus:a,pageIndex:S,viewport:v,highlighter:y=null,enhanceTextSelection:d=!1,accessibilityManager:e=null}){this.textLayerDiv=o,this.eventBus=a,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=S+1,this.viewport=v,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=y,this.enhanceTextSelection=d,this.accessibilityManager=e,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const o=document.createElement("div");o.className="endOfContent",this.textLayerDiv.append(o)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(o=0){if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,this.highlighter?.setTextMapping(this.textDivs,this.textContentItemsStr),this.accessibilityManager?.setTextMapping(this.textDivs);const a=document.createDocumentFragment();this.textLayerRenderTask=(0,r.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:a,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:o,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{this.textLayerDiv.append(a),this._finishRendering(),this.highlighter?.enable(),this.accessibilityManager?.enable()},function(S){})}cancel(){this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),this.highlighter?.disable(),this.accessibilityManager?.disable()}setTextContentStream(o){this.cancel(),this.textContentStream=o}setTextContent(o){this.cancel(),this.textContent=o}_bindMouse(){const o=this.textLayerDiv;let a=null;o.addEventListener("mousedown",S=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(a&&(clearTimeout(a),a=null));const v=o.querySelector(".endOfContent");if(!v)return;let y=S.target!==o;if(y=y&&"none"!==window.getComputedStyle(v).getPropertyValue("-moz-user-select"),y){const d=o.getBoundingClientRect(),e=Math.max(0,(S.pageY-d.top)/d.height);v.style.top=(100*e).toFixed(2)+"%"}v.classList.add("active")}),o.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(a=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),a=null},300));const S=o.querySelector(".endOfContent");S&&(S.style.top="",S.classList.remove("active"))})}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.XfaLayerBuilder=void 0;var r=f(3);s.XfaLayerBuilder=class l{constructor({pageDiv:c,pdfPage:o,annotationStorage:a=null,linkService:S,xfaHtml:v=null}){this.pageDiv=c,this.pdfPage=o,this.annotationStorage=a,this.linkService=S,this.xfaHtml=v,this.div=null,this._cancelled=!1}render(c,o="display"){if("print"===o){const a={viewport:c.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:o},S=document.createElement("div");this.pageDiv.append(S),a.div=S;const v=r.XfaLayer.render(a);return Promise.resolve(v)}return this.pdfPage.getXfa().then(a=>{if(this._cancelled||!a)return{textDivs:[]};const S={viewport:c.clone({dontFlip:!0}),div:this.div,xfaHtml:a,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:o};return this.div?r.XfaLayer.update(S):(this.div=document.createElement("div"),this.pageDiv.append(this.div),S.div=this.div,r.XfaLayer.render(S))}).catch(a=>{console.error(a)})}cancel(){this._cancelled=!0}hide(){this.div&&(this.div.hidden=!0)}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFViewer=s.PDFSinglePageViewer=void 0;var r=f(7),l=f(12);s.PDFViewer=class P extends l.BaseViewer{},s.PDFSinglePageViewer=class c extends l.BaseViewer{_resetView(){super._resetView(),this._scrollMode=r.ScrollMode.PAGE,this._spreadMode=r.SpreadMode.NONE}set scrollMode(a){}_updateScrollMode(){}set spreadMode(a){}_updateSpreadMode(){}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PagesCountLimit=s.PDFPageViewBuffer=s.BaseViewer=void 0;var r=f(3),l=f(7),P=f(2),c=f(5),o=f(4),a=f(13),S=f(16),v=f(6),y=f(8),d=f(17),e=f(9),i=f(10);const R="enablePermissions",I={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};function W(K){return Object.values(r.AnnotationEditorType).includes(K)&&K!==r.AnnotationEditorType.DISABLE}s.PagesCountLimit=I;class U{#e=new Set;#t=0;constructor(C){this.#t=C}push(C){const F=this.#e;F.has(C)&&F.delete(C),F.add(C),F.size>this.#t&&this.#n()}resize(C,F=null){this.#t=C;const N=this.#e;if(F){const L=N.size;let M=1;for(const _ of N)if(F.has(_.id)&&(N.delete(_),N.add(_)),++M>L)break}for(;N.size>this.#t;)this.#n()}has(C){return this.#e.has(C)}[Symbol.iterator](){return this.#e.keys()}#n(){const C=this.#e.keys().next().value;C?.destroy(),this.#e.delete(C)}}s.PDFPageViewBuffer=U;class J{#e=null;#t=r.AnnotationEditorType.DISABLE;#n=null;#i=r.AnnotationMode.ENABLE_FORMS;#r=!1;#c=0;#o=null;#s=null;constructor(C){if(this.constructor===J)throw new Error("Cannot initialize BaseViewer.");const F="2.16.105";if(r.version!==F)throw new Error(`The API version "${r.version}" does not match the Viewer version "${F}".`);if(this.container=C.container,this.viewer=C.viewer||C.container.firstElementChild,"DIV"!==this.container?.tagName.toUpperCase()||"DIV"!==this.viewer?.tagName.toUpperCase())throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=C.eventBus,this.linkService=C.linkService||new v.SimpleLinkService,this.downloadManager=C.downloadManager||null,this.findController=C.findController||null,this._scriptingManager=C.scriptingManager||null,this.removePageBorders=C.removePageBorders||!1,this.textLayerMode=C.textLayerMode??l.TextLayerMode.ENABLE,this.#i=C.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.#t=C.annotationEditorMode??r.AnnotationEditorType.DISABLE,this.imageResourcesPath=C.imageResourcesPath||"",this.enablePrintAutoRotate=C.enablePrintAutoRotate||!1,this.renderer=C.renderer||l.RendererType.CANVAS,this.useOnlyCssZoom=C.useOnlyCssZoom||!1,this.maxCanvasPixels=C.maxCanvasPixels,this.l10n=C.l10n||o.NullL10n,this.#r=C.enablePermissions||!1,this.pageColors=C.pageColors||null,this.pageColors&&!(CSS.supports("color",this.pageColors.background)&&CSS.supports("color",this.pageColors.foreground))&&((this.pageColors.background||this.pageColors.foreground)&&console.warn("BaseViewer: Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!C.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new S.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=C.renderingQueue,this.scroll=(0,l.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=l.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss()}get pagesCount(){return this._pages.length}getPageView(C){return this._pages[C]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(C){return C?.pdfPage})}get renderForms(){return this.#i===r.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(C){if(!Number.isInteger(C))throw new Error("Invalid page number.");this.pdfDocument&&(this._setCurrentPageNumber(C,!0)||console.error(`currentPageNumber: "${C}" is not a valid page.`))}_setCurrentPageNumber(C,F=!1){if(this._currentPageNumber===C)return F&&this.#f(),!0;if(!(0<C&&C<=this.pagesCount))return!1;const N=this._currentPageNumber;return this._currentPageNumber=C,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:C,pageLabel:this._pageLabels?.[C-1]??null,previous:N}),F&&this.#f(),!0}get currentPageLabel(){return this._pageLabels?.[this._currentPageNumber-1]??null}set currentPageLabel(C){if(!this.pdfDocument)return;let F=0|C;if(this._pageLabels){const N=this._pageLabels.indexOf(C);N>=0&&(F=N+1)}this._setCurrentPageNumber(F,!0)||console.error(`currentPageLabel: "${C}" is not a valid page.`)}get currentScale(){return this._currentScale!==l.UNKNOWN_SCALE?this._currentScale:l.DEFAULT_SCALE}set currentScale(C){if(isNaN(C))throw new Error("Invalid numeric scale.");this.pdfDocument&&this._setScale(C,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(C){this.pdfDocument&&this._setScale(C,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(C){if(!(0,l.isValidRotation)(C))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((C%=360)<0&&(C+=360),this._pagesRotation===C))return;this._pagesRotation=C;const F=this._currentPageNumber,N={rotation:C};for(const L of this._pages)L.update(N);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:C,pageNumber:F}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}#u(C){const F={annotationEditorMode:this.#t,annotationMode:this.#i,textLayerMode:this.textLayerMode};return C&&(C.includes(r.PermissionFlag.COPY)||this.viewer.classList.add(R),C.includes(r.PermissionFlag.MODIFY_CONTENTS)||(F.annotationEditorMode=r.AnnotationEditorType.DISABLE),!C.includes(r.PermissionFlag.MODIFY_ANNOTATIONS)&&!C.includes(r.PermissionFlag.FILL_INTERACTIVE_FORMS)&&this.#i===r.AnnotationMode.ENABLE_FORMS&&(F.annotationMode=r.AnnotationMode.ENABLE)),F}#h(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const C=new Promise(F=>{this.#s=()=>{"hidden"===document.visibilityState&&(F(),document.removeEventListener("visibilitychange",this.#s),this.#s=null)},document.addEventListener("visibilitychange",this.#s)});return Promise.race([this._onePageRenderedCapability.promise,C])}setDocument(C){var F=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null),this.#n&&(this.#n.destroy(),this.#n=null)),this.pdfDocument=C,!C)return;const N=C.isPureXfa,L=C.numPages,M=C.getPage(1),_=C.getOptionalContentConfig(),n=this.#r?C.getPermissions():Promise.resolve();if(L>I.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const h=this._scrollMode=l.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:h})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:L})},()=>{}),this._onBeforeDraw=h=>{const w=this._pages[h.pageNumber-1];w&&this.#e.push(w)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=h=>{h.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:h.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,this.#s&&(document.removeEventListener("visibilitychange",this.#s),this.#s=null))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([M,n]).then(([h,w])=>{if(C!==this.pdfDocument)return;this._firstPageCapability.resolve(h),this._optionalContentConfigPromise=_;const{annotationEditorMode:A,annotationMode:t,textLayerMode:g}=this.#u(w);if(A!==r.AnnotationEditorType.DISABLE){const Q=A;N?console.warn("Warning: XFA-editing is not implemented."):W(Q)?(this.#n=new r.AnnotationEditorUIManager(this.container,this.eventBus),Q!==r.AnnotationEditorType.NONE&&this.#n.updateMode(Q)):console.error(`Invalid AnnotationEditor mode: ${Q}`)}const m=this._scrollMode===l.ScrollMode.PAGE?null:this.viewer,k=this.currentScale,E=h.getViewport({scale:k*r.PixelsPerInch.PDF_TO_CSS_UNITS}),O=g===l.TextLayerMode.DISABLE||N?null:this,B=t!==r.AnnotationMode.DISABLE?this:null,z=N?this:null,G=this.#n?this:null;for(let Q=1;Q<=L;++Q){const se=new a.PDFPageView({container:m,eventBus:this.eventBus,id:Q,scale:k,defaultViewport:E.clone(),optionalContentConfigPromise:_,renderingQueue:this.renderingQueue,textLayerFactory:O,textLayerMode:g,annotationLayerFactory:B,annotationMode:t,xfaLayerFactory:z,annotationEditorLayerFactory:G,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(se)}const X=this._pages[0];X&&(X.setPdfPage(h),this.linkService.cachePageRef(1,h.ref)),this._scrollMode===l.ScrollMode.PAGE?this.#l():this._spreadMode!==l.SpreadMode.NONE&&this._updateSpreadMode(),this.#h().then(p(function*(){if(F.findController&&F.findController.setDocument(C),F._scriptingManager&&F._scriptingManager.setDocument(C),F.#n&&F.eventBus.dispatch("annotationeditormodechanged",{source:F,mode:F.#t}),C.loadingParams.disableAutoFetch||L>I.FORCE_LAZY_PAGE_INIT)return void F._pagesCapability.resolve();let Q=L-1;if(Q<=0)F._pagesCapability.resolve();else for(let se=2;se<=L;++se){const ne=C.getPage(se).then(re=>{const q=F._pages[se-1];q.pdfPage||q.setPdfPage(re),F.linkService.cachePageRef(se,re.ref),0==--Q&&F._pagesCapability.resolve()},re=>{console.error(`Unable to get page ${se} to initialize viewer`,re),0==--Q&&F._pagesCapability.resolve()});se%I.PAUSE_EAGER_PAGE_INIT==0&&(yield ne)}})),this.eventBus.dispatch("pagesinit",{source:this}),C.getMetadata().then(({info:Q})=>{C===this.pdfDocument&&Q.Language&&(this.viewer.lang=Q.Language)}),this.defaultRenderingQueue&&this.update()}).catch(h=>{console.error("Unable to initialize viewer",h),this._pagesCapability.reject(h)})}setPageLabels(C){if(this.pdfDocument){C?Array.isArray(C)&&this.pdfDocument.numPages===C.length?this._pageLabels=C:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let F=0,N=this._pages.length;F<N;F++)this._pages[F].setPageLabel(this._pageLabels?.[F]??null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=l.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,this.#e=new U(10),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,r.createPromiseCapability)(),this._onePageRenderedCapability=(0,r.createPromiseCapability)(),this._pagesCapability=(0,r.createPromiseCapability)(),this._scrollMode=l.ScrollMode.VERTICAL,this._previousScrollMode=l.ScrollMode.UNKNOWN,this._spreadMode=l.SpreadMode.NONE,this.#o={previousPageNumber:1,scrollDown:!0,pages:[]},this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),this.#s&&(document.removeEventListener("visibilitychange",this.#s),this.#s=null),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(R)}#l(){if(this._scrollMode!==l.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const C=this._currentPageNumber,F=this.#o,N=this.viewer;if(N.textContent="",F.pages.length=0,this._spreadMode!==l.SpreadMode.NONE||this.isInPresentationMode){const L=new Set,M=this._spreadMode-1;-1===M?L.add(C-1):C%2!==M?(L.add(C-1),L.add(C)):(L.add(C-2),L.add(C-1));const _=document.createElement("div");if(_.className="spread",this.isInPresentationMode){const n=document.createElement("div");n.className="dummyPage",_.append(n)}for(const n of L){const h=this._pages[n];h&&(_.append(h.div),F.pages.push(h))}N.append(_)}else{const L=this._pages[C-1];N.append(L.div),F.pages.push(L)}F.scrollDown=C>=F.previousPageNumber,F.previousPageNumber=C}_scrollUpdate(){0!==this.pagesCount&&this.update()}#a(C,F=null){const{div:N,id:L}=C;if(this._scrollMode===l.ScrollMode.PAGE&&(this._setCurrentPageNumber(L),this.#l(),this.update()),!F&&!this.isInPresentationMode){const M=N.offsetLeft+N.clientLeft,_=M+N.clientWidth,{scrollLeft:n,clientWidth:h}=this.container;(this._scrollMode===l.ScrollMode.HORIZONTAL||M<n||_>n+h)&&(F={left:0,top:0})}(0,l.scrollIntoView)(N,F)}#p(C){return C===this._currentScale||Math.abs(C-this._currentScale)<1e-15}_setScaleUpdatePages(C,F,N=!1,L=!1){if(this._currentScaleValue=F.toString(),this.#p(C))return void(L&&this.eventBus.dispatch("scalechanging",{source:this,scale:C,presetValue:F}));l.docStyle.setProperty("--scale-factor",C*r.PixelsPerInch.PDF_TO_CSS_UNITS);const M={scale:C};for(const _ of this._pages)_.update(M);if(this._currentScale=C,!N){let n,_=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(_=this._location.pageNumber,n=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:_,destArray:n,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:C,presetValue:L?F:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL?2:1}_setScale(C,F=!1){let N=parseFloat(C);if(N>0)this._setScaleUpdatePages(N,C,F,!1);else{const L=this._pages[this._currentPageNumber-1];if(!L)return;let M=l.SCROLLBAR_PADDING,_=l.VERTICAL_PADDING;this.isInPresentationMode?M=_=4:this.removePageBorders?M=_=0:this._scrollMode===l.ScrollMode.HORIZONTAL&&([M,_]=[_,M]);const n=(this.container.clientWidth-M)/L.width*L.scale/this._pageWidthScaleFactor,h=(this.container.clientHeight-_)/L.height*L.scale;switch(C){case"page-actual":N=1;break;case"page-width":N=n;break;case"page-height":N=h;break;case"page-fit":N=Math.min(n,h);break;case"auto":const w=(0,l.isPortraitOrientation)(L)?n:Math.min(h,n);N=Math.min(l.MAX_AUTO_SCALE,w);break;default:return void console.error(`_setScale: "${C}" is an unknown zoom value.`)}this._setScaleUpdatePages(N,C,F,!0)}}#f(){const C=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),this.#a(C)}pageLabelToPageNumber(C){if(!this._pageLabels)return null;const F=this._pageLabels.indexOf(C);return F<0?null:F+1}scrollPageIntoView({pageNumber:C,destArray:F=null,allowNegativeOffset:N=!1,ignoreDestinationZoom:L=!1}){if(!this.pdfDocument)return;const M=Number.isInteger(C)&&this._pages[C-1];if(!M)return void console.error(`scrollPageIntoView: "${C}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!F)return void this._setCurrentPageNumber(C,!0);let A,t,_=0,n=0,h=0,w=0;const g=M.rotation%180!=0,m=(g?M.height:M.width)/M.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS,k=(g?M.width:M.height)/M.scale/r.PixelsPerInch.PDF_TO_CSS_UNITS;let E=0;switch(F[1].name){case"XYZ":_=F[2],n=F[3],E=F[4],_=null!==_?_:0,n=null!==n?n:k;break;case"Fit":case"FitB":E="page-fit";break;case"FitH":case"FitBH":n=F[2],E="page-width",null===n&&this._location?(_=this._location.left,n=this._location.top):("number"!=typeof n||n<0)&&(n=k);break;case"FitV":case"FitBV":_=F[2],h=m,w=k,E="page-height";break;case"FitR":_=F[2],n=F[3],h=F[4]-_,w=F[5]-n,A=(this.container.clientWidth-(this.removePageBorders?0:l.SCROLLBAR_PADDING))/h/r.PixelsPerInch.PDF_TO_CSS_UNITS,t=(this.container.clientHeight-(this.removePageBorders?0:l.VERTICAL_PADDING))/w/r.PixelsPerInch.PDF_TO_CSS_UNITS,E=Math.min(Math.abs(A),Math.abs(t));break;default:return void console.error(`scrollPageIntoView: "${F[1].name}" is not a valid destination type.`)}if(L||(E&&E!==this._currentScale?this.currentScaleValue=E:this._currentScale===l.UNKNOWN_SCALE&&(this.currentScaleValue=l.DEFAULT_SCALE_VALUE)),"page-fit"===E&&!F[4])return void this.#a(M);const O=[M.viewport.convertToViewportPoint(_,n),M.viewport.convertToViewportPoint(_+h,n+w)];let B=Math.min(O[0][0],O[1][0]),z=Math.min(O[0][1],O[1][1]);N||(B=Math.max(B,0),z=Math.max(z,0)),this.#a(M,{left:B,top:z})}_updateLocation(C){const F=this._currentScale,N=this._currentScaleValue,L=parseFloat(N)===F?Math.round(1e4*F)/100:N,M=C.id,n=this.container,h=this._pages[M-1].getPagePoint(n.scrollLeft-C.x,n.scrollTop-C.y),w=Math.round(h[0]),A=Math.round(h[1]);let t=`#page=${M}`;this.isInPresentationMode||(t+=`&zoom=${L},${w},${A}`),this._location={pageNumber:M,scale:L,top:A,left:w,rotation:this._pagesRotation,pdfOpenParams:t}}update(){const C=this._getVisiblePages(),F=C.views,N=F.length;if(0===N)return;const L=Math.max(10,2*N+1);this.#e.resize(L,C.ids),this.renderingQueue.renderHighestPriority(C);const M=this._spreadMode===l.SpreadMode.NONE&&(this._scrollMode===l.ScrollMode.PAGE||this._scrollMode===l.ScrollMode.VERTICAL),_=this._currentPageNumber;let n=!1;for(const h of F){if(h.percent<100)break;if(h.id===_&&M){n=!0;break}}this._setCurrentPageNumber(n?_:F[0].id),this._updateLocation(C.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(C){return this.container.contains(C)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===l.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===l.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const C=this._scrollMode===l.ScrollMode.PAGE?this.#o.pages:this._pages,F=this._scrollMode===l.ScrollMode.HORIZONTAL;return(0,l.getVisibleElements)({scrollEl:this.container,views:C,sortByVisibility:!0,horizontal:F,rtl:F&&this._isContainerRtl})}isPageVisible(C){return!!this.pdfDocument&&(Number.isInteger(C)&&C>0&&C<=this.pagesCount?this._getVisiblePages().ids.has(C):(console.error(`isPageVisible: "${C}" is not a valid page.`),!1))}isPageCached(C){return!!this.pdfDocument&&(Number.isInteger(C)&&C>0&&C<=this.pagesCount?this.#e.has(this._pages[C-1]):(console.error(`isPageCached: "${C}" is not a valid page.`),!1))}cleanup(){for(const C of this._pages)C.renderingState!==l.RenderingStates.FINISHED&&C.reset()}_cancelRendering(){for(const C of this._pages)C.cancelRendering()}#b(C){var F=this;return p(function*(){if(C.pdfPage)return C.pdfPage;try{const N=yield F.pdfDocument.getPage(C.id);return C.pdfPage||C.setPdfPage(N),F.linkService._cachedPageNumber?.(N.ref)||F.linkService.cachePageRef(C.id,N.ref),N}catch(N){return console.error("Unable to get page for page view",N),null}})()}#m(C){if(1===C.first?.id)return!0;if(C.last?.id===this.pagesCount)return!1;switch(this._scrollMode){case l.ScrollMode.PAGE:return this.#o.scrollDown;case l.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down}#_(C){for(const F of C)this._pages[F-1]?.toggleLoadingIconSpinner(!0);for(const F of this.#e)C.has(F.id)||F.toggleLoadingIconSpinner(!1)}forceRendering(C){const F=C||this._getVisiblePages(),N=this.#m(F),M=this.renderingQueue.getHighestPriority(F,this._pages,N,this._spreadMode!==l.SpreadMode.NONE&&this._scrollMode!==l.ScrollMode.HORIZONTAL);return this.#_(F.ids),!!M&&(this.#b(M).then(()=>{this.renderingQueue.renderView(M)}),!0)}createTextLayerBuilder({textLayerDiv:C,pageIndex:F,viewport:N,enhanceTextSelection:L=!1,eventBus:M,highlighter:_,accessibilityManager:n=null}){return new e.TextLayerBuilder({textLayerDiv:C,eventBus:M,pageIndex:F,viewport:N,enhanceTextSelection:!this.isInPresentationMode&&L,highlighter:_,accessibilityManager:n})}createTextHighlighter({pageIndex:C,eventBus:F}){return new d.TextHighlighter({eventBus:F,pageIndex:C,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder({pageDiv:C,pdfPage:F,annotationStorage:N=this.pdfDocument?.annotationStorage,imageResourcesPath:L="",renderForms:M=!0,l10n:_=o.NullL10n,enableScripting:n=this.enableScripting,hasJSActionsPromise:h=this.pdfDocument?.hasJSActions(),mouseState:w=this._scriptingManager?.mouseState,fieldObjectsPromise:A=this.pdfDocument?.getFieldObjects(),annotationCanvasMap:t=null,accessibilityManager:g=null}){return new c.AnnotationLayerBuilder({pageDiv:C,pdfPage:F,annotationStorage:N,imageResourcesPath:L,renderForms:M,linkService:this.linkService,downloadManager:this.downloadManager,l10n:_,enableScripting:n,hasJSActionsPromise:h,mouseState:w,fieldObjectsPromise:A,annotationCanvasMap:t,accessibilityManager:g})}createAnnotationEditorLayerBuilder({uiManager:C=this.#n,pageDiv:F,pdfPage:N,accessibilityManager:L=null,l10n:M,annotationStorage:_=this.pdfDocument?.annotationStorage}){return new P.AnnotationEditorLayerBuilder({uiManager:C,pageDiv:F,pdfPage:N,annotationStorage:_,accessibilityManager:L,l10n:M})}createXfaLayerBuilder({pageDiv:C,pdfPage:F,annotationStorage:N=this.pdfDocument?.annotationStorage}){return new i.XfaLayerBuilder({pageDiv:C,pdfPage:F,annotationStorage:N,linkService:this.linkService})}createStructTreeLayerBuilder({pdfPage:C}){return new y.StructTreeLayerBuilder({pdfPage:C})}get hasEqualPageSizes(){const C=this._pages[0];for(let F=1,N=this._pages.length;F<N;++F){const L=this._pages[F];if(L.width!==C.width||L.height!==C.height)return!1}return!0}getPagesOverview(){return this._pages.map(C=>{const F=C.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,l.isPortraitOrientation)(F)?{width:F.width,height:F.height,rotation:F.rotation}:{width:F.height,height:F.width,rotation:(F.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:(console.error("optionalContentConfigPromise: Not initialized yet."),this.pdfDocument.getOptionalContentConfig()):Promise.resolve(null)}set optionalContentConfigPromise(C){if(!(C instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${C}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=C;const F={optionalContentConfigPromise:C};for(const N of this._pages)N.update(F);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:C})}get scrollMode(){return this._scrollMode}set scrollMode(C){if(this._scrollMode!==C){if(!(0,l.isValidScrollMode)(C))throw new Error(`Invalid scroll mode: ${C}`);this.pagesCount>I.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=C,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:C}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(C=null){const F=this._scrollMode,N=this.viewer;N.classList.toggle("scrollHorizontal",F===l.ScrollMode.HORIZONTAL),N.classList.toggle("scrollWrapped",F===l.ScrollMode.WRAPPED),this.pdfDocument&&C&&(F===l.ScrollMode.PAGE?this.#l():this._previousScrollMode===l.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(C,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(C){if(this._spreadMode!==C){if(!(0,l.isValidSpreadMode)(C))throw new Error(`Invalid spread mode: ${C}`);this._spreadMode=C,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:C}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(C=null){if(!this.pdfDocument)return;const F=this.viewer,N=this._pages;if(this._scrollMode===l.ScrollMode.PAGE)this.#l();else if(F.textContent="",this._spreadMode===l.SpreadMode.NONE)for(const L of this._pages)F.append(L.div);else{const L=this._spreadMode-1;let M=null;for(let _=0,n=N.length;_<n;++_)null===M?(M=document.createElement("div"),M.className="spread",F.append(M)):_%2===L&&(M=M.cloneNode(!1),F.append(M)),M.append(N[_].div)}C&&(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(C,!0),this.update())}_getPageAdvance(C,F=!1){switch(this._scrollMode){case l.ScrollMode.WRAPPED:{const{views:N}=this._getVisiblePages(),L=new Map;for(const{id:M,y:_,percent:n,widthPercent:h}of N){if(0===n||h<100)continue;let w=L.get(_);w||L.set(_,w||=[]),w.push(M)}for(const M of L.values()){const _=M.indexOf(C);if(-1===_)continue;const n=M.length;if(1===n)break;if(F)for(let h=_-1,w=0;h>=w;h--){const t=M[h+1]-1;if(M[h]<t)return C-t}else for(let h=_+1,w=n;h<w;h++){const t=M[h-1]+1;if(M[h]>t)return t-C}if(F){const h=M[0];if(h<C)return C-h+1}else{const h=M[n-1];if(h>C)return h-C+1}break}break}case l.ScrollMode.HORIZONTAL:break;case l.ScrollMode.PAGE:case l.ScrollMode.VERTICAL:{if(this._spreadMode===l.SpreadMode.NONE)break;const N=this._spreadMode-1;if(F&&C%2!==N)break;if(!F&&C%2===N)break;const{views:L}=this._getVisiblePages(),M=F?C-1:C+1;for(const{id:_,percent:n,widthPercent:h}of L)if(_===M){if(n>0&&100===h)return 2;break}break}}return 1}nextPage(){const C=this._currentPageNumber,F=this.pagesCount;if(C>=F)return!1;const N=this._getPageAdvance(C,!1)||1;return this.currentPageNumber=Math.min(C+N,F),!0}previousPage(){const C=this._currentPageNumber;if(C<=1)return!1;const F=this._getPageAdvance(C,!0)||1;return this.currentPageNumber=Math.max(C-F,1),!0}increaseScale(C=1){let F=this._currentScale;do{F=(F*l.DEFAULT_SCALE_DELTA).toFixed(2),F=Math.ceil(10*F)/10,F=Math.min(l.MAX_SCALE,F)}while(--C>0&&F<l.MAX_SCALE);this.currentScaleValue=F}decreaseScale(C=1){let F=this._currentScale;do{F=(F/l.DEFAULT_SCALE_DELTA).toFixed(2),F=Math.floor(10*F)/10,F=Math.max(l.MIN_SCALE,F)}while(--C>0&&F>l.MIN_SCALE);this.currentScaleValue=F}updateContainerHeightCss(){const C=this.container.clientHeight;C!==this.#c&&(this.#c=C,l.docStyle.setProperty("--viewer-container-height",`${C}px`))}get annotationEditorMode(){return this.#n?this.#t:r.AnnotationEditorType.DISABLE}set annotationEditorMode(C){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");if(this.#t!==C){if(!W(C))throw new Error(`Invalid AnnotationEditor mode: ${C}`);this.pdfDocument&&(this.#t=C,this.eventBus.dispatch("annotationeditormodechanged",{source:this,mode:C}),this.#n.updateMode(C))}}set annotationEditorParams({type:C,value:F}){if(!this.#n)throw new Error("The AnnotationEditor is not enabled.");this.#n.updateParams(C,F)}refresh(){if(!this.pdfDocument)return;const C={};for(const F of this._pages)F.update(C);this.update()}}s.BaseViewer=J},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFPageView=void 0;var r=f(3),l=f(7),P=f(14),c=f(4),o=f(15);const a=P.compatibilityParams.maxCanvasPixels||16777216;s.PDFPageView=class S{#e=r.AnnotationMode.ENABLE_FORMS;#t={initialOptionalContent:!0,regularAnnotations:!0};constructor(y){const d=y.container,e=y.defaultViewport;this.id=y.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=y.scale||l.DEFAULT_SCALE,this.viewport=e,this.pdfPageRotate=e.rotation,this._optionalContentConfigPromise=y.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=y.textLayerMode??l.TextLayerMode.ENABLE,this.#e=y.annotationMode??r.AnnotationMode.ENABLE_FORMS,this.imageResourcesPath=y.imageResourcesPath||"",this.useOnlyCssZoom=y.useOnlyCssZoom||!1,this.maxCanvasPixels=y.maxCanvasPixels||a,this.pageColors=y.pageColors||null,this.eventBus=y.eventBus,this.renderingQueue=y.renderingQueue,this.textLayerFactory=y.textLayerFactory,this.annotationLayerFactory=y.annotationLayerFactory,this.annotationEditorLayerFactory=y.annotationEditorLayerFactory,this.xfaLayerFactory=y.xfaLayerFactory,this.textHighlighter=y.textHighlighterFactory?.createTextHighlighter({pageIndex:this.id-1,eventBus:this.eventBus}),this.structTreeLayerFactory=y.structTreeLayerFactory,this.renderer=y.renderer||l.RendererType.CANVAS,this.l10n=y.l10n||c.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=l.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!this.renderingQueue?.hasViewer(),this._annotationCanvasMap=null,this.annotationLayer=null,this.annotationEditorLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const i=document.createElement("div");if(i.className="page",i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(b=>{i.setAttribute("aria-label",b)}),this.div=i,d?.append(i),this._isStandalone){const{optionalContentConfigPromise:b}=y;b&&b.then(R=>{b===this._optionalContentConfigPromise&&(this.#t.initialOptionalContent=R.hasInitialVisibility)})}}setPdfPage(y){this.pdfPage=y,this.pdfPageRotate=y.rotate,this.viewport=y.getViewport({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var y=this;return p(function*(){let d=null;try{yield y.annotationLayer.render(y.viewport,"display")}catch(e){console.error(`_renderAnnotationLayer: "${e}".`),d=e}finally{y.eventBus.dispatch("annotationlayerrendered",{source:y,pageNumber:y.id,error:d})}})()}_renderAnnotationEditorLayer(){var y=this;return p(function*(){let d=null;try{yield y.annotationEditorLayer.render(y.viewport,"display")}catch(e){console.error(`_renderAnnotationEditorLayer: "${e}".`),d=e}finally{y.eventBus.dispatch("annotationeditorlayerrendered",{source:y,pageNumber:y.id,error:d})}})()}_renderXfaLayer(){var y=this;return p(function*(){let d=null;try{const e=yield y.xfaLayer.render(y.viewport,"display");y.textHighlighter&&y._buildXfaTextContentItems(e.textDivs)}catch(e){console.error(`_renderXfaLayer: "${e}".`),d=e}finally{y.eventBus.dispatch("xfalayerrendered",{source:y,pageNumber:y.id,error:d})}})()}_buildXfaTextContentItems(y){var d=this;return p(function*(){const e=yield d.pdfPage.getTextContent(),i=[];for(const b of e.items)i.push(b.str);d.textHighlighter.setTextMapping(y,i),d.textHighlighter.enable()})()}_resetZoomLayer(y=!1){if(!this.zoomLayer)return;const d=this.zoomLayer.firstChild;this.paintedViewportMap.delete(d),d.width=0,d.height=0,y&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:y=!1,keepAnnotationLayer:d=!1,keepAnnotationEditorLayer:e=!1,keepXfaLayer:i=!1}={}){this.cancelRendering({keepAnnotationLayer:d,keepAnnotationEditorLayer:e,keepXfaLayer:i}),this.renderingState=l.RenderingStates.INITIAL;const b=this.div;b.style.width=Math.floor(this.viewport.width)+"px",b.style.height=Math.floor(this.viewport.height)+"px";const R=b.childNodes,I=y&&this.zoomLayer||null,W=d&&this.annotationLayer?.div||null,U=e&&this.annotationEditorLayer?.div||null,J=i&&this.xfaLayer?.div||null;for(let K=R.length-1;K>=0;K--){const C=R[K];switch(C){case I:case W:case U:case J:continue}C.remove()}b.removeAttribute("data-loaded"),W&&this.annotationLayer.hide(),U?this.annotationEditorLayer.hide():this.annotationEditorLayer?.destroy(),J&&this.xfaLayer.hide(),I||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(K=>{this.loadingIconDiv?.setAttribute("aria-label",K)}),b.append(this.loadingIconDiv)}update({scale:y=0,rotation:d=null,optionalContentConfigPromise:e=null}){if(this.scale=y||this.scale,"number"==typeof d&&(this.rotation=d),e instanceof Promise&&(this._optionalContentConfigPromise=e,e.then(R=>{e===this._optionalContentConfigPromise&&(this.#t.initialOptionalContent=R.hasInitialVisibility)})),this.viewport=this.viewport.clone({scale:this.scale*r.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone&&l.docStyle.setProperty("--scale-factor",this.viewport.scale),this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let b=!1;if(this.canvas&&this.maxCanvasPixels>0){const R=this.outputScale;(Math.floor(this.viewport.width)*R.sx|0)*(Math.floor(this.viewport.height)*R.sy|0)>this.maxCanvasPixels&&(b=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&b)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawAnnotationEditorLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepAnnotationEditorLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:y=!1,keepAnnotationEditorLayer:d=!1,keepXfaLayer:e=!1}={}){this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!y||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.annotationEditorLayer&&(!d||!this.annotationEditorLayer.div)&&(this.annotationEditorLayer.cancel(),this.annotationEditorLayer=null),this.xfaLayer&&(!e||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,this.textHighlighter?.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:y,redrawAnnotationLayer:d=!1,redrawAnnotationEditorLayer:e=!1,redrawXfaLayer:i=!1}){const b=this.viewport.width,R=this.viewport.height,I=this.div;y.style.width=y.parentNode.style.width=I.style.width=Math.floor(b)+"px",y.style.height=y.parentNode.style.height=I.style.height=Math.floor(R)+"px";const W=this.viewport.rotation-this.paintedViewportMap.get(y).rotation,U=Math.abs(W);let J=1,K=1;if((90===U||270===U)&&(J=R/b,K=b/R),y.style.transform=`rotate(${W}deg) scale(${J}, ${K})`,this.textLayer){const C=this.textLayer.viewport,N=Math.abs(this.viewport.rotation-C.rotation);let L=b/C.width;(90===N||270===N)&&(L=b/C.height);const M=this.textLayer.textLayerDiv;let _,n;switch(N){case 0:_=n=0;break;case 90:_=0,n="-"+M.style.height;break;case 180:_="-"+M.style.width,n="-"+M.style.height;break;case 270:_="-"+M.style.width,n=0;break;default:console.error("Bad rotation value.")}M.style.transform=`rotate(${N}deg) scale(${L}) translate(${_}, ${n})`,M.style.transformOrigin="0% 0%"}d&&this.annotationLayer&&this._renderAnnotationLayer(),e&&this.annotationEditorLayer&&this._renderAnnotationEditorLayer(),i&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(y,d){return this.viewport.convertToPdfPoint(y,d)}toggleLoadingIconSpinner(y=!1){this.loadingIconDiv?.classList.toggle("notVisible",!y)}draw(){var y=this;this.renderingState!==l.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:d,pdfPage:e}=this;if(!e)return this.renderingState=l.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=l.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=d.style.width,i.style.height=d.style.height,i.classList.add("canvasWrapper");const b=this.annotationLayer?.div||this.annotationEditorLayer?.div;b?b.before(i):d.append(i);let R=null;if(this.textLayerMode!==l.TextLayerMode.DISABLE&&this.textLayerFactory){this._accessibilityManager||=new o.TextAccessibilityManager;const K=document.createElement("div");K.className="textLayer",K.style.width=i.style.width,K.style.height=i.style.height,b?b.before(K):d.append(K),R=this.textLayerFactory.createTextLayerBuilder({textLayerDiv:K,pageIndex:this.id-1,viewport:this.viewport,enhanceTextSelection:this.textLayerMode===l.TextLayerMode.ENABLE_ENHANCE,eventBus:this.eventBus,highlighter:this.textHighlighter,accessibilityManager:this._accessibilityManager})}this.textLayer=R,this.#e!==r.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||=new Map,this.annotationLayer||=this.annotationLayerFactory.createAnnotationLayerBuilder({pageDiv:d,pdfPage:e,imageResourcesPath:this.imageResourcesPath,renderForms:this.#e===r.AnnotationMode.ENABLE_FORMS,l10n:this.l10n,annotationCanvasMap:this._annotationCanvasMap,accessibilityManager:this._accessibilityManager})),this.xfaLayer?.div&&d.append(this.xfaLayer.div);let I=null;this.renderingQueue&&(I=K=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=l.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=l.RenderingStates.RUNNING,K()});K()});const W=function(){var K=p(function*(C=null){if(U===y.paintTask&&(y.paintTask=null),C instanceof r.RenderingCancelledException)y._renderError=null;else if(y._renderError=C,y.renderingState=l.RenderingStates.FINISHED,y.loadingIconDiv&&(y.loadingIconDiv.remove(),delete y.loadingIconDiv),y._resetZoomLayer(!0),y.#t.regularAnnotations=!U.separateAnnots,y.eventBus.dispatch("pagerendered",{source:y,pageNumber:y.id,cssTransform:!1,timestamp:performance.now(),error:y._renderError}),C)throw C});return function(){return K.apply(this,arguments)}}(),U=this.renderer===l.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);U.onRenderContinue=I,this.paintTask=U;const J=U.promise.then(()=>W(null).then(()=>{if(R){const K=e.streamTextContent({includeMarkedContent:!0});R.setTextContentStream(K),R.render()}this.annotationLayer&&this._renderAnnotationLayer().then(()=>{this.annotationEditorLayerFactory&&(this.annotationEditorLayer||=this.annotationEditorLayerFactory.createAnnotationEditorLayerBuilder({pageDiv:d,pdfPage:e,l10n:this.l10n,accessibilityManager:this._accessibilityManager}),this._renderAnnotationEditorLayer())})}),function(K){return W(K)});return this.xfaLayerFactory&&(this.xfaLayer||=this.xfaLayerFactory.createXfaLayerBuilder({pageDiv:d,pdfPage:e}),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=K=>{K.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(C=>{if(!C||!this.canvas)return;const F=this.structTreeLayer.render(C);F.classList.add("structTree"),this.canvas.append(F)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder({pdfPage:e})),d.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),J}paintOnCanvas(y){const d=(0,r.createPromiseCapability)(),e={promise:d.promise,onRenderContinue(L){L()},cancel(){N.cancel()},get separateAnnots(){return N.separateAnnots}},i=this.viewport,b=document.createElement("canvas");b.setAttribute("role","presentation"),b.hidden=!0;let R=!0;const I=function(){R&&(b.hidden=!1,R=!1)};y.append(b),this.canvas=b;const W=b.getContext("2d",{alpha:!1}),U=this.outputScale=new l.OutputScale;if(this.useOnlyCssZoom){const L=i.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});U.sx*=L.width/i.width,U.sy*=L.height/i.height}if(this.maxCanvasPixels>0){const M=Math.sqrt(this.maxCanvasPixels/(i.width*i.height));U.sx>M||U.sy>M?(U.sx=M,U.sy=M,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const J=(0,l.approximateFraction)(U.sx),K=(0,l.approximateFraction)(U.sy);b.width=(0,l.roundToDivide)(i.width*U.sx,J[0]),b.height=(0,l.roundToDivide)(i.height*U.sy,K[0]),b.style.width=(0,l.roundToDivide)(i.width,J[1])+"px",b.style.height=(0,l.roundToDivide)(i.height,K[1])+"px",this.paintedViewportMap.set(b,i);const F={canvasContext:W,transform:U.scaled?[U.sx,0,0,U.sy,0,0]:null,viewport:this.viewport,annotationMode:this.#e,optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},N=this.pdfPage.render(F);return N.onContinue=function(L){I(),e.onRenderContinue?e.onRenderContinue(L):L()},N.promise.then(function(){I(),d.resolve()},function(L){I(),d.reject(L)}),e}paintOnSvg(y){let d=!1;const e=()=>{if(d)throw new r.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,b=this.viewport.clone({scale:r.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:this.#e}).then(I=>(e(),new r.SVGGraphics(i.commonObjs,i.objs).getSVG(I,b).then(U=>{e(),this.svg=U,this.paintedViewportMap.set(U,b),U.style.width=y.style.width,U.style.height=y.style.height,this.renderingState=l.RenderingStates.FINISHED,y.append(U)}))),onRenderContinue(I){I()},cancel(){d=!0},get separateAnnots(){return!1}}}setPageLabel(y){this.pageLabel="string"==typeof y?y:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}get thumbnailCanvas(){const{initialOptionalContent:y,regularAnnotations:d}=this.#t;return y&&d?this.canvas:null}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.compatibilityParams=s.OptionKind=s.AppOptions=void 0;const f=Object.create(null);s.compatibilityParams=f;{const o=navigator.userAgent||"",a=navigator.platform||"",S=navigator.maxTouchPoints||1,v=/Android/.test(o);(/\b(iPad|iPhone|iPod)(?=;)/.test(o)||"MacIntel"===a&&S>1||v)&&(f.maxCanvasPixels=5242880)}const r={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};s.OptionKind=r;const l={annotationEditorMode:{value:-1,kind:r.VIEWER+r.PREFERENCE},annotationMode:{value:2,kind:r.VIEWER+r.PREFERENCE},cursorToolOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},defaultZoomValue:{value:"",kind:r.VIEWER+r.PREFERENCE},disableHistory:{value:!1,kind:r.VIEWER},disablePageLabels:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePermissions:{value:!1,kind:r.VIEWER+r.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:r.VIEWER+r.PREFERENCE},enableScripting:{value:!0,kind:r.VIEWER+r.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:r.VIEWER},externalLinkTarget:{value:0,kind:r.VIEWER+r.PREFERENCE},historyUpdateUrl:{value:!1,kind:r.VIEWER+r.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},imageResourcesPath:{value:"./images/",kind:r.VIEWER},maxCanvasPixels:{value:16777216,kind:r.VIEWER},forcePageColors:{value:!1,kind:r.VIEWER+r.PREFERENCE},pageColorsBackground:{value:"Canvas",kind:r.VIEWER+r.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:r.VIEWER+r.PREFERENCE},pdfBugEnabled:{value:!1,kind:r.VIEWER+r.PREFERENCE},printResolution:{value:150,kind:r.VIEWER},sidebarViewOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},scrollModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},spreadModeOnLoad:{value:-1,kind:r.VIEWER+r.PREFERENCE},textLayerMode:{value:1,kind:r.VIEWER+r.PREFERENCE},useOnlyCssZoom:{value:!1,kind:r.VIEWER+r.PREFERENCE},viewerCssTheme:{value:0,kind:r.VIEWER+r.PREFERENCE},viewOnLoad:{value:0,kind:r.VIEWER+r.PREFERENCE},cMapPacked:{value:!0,kind:r.API},cMapUrl:{value:"../web/cmaps/",kind:r.API},disableAutoFetch:{value:!1,kind:r.API+r.PREFERENCE},disableFontFace:{value:!1,kind:r.API+r.PREFERENCE},disableRange:{value:!1,kind:r.API+r.PREFERENCE},disableStream:{value:!1,kind:r.API+r.PREFERENCE},docBaseUrl:{value:"",kind:r.API},enableXfa:{value:!0,kind:r.API+r.PREFERENCE},fontExtraProperties:{value:!1,kind:r.API},isEvalSupported:{value:!0,kind:r.API},maxImageSize:{value:-1,kind:r.API},pdfBug:{value:!1,kind:r.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:r.API},verbosity:{value:1,kind:r.API},workerPort:{value:null,kind:r.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:r.WORKER}};l.defaultUrl={value:"compressed.tracemonkey-pldi-09.pdf",kind:r.VIEWER},l.disablePreferences={value:!1,kind:r.VIEWER},l.locale={value:navigator.language||"en-US",kind:r.VIEWER},l.renderer={value:"canvas",kind:r.VIEWER+r.PREFERENCE},l.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:r.VIEWER};const P=Object.create(null);s.AppOptions=class c{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(a){const S=P[a];if(void 0!==S)return S;const v=l[a];return void 0!==v?f[a]??v.value:void 0}static getAll(a=null){const S=Object.create(null);for(const v in l){const y=l[v];if(a){if(!(a&y.kind))continue;if(a===r.PREFERENCE){const e=y.value,i=typeof e;if("boolean"===i||"string"===i||"number"===i&&Number.isInteger(e)){S[v]=e;continue}throw new Error(`Invalid type for preference: ${v}`)}}const d=P[v];S[v]=void 0!==d?d:f[v]??y.value}return S}static set(a,S){P[a]=S}static setAll(a){for(const S in a)P[S]=a[S]}static remove(a){delete P[a]}static _hasUserOptions(){return Object.keys(P).length>0}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextAccessibilityManager=void 0;var r=f(7);class l{#e=!1;#t=null;#n=new Map;#i=new Map;setTextMapping(c){this.#t=c}static#r(c,o){const a=c.getBoundingClientRect(),S=o.getBoundingClientRect();if(0===a.width&&0===a.height)return 1;if(0===S.width&&0===S.height)return-1;const d=a.y+a.height/2,b=S.y+S.height/2;return d<=S.y&&b>=a.y+a.height?-1:b<=a.y&&d>=S.y+S.height?1:a.x+a.width/2-(S.x+S.width/2)}enable(){if(this.#e)throw new Error("TextAccessibilityManager is already enabled.");if(!this.#t)throw new Error("Text divs and strings have not been set.");if(this.#e=!0,this.#t=this.#t.slice(),this.#t.sort(l.#r),this.#n.size>0){const c=this.#t;for(const[o,a]of this.#n)document.getElementById(o)?this.#c(o,c[a]):this.#n.delete(o)}for(const[c,o]of this.#i)this.addPointerInTextLayer(c,o);this.#i.clear()}disable(){this.#e&&(this.#i.clear(),this.#t=null,this.#e=!1)}removePointerInTextLayer(c){if(!this.#e)return void this.#i.delete(c);const o=this.#t;if(!o||0===o.length)return;const{id:a}=c,S=this.#n.get(a);if(void 0===S)return;const v=o[S];this.#n.delete(a);let y=v.getAttribute("aria-owns");y?.includes(a)&&(y=y.split(" ").filter(d=>d!==a).join(" "),y?v.setAttribute("aria-owns",y):(v.removeAttribute("aria-owns"),v.setAttribute("role","presentation")))}#c(c,o){const a=o.getAttribute("aria-owns");a?.includes(c)||o.setAttribute("aria-owns",a?`${a} ${c}`:c),o.removeAttribute("role")}addPointerInTextLayer(c,o){const{id:a}=c;if(!a)return;if(!this.#e)return void this.#i.set(c,o);o&&this.removePointerInTextLayer(c);const S=this.#t;if(!S||0===S.length)return;const v=(0,r.binarySearchFirstItem)(S,d=>l.#r(c,d)<0),y=Math.max(0,v-1);this.#c(a,S[y]),this.#n.set(a,y)}moveElementInDOM(c,o,a,S){if(this.addPointerInTextLayer(a,S),!c.hasChildNodes())return void c.append(o);const v=Array.from(c.childNodes).filter(e=>e!==o);if(0===v.length)return;const y=a||o,d=(0,r.binarySearchFirstItem)(v,e=>l.#r(y,e)<0);0===d?v[0].before(o):v[d-1].after(o)}}s.TextAccessibilityManager=l},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFRenderingQueue=void 0;var r=f(3),l=f(7);s.PDFRenderingQueue=class c{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(a){this.pdfViewer=a}setThumbnailViewer(a){this.pdfThumbnailViewer=a}isHighestPriority(a){return this.highestPriorityPage===a.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(a){this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(a)&&(this.isThumbnailViewEnabled&&this.pdfThumbnailViewer?.forceRendering()||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(a,S,v,y=!1){const d=a.views,e=d.length;if(0===e)return null;for(let W=0;W<e;W++){const U=d[W].view;if(!this.isViewFinished(U))return U}const i=a.first.id,b=a.last.id;if(b-i+1>e){const W=a.ids;for(let U=1,J=b-i;U<J;U++){const K=v?i+U:b-U;if(W.has(K))continue;const C=S[K-1];if(!this.isViewFinished(C))return C}}let R=v?b:i-2,I=S[R];return I&&!this.isViewFinished(I)||y&&(R+=v?1:-1,I=S[R],I&&!this.isViewFinished(I))?I:null}isViewFinished(a){return a.renderingState===l.RenderingStates.FINISHED}renderView(a){switch(a.renderingState){case l.RenderingStates.FINISHED:return!1;case l.RenderingStates.PAUSED:this.highestPriorityPage=a.renderingId,a.resume();break;case l.RenderingStates.RUNNING:this.highestPriorityPage=a.renderingId;break;case l.RenderingStates.INITIAL:this.highestPriorityPage=a.renderingId,a.draw().finally(()=>{this.renderHighestPriority()}).catch(S=>{S instanceof r.RenderingCancelledException||console.error(`renderView: "${S}"`)})}return!0}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.TextHighlighter=void 0,s.TextHighlighter=class f{constructor({findController:l,eventBus:P,pageIndex:c}){this.findController=l,this.matches=[],this.eventBus=P,this.pageIdx=c,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(l,P){this.textDivs=l,this.textContentItemsStr=P}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=l=>{(l.pageIndex===this.pageIdx||-1===l.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){this.enabled&&(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(l,P){if(!l)return[];const{textContentItemsStr:c}=this;let o=0,a=0;const S=c.length-1,v=[];for(let y=0,d=l.length;y<d;y++){let e=l[y];for(;o!==S&&e>=a+c[o].length;)a+=c[o].length,o++;o===c.length&&console.error("Could not find a matching mapping");const i={begin:{divIdx:o,offset:e-a}};for(e+=P[y];o!==S&&e>a+c[o].length;)a+=c[o].length,o++;i.end={divIdx:o,offset:e-a},v.push(i)}return v}_renderMatches(l){if(0===l.length)return;const{findController:P,pageIdx:c}=this,{textContentItemsStr:o,textDivs:a}=this,S=c===P.selected.pageIdx,v=P.selected.matchIdx;let d=null;function i(W,U){const J=W.divIdx;return a[J].textContent="",b(J,0,W.offset,U)}function b(W,U,J,K){let C=a[W];if(C.nodeType===Node.TEXT_NODE){const L=document.createElement("span");C.before(L),L.append(C),a[W]=L,C=L}const F=o[W].substring(U,J),N=document.createTextNode(F);if(K){const L=document.createElement("span");return L.className=`${K} appended`,L.append(N),C.append(L),K.includes("selected")?L.offsetLeft:0}return C.append(N),0}let R=v,I=R+1;if(P.state.highlightAll)R=0,I=l.length;else if(!S)return;for(let W=R;W<I;W++){const U=l[W],J=U.begin,K=U.end,C=S&&W===v,F=C?" selected":"";let N=0;if(d&&J.divIdx===d.divIdx?b(d.divIdx,d.offset,J.offset):(null!==d&&b(d.divIdx,d.offset,void 0),i(J)),J.divIdx===K.divIdx)N=b(J.divIdx,J.offset,K.offset,"highlight"+F);else{N=b(J.divIdx,J.offset,void 0,"highlight begin"+F);for(let L=J.divIdx+1,M=K.divIdx;L<M;L++)a[L].className="highlight middle"+F;i(K,"highlight end"+F)}d=K,C&&P.scrollMatchIntoView({element:a[J.divIdx],selectedLeft:N,pageIndex:c,matchIndex:v})}d&&b(d.divIdx,d.offset,void 0)}_updateMatches(){if(!this.enabled)return;const{findController:l,matches:P,pageIdx:c}=this,{textContentItemsStr:o,textDivs:a}=this;let S=-1;for(let d=0,e=P.length;d<e;d++){const i=P[d];for(let R=Math.max(S,i.begin.divIdx),I=i.end.divIdx;R<=I;R++){const W=a[R];W.textContent=o[R],W.className=""}S=i.end.divIdx+1}l?.highlightMatches&&(this.matches=this._convertMatches(l.pageMatches[c]||null,l.pageMatchesLength[c]||null),this._renderMatches(this.matches))}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.DownloadManager=void 0;var r=f(3);function l(c,o){const a=document.createElement("a");if(!a.click)throw new Error('DownloadManager: "a.click()" is not supported.');a.href=c,a.target="_parent","download"in a&&(a.download=o),(document.body||document.documentElement).append(a),a.click(),a.remove()}s.DownloadManager=class P{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(o,a){(0,r.createValidAbsoluteUrl)(o,"http://example.com")?l(o+"#pdfjs.action=download",a):console.error(`downloadUrl - not a valid URL: ${o}`)}downloadData(o,a,S){l(URL.createObjectURL(new Blob([o],{type:S})),a)}openOrDownloadData(o,a,S){const v=(0,r.isPdfFile)(S),y=v?"application/pdf":"";if(v){let e,d=this._openBlobUrls.get(o);d||(d=URL.createObjectURL(new Blob([a],{type:y})),this._openBlobUrls.set(o,d)),e="?file="+encodeURIComponent(d+"#"+S);try{return window.open(e),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(d),this._openBlobUrls.delete(o)}}return this.downloadData(a,S,y),!1}download(o,a,S){l(URL.createObjectURL(o),S)}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.WaitOnType=s.EventBus=s.AutomationEventBus=void 0,s.waitOnEventOrTimeout=function r({target:c,name:o,delay:a=0}){return new Promise(function(S,v){if("object"!=typeof c||!o||"string"!=typeof o||!(Number.isInteger(a)&&a>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function y(b){c instanceof l?c._off(o,d):c.removeEventListener(o,d),i&&clearTimeout(i),S(b)}const d=y.bind(null,f.EVENT);c instanceof l?c._on(o,d):c.addEventListener(o,d);const e=y.bind(null,f.TIMEOUT),i=setTimeout(e,a)})};const f={EVENT:"event",TIMEOUT:"timeout"};s.WaitOnType=f;class l{constructor(){this._listeners=Object.create(null)}on(o,a,S=null){this._on(o,a,{external:!0,once:S?.once})}off(o,a,S=null){this._off(o,a,{external:!0,once:S?.once})}dispatch(o,a){const S=this._listeners[o];if(!S||0===S.length)return;let v;for(const{listener:y,external:d,once:e}of S.slice(0))e&&this._off(o,y),d?(v||=[]).push(y):y(a);if(v){for(const y of v)y(a);v=null}}_on(o,a,S=null){(this._listeners[o]||=[]).push({listener:a,external:!0===S?.external,once:!0===S?.once})}_off(o,a,S=null){const v=this._listeners[o];if(v)for(let y=0,d=v.length;y<d;y++)if(v[y].listener===a)return void v.splice(y,1)}}s.EventBus=l,s.AutomationEventBus=class P extends l{dispatch(o,a){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericL10n=void 0,f(21);var r=f(4);const l=document.webL10n;s.GenericL10n=class P{constructor(o){this._lang=o,this._ready=new Promise((a,S)=>{l.setLanguage((0,r.fixupLangCode)(o),()=>{a(l)})})}getLanguage(){var o=this;return p(function*(){return(yield o._ready).getLanguage()})()}getDirection(){var o=this;return p(function*(){return(yield o._ready).getDirection()})()}get(o,a=null,S=(0,r.getL10nFallback)(o,a)){var v=this;return p(function*(){return(yield v._ready).get(o,a,S)})()}translate(o){var a=this;return p(function*(){return(yield a._ready).translate(o)})()}}},()=>{document.webL10n=function(T,s,f){var r={},l="",P="textContent",c="",o={},a="loading",S=!0;function i(L,M,_){M=M||function(w){},_=_||function(){};var n=new XMLHttpRequest;n.open("GET",L,S),n.overrideMimeType&&n.overrideMimeType("text/plain; charset=utf-8"),n.onreadystatechange=function(){4==n.readyState&&(200==n.status||0===n.status?M(n.responseText):_())},n.onerror=_,n.ontimeout=_;try{n.send(null)}catch{_()}}function R(L,M){L&&(L=L.toLowerCase()),M=M||function(){},function I(){r={},l="",c=""}(),c=L;var _=function v(){return s.querySelectorAll('link[type="application/l10n"]')}(),n=_.length;if(0!==n){var t,g=0;t=function(){++g>=n&&(M(),a="complete")};for(var k=0;k<n;k++)new m(_[k]).load(L,t)}else{var h=function y(){var L=s.querySelector('script[type="application/l10n"]');return L?JSON.parse(L.innerHTML):null}();if(h&&h.locales&&h.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(r=h.locales[L])){var w=h.default_locale.toLowerCase();for(var A in h.locales){if((A=A.toLowerCase())===L){r=h.locales[L];break}A===w&&(r=h.locales[w])}}M()}else console.log("no resource to load, early way out");a="complete"}function m(O){var B=O.href;this.load=function(z,G){!function b(L,M,_,n){var h=L.replace(/[^\/]*$/,"")||"./";function w(t){return t.lastIndexOf("\\")<0?t:t.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}i(L,function(t){l+=t,function A(t,g){var m={},k=/^\s*|\s*$/,E=/^\s*#|^\s*$/,O=/^\s*\[(.*)\]\s*$/,B=/^\s*@import\s+url\((.*)\)\s*$/i,z=/^([^=\s]*)\s*=\s*(.+)$/;function G(Q,se,ne){var re=Q.replace(k,"").split(/[\r\n]+/),q="*",te=M.split("-",1)[0],ae=!1,Z="";!function ce(){for(;;){if(!re.length)return void ne();var he=re.shift();if(!E.test(he)){if(se){if(Z=O.exec(he)){q=Z[1].toLowerCase(),ae="*"!==q&&q!==M&&q!==te;continue}if(ae)continue;if(Z=B.exec(he))return void X(h+Z[1],ce)}var le=he.match(z);le&&3==le.length&&(m[le[1]]=w(le[2]))}}}()}function X(Q,se){i(Q,function(ne){G(ne,!1,se)},function(){console.warn(Q+" not found."),se()})}G(t,!0,function(){g(m)})}(t,function(g){for(var m in g){var k,E,O=m.lastIndexOf(".");O>0?(k=m.substring(0,O),E=m.substring(O+1)):(k=m,E=P),r[k]||(r[k]={}),r[k][E]=g[m]}_&&_()})},n)}(B,z,G,function(){console.warn(B+" not found."),console.warn('"'+z+'" resource not found'),c="",G()})}}}function U(L,M,_){var n=r[L];if(!n){if(console.warn("#"+L+" is undefined."),!_)return null;n=_}var h={};for(var w in n){var A=n[w];A=K(A=J(A,M,L,w),M,L),h[w]=A}return h}function J(L,M,_,n){var w=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(L);if(!w||!w.length)return L;var g,A=w[1],t=w[2];return M&&t in M?g=M[t]:t in r&&(g=r[t]),A in o&&(L=(0,o[A])(L,g,_,n)),L}function K(L,M,_){return L.replace(/\{\{\s*(.+?)\s*\}\}/g,function(h,w){return M&&w in M?M[w]:w in r?r[w]:(console.log("argument {{"+w+"}} for #"+_+" is undefined."),h)})}function C(L){var M=function e(L){if(!L)return{};var M=L.getAttribute("data-l10n-id"),_=L.getAttribute("data-l10n-args"),n={};if(_)try{n=JSON.parse(_)}catch{console.warn("could not parse arguments for #"+M)}return{id:M,args:n}}(L);if(M.id){var _=U(M.id,M.args);if(!_)return void console.warn("#"+M.id+" is undefined.");if(_[P]){if(0===function F(L){if(L.children)return L.children.length;if(typeof L.childElementCount<"u")return L.childElementCount;for(var M=0,_=0;_<L.childNodes.length;_++)M+=1===L.nodeType?1:0;return M}(L))L[P]=_[P];else{for(var n=L.childNodes,h=!1,w=0,A=n.length;w<A;w++)3===n[w].nodeType&&/\S/.test(n[w].nodeValue)&&(h?n[w].nodeValue="":(n[w].nodeValue=_[P],h=!0));if(!h){var t=s.createTextNode(_[P]);L.prepend(t)}}delete _[P]}for(var g in _)L[g]=_[g]}}return o.plural=function(L,M,_,n){var h=parseFloat(M);if(isNaN(h)||n!=P)return L;o._pluralRules||(o._pluralRules=function W(L){function _(A,t){return-1!==t.indexOf(A)}function n(A,t,g){return t<=A&&A<=g}var h={0:function(A){return"other"},1:function(A){return n(A%100,3,10)?"few":0===A?"zero":n(A%100,11,99)?"many":2==A?"two":1==A?"one":"other"},2:function(A){return 0!==A&&A%10==0?"many":2==A?"two":1==A?"one":"other"},3:function(A){return 1==A?"one":"other"},4:function(A){return n(A,0,1)?"one":"other"},5:function(A){return n(A,0,2)&&2!=A?"one":"other"},6:function(A){return 0===A?"zero":A%10==1&&A%100!=11?"one":"other"},7:function(A){return 2==A?"two":1==A?"one":"other"},8:function(A){return n(A,3,6)?"few":n(A,7,10)?"many":2==A?"two":1==A?"one":"other"},9:function(A){return 0===A||1!=A&&n(A%100,1,19)?"few":1==A?"one":"other"},10:function(A){return n(A%10,2,9)&&!n(A%100,11,19)?"few":A%10!=1||n(A%100,11,19)?"other":"one"},11:function(A){return n(A%10,2,4)&&!n(A%100,12,14)?"few":A%10==0||n(A%10,5,9)||n(A%100,11,14)?"many":A%10==1&&A%100!=11?"one":"other"},12:function(A){return n(A,2,4)?"few":1==A?"one":"other"},13:function(A){return n(A%10,2,4)&&!n(A%100,12,14)?"few":1!=A&&n(A%10,0,1)||n(A%10,5,9)||n(A%100,12,14)?"many":1==A?"one":"other"},14:function(A){return n(A%100,3,4)?"few":A%100==2?"two":A%100==1?"one":"other"},15:function(A){return 0===A||n(A%100,2,10)?"few":n(A%100,11,19)?"many":1==A?"one":"other"},16:function(A){return A%10==1&&11!=A?"one":"other"},17:function(A){return 3==A?"few":0===A?"zero":6==A?"many":2==A?"two":1==A?"one":"other"},18:function(A){return 0===A?"zero":n(A,0,2)&&0!==A&&2!=A?"one":"other"},19:function(A){return n(A,2,10)?"few":n(A,0,1)?"one":"other"},20:function(A){return!n(A%10,3,4)&&A%10!=9||n(A%100,10,19)||n(A%100,70,79)||n(A%100,90,99)?A%1e6==0&&0!==A?"many":A%10!=2||_(A%100,[12,72,92])?A%10!=1||_(A%100,[11,71,91])?"other":"one":"two":"few"},21:function(A){return 0===A?"zero":1==A?"one":"other"},22:function(A){return n(A,0,1)||n(A,11,99)?"one":"other"},23:function(A){return n(A%10,1,2)||A%20==0?"one":"other"},24:function(A){return n(A,3,10)||n(A,13,19)?"few":_(A,[2,12])?"two":_(A,[1,11])?"one":"other"}},w={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[L.replace(/-.*$/,"")];return w in h?h[w]:(console.warn("plural form unknown for ["+L+"]"),function(){return"other"})}(c));var w="["+o._pluralRules(h)+"]";return 0===h&&_+"[zero]"in r?L=r[_+"[zero]"][n]:1==h&&_+"[one]"in r?L=r[_+"[one]"][n]:2==h&&_+"[two]"in r?L=r[_+"[two]"][n]:_+w in r?L=r[_+w][n]:_+"[other]"in r&&(L=r[_+"[other]"][n]),L},{get:function(L,M,_){var w,n=L.lastIndexOf("."),h=P;n>0&&(h=L.substring(n+1),L=L.substring(0,n)),_&&((w={})[h]=_);var A=U(L,M,w);return A&&h in A?A[h]:"{{"+L+"}}"},getData:function(){return r},getText:function(){return l},getLanguage:function(){return c},setLanguage:function(L,M){R(L,function(){M&&M()})},getDirection:function(){var M=c.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf(M)>=0?"rtl":"ltr"},translate:function N(L){for(var M=function d(L){return L?L.querySelectorAll("*[data-l10n-id]"):[]}(L=L||s.documentElement),_=M.length,n=0;n<_;n++)C(M[n]);C(L)},getReadyState:function(){return a},ready:function(L){L&&("complete"==a||"interactive"==a?T.setTimeout(function(){L()}):s.addEventListener&&s.addEventListener("localized",function M(){s.removeEventListener("localized",M),L()}))}}}(window,document)},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFFindController=s.FindState=void 0;var r=f(7),l=f(3),P=f(23);const c={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};s.FindState=c;const v={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},y=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),d=[...y.values()].map(L=>String.fromCharCode(L)).join(""),e=/\p{M}+/gu,i=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,b=/([^\p{M}])\p{M}*$/u,R=/^\p{M}*([^\p{M}])/u,I=/[\uAC00-\uD7AF\uFA6C\uFACF-\uFAD1\uFAD5-\uFAD7]+/g,W=new Map;let J=null,K=null;function C(L){const M=[];let _,n;for(;null!==(_=I.exec(L));){let{index:B}=_;for(const z of _[0]){let G=W.get(z);G||(G=z.normalize("NFD").length,W.set(z,G)),M.push([G,B++])}}if(0===M.length&&J)n=J;else if(M.length>0&&K)n=K;else{const z=`([${Object.keys(v).join("")}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`;n=0===M.length?J=new RegExp(z+"|(\\u0000)","gum"):K=new RegExp(z+"|([\\u1100-\\u1112\\ud7a4-\\ud7af\\ud84a\\ud84c\\ud850\\ud854\\ud857\\ud85f])","gum")}const h=[];for(;null!==(_=e.exec(L));)h.push([_[0].length,_.index]);let w=L.normalize("NFD");const A=[[0,0]];let t=0,g=0,m=0,k=0,E=0,O=!1;return w=w.replace(n,(B,z,G,X,Q,se,ne)=>{if(ne-=k,z){const re=v[B],q=re.length;for(let te=1;te<q;te++)A.push([ne-m+te,m-te]);return m-=q-1,re}if(G){const re=G.endsWith("\n"),q=re?G.length-2:G.length;O=!0;let te=q;ne+E===h[t]?.[1]&&(te-=h[t][0],++t);for(let ae=1;ae<=te;ae++)A.push([ne-1-m+ae,m-ae]);return m-=te,k+=te,re?(A.push([(ne+=q-1)-m+1,1+m]),m+=1,k+=1,E+=1,G.slice(0,q)):G}if(X)return A.push([ne-m+1,1+m]),m+=1,k+=1,E+=1,X.charAt(0);if(Q)return A.push([ne-m+1,m-1]),m-=1,k+=1,E+=1," ";if(ne+E===M[g]?.[1]){const re=M[g][0]-1;++g;for(let q=1;q<=re;q++)A.push([ne-(m-q),m-q]);m-=re,k+=re}return se}),A.push([w.length,m]),[w,A,O]}function F(L,M,_){if(!L)return[M,_];const n=M,h=M+_;let w=(0,r.binarySearchFirstItem)(L,t=>t[0]>=n);L[w][0]>n&&--w;let A=(0,r.binarySearchFirstItem)(L,t=>t[0]>=h,w);return L[A][0]>h&&--A,[n+L[w][1],_+L[A][1]-L[w][1]]}s.PDFFindController=class N{constructor({linkService:M,eventBus:_}){this._linkService=M,this._eventBus=_,this.#t(),_._on("find",this.#e.bind(this)),_._on("findbarclose",this.#_.bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(M){this._pdfDocument&&this.#t(),M&&(this._pdfDocument=M,this._firstPageCapability.resolve())}#e(M){if(!M)return;const _=this._pdfDocument,{type:n}=M;(null===this._state||this.#i(M))&&(this._dirtyMatch=!0),this._state=M,"highlightallchange"!==n&&this.#d(c.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||_&&this._pdfDocument!==_)return;this.#u();const h=!this._highlightMatches,w=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),n?this._dirtyMatch?this.#a():"again"===n?(this.#a(),h&&this._state.highlightAll&&this.#l()):"highlightallchange"===n?(w?this.#a():this._highlightMatches=!0,this.#l()):this.#a():this._findTimeout=setTimeout(()=>{this.#a(),this._findTimeout=null},250)})}scrollMatchIntoView({element:M=null,selectedLeft:_=0,pageIndex:n=-1,matchIndex:h=-1}){this._scrollMatches&&M&&-1!==h&&h===this._selected.matchIdx&&-1!==n&&n===this._selected.pageIdx&&(this._scrollMatches=!1,(0,r.scrollIntoView)(M,{top:-50,left:_+-400},!0))}#t(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,l.createPromiseCapability)()}get#n(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=C(this._state.query)),this._normalizedQuery}#i(M){if(M.query!==this._state.query)return!0;switch(M.type){case"again":const _=this._selected.pageIdx+1,n=this._linkService;return _>=1&&_<=n.pagesCount&&_!==n.page&&!n.isPageVisible(_);case"highlightallchange":return!1}return!0}#r(M,_,n){let h=M.slice(0,_).match(b);if(h){const w=M.charCodeAt(_),A=h[1].charCodeAt(0);if((0,P.getCharacterType)(w)===(0,P.getCharacterType)(A))return!1}if(h=M.slice(_+n).match(R),h){const w=M.charCodeAt(_+n-1),A=h[1].charCodeAt(0);if((0,P.getCharacterType)(w)===(0,P.getCharacterType)(A))return!1}return!0}#c(M,_,n,h){const w=[],A=[],t=this._pageDiffs[n];let g;for(;null!==(g=M.exec(h));){if(_&&!this.#r(h,g.index,g[0].length))continue;const[m,k]=F(t,g.index,g[0].length);k&&(w.push(m),A.push(k))}this._pageMatches[n]=w,this._pageMatchesLength[n]=A}#o(M,_){const{matchDiacritics:n}=this._state;let h=!1;return(M=M.replace(i,(A,t,g,m,k,E)=>t?`[ ]*\\${t}[ ]*`:g?`[ ]*${g}[ ]*`:m?"[ ]+":n?k||E:k?y.has(k.charCodeAt(0))?k:"":_?(h=!0,`${E}\\p{M}*`):E)).endsWith("[ ]*")&&(M=M.slice(0,M.length-4)),n&&_&&(h=!0,M=`${M}(?=[${d}]|[^\\p{M}]|$)`),[h,M]}#s(M){let _=this.#n;if(0===_.length)return;const{caseSensitive:n,entireWord:h,phraseSearch:w}=this._state,A=this._pageContents[M],t=this._hasDiacritics[M];let g=!1;if(w)[g,_]=this.#o(_,t);else{const E=_.match(/\S+/g);E&&(_=E.sort().reverse().map(O=>{const[B,z]=this.#o(O,t);return g||=B,`(${z})`}).join("|"))}_=new RegExp(_,`g${g?"u":""}${n?"":"i"}`),this.#c(_,h,M,A),this._state.highlightAll&&this.#h(M),this._resumePageIdx===M&&(this._resumePageIdx=null,this.#f());const k=this._pageMatches[M].length;k>0&&(this._matchesCountTotal+=k,this.#v())}#u(){if(this._extractTextPromises.length>0)return;let M=Promise.resolve();for(let _=0,n=this._linkService.pagesCount;_<n;_++){const h=(0,l.createPromiseCapability)();this._extractTextPromises[_]=h.promise,M=M.then(()=>this._pdfDocument.getPage(_+1).then(w=>w.getTextContent()).then(w=>{const A=[];for(const t of w.items)A.push(t.str),t.hasEOL&&A.push("\n");[this._pageContents[_],this._pageDiffs[_],this._hasDiacritics[_]]=C(A.join("")),h.resolve()},w=>{console.error(`Unable to get text content for page ${_+1}`,w),this._pageContents[_]="",this._pageDiffs[_]=null,this._hasDiacritics[_]=!1,h.resolve()}))}}#h(M){this._scrollMatches&&this._selected.pageIdx===M&&(this._linkService.page=M+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:M})}#l(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})}#a(){const M=this._state.findPrevious,_=this._linkService.page-1,n=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=_,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,this.#l();for(let w=0;w<n;w++)this._pendingFindMatches.has(w)||(this._pendingFindMatches.add(w),this._extractTextPromises[w].then(()=>{this._pendingFindMatches.delete(w),this.#s(w)}))}if(""===this.#n)return void this.#d(c.FOUND);if(this._resumePageIdx)return;const h=this._offset;if(this._pagesToSearch=n,null!==h.matchIdx){if(!M&&h.matchIdx+1<this._pageMatches[h.pageIdx].length||M&&h.matchIdx>0)return h.matchIdx=M?h.matchIdx-1:h.matchIdx+1,void this.#m(!0);this.#b(M)}this.#f()}#p(M){const _=this._offset,n=M.length,h=this._state.findPrevious;return n?(_.matchIdx=h?n-1:0,this.#m(!0),!0):(this.#b(h),!!(_.wrapped&&(_.matchIdx=null,this._pagesToSearch<0))&&(this.#m(!1),!0))}#f(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let M=null;do{const _=this._offset.pageIdx;if(M=this._pageMatches[_],!M){this._resumePageIdx=_;break}}while(!this.#p(M))}#b(M){const _=this._offset,n=this._linkService.pagesCount;_.pageIdx=M?_.pageIdx-1:_.pageIdx+1,_.matchIdx=null,this._pagesToSearch--,(_.pageIdx>=n||_.pageIdx<0)&&(_.pageIdx=M?n-1:0,_.wrapped=!0)}#m(M=!1){let _=c.NOT_FOUND;const n=this._offset.wrapped;if(this._offset.wrapped=!1,M){const h=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,_=n?c.WRAPPED:c.FOUND,-1!==h&&h!==this._selected.pageIdx&&this.#h(h)}this.#d(_,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,this.#h(this._selected.pageIdx))}#_(M){const _=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||_&&this._pdfDocument!==_||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),this.#d(c.FOUND),this._highlightMatches=!1,this.#l())})}#S(){const{pageIdx:M,matchIdx:_}=this._selected;let n=0,h=this._matchesCountTotal;if(-1!==_){for(let w=0;w<M;w++)n+=this._pageMatches[w]?.length||0;n+=_+1}return(n<1||n>h)&&(n=h=0),{current:n,total:h}}#v(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:this.#S()})}#d(M,_=!1){this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:M,previous:_,matchesCount:this.#S(),rawQuery:this._state?.query??null})}}},(T,s)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.CharacterType=void 0,s.getCharacterType=function e(i){return function r(i){return i<11904}(i)?function l(i){return 0==(65408&i)}(i)?function o(i){return 32===i||9===i||13===i||10===i}(i)?f.SPACE:function P(i){return i>=97&&i<=122||i>=65&&i<=90}(i)||function c(i){return i>=48&&i<=57}(i)||95===i?f.ALPHA_LETTER:f.PUNCT:function d(i){return 3584==(65408&i)}(i)?f.THAI_LETTER:160===i?f.SPACE:f.ALPHA_LETTER:function a(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}(i)?f.HAN_LETTER:function S(i){return i>=12448&&i<=12543}(i)?f.KATAKANA_LETTER:function v(i){return i>=12352&&i<=12447}(i)?f.HIRAGANA_LETTER:function y(i){return i>=65376&&i<=65439}(i)?f.HALFWIDTH_KATAKANA_LETTER:f.ALPHA_LETTER};const f={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};s.CharacterType=f},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFHistory=void 0,s.isDestArraysEqual=y,s.isDestHashesEqual=v;var r=f(7),l=f(19);function a(){return document.location.hash}function v(d,e){return"string"==typeof d&&"string"==typeof e&&(d===e||(0,r.parseQueryString)(d).get("nameddest")===e)}function y(d,e){function i(b,R){if(typeof b!=typeof R||Array.isArray(b)||Array.isArray(R))return!1;if(null!==b&&"object"==typeof b&&null!==R){if(Object.keys(b).length!==Object.keys(R).length)return!1;for(const I in b)if(!i(b[I],R[I]))return!1;return!0}return b===R||Number.isNaN(b)&&Number.isNaN(R)}if(!Array.isArray(d)||!Array.isArray(e)||d.length!==e.length)return!1;for(let b=0,R=d.length;b<R;b++)if(!i(d[b],e[b]))return!1;return!0}s.PDFHistory=class S{constructor({linkService:e,eventBus:i}){this.linkService=e,this.eventBus=i,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",b=>{this._isPagesLoaded=!!b.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:i=!1,updateUrl:b=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const R=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===b,this._initialized=!0,this._bindEvents();const I=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=a(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(I,!0)||i){const{hash:U,page:J,rotation:K}=this._parseCurrentHash(!0);return!U||R||i?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:U,page:J,rotation:K},!0)}const W=I.destination;this._updateInternalState(W,I.uid,!0),void 0!==W.rotation&&(this._initialRotation=W.rotation),W.dest?(this._initialBookmark=JSON.stringify(W.dest),this._destination.page=null):W.hash?this._initialBookmark=W.hash:W.page&&(this._initialBookmark=`page=${W.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:i,pageNumber:b}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(i))return void console.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);if(!this._isValidPage(b)&&(null!==b||this._destination))return void console.error(`PDFHistory.push: "${b}" is not a valid pageNumber parameter.`);const R=e||JSON.stringify(i);if(!R)return;let I=!1;if(this._destination&&(v(this._destination.hash,R)||y(this._destination.dest,i))){if(this._destination.page)return;I=!0}this._popStateInProgress&&!I||(this._pushOrReplaceState({dest:i,hash:R,page:b,rotation:this.linkService.rotation},I),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){if(this._initialized){if(!this._isValidPage(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);this._destination?.page!==e&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,i=!1){const b=i||!this._destination,R={fingerprint:this._fingerprint,uid:b?this._uid:this._uid+1,destination:e};let I;if(this._updateInternalState(e,R.uid),this._updateUrl&&e?.hash){const W=document.location.href.split("#")[0];W.startsWith("file://")||(I=`${W}#${e.hash}`)}b?window.history.replaceState(R,"",I):window.history.pushState(R,"",I)}_tryPushCurrentPosition(e=!1){if(!this._position)return;let i=this._position;if(e&&(i=Object.assign(Object.create(null),this._position),i.temporary=!0),!this._destination)return void this._pushOrReplaceState(i);if(this._destination.temporary)return void this._pushOrReplaceState(i,!0);if(this._destination.hash===i.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let b=!1;if(this._destination.page>=i.first&&this._destination.page<=i.page){if(void 0!==this._destination.dest||!this._destination.first)return;b=!0}this._pushOrReplaceState(i,b)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,i=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!i)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[b]=performance.getEntriesByType("navigation");if("reload"!==b?.type)return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}_updateInternalState(e,i,b=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),b&&e?.temporary&&delete e.temporary,this._destination=e,this._uid=i,this._maxUid=Math.max(this._maxUid,i),this._numPositionUpdates=0}_parseCurrentHash(e=!1){const i=unescape(a()).substring(1),b=(0,r.parseQueryString)(i),R=b.get("nameddest")||"";let I=0|b.get("page");return(!this._isValidPage(I)||e&&R.length>0)&&(I=null),{hash:i,page:I,rotation:this.linkService.rotation}}_updateViewarea({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:e}){const i=a(),b=this._currentHash!==i;if(this._currentHash=i,!e){this._uid++;const{hash:I,page:W,rotation:U}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:I,page:W,rotation:U},!0)}if(!this._isValidState(e))return;this._popStateInProgress=!0,b&&(this._blockHashChange++,(0,l.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const R=e.destination;this._updateInternalState(R,e.uid,!0),(0,r.isValidRotation)(R.rotation)&&(this.linkService.rotation=R.rotation),R.dest?this.linkService.goToDestination(R.dest):R.hash?this.linkService.setHash(R.hash):R.page&&(this.linkService.page=R.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){this._boundEvents&&(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.PDFScriptingManager=void 0;var r=f(7),l=f(3);s.PDFScriptingManager=class P{constructor({eventBus:o,sandboxBundleSrc:a=null,scriptingFactory:S=null,docPropertiesLookup:v=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=o,this._sandboxBundleSrc=a,this._scriptingFactory=S,this._docPropertiesLookup=v,this._scriptingFactory||window.addEventListener("updatefromsandbox",y=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:y.detail})})}setViewer(o){this._pdfViewer=o}setDocument(o){var a=this;return p(function*(){if(a._pdfDocument&&(yield a._destroyScripting()),a._pdfDocument=o,!o)return;const[S,v,y]=yield Promise.all([o.getFieldObjects(),o.getCalculationOrderIds(),o.getJSActions()]);if(S||y){if(o===a._pdfDocument){try{a._scripting=a._createScripting()}catch(d){return console.error(`PDFScriptingManager.setDocument: "${d?.message}".`),void(yield a._destroyScripting())}a._internalEvents.set("updatefromsandbox",d=>{d?.source===window&&a._updateFromSandbox(d.detail)}),a._internalEvents.set("dispatcheventinsandbox",d=>{a._scripting?.dispatchEventInSandbox(d.detail)}),a._internalEvents.set("pagechanging",({pageNumber:d,previous:e})=>{d!==e&&(a._dispatchPageClose(e),a._dispatchPageOpen(d))}),a._internalEvents.set("pagerendered",({pageNumber:d})=>{a._pageOpenPending.has(d)&&d===a._pdfViewer.currentPageNumber&&a._dispatchPageOpen(d)}),a._internalEvents.set("pagesdestroy",function(){var d=p(function*(e){yield a._dispatchPageClose(a._pdfViewer.currentPageNumber),yield a._scripting?.dispatchEventInSandbox({id:"doc",name:"WillClose"}),a._closeCapability?.resolve()});return function(e){return d.apply(this,arguments)}}()),a._domEvents.set("mousedown",d=>{a._mouseState.isDown=!0}),a._domEvents.set("mouseup",d=>{a._mouseState.isDown=!1});for(const[d,e]of a._internalEvents)a._eventBus._on(d,e);for(const[d,e]of a._domEvents)window.addEventListener(d,e,!0);try{const d=yield a._getDocProperties();if(o!==a._pdfDocument)return;yield a._scripting.createSandbox({objects:S,calculationOrder:v,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:{...d,actions:y}}),a._eventBus.dispatch("sandboxcreated",{source:a})}catch(d){return console.error(`PDFScriptingManager.setDocument: "${d?.message}".`),void(yield a._destroyScripting())}yield a._scripting?.dispatchEventInSandbox({id:"doc",name:"Open"}),yield a._dispatchPageOpen(a._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{o===a._pdfDocument&&(a._ready=!0)})}}else yield a._destroyScripting()})()}dispatchWillSave(o){var a=this;return p(function*(){return a._scripting?.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(o){var a=this;return p(function*(){return a._scripting?.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(o){var a=this;return p(function*(){return a._scripting?.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(o){var a=this;return p(function*(){return a._scripting?.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){return this._destroyCapability?.promise||null}get ready(){return this._ready}get _internalEvents(){return(0,l.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,l.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,l.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,l.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(o){var a=this;return p(function*(){const S=a._pdfViewer.isInPresentationMode||a._pdfViewer.isChangingPresentationMode,{id:v,siblings:y,command:d,value:e}=o;if(!v){switch(d){case"clear":console.clear();break;case"error":console.error(e);break;case"layout":if(S)return;const b=(0,r.apiPageLayoutToViewerModes)(e);a._pdfViewer.spreadMode=b.spreadMode;break;case"page-num":a._pdfViewer.currentPageNumber=e+1;break;case"print":yield a._pdfViewer.pagesPromise,a._eventBus.dispatch("print",{source:a});break;case"println":console.log(e);break;case"zoom":if(S)return;a._pdfViewer.currentScaleValue=e;break;case"SaveAs":a._eventBus.dispatch("download",{source:a});break;case"FirstPage":a._pdfViewer.currentPageNumber=1;break;case"LastPage":a._pdfViewer.currentPageNumber=a._pdfViewer.pagesCount;break;case"NextPage":a._pdfViewer.nextPage();break;case"PrevPage":a._pdfViewer.previousPage();break;case"ZoomViewIn":if(S)return;a._pdfViewer.increaseScale();break;case"ZoomViewOut":if(S)return;a._pdfViewer.decreaseScale()}return}if(S&&o.focus)return;delete o.id,delete o.siblings;const i=y?[v,...y]:[v];for(const b of i){const R=document.querySelector(`[data-element-id="${b}"]`);R?R.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:o})):a._pdfDocument?.annotationStorage.setValue(b,o)}})()}_dispatchPageOpen(o,a=!1){var S=this;return p(function*(){const v=S._pdfDocument,y=S._visitedPages;if(a&&(S._closeCapability=(0,l.createPromiseCapability)()),!S._closeCapability)return;const d=S._pdfViewer.getPageView(o-1);if(d?.renderingState!==r.RenderingStates.FINISHED)return void S._pageOpenPending.add(o);S._pageOpenPending.delete(o);const e=p(function*(){const i=yield y.has(o)?null:d.pdfPage?.getJSActions();v===S._pdfDocument&&(yield S._scripting?.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:o,actions:i}))})();y.set(o,e)})()}_dispatchPageClose(o){var a=this;return p(function*(){const S=a._pdfDocument,v=a._visitedPages;if(!a._closeCapability||a._pageOpenPending.has(o))return;const y=v.get(o);y&&(v.set(o,null),yield y,S===a._pdfDocument&&(yield a._scripting?.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:o})))})()}_getDocProperties(){var o=this;return p(function*(){if(o._docPropertiesLookup)return o._docPropertiesLookup(o._pdfDocument);const{docPropertiesLookup:a}=f(26);return a(o._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,l.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:o}=f(26);return new o(this._sandboxBundleSrc)}_destroyScripting(){var o=this;return p(function*(){if(!o._scripting)return o._pdfDocument=null,void o._destroyCapability?.resolve();o._closeCapability&&(yield Promise.race([o._closeCapability.promise,new Promise(a=>{setTimeout(a,1e3)})]).catch(a=>{}),o._closeCapability=null),o._pdfDocument=null;try{yield o._scripting.destroySandbox()}catch{}for(const[a,S]of o._internalEvents)o._eventBus._off(a,S);o._internalEvents.clear();for(const[a,S]of o._domEvents)window.removeEventListener(a,S,!0);o._domEvents.clear(),o._pageOpenPending.clear(),o._visitedPages.clear(),o._scripting=null,delete o._mouseState.isDown,o._ready=!1,o._destroyCapability?.resolve()})()}}},(T,s,f)=>{Object.defineProperty(s,"__esModule",{value:!0}),s.GenericScripting=void 0,s.docPropertiesLookup=function l(o){return P.apply(this,arguments)};var r=f(3);function P(){return(P=p(function*(o){const S="".split("#")[0];let{info:v,metadata:y,contentDispositionFilename:d,contentLength:e}=yield o.getMetadata();if(!e){const{length:i}=yield o.getDownloadInfo();e=i}return{...v,baseURL:S,filesize:e,filename:d||(0,r.getPdfFilenameFromUrl)(""),metadata:y?.getRaw(),authors:y?.get("dc:creator"),numPages:o.numPages,URL:""}})).apply(this,arguments)}s.GenericScripting=class c{constructor(a){this._ready=(0,r.loadScript)(a,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(a){var S=this;return p(function*(){(yield S._ready).create(a)})()}dispatchEventInSandbox(a){var S=this;return p(function*(){const v=yield S._ready;setTimeout(()=>v.dispatchEvent(a),0)})()}destroySandbox(){var a=this;return p(function*(){(yield a._ready).nukeSandbox()})()}}}],D={};function j(T){var s=D[T];if(void 0!==s)return s.exports;var f=D[T]={exports:{}};return x[T](f,f.exports,j),f.exports}var H={};return(()=>{var T=H;Object.defineProperty(T,"__esModule",{value:!0}),Object.defineProperty(T,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return P.AnnotationLayerBuilder}}),Object.defineProperty(T,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return s.DefaultAnnotationLayerFactory}}),Object.defineProperty(T,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return s.DefaultStructTreeLayerFactory}}),Object.defineProperty(T,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return s.DefaultTextLayerFactory}}),Object.defineProperty(T,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return s.DefaultXfaLayerFactory}}),Object.defineProperty(T,"DownloadManager",{enumerable:!0,get:function(){return c.DownloadManager}}),Object.defineProperty(T,"EventBus",{enumerable:!0,get:function(){return o.EventBus}}),Object.defineProperty(T,"GenericL10n",{enumerable:!0,get:function(){return a.GenericL10n}}),Object.defineProperty(T,"LinkTarget",{enumerable:!0,get:function(){return f.LinkTarget}}),Object.defineProperty(T,"NullL10n",{enumerable:!0,get:function(){return S.NullL10n}}),Object.defineProperty(T,"PDFFindController",{enumerable:!0,get:function(){return v.PDFFindController}}),Object.defineProperty(T,"PDFHistory",{enumerable:!0,get:function(){return y.PDFHistory}}),Object.defineProperty(T,"PDFLinkService",{enumerable:!0,get:function(){return f.PDFLinkService}}),Object.defineProperty(T,"PDFPageView",{enumerable:!0,get:function(){return d.PDFPageView}}),Object.defineProperty(T,"PDFScriptingManager",{enumerable:!0,get:function(){return e.PDFScriptingManager}}),Object.defineProperty(T,"PDFSinglePageViewer",{enumerable:!0,get:function(){return l.PDFSinglePageViewer}}),Object.defineProperty(T,"PDFViewer",{enumerable:!0,get:function(){return l.PDFViewer}}),Object.defineProperty(T,"ProgressBar",{enumerable:!0,get:function(){return r.ProgressBar}}),Object.defineProperty(T,"RenderingStates",{enumerable:!0,get:function(){return r.RenderingStates}}),Object.defineProperty(T,"ScrollMode",{enumerable:!0,get:function(){return r.ScrollMode}}),Object.defineProperty(T,"SimpleLinkService",{enumerable:!0,get:function(){return f.SimpleLinkService}}),Object.defineProperty(T,"SpreadMode",{enumerable:!0,get:function(){return r.SpreadMode}}),Object.defineProperty(T,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return i.StructTreeLayerBuilder}}),Object.defineProperty(T,"TextLayerBuilder",{enumerable:!0,get:function(){return b.TextLayerBuilder}}),Object.defineProperty(T,"XfaLayerBuilder",{enumerable:!0,get:function(){return R.XfaLayerBuilder}}),Object.defineProperty(T,"parseQueryString",{enumerable:!0,get:function(){return r.parseQueryString}});var s=j(1),f=j(6),r=j(7),l=j(11),P=j(5),c=j(18),o=j(19),a=j(20),S=j(4),v=j(22),y=j(24),d=j(13),e=j(25),i=j(8),b=j(9),R=j(10)})(),H})()},4069:()=>{},2339:()=>{},143:()=>{},7915:()=>{},5598:()=>{},372:()=>{},7156:ee=>{function u(p,x,D,j,H,T,s){try{var f=p[T](s),r=f.value}catch(l){return void D(l)}f.done?x(r):Promise.resolve(r).then(j,H)}ee.exports=function V(p){return function(){var x=this,D=arguments;return new Promise(function(j,H){var T=p.apply(x,D);function s(r){u(T,j,H,s,f,"next",r)}function f(r){u(T,j,H,s,f,"throw",r)}s(void 0)})}},ee.exports.__esModule=!0,ee.exports.default=ee.exports}}]);